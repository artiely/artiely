<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GraphQL 介绍 | Artiely' blog</title>
    <meta name="description" content="随便玩玩">
    <link rel="stylesheet" href="/vitepress-blog/assets/style.04ecf5c6.css">
    <link rel="modulepreload" href="/vitepress-blog/assets/Home.00555797.js">
    <link rel="modulepreload" href="/vitepress-blog/assets/lottie.42100ed3.js">
    <link rel="modulepreload" href="/vitepress-blog/assets/lightgallery.es5.f43f3494.js">
    <link rel="modulepreload" href="/vitepress-blog/assets/TextPlugin.8595634c.js">
    <link rel="modulepreload" href="/vitepress-blog/assets/app.b304d650.js">
    <link rel="modulepreload" href="/vitepress-blog/assets/post_2019_2019-5-5-restful-graphql.md.94732c2e.lean.js">
    <link rel="modulepreload" href="/vitepress-blog/assets/app.b304d650.js">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_2707633_ayah6j2r7wi.css">
    <script type="text/javascript" src="/js/twikoo.js"></script>
    <meta name="twitter:title" content="GraphQL 介绍 | Artiely&#39; blog">
    <meta property="og:title" content="GraphQL 介绍 | Artiely&#39; blog">
  </head>
  <body>
    <div id="app"><!--[--><!----><!----><div class="content dark" style="height:100%;"><div style="position:relative;"><div><h1 id="graphql-介绍"><a class="header-anchor" href="#graphql-介绍" aria-hidden="true">#</a> GraphQL 介绍</h1><h2 id="接口开发方式"><a class="header-anchor" href="#接口开发方式" aria-hidden="true">#</a> 接口开发方式</h2><ul><li>RESTful</li><li>GraphQL</li></ul><h2 id="restful-接口问题"><a class="header-anchor" href="#restful-接口问题" aria-hidden="true">#</a> RESTful 接口问题</h2><ul><li>接口粒度比较细，很多场景需要调用多次请求才能完成一个功能</li><li>接口扩展、维护成本高</li><li>接口响应的数据格式无法预知（json已经成为主流格式）</li></ul><h2 id="graphql概述"><a class="header-anchor" href="#graphql概述" aria-hidden="true">#</a> GraphQL概述</h2><blockquote><p>GraphQL 既是一种用于 API 的查询语言，也是一个满足你数据查询的运行时。</p><p>是一种接口开发标准，支持常见的服务端开发语言。例如：java、php、Python、Node.js......</p><p>官网：<a href="https://graphql.cn/" target="_blank" rel="noopener noreferrer">https://graphql.cn/</a></p></blockquote><h2 id="restful-和-graphql-对比"><a class="header-anchor" href="#restful-和-graphql-对比" aria-hidden="true">#</a> RESTful 和 GraphQL 对比</h2><ul><li>RESTful特点 <ul><li>接口粒度太细</li><li>后期版本变更不方便，扩展维护成本高</li></ul></li><li>GraphQL特点 <ul><li>精确获取需要的信息</li><li>通过单个请求获取各种资源</li><li>通过类型系统描述查询</li><li>强大的调试工具</li></ul></li></ul><h1 id="graphql-快速体验"><a class="header-anchor" href="#graphql-快速体验" aria-hidden="true">#</a> GraphQL 快速体验</h1><blockquote><p>GraphQL客户端与服务端交互（接口调用）</p></blockquote><ul><li><p>实现步骤</p><ul><li>一、服务端 <ul><li>创建服务端项目目录</li><li>初始化项目 <ul><li>npm init -y</li></ul></li><li>创建入口文件index.js</li><li>安装依赖包 <ul><li>apollo-server-express</li><li>express</li><li>graphql</li></ul></li><li>复制官方案例代码到index.js</li><li>运行该文件启动服务</li></ul></li><li>二、客户端 <ul><li>通过访问<a href="http://localhost:4000/graphql" target="_blank" rel="noopener noreferrer">http://localhost:4000/graphql</a> 地址打开调试工具就可以进行接口测试</li><li>在调试工具中进行查询测试</li><li>获取测试结果</li></ul></li></ul></li><li><p>总结</p><ul><li><p>只有一个请求地址</p></li><li><p>按需进行查询</p></li><li><p>有特定的查询语法规则</p></li></ul></li></ul><h1 id="graphql服务端开发"><a class="header-anchor" href="#graphql服务端开发" aria-hidden="true">#</a> GraphQL服务端开发</h1><h2 id="基于nodejs的graphql的开发"><a class="header-anchor" href="#基于nodejs的graphql的开发" aria-hidden="true">#</a> 基于Node.js的GraphQL的开发</h2><ul><li><a href="https://github.com/graphql/graphql-js/" target="_blank" rel="noopener noreferrer">GraphQL.js</a> GraphQL规范的JavaScript实现（服务端数据提供和客户端请求）</li><li><a href="https://github.com/graphql/express-graphql" target="_blank" rel="noopener noreferrer">express</a> 基于express创建HTTP服务，内部依赖GraphQL.js</li><li><a href="https://github.com/apollographql/apollo-server" target="_blank" rel="noopener noreferrer">apollo-server</a> GraphQL服务器实现（支持express、koa等多种Web框架） <ul><li>express</li><li>koa</li><li>......</li></ul></li></ul><h2 id="基于apollo-server开发"><a class="header-anchor" href="#基于apollo-server开发" aria-hidden="true">#</a> 基于apollo-server开发</h2><blockquote><p>apollo-server 是一个实现了GraphQL 规范的框架，可以基于它快速开发基于GraphQL的服务端接口，并且方便客户端进行接口调用。</p></blockquote><ul><li>基本开发步骤(服务端) <ul><li>初始化服务端项目 <ul><li>创建项目目录</li><li>创建入口文件</li><li>初始化项目 npm init -y</li></ul></li><li>安装依赖包 <ul><li>npm install apollo-server-express express graphql -S</li></ul></li><li>定义类型</li><li>解析数据</li><li>实例化apollo对象</li><li>整合express并监听端口，提供Web服务</li></ul></li></ul><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 导入相关的包</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ApolloServer<span class="token punctuation">,</span> gql <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;apollo-server-express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 定义类型</span>
<span class="token keyword">const</span> typeDefs <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  type Query {
    hello: String
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// 解析字段数据</span>
<span class="token keyword">const</span> resolvers <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;Hello world!&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 整合ApolloServer和express</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> typeDefs<span class="token punctuation">,</span> resolvers <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span> app <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 监听端口</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">{</span> port<span class="token operator">:</span> <span class="token number">4000</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">running at http://localhost:4000</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>server<span class="token punctuation">.</span>graphqlPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739948-88919">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// 导入相关的包
const express = require(&#39;express&#39;);
const { ApolloServer, gql } = require(&#39;apollo-server-express&#39;);
// 定义类型
const typeDefs = gql`
  type Query {
    hello: String
  }
`;
// 解析字段数据
const resolvers = {
  Query: {
    hello: () =&gt; &#39;Hello world!&#39;,
  },
};
// 整合ApolloServer和express
const server = new ApolloServer({ typeDefs, resolvers });
const app = express();
server.applyMiddleware({ app });
// 监听端口
app.listen({ port: 4000 }, () =&gt;
  console.log(`running at http://localhost:4000${server.graphqlPath}`)
);
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739948-88919" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li>客户端</li></ul><div class="language-"><pre><code>// 查询
query {
  hello
}
// 响应结果
{
  &quot;data&quot;: {
    &quot;hello&quot;: &quot;world&quot;
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739948-8785">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// 查询
query {
  hello
}
// 响应结果
{
  &quot;data&quot;: {
    &quot;hello&quot;: &quot;world&quot;
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739948-8785" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>细节分析 <ul><li>服务器通过定义的数据类型规定了可以提供的各种形式的数据</li><li>类型的字段要有对应的resolve提供对应的数据解析</li><li>客户端可以根据服务端定义的数据类型选择性查询需要的字段信息</li></ul></li></ul><h2 id="对象类型定义规则"><a class="header-anchor" href="#对象类型定义规则" aria-hidden="true">#</a> 对象类型定义规则</h2><h3 id="对象类型定义与字段"><a class="header-anchor" href="#对象类型定义与字段" aria-hidden="true">#</a> 对象类型定义与字段</h3><blockquote><p>GraphQL提供一套完善的类型系统，可以约束服务端可以提供哪些数据类型供客户端查询使用</p></blockquote><div class="language-"><pre><code># 通过type关键字定义类型，type之后是类型名称（自定义名称）
type Course {
  cname: String
  score: Float
}
type Student {
  name: String
  scores: [Course]
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739948-59227">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# 通过type关键字定义类型，type之后是类型名称（自定义名称）
type Course {
  cname: String
  score: Float
}
type Student {
  name: String
  scores: [Course]
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739948-59227" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>注意事项 <ul><li>花括号中是对象的字段信息</li><li>属性名称是自定义的</li><li>属性名后面的类型为标量类型（内置类型）</li><li>GraphQL使用#进行注释</li></ul></li></ul><h3 id="基本参数"><a class="header-anchor" href="#基本参数" aria-hidden="true">#</a> 基本参数</h3><blockquote><p>对象类型上的每一个字段都可能有零个或者多个参数，可以按照条件查询数据</p></blockquote><div class="language-"><pre><code>type Query {
  hello: String
  # 定义字段参数，可以有默认值
  stu(n: Int = 12): Student
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-55453">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="type Query {
  hello: String
  # 定义字段参数，可以有默认值
  stu(n: Int = 12): Student
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-55453" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-"><pre><code># 获取参数（通过resolver函数的第二个参数获取客户端传递的参数数据）
const resolvers = {
  Query: {
    stu: (obj, args) =&gt; {
      console.log(args)
    }
  },
};
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-45791">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# 获取参数（通过resolver函数的第二个参数获取客户端传递的参数数据）
const resolvers = {
  Query: {
    stu: (obj, args) =&gt; {
      console.log(args)
    }
  },
};
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-45791" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-"><pre><code>{
  # 客户端字段参数传递
  stu(n: 13) {
    name
    age
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-73403">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="{
  # 客户端字段参数传递
  stu(n: 13) {
    name
    age
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-73403" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>注意事项 <ul><li>参数可以指定默认值，如果有默认值，那么参数就是可选的</li><li>客户端参数通过resolver函数的第二个参数获取</li></ul></li></ul><h3 id="内置类型"><a class="header-anchor" href="#内置类型" aria-hidden="true">#</a> 内置类型</h3><ul><li>查询和变更类型</li></ul><blockquote><p>内置类型中有两个特殊的类型：Query和Mutation</p><p>每一个GraphQL服务有右一个Query类型，也可能有一个Mutation类型，这两个类型本质上也是对象类型，只不过有一点区别：它们作为客户端访问的入口</p></blockquote><ul><li>标量类型 <ul><li>Int</li><li>Float</li><li>String</li><li>Boolean</li><li>ID 唯一标识符，不需要人类可度</li></ul></li></ul><blockquote><p>标量类型用于表示基本的字段数据，表示查询数据的叶子节点</p></blockquote><ul><li>枚举类型</li></ul><blockquote><p>枚举类型是一种特殊的标量，它限制在一个特殊的可选值集合内。</p></blockquote><div class="language-"><pre><code>enum Favour {
  SWIMING
  CODING
  SINGING
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-38145">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="enum Favour {
  SWIMING
  CODING
  SINGING
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-38145" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>上述定义表示只能获取三种值之一，其他类型的值是不可以的</p></blockquote><ul><li>列表和非空 <ul><li>[]表示列表</li><li>叹号表示非空</li></ul></li></ul><div class="language-"><pre><code>type Student {
  name: String!
  scores: [Score!]!
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-46026">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="type Student {
  name: String!
  scores: [Score!]!
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-46026" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>myField: [String!] 表示数组本身可以为空，但是其不能有任何空值成员</p><p>myField: [String]! 表示数组本身不能为空，但是其可以包含空值成员</p></blockquote><h3 id="输入类型"><a class="header-anchor" href="#输入类型" aria-hidden="true">#</a> 输入类型</h3><blockquote><p>参数也可以是复杂类型，主要用于变更Mutation场景（需要客户端传递输入类型）</p></blockquote><div class="language-"><pre><code># 定义输入类型
input UserInput {
  uname: String
  pwd: String
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-8714">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# 定义输入类型
input UserInput {
  uname: String
  pwd: String
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-8714" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>定义Mutation，可以用于接收客户端传递的input类型数据</p></blockquote><div class="language-"><pre><code># 接收客户端传递的input类型参数
type Mutation {
  addUserByInput(userInput: UserInput): User
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-71571">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# 接收客户端传递的input类型参数
type Mutation {
  addUserByInput(userInput: UserInput): User
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-71571" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-"><pre><code># 处理客户端传递的input参数
const resolvers = {
  Mutation: {
    addUserByInput: (obj, args) =&gt; {
      // args可以获取客户端传递的input类型数据
      return {
          id: 123,
        uname: args.uname,
        pwd: args.pwd
      }
    }
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-44173">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# 处理客户端传递的input参数
const resolvers = {
  Mutation: {
    addUserByInput: (obj, args) =&gt; {
      // args可以获取客户端传递的input类型数据
      return {
          id: 123,
        uname: args.uname,
        pwd: args.pwd
      }
    }
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-44173" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-"><pre><code># 客户端查询操作
mutation {
  addUserByInput(userInput: {
    uname: &quot;lisi&quot;,
    pwd: &quot;123&quot;
  }) {
    id
    username
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-22244">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# 客户端查询操作
mutation {
  addUserByInput(userInput: {
    uname: &quot;lisi&quot;,
    pwd: &quot;123&quot;
  }) {
    id
    username
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-22244" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>注意事项 <ul><li>input类型主要用于变更操作的数据传递</li></ul></li></ul><h2 id="数据解析规则详解"><a class="header-anchor" href="#数据解析规则详解" aria-hidden="true">#</a> 数据解析规则详解</h2><h3 id="resolver函数参数用法"><a class="header-anchor" href="#resolver函数参数用法" aria-hidden="true">#</a> resolver函数参数用法</h3><blockquote><p>resolves用于给类型字段提供实际数据</p></blockquote><ul><li>resolve函数参数 <ul><li>parent 上一级对象，如果字段属于根节点查询类型通常不会被使用。</li><li><code>args</code> 可以提供在 GraphQL 查询中传入的参数。</li><li><code>context</code> 会被提供给所有解析器，并且持有重要的上下文信息比如当前登入的用户或者数据库访问对象。</li><li><code>info</code> 一个保存与当前查询相关的字段特定信息以及 schema 详细信息的值</li></ul></li></ul><div class="language-"><pre><code>// 服务端数据解析
const resolvers = {
  Query: {
    hello: () =&gt; &quot;Hello World&quot;
  },
  Mutation: {
    addInfo: (parent, args, context, info) =&gt; {
      // parent表示当前字段的父级对象
      console.log(parent);
      // args表示客户端传递过来的参数
      console.log(args);
      // context可以用于操作数据源
      console.log(context);
    },
  }
};
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-12764">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// 服务端数据解析
const resolvers = {
  Query: {
    hello: () =&gt; &quot;Hello World&quot;
  },
  Mutation: {
    addInfo: (parent, args, context, info) =&gt; {
      // parent表示当前字段的父级对象
      console.log(parent);
      // args表示客户端传递过来的参数
      console.log(args);
      // context可以用于操作数据源
      console.log(context);
    },
  }
};
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-12764" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>parent 参数用法</li></ul><div class="language-"><pre><code>// 类型定义
type Student {
  sname: String
  age: Int
}
// 数据解析
const resolvers = {
  Student: {
    // 提供字段的resolver函数，如果不提供，会默认生成
    sname: (parent) =&gt; {
      return parent.sname
    }
  },
  stu: (parent) =&gt; {
    return {
      sname: &#39;lisi&#39;,
      age: 12
    }
  }
};
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-75630">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// 类型定义
type Student {
  sname: String
  age: Int
}
// 数据解析
const resolvers = {
  Student: {
    // 提供字段的resolver函数，如果不提供，会默认生成
    sname: (parent) =&gt; {
      return parent.sname
    }
  },
  stu: (parent) =&gt; {
    return {
      sname: &#39;lisi&#39;,
      age: 12
    }
  }
};
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-75630" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>注意事项 <ul><li>通过resolver函数的第一个参数parent可以获取父级对象</li><li>如果字段类型是标量类型，会有一个默认的resolver函数</li><li>默认的resolver函数，返回父级对象的字段数据</li></ul></li></ul><h3 id="resolver函数对接数据源"><a class="header-anchor" href="#resolver函数对接数据源" aria-hidden="true">#</a> resolver函数对接数据源</h3><blockquote><p>通过context参数更加方便的对接数据源（数据库、文件、第三方接口），包括异步操作</p></blockquote><ul><li>context基本用法</li></ul><div class="language-"><pre><code>// context可以用于获取数据源对象
const context = () =&gt; {
  return {
    db: &#39;dbObj&#39;
  }
}
const server = new ApolloServer({ typeDefs, resolvers, context });
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-81814">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// context可以用于获取数据源对象
const context = () =&gt; {
  return {
    db: &#39;dbObj&#39;
  }
}
const server = new ApolloServer({ typeDefs, resolvers, context });
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-81814" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-"><pre><code>// 在resolver函数中可以通过context对象操作数据源
const resolvers = {
  Query: {
    hello: (parent, args, context) =&gt; {
      // 通过context可以获取数据源操作对象
      let ret = context.db;
    }
  }
};
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-79676">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// 在resolver函数中可以通过context对象操作数据源
const resolvers = {
  Query: {
    hello: (parent, args, context) =&gt; {
      // 通过context可以获取数据源操作对象
      let ret = context.db;
    }
  }
};
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-79676" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>读取文件数据业务模块</li></ul><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// db.js代码：从文件中读取数据，本质上与从数据库读取数据类似，都可以是异步操作</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dataPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;data.json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>dataPath<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-19356">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// db.js代码：从文件中读取数据，本质上与从数据库读取数据类似，都可以是异步操作
const path = require(&#39;path&#39;);
const fs = require(&#39;fs&#39;);
module.exports.getData = () =&gt; {
  const dataPath = path.join(__dirname, &#39;data.json&#39;);
  return new Promise((resolve, reject) =&gt; {
    fs.readFile(dataPath, (err, data) =&gt; {
      if(err) {
        reject(&#39;error&#39;);
      }
      resolve(data);
    })
  })
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-19356" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>通过context获取数据源操作的对象</li></ul><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 从文件中读取数据作为数据源，db.getData()返回Promise实例对象</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./db.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">context</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>req<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> db<span class="token operator">:</span> db <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> resolvers <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> args<span class="token punctuation">,</span> context<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token keyword">await</span> context<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> typeDefs<span class="token punctuation">,</span> resolvers<span class="token punctuation">,</span> context <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-77927">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// 从文件中读取数据作为数据源，db.getData()返回Promise实例对象
const db = require(&#39;./db.js&#39;);
const context = ({req}) =&gt; {
  return { db: db }
}
const resolvers = {
  Query: {
    hello: async (obj, args, context, info) =&gt; {
      let ret = await context.db.getData();
      return ret;
    }
  }
}
const server = new ApolloServer({ typeDefs, resolvers, context });
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-77927" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>注意事项 <ul><li>context参数主要用于提供数据源相关对象，方便进行数据操作（数据获取与变更）</li></ul></li></ul><h1 id="graphql客户端开发"><a class="header-anchor" href="#graphql客户端开发" aria-hidden="true">#</a> GraphQL客户端开发</h1><h2 id="基本查询"><a class="header-anchor" href="#基本查询" aria-hidden="true">#</a> 基本查询</h2><blockquote><p>按需获取需要的数据</p></blockquote><div class="language-"><pre><code>// 查询hero对象的name属性
{
  hero {
    name
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-5439">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// 查询hero对象的name属性
{
  hero {
    name
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-5439" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-"><pre><code>// 查结果
{
  &quot;data&quot;: {
    &quot;hero&quot;: {
      &quot;name&quot;: &quot;lisi&quot;
    }
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739949-54976">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// 查结果
{
  &quot;data&quot;: {
    &quot;hero&quot;: {
      &quot;name&quot;: &quot;lisi&quot;
    }
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739949-54976" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>注意事项 <ul><li>GraphQL只有一个URL地址，客户端查询的所有信息都通过该地址获取数据</li><li>可以更加需要按照实际的需求获取特定的数据</li></ul></li></ul><h2 id="操作名称"><a class="header-anchor" href="#操作名称" aria-hidden="true">#</a> 操作名称</h2><blockquote><p>有多个操作时，操作名称是必须的，为了调试的方便，推荐添加操作名</p></blockquote><ul><li><p>规则：操作类型 操作名称（操作名称自定义）</p></li><li><p>操作类型主要有如下两种</p><ul><li>query 用于查询</li><li>mutation 用于变更操作（添加、修改、删除）</li></ul></li></ul><div class="language-"><pre><code># 查询名称
query helloInfo {
  hello
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-90839">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# 查询名称
query helloInfo {
  hello
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-90839" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-"><pre><code># 变更名称
mutation addUser {
  addUser(userInput: {
    uname: &quot;lisi&quot;,
    pwd: &quot;123&quot;
  }) {
    id
    username
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-89542">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# 变更名称
mutation addUser {
  addUser(userInput: {
    uname: &quot;lisi&quot;,
    pwd: &quot;123&quot;
  }) {
    id
    username
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-89542" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>注意事项 <ul><li>推荐所有的查询和变更操作添加操作名称</li></ul></li></ul><h2 id="查询参数"><a class="header-anchor" href="#查询参数" aria-hidden="true">#</a> 查询参数</h2><blockquote><p>有时候需要根据特定的条件查询数据，此时可以使用查询参数</p></blockquote><div class="language-"><pre><code>// 查询id是1，姓名是lisi的学生信息
query param {
  stu(id: 1, sname: &quot;lisi&quot;) {
    sname
    age
    gender
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-34355">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// 查询id是1，姓名是lisi的学生信息
query param {
  stu(id: 1, sname: &quot;lisi&quot;) {
    sname
    age
    gender
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-34355" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-"><pre><code>// 查询结果
{
  &quot;data&quot;: {
    &quot;stu&quot;: {
      &quot;sname&quot;: &quot;lisi&quot;,
      &quot;age&quot;: 12,
      &quot;gender&quot;: true
    }
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-53370">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// 查询结果
{
  &quot;data&quot;: {
    &quot;stu&quot;: {
      &quot;sname&quot;: &quot;lisi&quot;,
      &quot;age&quot;: 12,
      &quot;gender&quot;: true
    }
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-53370" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>注意事项 <ul><li>查询字段可以携带参数，并且可以携带多个参数，参数之间通过逗号隔开</li></ul></li></ul><h2 id="变量"><a class="header-anchor" href="#变量" aria-hidden="true">#</a> 变量</h2><blockquote><p>有时字段的参数需要动态提供，而不是固定的值，此时可以使用变量，其实类似于函数中的形参</p></blockquote><div class="language-"><pre><code># $id: Int （变量名称: 变量类型）
query param($id: Int, $num: Float) {
  stu(id: $id) {
    id 
    sname 
    scores(num: $num) {
      cname 
      score
    }
  }
}
// 分离的变量字典
{
  &quot;id&quot;: 1,
  &quot;num&quot;: 99
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-93965">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# $id: Int （变量名称: 变量类型）
query param($id: Int, $num: Float) {
  stu(id: $id) {
    id 
    sname 
    scores(num: $num) {
      cname 
      score
    }
  }
}
// 分离的变量字典
{
  &quot;id&quot;: 1,
  &quot;num&quot;: 99
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-93965" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>注意事项 <ul><li>变量类型必须是标量、枚举型或者输入对象类型</li><li>变量可以有默认值 ($id: Int = 1)</li></ul></li></ul><h2 id="指令"><a class="header-anchor" href="#指令" aria-hidden="true">#</a> 指令</h2><blockquote><p>有时候查询的字段数量不是固定的，此时可以通过指令的方式进行控制</p></blockquote><ul><li>两个指令 <ul><li><code>@include(if: Boolean)</code> 仅在参数为 <code>true</code> 时，包含此字段。</li><li><code>@skip(if: Boolean)</code> 如果参数为 <code>true</code>，跳过此字段。</li></ul></li></ul><div class="language-"><pre><code>query param($id: Int, $gender: Boolean!) {
  stu(id: $id) {
    id 
    sname 
    gender @include(if: $gender) 
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-76089">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="query param($id: Int, $gender: Boolean!) {
  stu(id: $id) {
    id 
    sname 
    gender @include(if: $gender) 
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-76089" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-"><pre><code>query param($id: Int, $gender: Boolean!) {
  stu(id: $id) {
    id 
    sname 
    gender @skip(if: $gender) 
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-64370">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="query param($id: Int, $gender: Boolean!) {
  stu(id: $id) {
    id 
    sname 
    gender @skip(if: $gender) 
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-64370" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>注意事项 <ul><li>可以通过这两个指令动态控制查询的字段数量</li><li>指令用到的变量定义时需要添加!，强制必须提供该值</li></ul></li></ul><h2 id="别名"><a class="header-anchor" href="#别名" aria-hidden="true">#</a> 别名</h2><blockquote><p>有时需要通过不同参数值查询相同字段信息，比如查询学生的数学和英语成绩</p></blockquote><div class="language-json line-numbers-mode"><pre><code>query alias <span class="token punctuation">{</span>
  stu <span class="token punctuation">{</span>
    id
    sname
    math<span class="token operator">:</span> scores(cname<span class="token operator">:</span> <span class="token string">&quot;数学&quot;</span>) <span class="token punctuation">{</span>
      cname
      score
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    english<span class="token operator">:</span> scores(cname<span class="token operator">:</span> <span class="token string">&quot;英语&quot;</span>) <span class="token punctuation">{</span>
      cname
      score
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 上面的查询结果如下</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;stu&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;math&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;cname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;数学&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;score&quot;</span><span class="token operator">:</span> <span class="token number">98.5</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;english&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;cname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;英语&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;score&quot;</span><span class="token operator">:</span> <span class="token number">99.5</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-48818">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="query alias {
  stu {
    id
    sname
    math: scores(cname: &quot;数学&quot;) {
      cname
      score
    },
    english: scores(cname: &quot;英语&quot;) {
      cname
      score
    }
  }
}
// 上面的查询结果如下
{
  &quot;data&quot;: {
    &quot;stu&quot;: {
      &quot;id&quot;: 1,
      &quot;sname&quot;: &quot;张三&quot;,
      &quot;math&quot;: [
        {
          &quot;cname&quot;: &quot;数学&quot;,
          &quot;score&quot;: 98.5
        }
      ],
      &quot;english&quot;: [
        {
          &quot;cname&quot;: &quot;英语&quot;,
          &quot;score&quot;: 99.5
        }
      ]
    }
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-48818" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><ul><li>注意事项 <ul><li>可以通过别名的方式获取特定某几项数据（查询结果的数据格式相同）</li></ul></li></ul><h2 id="变更"><a class="header-anchor" href="#变更" aria-hidden="true">#</a> 变更</h2><blockquote><p>改变服务器数据需要用到【变更】（mutation）操作</p></blockquote><div class="language-"><pre><code># 通过具体值方式传递参数
mutation addUserByParam {
  addUserByParam(uname: &quot;lisi&quot;, pwd:&quot;abc&quot;) {
    id
    uname
    pwd
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-39072">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# 通过具体值方式传递参数
mutation addUserByParam {
  addUserByParam(uname: &quot;lisi&quot;, pwd:&quot;abc&quot;) {
    id
    uname
    pwd
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-39072" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-"><pre><code># 通过变量方式传递参数
mutation addUserByInput($userInput: UserInput) {
  addUserByInput(userInput: $userInput) {
    id
    uname
    pwd
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-51953">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# 通过变量方式传递参数
mutation addUserByInput($userInput: UserInput) {
  addUserByInput(userInput: $userInput) {
    id
    uname
    pwd
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-51953" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-"><pre><code># 参数传递
{
  &quot;userInput&quot;: {
    &quot;uname&quot;: &quot;lisi&quot;,
    &quot;pwd&quot;: &quot;123&quot;
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-88351">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# 参数传递
{
  &quot;userInput&quot;: {
    &quot;uname&quot;: &quot;lisi&quot;,
    &quot;pwd&quot;: &quot;123&quot;
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-88351" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>注意事项 <ul><li>通过mutation关键字实现变更操作</li><li>userInput变量并非标量，而是一个输入类型</li><li>参数的传递可以通过普通参数，也可以使用输入类型，一般较为复杂的数据采用输入类型</li></ul></li></ul><h1 id="留言板案例实战"><a class="header-anchor" href="#留言板案例实战" aria-hidden="true">#</a> 留言板案例实战</h1><h2 id="项目业务分析与展示"><a class="header-anchor" href="#项目业务分析与展示" aria-hidden="true">#</a> 项目业务分析与展示</h2><ul><li>留言列表展示效果</li><li>项目业务分析</li></ul><h2 id="服务端实现"><a class="header-anchor" href="#服务端实现" aria-hidden="true">#</a> 服务端实现</h2><ul><li>初始化项目</li><li>类型定义</li><li>数据解析 <ul><li>留言板信息</li><li>友情链接信息</li><li>天气预报信息</li><li>添加留言功能</li></ul></li></ul><div class="language-"><pre><code># 核心类型定义
type Data {
  weather: Weather
  link: [FriendlyLink]
  list: [Comment]
}
type Query {
  info: Data
}
type Mutation {
  createComment(input: CommentInput): Comment
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-56107">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="# 核心类型定义
type Data {
  weather: Weather
  link: [FriendlyLink]
  list: [Comment]
}
type Query {
  info: Data
}
type Mutation {
  createComment(input: CommentInput): Comment
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-56107" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="对接数据源"><a class="header-anchor" href="#对接数据源" aria-hidden="true">#</a> 对接数据源</h3><ul><li>对接评论信息数据源</li><li>对接友情链接数据源</li><li>对接天气数据源</li><li>实现数据源整合，完成响应数据的resolver函数功能</li></ul><div class="language-"><pre><code>info: async (parent, args, context) =&gt; {
  // 调用数据源对象获取数据
  return {
    list: list,
    link: link,
    weather: weather
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-83540">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="info: async (parent, args, context) =&gt; {
  // 调用数据源对象获取数据
  return {
    list: list,
    link: link,
    weather: weather
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-83540" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="客户端实现"><a class="header-anchor" href="#客户端实现" aria-hidden="true">#</a> 客户端实现</h2><ul><li>初始化项目</li><li>实现布局效果</li><li>对接后台GraphQL接口（基于apollo-server客户端）</li></ul><h3 id="apollo-server对接后台接口基本流程"><a class="header-anchor" href="#apollo-server对接后台接口基本流程" aria-hidden="true">#</a> apollo-server对接后台接口基本流程</h3><ol><li>安装相关依赖包：npm install --save vue-apollo graphql apollo-boost</li><li>配置Vue的apollo插件</li></ol><div class="language-"><pre><code>import Vue from &#39;vue&#39;
import VueApollo from &#39;vue-apollo&#39;
Vue.use(VueApollo)
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-19104">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="import Vue from &#39;vue&#39;
import VueApollo from &#39;vue-apollo&#39;
Vue.use(VueApollo)
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-19104" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="3"><li>实例化apollo客户端对象</li></ol><div class="language-"><pre><code>import ApolloClient from &#39;apollo-boost&#39;
const apolloClient = new ApolloClient({
  uri: &#39;http://localhost:4000/graphql&#39;
})
const apolloProvider = new VueApollo({
  defaultClient: apolloClient,
})
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-87239">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="import ApolloClient from &#39;apollo-boost&#39;
const apolloClient = new ApolloClient({
  uri: &#39;http://localhost:4000/graphql&#39;
})
const apolloProvider = new VueApollo({
  defaultClient: apolloClient,
})
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-87239" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="4"><li>将apollo客户端实例对象挂载到Vue实例中</li></ol><div class="language-"><pre><code>new Vue({
  apolloProvider,
  render: h =&gt; h(App),
}).$mount(&#39;#app&#39;)
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-96025">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="new Vue({
  apolloProvider,
  render: h =&gt; h(App),
}).$mount(&#39;#app&#39;)
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-96025" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="5"><li>导入GraphQL相关api：import gql from &#39;graphql-tag&#39;;</li><li>调用GraphQL后台接口</li></ol><div class="language-"><pre><code>// vue参数中配置查询逻辑
apollo: {
  info: {
    query: gql`
      query list {
        info {
          list {
            username
            content
            date
          }
        }
      }
    `
  }
},
data () {
  return {
    info: []
  }
}
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-84912">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// vue参数中配置查询逻辑
apollo: {
  info: {
    query: gql`
      query list {
        info {
          list {
            username
            content
            date
          }
        }
      }
    `
  }
},
data () {
  return {
    info: []
  }
}
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-84912" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="完成页面数据展示"><a class="header-anchor" href="#完成页面数据展示" aria-hidden="true">#</a> 完成页面数据展示</h3><ul><li>留言板信息</li><li>友情链接信息</li><li>天气信息</li></ul><h3 id="完成发送留言功能"><a class="header-anchor" href="#完成发送留言功能" aria-hidden="true">#</a> 完成发送留言功能</h3><ul><li>表单数据绑定</li><li>发送按钮事件绑定</li><li>调用后台接口发送数据</li></ul><div class="language-"><pre><code>this.$apollo.mutate({
  mutation: gql`
    mutation createComment($commentInput: CommentInput) {
      createComment(commentInput: $commentInput) {
        username
        content
      }
    }
  `,
  variables: {
    commentInput: {
      username: username,
      content: content
    }
  },
  refetchQueries:[{query: QueryListTag}]
})
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1629558739950-63886">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="this.$apollo.mutate({
  mutation: gql`
    mutation createComment($commentInput: CommentInput) {
      createComment(commentInput: $commentInput) {
        username
        content
      }
    }
  `,
  variables: {
    commentInput: {
      username: username,
      content: content
    }
  },
  refetchQueries:[{query: QueryListTag}]
})
" data-mdic-attach-content="copyright | [artiely]" data-mdic-notify-id="j-notify-1629558739950-63886" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></div></div></div><div class="footer"><div class="follow"><a href="https://github.com/artiely" target="_target" title="github"><i class="icon iconfont"></i></a><a href="https://gitee.com/artiely" target="_target" title="gitee"><i class="icon iconfont"></i></a><a href="https://www.npmjs.com/~artiely" target="_target" title="npm"><i class="icon iconfont"></i></a><a href="mailto:artiely1024@gmail.com" title="gmail"><i class="icon iconfont"></i></a><a href="https://www.youtube.com/channel/UC3U9zfLMepBqyQjlvEVhQDQ?view_as=subscriber" target="_target" title="youtube"><i class="icon iconfont"></i></a><a href="https://www.zhihu.com/people/artiely-19" target="_target" title="zhihu"><i class="icon iconfont"></i></a><a href="https://space.bilibili.com/31432769?spm_id_from=333.33.b_73656375726974794f75744c696e6b.1" target="_target" title="bilibili"><i class="icon iconfont"></i></a></div><p class="footer-copyright"> ©Artiely <span class="time">-2019-2021</span></p></div><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"9998b2fc\",\"about_index.md\":\"a4adb63e\",\"code_index.md\":\"674a914a\",\"comment_index.md\":\"a77e916d\",\"tags_index.md\":\"744d7d3d\",\"timeline_index.md\":\"93eb8477\",\"post_2017_2017-6-10-tcp.md\":\"c1558028\",\"post_2017_2017-6-6-css-1px.md\":\"84776839\",\"post_2017_2017-6-6-css-ios-android.md\":\"e5ca9b3f\",\"post_2017_2017-6-6-css-sticky-footer.md\":\"4ecfa988\",\"post_2017_2017-6-6-git.md\":\"17b762f3\",\"post_2017_2017-6-7-css-mobile-scroll-through.md\":\"4ae92986\",\"post_2017_2017-6-8-yahoo-rules14.md\":\"961088e8\",\"post_2017_2017-6-9-form-default-submit.md\":\"b117e54b\",\"post_2017_2017-7-4-moment.md\":\"071c32cc\",\"post_2017_2017-7-7-css-rules.md\":\"fd7195d5\",\"post_2017_2017-7-7-js-rules.md\":\"b6002462\",\"post_2017_2017-7-7-rules-file.md\":\"733aa196\",\"post_2017_2017-7-7-rules-html.md\":\"5970e012\",\"post_2019_2019-10-27-node-pm2.md\":\"9dea9f63\",\"post_2019_2019-10-3-alinode.md\":\"2e5f6b36\",\"post_2019_2019-11-16-nodejs-api.md\":\"4f1c1ab9\",\"post_2019_2019-4-15-nodejs-tcp-udp-h2.md\":\"379fd8f7\",\"post_2019_2019-4-16-vue-cli3+to-plugin.md\":\"85aeb114\",\"post_2019_2019-4-3-sentry-sourcemap.md\":\"7b901934\",\"post_2019_2019-4-3-vuepress-theme.md\":\"19e2d288\",\"post_2019_2019-5-5-restful-graphql.md\":\"94732c2e\",\"post_2019_2019-6-1-linux.md\":\"4cef58b9\",\"post_2019_2019-6-12-deploy.md\":\"78c69e77\",\"post_2019_2019-6-19-fontend-performance-optimization.md\":\"0debe8b8\",\"post_2019_2019-6-27-eslint-test.md\":\"ce1cdebb\",\"post_2019_2019-6-4-docker.md\":\"5acff5d9\",\"post_2019_2019-6-4-nodejs-events.md\":\"623e2a03\",\"post_2019_2019-6-6-css-fixedleft-autoright.md\":\"0897b7e5\",\"post_2019_2019-6-6-vue-observable.md\":\"3ac1f4b2\",\"post_2019_2019-7-13-automated-testing.md\":\"6a280ceb\",\"post_2019_2019-7-6-android-studio-flutter-shortcut.md\":\"12ebfedd\",\"post_2019_2019-7-6-dart-flutter-conf.md\":\"5f3410fb\",\"post_2019_2019-8-14-nosql.md\":\"3399ebe7\",\"post_2018_2018-1-30-centos-setup-nodejs.md\":\"452a4c82\",\"post_2018_2018-10-10-axios.md\":\"3dec5a88\",\"post_2018_2018-10-10-chrome-dev-tips.md\":\"e8fa3af3\",\"post_2018_2018-10-10-get-post.md\":\"51a41259\",\"post_2018_2018-10-10-git-green-pointer.md\":\"d4703242\",\"post_2018_2018-10-10-js-bit-operation.md\":\"c717ed75\",\"post_2018_2018-10-10-npm-nrm.md\":\"f050a24c\",\"post_2018_2018-10-10-pm2.md\":\"c82ff579\",\"post_2018_2018-10-10-vue-pracel.md\":\"2bfdaab2\",\"post_2018_2018-10-7-node-spider.md\":\"11cd813e\",\"post_2018_2018-3-12-nodejs-npm.md\":\"8893ba3a\",\"post_2018_2018-6-26-web-koa-egg.md\":\"aa036389\",\"post_2018_2018-6-9-nuxt.md\":\"37328df1\",\"post_2018_2018-7-10-electron-message.md\":\"2a996abd\",\"post_2018_2018-7-10-websocket.md\":\"334fd3c2\",\"post_2018_2018-7-11-electron-nedb.md\":\"ab5ef3fd\",\"post_2018_2018-7-11-electron-shortcut-cliboard-nativeimage.md\":\"32d137a9\",\"post_2018_2018-7-3-electron-init.md\":\"511fc155\",\"post_2018_2018-7-4-electron-base.md\":\"d2968da8\",\"post_2018_2018-7-5-electron-model.md\":\"7ac8d77b\",\"post_2018_2018-7-6-electron-menu-shortcut.md\":\"06c31808\",\"post_2018_2018-7-7-electron-main-render.md\":\"caff22b7\",\"post_2018_2018-7-8-electron-dialog.md\":\"7464f9f7\",\"post_2018_2018-7-8-electron-shell-url-webview.md\":\"cdc24223\",\"post_2018_2018-7-9-electron-ico.md\":\"d73c452e\",\"post_2018_2018-8-7-egg-start.md\":\"ea2ea984\",\"post_2018_2018-8-8-question.md\":\"472cdc1b\",\"post_2018_2018-8-8-vue-rules.md\":\"5c7b7172\",\"post_2018_2018-9-7-js.md\":\"9529455e\",\"post_2021_2021-1-3-puppeteer.md\":\"f0a96ae9\",\"post_2021_2021-2-23-proxy.md\":\"7784f428\",\"post_2021_2021-3-18-appleid.md\":\"e1cbcd9d\",\"post_2021_2021-6-15-mini.md\":\"a5960e5f\",\"post_2021_2021-7-23-pixijs.md\":\"57f2a55c\",\"post_2021_2021-8-15-resize-observer.md\":\"839df4de\",\"post_2021_2021-8-16-min-share.md\":\"27384dd8\",\"post_2020_2020-12-31-css.md\":\"aa6ee239\",\"post_2020_2020-3-16-chrome-plugin.md\":\"8aba482b\",\"post_2020_2020-3-16-vscode-plugin.md\":\"9cf3725a\",\"post_2020_2020-3-16-windows-plugin.md\":\"9ecffadb\",\"post_2020_2020-3-18-electron-mirror-down.md\":\"c0ab65b2\",\"post_2020_2020-3-18-electron-updater.md\":\"0425b8d2\",\"post_2020_2020-3-19-timer.js.md\":\"43ec431c\",\"post_2020_2020-3-20-antd-vue-pro.md\":\"78a60249\",\"post_2020_2020-3-20-js-how-to-work.md\":\"792e894c\",\"post_2020_2020-3-29-vuepress-plugin.md\":\"ff4d9769\",\"post_2020_2020-3-31-shituzhengmei.md\":\"41595376\",\"post_2020_2020-4-1-plupload.md\":\"b59258a7\",\"post_2020_2020-4-2-cmder.md\":\"7f1c6ace\",\"post_2020_2020-4-29-vue-hook-lifecycle.md\":\"1a278990\",\"post_2020_2020-4-4-yiqin.md\":\"4b5f1707\",\"post_2020_2020-4-6-plop.md\":\"7d2b2a6d\",\"post_2020_2020-5-22-ali-oss.md\":\"45d7320d\",\"post_2020_2020-5-29-axios.md\":\"8f0dc5da\",\"post_2020_2020-6-12-icon.md\":\"eaaeed39\",\"post_2020_2020-6-20-limit-chars.md\":\"b008e902\",\"post_2020_2020-6-23-charslimit.md\":\"527c6623\",\"post_2020_2020-6-25-custom-event.md\":\"6f6eeca0\",\"post_2020_2020-6-25-photo.md\":\"167ee8d7\",\"post_2020_2020-6-29-component.md\":\"979e3dd6\",\"post_2020_2020-6-5-01-vue-cli.md\":\"2f64961a\",\"post_2020_2020-6-5-02-vue-dir.md\":\"a82079b5\",\"post_2020_2020-6-5-03-vue-config.md\":\"f70aaf68\",\"post_2020_2020-6-5-04-vue.webpack.md\":\"468ae0e0\",\"post_2020_2020-6-5-05-env-mode.md\":\"cf00d8ee\",\"post_2020_2020-6-5-06-local-preview.md\":\"e2202055\",\"post_2020_2020-6-9-01-plugin.md\":\"4a125f90\",\"post_2020_2020-7-1-vue-api.md\":\"8c9bb4d1\",\"post_2020_2020-7-1-vuex-api.md\":\"3c6e4377\",\"post_2020_2020-7-13-madel.md\":\"077128f5\",\"post_2020_2020-7-14-share.md\":\"f8e4d9bc\",\"post_2020_2020-7-21-taro.md\":\"f3ed0a4e\",\"post_2020_2020-7-23-temp.md\":\"b1792a83\",\"post_2020_2020-7-9-thks-js.md\":\"703525c5\",\"post_2020_2020-8-17.md\":\"7af940ff\",\"post_2020_2020-8-27-frontend-css1.md\":\"87d5a4d4\",\"post_2020_2020-8-28-frontend-css2.md\":\"b01f25d1\",\"post_2020_2020-8-29-frontend-js1.md\":\"f990d677\",\"post_2020_2020-8-29-frontend-js2.md\":\"ec597485\",\"post_2020_2020-8-29-frontend-js3.md\":\"e8867844\",\"post_2020_2020-8-30-frontend-brower1.md\":\"fc765762\",\"post_2020_2020-8-30-frontend-brower2.md\":\"d41b6b87\",\"post_2020_2020-8-31-frontend-brower3.md\":\"cb7a5db1\",\"post_2020_2020-8-31-frontend-brower4.md\":\"c588c645\",\"post_2020_2020-9-1-fw.md\":\"ebc5dc13\",\"post_2020_2020-9-1-fw2.md\":\"eb0746a5\",\"post_2020_2020-9-15-js-arr.md\":\"82d4600f\",\"post_2020_2020-9-2-proxy.md\":\"3369143a\",\"post_2020_2020-9-24-interview.md\":\"7ac56a20\",\"post_2020_2020-9-3-brower.md\":\"eb1412ba\",\"post_2020_2020-9-5-what-happens.md\":\"495b1d50\",\"post_2020_2020-9-7-recursive.md\":\"ffcf737e\"}")</script>
    <script type="module" async src="/vitepress-blog/assets/app.b304d650.js"></script>
  </body>
</html>