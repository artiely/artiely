import{o as n,c as t,t as a,a as e,x as s}from"./app.746f22cf.js";const c='{"title":"说一说递归如何优化-尾递归优化","description":"","frontmatter":{"title":"说一说递归如何优化-尾递归优化","tag":["javaScript"],"cover":"https://gitee.com/artiely/Figure-bed/raw/master/image/20200907112709.png","base64":"1b1b20","author":"artiely","date":"2020-9-7"},"headers":[{"level":2,"title":"一、什么尾调用？","slug":"一-什么尾调用"},{"level":2,"title":"二、尾调用优化","slug":"二-尾调用优化"},{"level":2,"title":"三、尾递归","slug":"三-尾递归"},{"level":2,"title":"四、递归函数的改写","slug":"四-递归函数的改写"},{"level":3,"title":"方法一：是在尾递归函数之外，再提供一个正常形式的函数。","slug":"方法一是在尾递归函数之外再提供一个正常形式的函数"},{"level":3,"title":"方法二：采用ES6的函数默认值。","slug":"方法二采用es6的函数默认值"},{"level":2,"title":"五、尾递归优化的魅力","slug":"五-尾递归优化的魅力"},{"level":2,"title":"六、使用条件 - 严格模","slug":"六-使用条件-严格模"}],"relativePath":"post/2020/2020-9-7-recursive.md","lastUpdated":1629110865707}',o={},l=a('',6),i=e("div",{class:"language-js line-numbers-mode"},[e("pre",null,[e("code",null,[e("span",{class:"token keyword"},"function"),s(),e("span",{class:"token function"},"f"),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},"x"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},"{"),s("\n  "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token function"},"g"),e("span",{class:"token punctuation"},"("),s("x"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n")]),e("div",{class:"m-mdic-copy-wrapper"},[e("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558019904-83157"},"复制成功"),e("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"function f(x){\n  return g(x);\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558019904-83157","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),e("div",{class:"line-numbers-wrapper"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br")])],-1),p=e("p",null,[s("上面代码中，"),e("code",null,"函数f"),s("的最后一步是调用"),e("code",null,"函数g"),s("，这就叫尾调用。")],-1),u=e("p",null,"以下这两种情况，均不属于尾调用。",-1),d=e("div",{class:"language-js line-numbers-mode"},[e("pre",null,[e("code",null,[e("span",{class:"token comment"},"// 情况一"),s("\n"),e("span",{class:"token keyword"},"function"),s(),e("span",{class:"token function"},"f"),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},"x"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},"{"),s("\n  "),e("span",{class:"token keyword"},"let"),s(" y "),e("span",{class:"token operator"},"="),s(),e("span",{class:"token function"},"g"),e("span",{class:"token punctuation"},"("),s("x"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n  "),e("span",{class:"token keyword"},"return"),s(" y"),e("span",{class:"token punctuation"},";"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n\n"),e("span",{class:"token comment"},"// 情况二"),s("\n"),e("span",{class:"token keyword"},"function"),s(),e("span",{class:"token function"},"f"),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},"x"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},"{"),s("\n  "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token function"},"g"),e("span",{class:"token punctuation"},"("),s("x"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token operator"},"+"),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},";"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n")]),e("div",{class:"m-mdic-copy-wrapper"},[e("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558019904-78807"},"复制成功"),e("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// 情况一\nfunction f(x){\n  let y = g(x);\n  return y;\n}\n\n// 情况二\nfunction f(x){\n  return g(x) + 1;\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558019904-78807","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),e("div",{class:"line-numbers-wrapper"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br"),e("span",{class:"line-number"},"10"),e("br")])],-1),r=e("p",null,"上面代码中，情况一是调用函数g之后，还有别的操作，所以不属于尾调用，即使语义完全一样。情况二也属于调用后还有操作，即使写在一行内。",-1),m=e("blockquote",null,[e("p",null,"尾调用不一定出现在函数尾部，只要是最后一步操作即可。")],-1),k=e("div",{class:"language-js line-numbers-mode"},[e("pre",null,[e("code",null,[e("span",{class:"token keyword"},"function"),s(),e("span",{class:"token function"},"f"),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},"x"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n  "),e("span",{class:"token keyword"},"if"),s(),e("span",{class:"token punctuation"},"("),s("x "),e("span",{class:"token operator"},">"),s(),e("span",{class:"token number"},"0"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n    "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token function"},"m"),e("span",{class:"token punctuation"},"("),s("x"),e("span",{class:"token punctuation"},")"),s("\n  "),e("span",{class:"token punctuation"},"}"),s("\n  "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token function"},"n"),e("span",{class:"token punctuation"},"("),s("x"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n")]),e("div",{class:"m-mdic-copy-wrapper"},[e("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558019904-83029"},"复制成功"),e("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"function f(x) {\n  if (x > 0) {\n    return m(x)\n  }\n  return n(x);\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558019904-83029","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),e("div",{class:"line-numbers-wrapper"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br")])],-1),y=a('',7),b=e("div",{class:"language-js line-numbers-mode"},[e("pre",null,[e("code",null,[e("span",{class:"token keyword"},"function"),s(),e("span",{class:"token function"},"f"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n  "),e("span",{class:"token keyword"},"let"),s(" m "),e("span",{class:"token operator"},"="),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},";"),s("\n  "),e("span",{class:"token keyword"},"let"),s(" n "),e("span",{class:"token operator"},"="),s(),e("span",{class:"token number"},"2"),e("span",{class:"token punctuation"},";"),s("\n  "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token function"},"g"),e("span",{class:"token punctuation"},"("),s("m "),e("span",{class:"token operator"},"+"),s(" n"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n"),e("span",{class:"token function"},"f"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n\n"),e("span",{class:"token comment"},"// 等同于"),s("\n"),e("span",{class:"token keyword"},"function"),s(),e("span",{class:"token function"},"f"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n  "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token function"},"g"),e("span",{class:"token punctuation"},"("),e("span",{class:"token number"},"3"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n"),e("span",{class:"token function"},"f"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n\n"),e("span",{class:"token comment"},"// 等同于"),s("\n"),e("span",{class:"token function"},"g"),e("span",{class:"token punctuation"},"("),e("span",{class:"token number"},"3"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n")]),e("div",{class:"m-mdic-copy-wrapper"},[e("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558019904-88823"},"复制成功"),e("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"function f() {\n  let m = 1;\n  let n = 2;\n  return g(m + n);\n}\nf();\n\n// 等同于\nfunction f() {\n  return g(3);\n}\nf();\n\n// 等同于\ng(3);\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558019904-88823","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),e("div",{class:"line-numbers-wrapper"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br"),e("span",{class:"line-number"},"10"),e("br"),e("span",{class:"line-number"},"11"),e("br"),e("span",{class:"line-number"},"12"),e("br"),e("span",{class:"line-number"},"13"),e("br"),e("span",{class:"line-number"},"14"),e("br"),e("span",{class:"line-number"},"15"),e("br")])],-1),f=a('',5),h=e("div",{class:"language-js line-numbers-mode"},[e("pre",null,[e("code",null,[e("span",{class:"token keyword"},"var"),s(),e("span",{class:"token function-variable function"},"mutiply"),s(),e("span",{class:"token operator"},"="),s(),e("span",{class:"token keyword"},"function"),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},"n"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n  \n  "),e("span",{class:"token keyword"},"if"),s(),e("span",{class:"token punctuation"},"("),s("n "),e("span",{class:"token operator"},"==="),s(),e("span",{class:"token number"},"0"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},";"),s("\n  "),e("span",{class:"token keyword"},"return"),s(" n"),e("span",{class:"token operator"},"*"),s(),e("span",{class:"token function"},"mutiply"),e("span",{class:"token punctuation"},"("),s("n"),e("span",{class:"token operator"},"-"),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},")"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n\n"),e("span",{class:"token function"},"mutiply"),e("span",{class:"token punctuation"},"("),e("span",{class:"token number"},"5"),e("span",{class:"token punctuation"},")"),s("\n")]),e("div",{class:"m-mdic-copy-wrapper"},[e("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558019904-77025"},"复制成功"),e("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var mutiply = function(n) {\n  \n  if (n === 0) return 1;\n  return n* mutiply(n-1)\n}\n\nmutiply(5)\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558019904-77025","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),e("div",{class:"line-numbers-wrapper"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br")])],-1),C=e("p",null,[s("我们可以看出来这是一道"),e("code",null,"求10的阶乘"),s("计算题，是一个阶乘函数，计算n的阶乘，最多需要保存n个调用记录，复杂度 O(n) 。")],-1),g=e("p",null,"如果改写成尾递归，只保留一个调用记录，复杂度 O(1) 。",-1),v=e("div",{class:"language-js line-numbers-mode"},[e("pre",null,[e("code",null,[e("span",{class:"token keyword"},"var"),s(),e("span",{class:"token function-variable function"},"mutiply"),s(),e("span",{class:"token operator"},"="),s(),e("span",{class:"token keyword"},"function"),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},[s("n"),e("span",{class:"token punctuation"},","),s(" total")]),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n  \n  "),e("span",{class:"token keyword"},"if"),s(),e("span",{class:"token punctuation"},"("),s("n "),e("span",{class:"token operator"},"==="),s(),e("span",{class:"token number"},"0"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token keyword"},"return"),s(" total"),e("span",{class:"token punctuation"},";"),s("\n  "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token function"},"mutiply"),e("span",{class:"token punctuation"},"("),s("n"),e("span",{class:"token operator"},"-"),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},","),s(" n "),e("span",{class:"token operator"},"*"),s(" total"),e("span",{class:"token punctuation"},")"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n\n"),e("span",{class:"token function"},"mutiply"),e("span",{class:"token punctuation"},"("),e("span",{class:"token number"},"5"),e("span",{class:"token punctuation"},","),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token comment"},"// 120"),s("\n")]),e("div",{class:"m-mdic-copy-wrapper"},[e("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558019904-76967"},"复制成功"),e("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var mutiply = function(n, total) {\n  \n  if (n === 0) return total;\n  return mutiply(n-1, n * total)\n}\n\nmutiply(5, 1) // 120\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558019904-76967","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),e("div",{class:"line-numbers-wrapper"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br")])],-1),w=a('',5),_=e("div",{class:"language-js line-numbers-mode"},[e("pre",null,[e("code",null,[e("span",{class:"token keyword"},"var"),s(),e("span",{class:"token function-variable function"},"mutiply"),s(),e("span",{class:"token operator"},"="),s(),e("span",{class:"token keyword"},"function"),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},"n"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n  \n  "),e("span",{class:"token keyword"},"if"),s(),e("span",{class:"token punctuation"},"("),s("n "),e("span",{class:"token operator"},"==="),s(),e("span",{class:"token number"},"0"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},";"),s("\n  "),e("span",{class:"token keyword"},"return"),s(" n"),e("span",{class:"token operator"},"*"),s(),e("span",{class:"token function"},"mutiply"),e("span",{class:"token punctuation"},"("),s("n"),e("span",{class:"token operator"},"-"),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},")"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n")]),e("div",{class:"m-mdic-copy-wrapper"},[e("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558019904-74656"},"复制成功"),e("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var mutiply = function(n) {\n  \n  if (n === 0) return 1;\n  return n* mutiply(n-1)\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558019904-74656","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),e("div",{class:"line-numbers-wrapper"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br")])],-1),E=a('',7),x=e("div",{class:"language-js line-numbers-mode"},[e("pre",null,[e("code",null,[e("span",{class:"token keyword"},"function"),s(),e("span",{class:"token function"},"tailFactorial"),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},[s("n"),e("span",{class:"token punctuation"},","),s(" total")]),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n  "),e("span",{class:"token keyword"},"if"),s(),e("span",{class:"token punctuation"},"("),s("n "),e("span",{class:"token operator"},"==="),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token keyword"},"return"),s(" total"),e("span",{class:"token punctuation"},";"),s("\n  "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token function"},"tailFactorial"),e("span",{class:"token punctuation"},"("),s("n "),e("span",{class:"token operator"},"-"),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},","),s(" n "),e("span",{class:"token operator"},"*"),s(" total"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n\n"),e("span",{class:"token keyword"},"function"),s(),e("span",{class:"token function"},"factorial"),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},"n"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n  "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token function"},"tailFactorial"),e("span",{class:"token punctuation"},"("),s("n"),e("span",{class:"token punctuation"},","),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n\n"),e("span",{class:"token function"},"factorial"),e("span",{class:"token punctuation"},"("),e("span",{class:"token number"},"5"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token comment"},"// 120"),s("\n")]),e("div",{class:"m-mdic-copy-wrapper"},[e("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558019905-84769"},"复制成功"),e("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"function tailFactorial(n, total) {\n  if (n === 1) return total;\n  return tailFactorial(n - 1, n * total);\n}\n\nfunction factorial(n) {\n  return tailFactorial(n, 1);\n}\n\nfactorial(5) // 120\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558019905-84769","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),e("div",{class:"line-numbers-wrapper"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br"),e("span",{class:"line-number"},"10"),e("br")])],-1),T=a("",2),j=e("div",{class:"language-js line-numbers-mode"},[e("pre",null,[e("code",null,[e("span",{class:"token keyword"},"function"),s(),e("span",{class:"token function"},"currying"),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},[s("fn"),e("span",{class:"token punctuation"},","),s(" n")]),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n  "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token keyword"},"function"),s(),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},"m"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n    "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token function"},"fn"),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"call"),e("span",{class:"token punctuation"},"("),e("span",{class:"token keyword"},"this"),e("span",{class:"token punctuation"},","),s(" m"),e("span",{class:"token punctuation"},","),s(" n"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n  "),e("span",{class:"token punctuation"},"}"),e("span",{class:"token punctuation"},";"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n\n"),e("span",{class:"token keyword"},"function"),s(),e("span",{class:"token function"},"tailFactorial"),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},[s("n"),e("span",{class:"token punctuation"},","),s(" total")]),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n  "),e("span",{class:"token keyword"},"if"),s(),e("span",{class:"token punctuation"},"("),s("n "),e("span",{class:"token operator"},"==="),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token keyword"},"return"),s(" total"),e("span",{class:"token punctuation"},";"),s("\n  "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token function"},"tailFactorial"),e("span",{class:"token punctuation"},"("),s("n "),e("span",{class:"token operator"},"-"),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},","),s(" n "),e("span",{class:"token operator"},"*"),s(" total"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n\n"),e("span",{class:"token keyword"},"const"),s(" factorial "),e("span",{class:"token operator"},"="),s(),e("span",{class:"token function"},"currying"),e("span",{class:"token punctuation"},"("),s("tailFactorial"),e("span",{class:"token punctuation"},","),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n\n"),e("span",{class:"token function"},"factorial"),e("span",{class:"token punctuation"},"("),e("span",{class:"token number"},"5"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token comment"},"// 120"),s("\n")]),e("div",{class:"m-mdic-copy-wrapper"},[e("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558019905-59414"},"复制成功"),e("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"function currying(fn, n) {\n  return function (m) {\n    return fn.call(this, m, n);\n  };\n}\n\nfunction tailFactorial(n, total) {\n  if (n === 1) return total;\n  return tailFactorial(n - 1, n * total);\n}\n\nconst factorial = currying(tailFactorial, 1);\n\nfactorial(5) // 120\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558019905-59414","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),e("div",{class:"line-numbers-wrapper"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br"),e("span",{class:"line-number"},"10"),e("br"),e("span",{class:"line-number"},"11"),e("br"),e("span",{class:"line-number"},"12"),e("br"),e("span",{class:"line-number"},"13"),e("br"),e("span",{class:"line-number"},"14"),e("br")])],-1),A=e("p",null,[s("上面代码通过柯里化，将尾递归函数 "),e("code",null,"tailFactorial"),s(" 变为只接受1个参数的 "),e("code",null,"factorial"),s("。")],-1),B=e("h3",{id:"方法二采用es6的函数默认值"},[e("a",{class:"header-anchor",href:"#方法二采用es6的函数默认值","aria-hidden":"true"},"#"),s(" 方法二：采用ES6的函数默认值。")],-1),F=e("div",{class:"language-js line-numbers-mode"},[e("pre",null,[e("code",null,[e("span",{class:"token keyword"},"function"),s(),e("span",{class:"token function"},"factorial"),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},[s("n"),e("span",{class:"token punctuation"},","),s(" total "),e("span",{class:"token operator"},"="),s(),e("span",{class:"token number"},"1")]),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token punctuation"},"{"),s("\n  "),e("span",{class:"token keyword"},"if"),s(),e("span",{class:"token punctuation"},"("),s("n "),e("span",{class:"token operator"},"==="),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token keyword"},"return"),s(" total"),e("span",{class:"token punctuation"},";"),s("\n  "),e("span",{class:"token keyword"},"return"),s(),e("span",{class:"token function"},"factorial"),e("span",{class:"token punctuation"},"("),s("n "),e("span",{class:"token operator"},"-"),s(),e("span",{class:"token number"},"1"),e("span",{class:"token punctuation"},","),s(" n "),e("span",{class:"token operator"},"*"),s(" total"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},";"),s("\n"),e("span",{class:"token punctuation"},"}"),s("\n\n"),e("span",{class:"token function"},"factorial"),e("span",{class:"token punctuation"},"("),e("span",{class:"token number"},"5"),e("span",{class:"token punctuation"},")"),s(),e("span",{class:"token comment"},"// 120"),s("\n")]),e("div",{class:"m-mdic-copy-wrapper"},[e("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558019905-33783"},"复制成功"),e("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"function factorial(n, total = 1) {\n  if (n === 1) return total;\n  return factorial(n - 1, n * total);\n}\n\nfactorial(5) // 120\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558019905-33783","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),e("div",{class:"line-numbers-wrapper"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br")])],-1),I=a('',7),$=e("div",{class:"language-"},[e("pre",null,[e("code",null,"arguments：返回调用时函数的参数。\n\nfunc.caller：返回调用当前函数的那个函数。\n"),e("div",{class:"m-mdic-copy-wrapper"},[e("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558019905-79258"},"复制成功"),e("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"arguments：返回调用时函数的参数。\n\nfunc.caller：返回调用当前函数的那个函数。\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558019905-79258","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),e("div",{class:"line-numbers-wrapper"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br")])],-1),N=e("blockquote",null,[e("p",null,"尾调用优化发生时，函数的调用栈会改写，因此上面两个变量就会失真。严格模式禁用这两个变量，所以尾调用模式仅在严格模式下生效。")],-1),S=e("p",null,[e("a",{href:"https://mp.weixin.qq.com/s/I-QIsLhykupreVKBHNmbwg",target:"_blank",rel:"noopener noreferrer"},"原文")],-1);o.render=function(a,e,s,c,o,q){return n(),t("div",null,[l,i,p,u,d,r,m,k,y,b,f,h,C,g,v,w,_,E,x,T,j,A,B,F,I,$,N,S])};export default o;export{c as __pageData};
