import{o as n,c as e,f as t,a,x as s}from"./app.5f3fb606.js";const o='{"title":"前端面试题汇总-框架-2","description":"","frontmatter":{"title":"前端面试题汇总-框架-2","tag":["javaScript"],"cover":"https://gitee.com/artiely/Figure-bed/raw/master/image/20200901095902.png","base64":"3fb782","author":"artiely","date":"2020-9-1"},"headers":[{"level":2,"title":"生命周期函数面试题","slug":"生命周期函数面试题"},{"level":3,"title":"1.什么是 vue 生命周期？有什么作用？","slug":"1什么是-vue-生命周期有什么作用"},{"level":3,"title":"2.第一次页面加载会触发哪几个钩子？","slug":"2第一次页面加载会触发哪几个钩子"},{"level":3,"title":"3.简述每个周期具体适合哪些场景","slug":"3简述每个周期具体适合哪些场景"},{"level":3,"title":"4.created和mounted的区别","slug":"4created和mounted的区别"},{"level":3,"title":"5.vue获取数据在哪个周期函数","slug":"5vue获取数据在哪个周期函数"},{"level":3,"title":"6.请详细说下你对vue生命周期的理解？","slug":"6请详细说下你对vue生命周期的理解"},{"level":2,"title":"vue路由面试题","slug":"vue路由面试题"},{"level":3,"title":"1.mvvm 框架是什么？","slug":"1mvvm-框架是什么"},{"level":3,"title":"2.vue-router 是什么?它有哪些组件","slug":"2vue-router-是什么它有哪些组件"},{"level":3,"title":"3.active-class 是哪个组件的属性？","slug":"3active-class-是哪个组件的属性"},{"level":3,"title":"4.怎么定义 vue-router 的动态路由? 怎么获取传过来的值？","slug":"4怎么定义-vue-router-的动态路由-怎么获取传过来的值"},{"level":3,"title":"5.vue-router 有哪几种导航钩子?","slug":"5vue-router-有哪几种导航钩子"},{"level":3,"title":"6.$route 和 $router 的区别","slug":"6route-和-router-的区别"},{"level":3,"title":"7.vue-router的两种模式","slug":"7vue-router的两种模式"},{"level":3,"title":"8.vue-router实现路由懒加载（ 动态加载路由 ）","slug":"8vue-router实现路由懒加载-动态加载路由"},{"level":2,"title":"vuex常见面试题","slug":"vuex常见面试题"},{"level":3,"title":"1.vuex是什么？怎么使用？哪种功能场景使用它？","slug":"1vuex是什么怎么使用哪种功能场景使用它"},{"level":3,"title":"2.vuex有哪几种属性？","slug":"2vuex有哪几种属性"},{"level":3,"title":"3.Vue.js中ajax请求代码应该写在组件的methods中还是vuex的actions中？","slug":"3vuejs中ajax请求代码应该写在组件的methods中还是vuex的actions中"},{"level":3,"title":"nextTick原理","slug":"nexttick原理"},{"level":2,"title":"watcher","slug":"watcher"},{"level":3,"title":"首先分析原因","slug":"首先分析原因"},{"level":3,"title":"考虑解决办法","slug":"考虑解决办法"},{"level":3,"title":"react-router 里的 routerLink标签和a 标签有什么区别","slug":"react-router-里的-routerlink标签和a-标签有什么区别"},{"level":2,"title":"写 React / Vue 项目时为什么要在列表组件中写 key，其作用是什么","slug":"写-react-vue-项目时为什么要在列表组件中写-key其作用是什么"},{"level":2,"title":"什么是diff算法？","slug":"什么是diff算法"},{"level":3,"title":"diff的比较方式","slug":"diff的比较方式"}],"relativePath":"post/2020/2020-9-1-fw2.md","lastUpdated":1629110864870}',c={},l=t('<h1 id="前端面试题汇总-框架-2"><a class="header-anchor" href="#前端面试题汇总-框架-2" aria-hidden="true">#</a> 前端面试题汇总-框架-2</h1><h2 id="生命周期函数面试题"><a class="header-anchor" href="#生命周期函数面试题" aria-hidden="true">#</a> 生命周期函数面试题</h2><h3 id="1什么是-vue-生命周期有什么作用"><a class="header-anchor" href="#1什么是-vue-生命周期有什么作用" aria-hidden="true">#</a> 1.什么是 vue 生命周期？有什么作用？</h3><p>答：每个 Vue 实例在被创建时都要经过一系列的初始化过程——例如，需要设置数据监听、编译模板、将实例挂载到 DOM 并在数据变化时更新 DOM 等。同时在这个过程中也会运行一些叫做 生命周期钩子 的函数，这给了用户在不同阶段添加自己的代码的机会。（ps：生命周期钩子就是生命周期函数）例如，如果要通过某些插件操作DOM节点，如想在页面渲染完后弹出广告窗， 那我们最早可在mounted 中进行。</p><h3 id="2第一次页面加载会触发哪几个钩子"><a class="header-anchor" href="#2第一次页面加载会触发哪几个钩子" aria-hidden="true">#</a> 2.第一次页面加载会触发哪几个钩子？</h3><p>答：beforeCreate， created， beforeMount， mounted</p><h3 id="3简述每个周期具体适合哪些场景"><a class="header-anchor" href="#3简述每个周期具体适合哪些场景" aria-hidden="true">#</a> 3.简述每个周期具体适合哪些场景</h3><p>答：beforeCreate：在new一个vue实例后，只有一些默认的生命周期钩子和默认事件，其他的东西都还没创建。在beforeCreate生命周期执行的时候，data和methods中的数据都还没有初始化。不能在这个阶段使用data中的数据和methods中的方法<br> create：data 和 methods都已经被初始化好了，如果要调用 methods 中的方法，或者操作 data 中的数据，最早可以在这个阶段中操作<br> beforeMount：执行到这个钩子的时候，在内存中已经编译好了模板了，但是还没有挂载到页面中，此时，页面还是旧的<br> mounted：执行到这个钩子的时候，就表示Vue实例已经初始化完成了。此时组件脱离了创建阶段，进入到了运行阶段。 如果我们想要通过插件操作页面上的DOM节点，最早可以在和这个阶段中进行<br> beforeUpdate： 当执行这个钩子时，页面中的显示的数据还是旧的，data中的数据是更新后的， 页面还没有和最新的数据保持同步<br> updated：页面显示的数据和data中的数据已经保持同步了，都是最新的<br> beforeDestory：Vue实例从运行阶段进入到了销毁阶段，这个时候上所有的 data 和 methods ， 指令， 过滤器 ……都是处于可用状态。还没有真正被销毁<br> destroyed： 这个时候上所有的 data 和 methods ， 指令， 过滤器 ……都是处于不可用状态。组件已经被销毁了。</p><h3 id="4created和mounted的区别"><a class="header-anchor" href="#4created和mounted的区别" aria-hidden="true">#</a> 4.created和mounted的区别</h3><p>答：created:在模板渲染成html前调用，即通常初始化某些属性值，然后再渲染成视图。<br> mounted:在模板渲染成html后调用，通常是初始化页面完成后，再对html的dom节点进行一些需要的操作。</p><h3 id="5vue获取数据在哪个周期函数"><a class="header-anchor" href="#5vue获取数据在哪个周期函数" aria-hidden="true">#</a> 5.vue获取数据在哪个周期函数</h3><p>答：一般 created/beforeMount/mounted 皆可.<br> 比如如果你要操作 DOM , 那肯定 mounted 时候才能操作.</p><h3 id="6请详细说下你对vue生命周期的理解"><a class="header-anchor" href="#6请详细说下你对vue生命周期的理解" aria-hidden="true">#</a> 6.请详细说下你对vue生命周期的理解？</h3><p>答：总共分为8个阶段创建前/后，载入前/后，更新前/后，销毁前/后。<br> 创建前/后： 在beforeCreated阶段，vue实例的挂载元素$el和<strong>数据对象</strong>data都为undefined，还未初始化。在created阶段，vue实例的数据对象data有了，$el还没有。<br> 载入前/后：在beforeMount阶段，vue实例的$el和data都初始化了，但还是挂载之前为虚拟的dom节点，data.message还未替换。在mounted阶段，vue实例挂载完成，data.message成功渲染。<br> 更新前/后：当data变化时，会触发beforeUpdate和updated方法。<br> 销毁前/后：在执行destroy方法后，对data的改变不会再触发周期函数，说明此时vue实例已经解除了事件监听以及和dom的绑定，但是dom结构依然存在。</p><h2 id="vue路由面试题"><a class="header-anchor" href="#vue路由面试题" aria-hidden="true">#</a> vue路由面试题</h2><h3 id="1mvvm-框架是什么"><a class="header-anchor" href="#1mvvm-框架是什么" aria-hidden="true">#</a> 1.mvvm 框架是什么？</h3><p>答：vue是实现了双向数据绑定的mvvm框架，当视图改变更新模型层，当模型层改变更新视图层。在vue中，使用了双向绑定技术，就是View的变化能实时让Model发生变化，而Model的变化也能实时更新到View。</p><h3 id="2vue-router-是什么它有哪些组件"><a class="header-anchor" href="#2vue-router-是什么它有哪些组件" aria-hidden="true">#</a> 2.vue-router 是什么?它有哪些组件</h3><p>答：vue用来写路由一个插件。router-link、router-view</p><h3 id="3active-class-是哪个组件的属性"><a class="header-anchor" href="#3active-class-是哪个组件的属性" aria-hidden="true">#</a> 3.active-class 是哪个组件的属性？</h3><p>答：vue-router模块的router-link组件。children数组来定义子路由</p><h3 id="4怎么定义-vue-router-的动态路由-怎么获取传过来的值"><a class="header-anchor" href="#4怎么定义-vue-router-的动态路由-怎么获取传过来的值" aria-hidden="true">#</a> 4.怎么定义 vue-router 的动态路由? 怎么获取传过来的值？</h3><p>答：在router目录下的index.js文件中，对path属性加上/:id。 <a href="http://xn--routerparams-ov8ss11l264ektes46i.id" target="_blank" rel="noopener noreferrer">使用router对象的params.id</a>。</p><h3 id="5vue-router-有哪几种导航钩子"><a class="header-anchor" href="#5vue-router-有哪几种导航钩子" aria-hidden="true">#</a> 5.vue-router 有哪几种导航钩子?</h3><p>答：三种，<br> 第一种：是全局导航钩子：router.beforeEach(to,from,next)，作用：跳转前进行判断拦截。<br> 第二种：组件内的钩子<br> 第三种：单独路由独享组件</p><h3 id="6route-和-router-的区别"><a class="header-anchor" href="#6route-和-router-的区别" aria-hidden="true">#</a> 6.$route 和 $router 的区别</h3><p>答：$router是VueRouter的实例，在script标签中想要导航到不同的URL,使用$router.push方法。<a href="http://%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%80%E4%B8%AA%E5%8E%86%E5%8F%B2history%E7%94%A8$router.to" target="_blank" rel="noopener noreferrer">返回上一个历史history用$router.to</a>(-1)<br> $route为当前router跳转对象。里面可以获取当前路由的name,path,query,parmas等。</p><h3 id="7vue-router的两种模式"><a class="header-anchor" href="#7vue-router的两种模式" aria-hidden="true">#</a> 7.vue-router的两种模式</h3><p>答:hash模式：即地址栏 URL 中的 # 符号；<br> history模式：window.history对象打印出来可以看到里边提供的方法和记录长度。利用了 HTML5 History Interface 中新增的 pushState() 和 replaceState() 方法。（需要特定浏览器支持）。</p><h3 id="8vue-router实现路由懒加载-动态加载路由"><a class="header-anchor" href="#8vue-router实现路由懒加载-动态加载路由" aria-hidden="true">#</a> 8.vue-router实现路由懒加载（ 动态加载路由 ）</h3><p>答:三种方式<br> 第一种：vue异步组件技术 ==== 异步加载，vue-router配置路由 , 使用vue的异步组件技术 , 可以实现按需加载 .但是,这种情况下一个组件生成一个js文件。<br> 第二种：路由懒加载(使用import)。<br> 第三种：webpack提供的require.ensure()，vue-router配置路由，使用webpack的require.ensure技术，也可以实现按需加载。这种情况下，多个路由指定相同的chunkName，会合并打包成一个js文件。</p><h2 id="vuex常见面试题"><a class="header-anchor" href="#vuex常见面试题" aria-hidden="true">#</a> vuex常见面试题</h2><h3 id="1vuex是什么怎么使用哪种功能场景使用它"><a class="header-anchor" href="#1vuex是什么怎么使用哪种功能场景使用它" aria-hidden="true">#</a> 1.vuex是什么？怎么使用？哪种功能场景使用它？</h3><p>答：vue框架中状态管理。在main.js引入store，注入。<br> 新建了一个目录store.js，….. export 。<br> 场景有：单页应用中，组件之间的状态。音乐播放、登录状态、加入购物车</p><h3 id="2vuex有哪几种属性"><a class="header-anchor" href="#2vuex有哪几种属性" aria-hidden="true">#</a> 2.vuex有哪几种属性？</h3><p>答：有五种，分别是 State、 Getter、Mutation 、Action、 Module<br> state =&gt; 基本数据(数据源存放地)<br> getters =&gt; 从基本数据派生出来的数据<br> mutations =&gt; 提交更改数据的方法，同步！<br> actions =&gt; 像一个装饰器，包裹mutations，使之可以异步。<br> modules =&gt; 模块化Vuex</p><h3 id="3vuejs中ajax请求代码应该写在组件的methods中还是vuex的actions中"><a class="header-anchor" href="#3vuejs中ajax请求代码应该写在组件的methods中还是vuex的actions中" aria-hidden="true">#</a> 3.Vue.js中ajax请求代码应该写在组件的methods中还是vuex的actions中？</h3><p>答：如果请求来的数据是不是要被其他组件公用，仅仅在请求的组件内使用，就不需要放入vuex 的state里。</p><h3 id="nexttick原理"><a class="header-anchor" href="#nexttick原理" aria-hidden="true">#</a> nextTick原理</h3>',39),i=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token operator"},"<"),s("template"),a("span",{class:"token operator"},">"),s("\n  "),a("span",{class:"token operator"},"<"),s("div"),a("span",{class:"token operator"},">"),s("\n    "),a("span",{class:"token operator"},"<"),s("div"),a("span",{class:"token operator"},">"),a("span",{class:"token punctuation"},"{"),a("span",{class:"token punctuation"},"{"),s("number"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),s("div"),a("span",{class:"token operator"},">"),s("\n    "),a("span",{class:"token operator"},"<"),s("div @click"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"handleClick"'),a("span",{class:"token operator"},">"),s("click"),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),s("div"),a("span",{class:"token operator"},">"),s("\n  "),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),s("div"),a("span",{class:"token operator"},">"),s("\n"),a("span",{class:"token operator"},"<"),a("span",{class:"token operator"},"/"),s("template"),a("span",{class:"token operator"},">"),s("\n"),a("span",{class:"token keyword"},"export"),s(),a("span",{class:"token keyword"},"default"),s(),a("span",{class:"token punctuation"},"{"),s("\n    "),a("span",{class:"token function"},"data"),s(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n        "),a("span",{class:"token keyword"},"return"),s(),a("span",{class:"token punctuation"},"{"),s("\n            number"),a("span",{class:"token operator"},":"),s(),a("span",{class:"token number"},"0"),s("\n        "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),s("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),s("\n    methods"),a("span",{class:"token operator"},":"),s(),a("span",{class:"token punctuation"},"{"),s("\n        "),a("span",{class:"token function"},"handleClick"),s(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n            "),a("span",{class:"token keyword"},"for"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"let"),s(" i "),a("span",{class:"token operator"},"="),s(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},";"),s(" i "),a("span",{class:"token operator"},"<"),s(),a("span",{class:"token number"},"1000"),a("span",{class:"token punctuation"},";"),s(" i"),a("span",{class:"token operator"},"++"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n                "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),s("number"),a("span",{class:"token operator"},"++"),a("span",{class:"token punctuation"},";"),s("\n            "),a("span",{class:"token punctuation"},"}"),s("\n        "),a("span",{class:"token punctuation"},"}"),s("\n    "),a("span",{class:"token punctuation"},"}"),s("\n"),a("span",{class:"token punctuation"},"}"),s("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557013874-2398"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'<template>\n  <div>\n    <div>{{number}}</div>\n    <div @click="handleClick">click</div>\n  </div>\n</template>\nexport default {\n    data () {\n        return {\n            number: 0\n        };\n    },\n    methods: {\n        handleClick () {\n            for(let i = 0; i < 1000; i++) {\n                this.number++;\n            }\n        }\n    }\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557013874-2398","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br")])],-1),p=a("p",null,"当我们按下 click 按钮的时候，number 会被循环增加1000次。",-1),r=a("p",null,"那么按照之前的理解，每次 number 被 +1 的时候，都会触发 number 的 setter 方法，从而根据上面的流程一直跑下来最后修改真实 DOM。那么在这个过程中，DOM 会被更新 1000 次！那怎么办？",-1),u=a("p",null,"Vue.js中的 nextTick 函数，会传入一个 cb ，这个 cb 会被存储到一个队列中，在下一个 tick 时触发队列中的所有 cb 事件。",-1),d=a("p",null,"Vue.js 肯定不会以如此低效的方法来处理。Vue.js在默认情况下，每次触发某个数据的 setter 方法后，对应的 Watcher 对象其实会被 push 进一个队列 queue 中，在下一个 tick 的时候将这个队列 queue 全部拿出来 run（ Watcher 对象的一个方法，用来触发 patch 操作） 一遍。",-1),m=a("p",null,"因为目前浏览器平台并没有实现 nextTick 方法，所以 Vue.js 源码中分别用 Promise、setTimeout、setImmediate 等方式在 microtask（或是task）中创建一个事件，目的是在当前调用栈执行完毕以后（不一定立即）才会去执行这个事件。",-1),k=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"export"),s(),a("span",{class:"token keyword"},"function"),s(),a("span",{class:"token function"},"nextTick"),s(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[s("cb"),a("span",{class:"token operator"},"?"),a("span",{class:"token operator"},":"),s(" Function"),a("span",{class:"token punctuation"},","),s(" ctx"),a("span",{class:"token operator"},"?"),a("span",{class:"token operator"},":"),s(" Object")]),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n  "),a("span",{class:"token keyword"},"let"),s(" _resolve\n  callbacks"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"push"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token operator"},"=>"),s(),a("span",{class:"token punctuation"},"{"),s("\n    "),a("span",{class:"token keyword"},"if"),s(),a("span",{class:"token punctuation"},"("),s("cb"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n      "),a("span",{class:"token keyword"},"try"),s(),a("span",{class:"token punctuation"},"{"),s("\n        "),a("span",{class:"token function"},"cb"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"call"),a("span",{class:"token punctuation"},"("),s("ctx"),a("span",{class:"token punctuation"},")"),s("\n      "),a("span",{class:"token punctuation"},"}"),s(),a("span",{class:"token keyword"},"catch"),s(),a("span",{class:"token punctuation"},"("),s("e"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n        "),a("span",{class:"token function"},"handleError"),a("span",{class:"token punctuation"},"("),s("e"),a("span",{class:"token punctuation"},","),s(" ctx"),a("span",{class:"token punctuation"},","),s(),a("span",{class:"token string"},"'nextTick'"),a("span",{class:"token punctuation"},")"),s("\n      "),a("span",{class:"token punctuation"},"}"),s("\n    "),a("span",{class:"token punctuation"},"}"),s(),a("span",{class:"token keyword"},"else"),s(),a("span",{class:"token keyword"},"if"),s(),a("span",{class:"token punctuation"},"("),s("_resolve"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n      "),a("span",{class:"token function"},"_resolve"),a("span",{class:"token punctuation"},"("),s("ctx"),a("span",{class:"token punctuation"},")"),s("\n    "),a("span",{class:"token punctuation"},"}"),s("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),s("\n  "),a("span",{class:"token keyword"},"if"),s(),a("span",{class:"token punctuation"},"("),a("span",{class:"token operator"},"!"),s("pending"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n    pending "),a("span",{class:"token operator"},"="),s(),a("span",{class:"token boolean"},"true"),s("\n    "),a("span",{class:"token function"},"timerFunc"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),s("\n  "),a("span",{class:"token punctuation"},"}"),s("\n  "),a("span",{class:"token comment"},"// $flow-disable-line"),s("\n  "),a("span",{class:"token keyword"},"if"),s(),a("span",{class:"token punctuation"},"("),a("span",{class:"token operator"},"!"),s("cb "),a("span",{class:"token operator"},"&&"),s(),a("span",{class:"token keyword"},"typeof"),s(" Promise "),a("span",{class:"token operator"},"!=="),s(),a("span",{class:"token string"},"'undefined'"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n    "),a("span",{class:"token keyword"},"return"),s(),a("span",{class:"token keyword"},"new"),s(),a("span",{class:"token class-name"},"Promise"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"resolve"),s(),a("span",{class:"token operator"},"=>"),s(),a("span",{class:"token punctuation"},"{"),s("\n      _resolve "),a("span",{class:"token operator"},"="),s(" resolve\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),s("\n  "),a("span",{class:"token punctuation"},"}"),s("\n"),a("span",{class:"token punctuation"},"}"),s("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557013874-42932"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"export function nextTick (cb?: Function, ctx?: Object) {\n  let _resolve\n  callbacks.push(() => {\n    if (cb) {\n      try {\n        cb.call(ctx)\n      } catch (e) {\n        handleError(e, ctx, 'nextTick')\n      }\n    } else if (_resolve) {\n      _resolve(ctx)\n    }\n  })\n  if (!pending) {\n    pending = true\n    timerFunc()\n  }\n  // $flow-disable-line\n  if (!cb && typeof Promise !== 'undefined') {\n    return new Promise(resolve => {\n      _resolve = resolve\n    })\n  }\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557013874-42932","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br")])],-1),b=t('<p>首先定义一个 callbacks 数组用来存储 nextTick，在下一个 tick 处理这些回调函数之前，所有的 cb 都会被存在这个 callbacks 数组中。pending 是一个标记位，代表一个等待的状态。 这里用setTimeout做描述（真实源码里更复杂）： setTimeout 会在 task 中创建一个事件 flushCallbacks ，flushCallbacks 则会在执行时将 callbacks 中的所有 cb 依次执行。</p><h2 id="watcher"><a class="header-anchor" href="#watcher" aria-hidden="true">#</a> watcher</h2><p>上面例子中，当我们将 number 增加 1000 次时，先将对应的 Watcher 对象给 push 进一个队列 queue 中去，等下一个 tick 的时候再去执行，这样做是对的。但是有没有发现，另一个问题出现了？</p><p>因为 number 执行 ++ 操作以后对应的 Watcher 对象都是同一个，我们并不需要在下一个 tick 的时候执行 1000 个同样的 Watcher 对象去修改界面，而是只需要执行一个 Watcher 对象，使其将界面上的 0 变成 1000 即可。</p><p>那么，我们就需要执行一个过滤的操作，同一个的 Watcher 在同一个 tick 的时候应该只被执行一次，也就是说队列 queue 中不应该出现重复的 Watcher 对象。</p><p>那么我们可以用 id 来标记每一个 Watcher 对象，让他们看起来不太一样。</p><p>我们再回过头聊一下第一个例子， number 会被不停地进行 ++ 操作，不断地触发它对应的 Dep 中的 Watcher 对象的 update 方法。然后最终 queue 中因为对相同 id 的 Watcher 对象进行了筛选，从而 queue 中实际上只会存在一个 number 对应的 Watcher 对象。在下一个 tick 的时候（此时 number 已经变成了 1000），触发 Watcher 对象的 run 方法来更新视图，将视图上的 number 从 0 直接变成 1000。</p><h3 id="首先分析原因"><a class="header-anchor" href="#首先分析原因" aria-hidden="true">#</a> 首先分析原因</h3><p>VUE首页加载过慢，其原因是因为它是一个单页应用，需要将所有需要的资源都下载到浏览器端并解析。</p><h3 id="考虑解决办法"><a class="header-anchor" href="#考虑解决办法" aria-hidden="true">#</a> 考虑解决办法</h3><ul><li>1.使用首屏SSR + 跳转SPA方式来优化</li><li>2.改单页应用为多页应用，需要修改webpack的entry</li><li>3.CDN资源还是很重要的，最好分开，也能减少一些不必要的资源损耗</li><li>4.骨架屏这种的用户体验的东西一定要上</li><li>5.合理使用缓存</li></ul><h3 id="react-router-里的-routerlink标签和a-标签有什么区别"><a class="header-anchor" href="#react-router-里的-routerlink标签和a-标签有什么区别" aria-hidden="true">#</a> react-router 里的 routerLink标签和a 标签有什么区别</h3><p>先看Link点击事件handleClick部分源码</p>',13),h=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[s("      "),a("span",{class:"token keyword"},"if"),s(),a("span",{class:"token punctuation"},"("),s("_this"),a("span",{class:"token punctuation"},"."),s("props"),a("span",{class:"token punctuation"},"."),s("onClick"),a("span",{class:"token punctuation"},")"),s(" _this"),a("span",{class:"token punctuation"},"."),s("props"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"onClick"),a("span",{class:"token punctuation"},"("),s("event"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),s("\n\n      "),a("span",{class:"token keyword"},"if"),s(),a("span",{class:"token punctuation"},"("),a("span",{class:"token operator"},"!"),s("event"),a("span",{class:"token punctuation"},"."),s("defaultPrevented "),a("span",{class:"token operator"},"&&"),s(),a("span",{class:"token comment"},"// onClick prevented default"),s("\n      event"),a("span",{class:"token punctuation"},"."),s("button "),a("span",{class:"token operator"},"==="),s(),a("span",{class:"token number"},"0"),s(),a("span",{class:"token operator"},"&&"),s(),a("span",{class:"token comment"},"// ignore everything but left clicks"),s("\n      "),a("span",{class:"token operator"},"!"),s("_this"),a("span",{class:"token punctuation"},"."),s("props"),a("span",{class:"token punctuation"},"."),s("target "),a("span",{class:"token operator"},"&&"),s(),a("span",{class:"token comment"},'// let browser handle "target=_blank" etc.'),s("\n      "),a("span",{class:"token operator"},"!"),a("span",{class:"token function"},"isModifiedEvent"),a("span",{class:"token punctuation"},"("),s("event"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token comment"},"// ignore clicks with modifier keys"),s("\n      "),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n          event"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"preventDefault"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),s("\n\n          "),a("span",{class:"token keyword"},"var"),s(" history "),a("span",{class:"token operator"},"="),s(" _this"),a("span",{class:"token punctuation"},"."),s("context"),a("span",{class:"token punctuation"},"."),s("router"),a("span",{class:"token punctuation"},"."),s("history"),a("span",{class:"token punctuation"},";"),s("\n          "),a("span",{class:"token keyword"},"var"),s(" _this$props "),a("span",{class:"token operator"},"="),s(" _this"),a("span",{class:"token punctuation"},"."),s("props"),a("span",{class:"token punctuation"},","),s("\n              replace "),a("span",{class:"token operator"},"="),s(" _this$props"),a("span",{class:"token punctuation"},"."),s("replace"),a("span",{class:"token punctuation"},","),s("\n              to "),a("span",{class:"token operator"},"="),s(" _this$props"),a("span",{class:"token punctuation"},"."),s("to"),a("span",{class:"token punctuation"},";"),s("\n\n\n          "),a("span",{class:"token keyword"},"if"),s(),a("span",{class:"token punctuation"},"("),s("replace"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n            history"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"replace"),a("span",{class:"token punctuation"},"("),s("to"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),s("\n          "),a("span",{class:"token punctuation"},"}"),s(),a("span",{class:"token keyword"},"else"),s(),a("span",{class:"token punctuation"},"{"),s("\n            history"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"push"),a("span",{class:"token punctuation"},"("),s("to"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),s("\n          "),a("span",{class:"token punctuation"},"}"),s("\n        "),a("span",{class:"token punctuation"},"}"),s("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557013874-61417"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'      if (_this.props.onClick) _this.props.onClick(event);\n\n      if (!event.defaultPrevented && // onClick prevented default\n      event.button === 0 && // ignore everything but left clicks\n      !_this.props.target && // let browser handle "target=_blank" etc.\n      !isModifiedEvent(event) // ignore clicks with modifier keys\n      ) {\n          event.preventDefault();\n\n          var history = _this.context.router.history;\n          var _this$props = _this.props,\n              replace = _this$props.replace,\n              to = _this$props.to;\n\n\n          if (replace) {\n            history.replace(to);\n          } else {\n            history.push(to);\n          }\n        }\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557013874-61417","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br")])],-1),y=t('<p>Link做了3件事情：</p><ol><li>有onclick那就执行onclick</li><li>click的时候阻止a标签默认事件（这样子点击<code>[123]()</code>就不会跳转和刷新页面）</li><li>再取得跳转href（即是to），用history（前端路由两种方式之一，history &amp; hash）跳转，此时只是链接变了，并没有刷新页面</li></ol><h2 id="写-react-vue-项目时为什么要在列表组件中写-key其作用是什么"><a class="header-anchor" href="#写-react-vue-项目时为什么要在列表组件中写-key其作用是什么" aria-hidden="true">#</a> 写 React / Vue 项目时为什么要在列表组件中写 key，其作用是什么</h2><blockquote><p>当 Vue 正在更新使用 v-for 渲染的元素列表时，它默认使用“就地更新”的策略。如果数据项的顺序被改变，Vue 将不会移动 DOM。 元素来匹配数据项的顺序，而是就地更新每个元素，并且确保它们在每个索引位置正确渲染。这个类似 Vue 1.x 的 track-by=&quot;$index&quot;。</p></blockquote><p>这个默认的模式是高效的，但是只适用于不依赖子组件状态或临时 DOM 状态 (例如：表单输入值) 的列表渲染输出。</p><ul><li>避免对节点「就地复用」</li></ul><p>需要修改的节点位置没有改变，是内容更新了，这虽然提高了复用性能，但是往往在复杂的表单会导致状态出现错位。也不会产生过度效果</p><ul><li>key相当于每个vnode 的唯一id，我们可以依靠<code>key</code>，更快更精确的知道oldVnode中对应的vnode节点。</li></ul><p>带key就不会使用就定复用了，在sameNode函数<code>a.key===b.key</code>对比中可以避免就地复用的情况。</p><p>我们可以利用key的唯一性来更快获取到对应节点，比遍历更快。</p><h2 id="什么是diff算法"><a class="header-anchor" href="#什么是diff算法" aria-hidden="true">#</a> 什么是diff算法？</h2><p>要渲染真实的DOM的开销很大，因为改变真实dom，会当值整个dom树的重绘和回流。我们需要渲染真实dom的时候往往会把生成一个<code>虚拟节点</code> virtual DOM，当virtual dom某个节点的数据改变后生成一个新的Vnode，然后将Vnode和oldVnode对比，当然有不同的地方教就直接修改在真实DOM上，然后是oldVnode=Vnode</p><ul><li>真实DOM</li></ul>',13),v=a("div",{class:"language-html line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),s("div")]),a("span",{class:"token punctuation"},">")]),s("\n    "),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),s("p")]),a("span",{class:"token punctuation"},">")]),s("123"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),s("p")]),a("span",{class:"token punctuation"},">")]),s("\n"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),s("div")]),a("span",{class:"token punctuation"},">")]),s("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557013874-6627"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"<div>\n    <p>123</p>\n</div>\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557013874-6627","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),f=a("ul",null,[a("li",null,"virtual DOM （虚拟DOM）")],-1),g=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"var"),s(" Vnode"),a("span",{class:"token operator"},"="),a("span",{class:"token punctuation"},"{"),s("\n    tag"),a("span",{class:"token operator"},":"),a("span",{class:"token string"},"'div'"),a("span",{class:"token punctuation"},","),s("\n    children"),a("span",{class:"token operator"},":"),a("span",{class:"token punctuation"},"["),a("span",{class:"token punctuation"},"{"),s("\n        tag"),a("span",{class:"token operator"},":"),a("span",{class:"token string"},"'p'"),a("span",{class:"token punctuation"},","),s("text"),a("span",{class:"token operator"},":"),a("span",{class:"token string"},"'123'"),s("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},"]"),s("\n    \n"),a("span",{class:"token punctuation"},"}"),s("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557013874-87493"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var Vnode={\n    tag:'div',\n    children:[{\n        tag:'p',text:'123'\n    }]\n    \n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557013874-87493","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br")])],-1),C=a("h3",{id:"diff的比较方式"},[a("a",{class:"header-anchor",href:"#diff的比较方式","aria-hidden":"true"},"#"),s(" diff的比较方式")],-1),x=a("p",null,"在同层级进行，不会跨层级比较",-1),w=a("p",null,"oldDOM",-1),_=a("div",{class:"language-html line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),s("div")]),a("span",{class:"token punctuation"},">")]),s("\n    "),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),s("p")]),a("span",{class:"token punctuation"},">")]),s("123"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),s("p")]),a("span",{class:"token punctuation"},">")]),s("\n"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),s("div")]),a("span",{class:"token punctuation"},">")]),s("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557013875-94577"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"<div>\n    <p>123</p>\n</div>\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557013875-94577","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),j=a("p",null,"newDOM",-1),V=a("div",{class:"language-html line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),s("div")]),a("span",{class:"token punctuation"},">")]),s("\n    "),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),s("span")]),a("span",{class:"token punctuation"},">")]),s("2222"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),s("span")]),a("span",{class:"token punctuation"},">")]),s("\n"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),s("div")]),a("span",{class:"token punctuation"},">")]),s("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557013875-26890"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"<div>\n    <span>2222</span>\n</div>\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557013875-26890","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),E=a("p",null,[a("img",{src:"https://gitee.com/artiely/Figure-bed/raw/master/image/bVbvtvU.jpg",alt:"clipboard.png"})],-1),T=a("ul",null,[a("li",null,"先对比DIV，发现两个DIV不对等"),a("li",null,"查看DIV的子元素P、SPAN，发现不对等"),a("li",null,"查看P、SPAN没有子元素，则移除P，增加SPAN")],-1),$=a("p",null,[a("img",{src:"https://gitee.com/artiely/Figure-bed/raw/master/image/bVbvtwL.jpg",alt:"clipboard.png"})],-1),D=a("p",null,"现在我们来看看在进行替换",-1),I=a("h4",{id:"对比节点函数"},[a("a",{class:"header-anchor",href:"#对比节点函数","aria-hidden":"true"},"#"),s(" 对比节点函数")],-1),P=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"function"),s(),a("span",{class:"token function"},"patch"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[s("oldVnode"),a("span",{class:"token punctuation"},","),s(" vnode")]),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n  "),a("span",{class:"token comment"},"// 对比是否相等"),s("\n  "),a("span",{class:"token keyword"},"if"),s(),a("span",{class:"token punctuation"},"("),a("span",{class:"token function"},"sameVnode"),a("span",{class:"token punctuation"},"("),s("oldVnode"),a("span",{class:"token punctuation"},","),s(" vnode"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n    "),a("span",{class:"token function"},"patchVnode"),a("span",{class:"token punctuation"},"("),s("oldVnode"),a("span",{class:"token punctuation"},","),s(" vnode"),a("span",{class:"token punctuation"},")"),s("\n  "),a("span",{class:"token punctuation"},"}"),s(),a("span",{class:"token keyword"},"else"),s(),a("span",{class:"token punctuation"},"{"),s("\n    "),a("span",{class:"token keyword"},"const"),s(" oEl "),a("span",{class:"token operator"},"="),s(" oldVnode"),a("span",{class:"token punctuation"},"."),s("el "),a("span",{class:"token comment"},"// 当前oldVnode对应的真实元素节点"),s("\n    "),a("span",{class:"token keyword"},"let"),s(" parentEle "),a("span",{class:"token operator"},"="),s(" api"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"parentNode"),a("span",{class:"token punctuation"},"("),s("oEl"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token comment"},"// 父元素"),s("\n\n    "),a("span",{class:"token function"},"createELe"),a("span",{class:"token punctuation"},"("),s("vnode"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token comment"},"// 为vnode生成新的元素"),s("\n\n    "),a("span",{class:"token keyword"},"if"),s(),a("span",{class:"token punctuation"},"("),s("parentEle "),a("span",{class:"token operator"},"!=="),s(),a("span",{class:"token keyword"},"null"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n      api"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"insertBefore"),a("span",{class:"token punctuation"},"("),s("parentEle"),a("span",{class:"token punctuation"},","),s(" vnode"),a("span",{class:"token punctuation"},"."),s("el"),a("span",{class:"token punctuation"},","),s(" api"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"nextSibling"),a("span",{class:"token punctuation"},"("),s("oEl"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token comment"},"// 将新的元素添加到父元素中"),s("\n      api"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"removeChild"),a("span",{class:"token punctuation"},"("),s("parentEle"),a("span",{class:"token punctuation"},","),s(" oldVnode"),a("span",{class:"token punctuation"},"."),s("el"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token comment"},"// 移除以前的元素"),s("\n    "),a("span",{class:"token punctuation"},"}"),s("\n  "),a("span",{class:"token punctuation"},"}"),s("\n\n  "),a("span",{class:"token keyword"},"return"),s(" vnode\n"),a("span",{class:"token punctuation"},"}"),s("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557013875-26320"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"function patch(oldVnode, vnode) {\n  // 对比是否相等\n  if (sameVnode(oldVnode, vnode)) {\n    patchVnode(oldVnode, vnode)\n  } else {\n    const oEl = oldVnode.el // 当前oldVnode对应的真实元素节点\n    let parentEle = api.parentNode(oEl) // 父元素\n\n    createELe(vnode) // 为vnode生成新的元素\n\n    if (parentEle !== null) {\n      api.insertBefore(parentEle, vnode.el, api.nextSibling(oEl)) // 将新的元素添加到父元素中\n      api.removeChild(parentEle, oldVnode.el) // 移除以前的元素\n    }\n  }\n\n  return vnode\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557013875-26320","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br")])],-1),N=a("h4",{id:"判断两者是否相同函数"},[a("a",{class:"header-anchor",href:"#判断两者是否相同函数","aria-hidden":"true"},"#"),s(" 判断两者是否相同函数")],-1),M=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"function"),s(),a("span",{class:"token function"},"sameVnode"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[s("a"),a("span",{class:"token punctuation"},","),s(" b")]),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n  "),a("span",{class:"token keyword"},"return"),s(),a("span",{class:"token punctuation"},"("),s("\n    a"),a("span",{class:"token punctuation"},"."),s("key "),a("span",{class:"token operator"},"==="),s(" b"),a("span",{class:"token punctuation"},"."),s("key "),a("span",{class:"token operator"},"&&"),s(),a("span",{class:"token comment"},"// 对比key"),s("\n    a"),a("span",{class:"token punctuation"},"."),s("tag "),a("span",{class:"token operator"},"==="),s(" b"),a("span",{class:"token punctuation"},"."),s("tag "),a("span",{class:"token operator"},"&&"),s(),a("span",{class:"token comment"},"// 对比标签名"),s("\n    a"),a("span",{class:"token punctuation"},"."),s("isComment "),a("span",{class:"token operator"},"==="),s(" b"),a("span",{class:"token punctuation"},"."),s("isComment "),a("span",{class:"token operator"},"&&"),s(),a("span",{class:"token comment"},"// 是否为注释节点"),s("\n    "),a("span",{class:"token function"},"isDef"),a("span",{class:"token punctuation"},"("),s("a"),a("span",{class:"token punctuation"},"."),s("data"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token operator"},"==="),s(),a("span",{class:"token function"},"isDef"),a("span",{class:"token punctuation"},"("),s("b"),a("span",{class:"token punctuation"},"."),s("data"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token operator"},"&&"),s(),a("span",{class:"token comment"},"// 是否定义了data，或者其他属性"),s("\n    "),a("span",{class:"token function"},"sameInputType"),a("span",{class:"token punctuation"},"("),s("a"),a("span",{class:"token punctuation"},","),s(" b"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token comment"},"//判断是当<Input>时 是否type相同"),s("\n  "),a("span",{class:"token punctuation"},")"),s("\n"),a("span",{class:"token punctuation"},"}"),s("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557013875-97154"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"function sameVnode(a, b) {\n  return (\n    a.key === b.key && // 对比key\n    a.tag === b.tag && // 对比标签名\n    a.isComment === b.isComment && // 是否为注释节点\n    isDef(a.data) === isDef(b.data) && // 是否定义了data，或者其他属性\n    sameInputType(a, b) //判断是当<Input>时 是否type相同\n  )\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557013875-97154","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1);c.render=function(t,a,s,o,c,A){return n(),e("div",null,[l,i,p,r,u,d,m,k,b,h,y,v,f,g,C,x,w,_,j,V,E,T,$,D,I,P,N,M])};export default c;export{o as __pageData};
