import{o as n,c as t,f as e,a,x as s}from"./app.b304d650.js";const c='{"title":"Electron 应用操作数据之nedb数据库","description":"","frontmatter":{"title":"Electron 应用操作数据之nedb数据库","tag":["electron","nodejs","nedb"],"author":"Artiely","date":"2018-7-11","cover":"https://gitee.com/artiely/Figure-bed/raw/master/images/20200315165303.png","base64":"ffb00e"},"headers":[{"level":2,"title":"Electron 应用操作数据的几种方法：","slug":"electron-应用操作数据的几种方法"},{"level":2,"title":"读写本地文件","slug":"读写本地文件"},{"level":2,"title":"Nedb 数据库文档：","slug":"nedb-数据库文档"},{"level":2,"title":"使用案例","slug":"使用案例"},{"level":2,"title":"在vue项目中使用","slug":"在vue项目中使用"},{"level":2,"title":"在vue的组件里面实现数据的增加 修改 删除 显示","slug":"在vue的组件里面实现数据的增加-修改-删除-显示"}],"relativePath":"post/2018/2018-7-11-electron-nedb.md","lastUpdated":1629110798710}',o={},i=e('',8),l=a("pre",null,[a("code",null,"https://github.com/louischatriot/nedb\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558753283-44939"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"https://github.com/louischatriot/nedb\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558753283-44939","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])],-1),d=a("p",null,"nedb数据库和mongodb数据库的操作方法几乎一模一样。",-1),p=a("h2",{id:"使用案例"},[a("a",{class:"header-anchor",href:"#使用案例","aria-hidden":"true"},"#"),s(" 使用案例")],-1),u=a("p",null,"假设我们想为我们的应用程序提供本地的数据库存储。在这个例子中，我们将用 nedb 作为演示。",-1),r=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[s("yarn add nedb # 或 npm install nedb "),a("span",{class:"token operator"},"--"),s("save\nsrc"),a("span",{class:"token operator"},"/"),s("renderer"),a("span",{class:"token operator"},"/"),s("datastore"),a("span",{class:"token punctuation"},"."),s("js\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558753283-79896"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"yarn add nedb # 或 npm install nedb --save\nsrc/renderer/datastore.js\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558753283-79896","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br")])],-1),m=a("p",null,"这里，我们设置 NeDB 并将其指向我们的 userData 目录。这个空间专门为我们的应用程序所保留，所以，我们可以确信，其他程序 或 与其他用户的交互不应该篡改这个文件空间。至此，我们可以在 renderer 进程中导入 datastore.js 并使用它。",-1),y=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"import"),s(" Datastore "),a("span",{class:"token keyword"},"from"),s(),a("span",{class:"token string"},"'nedb'"),s("\n"),a("span",{class:"token keyword"},"import"),s(" path "),a("span",{class:"token keyword"},"from"),s(),a("span",{class:"token string"},"'path'"),s("\n"),a("span",{class:"token keyword"},"import"),s(),a("span",{class:"token punctuation"},"{"),s(" remote "),a("span",{class:"token punctuation"},"}"),s(),a("span",{class:"token keyword"},"from"),s(),a("span",{class:"token string"},"'electron'"),s("\n\n"),a("span",{class:"token keyword"},"export"),s(),a("span",{class:"token keyword"},"default"),s(),a("span",{class:"token keyword"},"new"),s(),a("span",{class:"token class-name"},"Datastore"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),s("\n  autoload"),a("span",{class:"token operator"},":"),s(),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},","),s("\n  filename"),a("span",{class:"token operator"},":"),s(" path"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"join"),a("span",{class:"token punctuation"},"("),s("remote"),a("span",{class:"token punctuation"},"."),s("app"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"getPath"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'userData'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},","),s(),a("span",{class:"token string"},"'/data.db'"),a("span",{class:"token punctuation"},")"),s("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),s("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558753283-88384"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"import Datastore from 'nedb'\nimport path from 'path'\nimport { remote } from 'electron'\n\nexport default new Datastore({\n  autoload: true,\n  filename: path.join(remote.app.getPath('userData'), '/data.db')\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558753283-88384","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br")])],-1),b=a("p",null,[a("code",null,"src/renderer/main.js")],-1),k=a("h2",{id:"在vue项目中使用"},[a("a",{class:"header-anchor",href:"#在vue项目中使用","aria-hidden":"true"},"#"),s(" 在vue项目中使用")],-1),h=a("p",null,"为了更进一步，我们可以将数据存储导入到 src/renderer/main.js 里，并将其附加到 Vue 的 原型 (prototype) 上。通过在所有组件文件中使用 this.$db，我们现在可以访问数据存储的 API。",-1),f=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"import"),s(" db "),a("span",{class:"token keyword"},"from"),s(),a("span",{class:"token string"},"'./datastore'"),s("\n\n"),a("span",{class:"token comment"},"/* 其它代码 */"),s("\n\n"),a("span",{class:"token class-name"},"Vue"),a("span",{class:"token punctuation"},"."),s("prototype"),a("span",{class:"token punctuation"},"."),s("$db "),a("span",{class:"token operator"},"="),s(" db\n\t\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558753283-60420"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"import db from './datastore'\n\n/* 其它代码 */\n\nVue.prototype.$db = db\n\t\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558753283-60420","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),v=a("h2",{id:"在vue的组件里面实现数据的增加-修改-删除-显示"},[a("a",{class:"header-anchor",href:"#在vue的组件里面实现数据的增加-修改-删除-显示","aria-hidden":"true"},"#"),s(" 在vue的组件里面实现数据的增加 修改 删除 显示")],-1),C=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),s("$db"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"insert"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),s("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),s("\n\n"),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),s("$db"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"find"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),s("\n    "),a("span",{class:"token comment"},"//获取查询的数据"),s("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),s("\n\n"),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),s("$db"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"update"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),s("条件"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),a("span",{class:"token punctuation"},"{"),s("$set"),a("span",{class:"token operator"},":"),a("span",{class:"token punctuation"},"{"),s("更改的数据"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),s("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),s("\n\n"),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),s("$db"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"remove"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),s("条件"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),a("span",{class:"token punctuation"},"{"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),s("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),s("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558753283-42603"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"this.$db.insert({},function(){\n})\n\nthis.$db.find({},function(){\n    //获取查询的数据\n})\n\nthis.$db.update({条件},{$set:{更改的数据}},function(){\n})\n\nthis.$db.remove({条件},{},function(){\n})\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558753283-42603","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br")])],-1);o.render=function(e,a,s,c,o,g){return n(),t("div",null,[i,l,d,p,u,r,m,y,b,k,h,f,v,C])};export default o;export{c as __pageData};
