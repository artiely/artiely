import{o as n,c as t,f as e,a as s,x as a}from"./app.5f3fb606.js";const c='{"title":"NoSQL数据库","description":"","frontmatter":{"title":"NoSQL数据库","tag":["redis","memcached","mongoDb"],"author":"Artiely","date":"2019-8-14","cover":"https://gitee.com/artiely/Figure-bed/raw/master/images/20200315150611.png","base64":"323d47"},"headers":[{"level":2,"title":"介绍","slug":"介绍"},{"level":3,"title":"主要内容","slug":"主要内容"},{"level":3,"title":"学习目标","slug":"学习目标"},{"level":3,"title":"NoSQL主要应用场景","slug":"nosql主要应用场景"},{"level":2,"title":"第一章 Redis","slug":"第一章-redis"},{"level":3,"title":"历史与发展","slug":"历史与发展"},{"level":3,"title":"特点","slug":"特点"},{"level":3,"title":"Redis安装","slug":"redis安装"},{"level":3,"title":"redis命令行客户端","slug":"redis命令行客户端"},{"level":3,"title":"Redis数据类型","slug":"redis数据类型"},{"level":3,"title":"散列类型","slug":"散列类型"},{"level":3,"title":"列表类型","slug":"列表类型"},{"level":3,"title":"集合类型","slug":"集合类型"},{"level":3,"title":"有序集合类型","slug":"有序集合类型"},{"level":2,"title":"第二章 redis进阶与实战","slug":"第二章-redis进阶与实战"},{"level":3,"title":"进阶","slug":"进阶"},{"level":3,"title":"nodejs操作redis数据库","slug":"nodejs操作redis数据库"},{"level":2,"title":"第三章 memcached","slug":"第三章-memcached"},{"level":3,"title":"介绍","slug":"介绍-6"},{"level":3,"title":"安装","slug":"安装-1"},{"level":3,"title":"API","slug":"api"},{"level":2,"title":"第四章 mongoDB","slug":"第四章-mongodb"},{"level":3,"title":"介绍","slug":"介绍-7"},{"level":3,"title":"应用场景","slug":"应用场景"},{"level":3,"title":"安装","slug":"安装-2"},{"level":3,"title":"增删改查","slug":"增删改查"},{"level":2,"title":"第五章 Egg + Redis + MongoDb实现登录流程( 补充 )","slug":"第五章-egg-redis-mongodb实现登录流程-补充"},{"level":3,"title":"项目架构图","slug":"项目架构图"},{"level":3,"title":"目标","slug":"目标"},{"level":3,"title":"cookie 和 session是如何维持登录的？","slug":"cookie-和-session是如何维持登录的"},{"level":3,"title":"业务流程","slug":"业务流程"},{"level":3,"title":"实现代码","slug":"实现代码"}],"relativePath":"post/2019/2019-8-14-nosql.md","lastUpdated":1629110829974}',o={},i=e('',26),l=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[a("post"),s("span",{class:"token punctuation"},"."),a("titile "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token string"},"'hello'"),a("\npost"),s("span",{class:"token punctuation"},"."),a("content "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token string"},"'balabala'"),a("\npost"),s("span",{class:"token punctuation"},"."),a("views "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"0"),a("\npost"),s("span",{class:"token punctuation"},"."),a("tags "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"["),s("span",{class:"token string"},"'php'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'java'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'nodejs'"),s("span",{class:"token punctuation"},"]"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998317-59275"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"post.titile = 'hello'\npost.content = 'balabala'\npost.views = 0\npost.tags = ['php', 'java', 'nodejs']\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998317-59275","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),p=e('',17),d=s("div",{class:"language-sql line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"SELECT"),a(" title "),s("span",{class:"token keyword"},"FROM"),a(" posts "),s("span",{class:"token keyword"},"WHERE"),a(" id"),s("span",{class:"token operator"},"="),s("span",{class:"token number"},"1"),a(),s("span",{class:"token keyword"},"LIMIT"),a(),s("span",{class:"token number"},"1"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998317-30887"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"SELECT title FROM posts WHERE id=1 LIMIT 1\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998317-30887","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),r=s("p",null,"redis这么读",-1),u=s("div",{class:"language-sh line-numbers-mode"},[s("pre",null,[s("code",null,"HGET post:1 title\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998321-76816"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"HGET post:1 title\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998321-76816","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),m=s("p",null,"其中HGET就是一个命令。Redis提供了一百多个命令（如图1-2所示），听起来很多，但是常用的却只有十几个，并且每个命令都很容易记忆，其实比SQL语句要简单很多。",-1),y=s("p",null,[s("img",{src:"https://gitee.com/artiely/Figure-bed/raw/master/images/20200313155700.png",alt:"image-20190609121349841"})],-1),b=s("ol",{start:"2"},[s("li",null,"Redis使用C语言开发，代码量只有3万多行。这降低了用户通过修改Redis源代码来使之更适合自己项目需要的门槛。对于希望“榨干”数据库性能的开发者而言，这无疑是一个很大的吸引力。")],-1),k=s("h3",{id:"redis安装"},[s("a",{class:"header-anchor",href:"#redis安装","aria-hidden":"true"},"#"),a(" Redis安装")],-1),h=s("blockquote",null,[s("p",null,[a("“纸上得来终觉浅，绝知此事要躬行。”"),s("br"),a(" ——陆游《冬夜读书示子聿》")])],-1),f=s("ul",null,[s("li",null,"Mac OS")],-1),g=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("brew "),s("span",{class:"token function"},"install"),a(" redis\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998321-83169"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"brew install redis\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998321-83169","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),C=s("blockquote",null,[s("p",null,"Brew 就是 homebrew")],-1),v=s("h4",{id:"启动"},[s("a",{class:"header-anchor",href:"#启动","aria-hidden":"true"},"#"),a(" 启动")],-1),x=s("div",{class:"language-"},[s("pre",null,[s("code",null,"redis-server\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-2360"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis-server\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-2360","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),E=s("p",null,"默认端口6379,修改端口",-1),w=s("div",{class:"language-"},[s("pre",null,[s("code",null,"redis-server --port 6389\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-77550"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis-server --port 6389\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-77550","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),T=s("h4",{id:"初始化配置文件"},[s("a",{class:"header-anchor",href:"#初始化配置文件","aria-hidden":"true"},"#"),a(" 初始化配置文件")],-1),I=s("p",null,[a("每次redis服务启动的时候都会读取 "),s("code",null,"redis.conf")],-1),R=s("p",null,[a("mac os的路径在"),s("code",null,"/usr/local/etc/redis.conf")],-1),$=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"# Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程"),a("\n"),s("span",{class:"token comment"},"# 启用守护进程后，Redis会把pid写到一个pidfile中，在/var/run/redis.pid"),a("\ndaemonize no\n\n"),s("span",{class:"token comment"},"# 当Redis以守护进程方式运行时，Redis默认会把pid写入/var/run/redis.pid文件，可以通过pidfile指定"),a("\npidfile /var/run/redis.pid\n\n"),s("span",{class:"token comment"},"# 指定Redis监听端口，默认端口为6379"),a("\n"),s("span",{class:"token comment"},"# 如果指定0端口，表示Redis不监听TCP连接"),a("\nport "),s("span",{class:"token number"},"6379"),a("\n\n"),s("span",{class:"token comment"},"# 绑定的主机地址"),a("\n"),s("span",{class:"token comment"},"# 你可以绑定单一接口，如果没有绑定，所有接口都会监听到来的连接"),a("\n"),s("span",{class:"token builtin class-name"},"bind"),a(),s("span",{class:"token number"},"127.0"),a(".0.1\n"),s("span",{class:"token comment"},"# 也就是本机"),a("\n\n"),s("span",{class:"token comment"},"# 当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能"),a("\n"),s("span",{class:"token function"},"timeout"),a(),s("span",{class:"token number"},"0"),a("\n\n"),s("span",{class:"token comment"},"# 指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose"),a("\n"),s("span",{class:"token comment"},"# debug (很多信息, 对开发／测试比较有用)"),a("\n"),s("span",{class:"token comment"},"# verbose (many rarely useful info, but not a mess like the debug level)"),a("\n"),s("span",{class:"token comment"},"# notice (moderately verbose, what you want in production probably)"),a("\n"),s("span",{class:"token comment"},"# warning (only very important / critical messages are logged)"),a("\nloglevel verbose\n\n"),s("span",{class:"token comment"},"# 日志记录方式，默认为标准输出，如果配置为redis为守护进程方式运行，而这里又配置为标准输出，则日志将会发送给/dev/null"),a("\nlogfile stdout\n\n"),s("span",{class:"token comment"},"# 设置数据库的数量，默认数据库为0，可以使用select <dbid>命令在连接上指定数据库id"),a("\n"),s("span",{class:"token comment"},"# dbid是从0到‘databases’-1的数目"),a("\ndatabases "),s("span",{class:"token number"},"16"),a("\n\n"),s("span",{class:"token comment"},"################################ SNAPSHOTTING  #################################"),a("\n"),s("span",{class:"token comment"},"# 指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合"),a("\n"),s("span",{class:"token comment"},"# Save the DB on disk:"),a("\n"),s("span",{class:"token comment"},"#"),a("\n"),s("span",{class:"token comment"},"#   save <seconds> <changes>"),a("\n"),s("span",{class:"token comment"},"#"),a("\n"),s("span",{class:"token comment"},"#   Will save the DB if both the given number of seconds and the given"),a("\n"),s("span",{class:"token comment"},"#   number of write operations against the DB occurred."),a("\n"),s("span",{class:"token comment"},"#"),a("\n"),s("span",{class:"token comment"},"#   满足以下条件将会同步数据:"),a("\n"),s("span",{class:"token comment"},"#   900秒（15分钟）内有1个更改"),a("\n"),s("span",{class:"token comment"},"#   300秒（5分钟）内有10个更改"),a("\n"),s("span",{class:"token comment"},"#   60秒内有10000个更改"),a("\n"),s("span",{class:"token comment"},"#   Note: 可以把所有“save”行注释掉，这样就取消同步操作了"),a("\n\nsave "),s("span",{class:"token number"},"900"),a(),s("span",{class:"token number"},"1"),a("\nsave "),s("span",{class:"token number"},"300"),a(),s("span",{class:"token number"},"10"),a("\nsave "),s("span",{class:"token number"},"60"),a(),s("span",{class:"token number"},"10000"),a("\n\n"),s("span",{class:"token comment"},"# 指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大"),a("\nrdbcompression "),s("span",{class:"token function"},"yes"),a("\n\n"),s("span",{class:"token comment"},"# 指定本地数据库文件名，默认值为dump.rdb"),a("\ndbfilename dump.rdb\n\n"),s("span",{class:"token comment"},"# 工作目录."),a("\n"),s("span",{class:"token comment"},"# 指定本地数据库存放目录，文件名由上一个dbfilename配置项指定"),a("\n"),s("span",{class:"token comment"},"# "),a("\n"),s("span",{class:"token comment"},"# Also the Append Only File will be created inside this directory."),a("\n"),s("span",{class:"token comment"},"# "),a("\n"),s("span",{class:"token comment"},"# 注意，这里只能指定一个目录，不能指定文件名"),a("\n"),s("span",{class:"token function"},"dir"),a(" ./\n\n\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-53277"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程\n# 启用守护进程后，Redis会把pid写到一个pidfile中，在/var/run/redis.pid\ndaemonize no\n\n# 当Redis以守护进程方式运行时，Redis默认会把pid写入/var/run/redis.pid文件，可以通过pidfile指定\npidfile /var/run/redis.pid\n\n# 指定Redis监听端口，默认端口为6379\n# 如果指定0端口，表示Redis不监听TCP连接\nport 6379\n\n# 绑定的主机地址\n# 你可以绑定单一接口，如果没有绑定，所有接口都会监听到来的连接\nbind 127.0.0.1\n# 也就是本机\n\n# 当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能\ntimeout 0\n\n# 指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose\n# debug (很多信息, 对开发／测试比较有用)\n# verbose (many rarely useful info, but not a mess like the debug level)\n# notice (moderately verbose, what you want in production probably)\n# warning (only very important / critical messages are logged)\nloglevel verbose\n\n# 日志记录方式，默认为标准输出，如果配置为redis为守护进程方式运行，而这里又配置为标准输出，则日志将会发送给/dev/null\nlogfile stdout\n\n# 设置数据库的数量，默认数据库为0，可以使用select <dbid>命令在连接上指定数据库id\n# dbid是从0到‘databases’-1的数目\ndatabases 16\n\n################################ SNAPSHOTTING  #################################\n# 指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合\n# Save the DB on disk:\n#\n#   save <seconds> <changes>\n#\n#   Will save the DB if both the given number of seconds and the given\n#   number of write operations against the DB occurred.\n#\n#   满足以下条件将会同步数据:\n#   900秒（15分钟）内有1个更改\n#   300秒（5分钟）内有10个更改\n#   60秒内有10000个更改\n#   Note: 可以把所有“save”行注释掉，这样就取消同步操作了\n\nsave 900 1\nsave 300 10\nsave 60 10000\n\n# 指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大\nrdbcompression yes\n\n# 指定本地数据库文件名，默认值为dump.rdb\ndbfilename dump.rdb\n\n# 工作目录.\n# 指定本地数据库存放目录，文件名由上一个dbfilename配置项指定\n# \n# Also the Append Only File will be created inside this directory.\n# \n# 注意，这里只能指定一个目录，不能指定文件名\ndir ./\n\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-53277","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br"),s("span",{class:"line-number"},"22"),s("br"),s("span",{class:"line-number"},"23"),s("br"),s("span",{class:"line-number"},"24"),s("br"),s("span",{class:"line-number"},"25"),s("br"),s("span",{class:"line-number"},"26"),s("br"),s("span",{class:"line-number"},"27"),s("br"),s("span",{class:"line-number"},"28"),s("br"),s("span",{class:"line-number"},"29"),s("br"),s("span",{class:"line-number"},"30"),s("br"),s("span",{class:"line-number"},"31"),s("br"),s("span",{class:"line-number"},"32"),s("br"),s("span",{class:"line-number"},"33"),s("br"),s("span",{class:"line-number"},"34"),s("br"),s("span",{class:"line-number"},"35"),s("br"),s("span",{class:"line-number"},"36"),s("br"),s("span",{class:"line-number"},"37"),s("br"),s("span",{class:"line-number"},"38"),s("br"),s("span",{class:"line-number"},"39"),s("br"),s("span",{class:"line-number"},"40"),s("br"),s("span",{class:"line-number"},"41"),s("br"),s("span",{class:"line-number"},"42"),s("br"),s("span",{class:"line-number"},"43"),s("br"),s("span",{class:"line-number"},"44"),s("br"),s("span",{class:"line-number"},"45"),s("br"),s("span",{class:"line-number"},"46"),s("br"),s("span",{class:"line-number"},"47"),s("br"),s("span",{class:"line-number"},"48"),s("br"),s("span",{class:"line-number"},"49"),s("br"),s("span",{class:"line-number"},"50"),s("br"),s("span",{class:"line-number"},"51"),s("br"),s("span",{class:"line-number"},"52"),s("br"),s("span",{class:"line-number"},"53"),s("br"),s("span",{class:"line-number"},"54"),s("br"),s("span",{class:"line-number"},"55"),s("br"),s("span",{class:"line-number"},"56"),s("br"),s("span",{class:"line-number"},"57"),s("br"),s("span",{class:"line-number"},"58"),s("br"),s("span",{class:"line-number"},"59"),s("br"),s("span",{class:"line-number"},"60"),s("br"),s("span",{class:"line-number"},"61"),s("br"),s("span",{class:"line-number"},"62"),s("br"),s("span",{class:"line-number"},"63"),s("br"),s("span",{class:"line-number"},"64"),s("br"),s("span",{class:"line-number"},"65"),s("br"),s("span",{class:"line-number"},"66"),s("br"),s("span",{class:"line-number"},"67"),s("br")])],-1),S=s("h4",{id:"redis-cli简易使用"},[s("a",{class:"header-anchor",href:"#redis-cli简易使用","aria-hidden":"true"},"#"),a(" redis-cli简易使用")],-1),N=s("p",null,"类似node命令，交互式命令行客户端。",-1),A=s("div",{class:"language-"},[s("pre",null,[s("code",null,"redis-cli\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-37678"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis-cli\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-37678","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),j=s("p",null,[s("strong",null,"关闭连接")],-1),_=s("p",null,"考虑到Redis有可能正在将内存中的数据同步到硬盘中，强行终止Redis进程可能会导致数据丢失。正确停止Redis的方式应该是向Redis发送SHUTDOWN命令，方法为：",-1),D=s("div",{class:"language-"},[s("pre",null,[s("code",null,"SHUTDOWN\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-36582"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"SHUTDOWN\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-36582","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),P=s("h3",{id:"redis命令行客户端"},[s("a",{class:"header-anchor",href:"#redis命令行客户端","aria-hidden":"true"},"#"),a(" redis命令行客户端")],-1),B=s("p",null,"redis-cli执行时会自动按照默认配置（服务器地址为127.0.0.1，端口号为6379）连接Redis，通过-h和-p参数可以自定义地址和端口号：",-1),O=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis-cli -h "),s("span",{class:"token number"},"127.0"),a(".0.1 -p "),s("span",{class:"token number"},"6379"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-81804"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis-cli -h 127.0.0.1 -p 6379\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-81804","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),F=s("h4",{id:"ex-2"},[s("a",{class:"header-anchor",href:"#ex-2","aria-hidden":"true"},"#"),a(" ex:")],-1),L=s("ul",null,[s("li",null,[s("p",null,"ping"),s("div",{class:"language-"},[s("pre",null,[s("code",null,"PING\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-67652"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"PING\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-67652","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])])]),s("li",null,[s("p",null,"Echo hi"),s("div",{class:"language-"},[s("pre",null,[s("code",null,"ECHO hi\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-40041"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"ECHO hi\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-40041","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])])])],-1),M=e('',12),q=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("incr abc\n"),s("span",{class:"token builtin class-name"},"set"),a(" abc "),s("span",{class:"token number"},"20"),a("\nincr abc\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-12040"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"incr abc\nset abc 20\nincr abc\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-12040","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br")])],-1),U=s("h5",{id:"字符串回复"},[s("a",{class:"header-anchor",href:"#字符串回复","aria-hidden":"true"},"#"),a(" 字符串回复")],-1),G=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token number"},"127.0"),a(".0.1:637"),s("span",{class:"token operator"},[s("span",{class:"token file-descriptor important"},"9"),a(">")]),a(" get foo\n"),s("span",{class:"token punctuation"},"("),a("nil"),s("span",{class:"token punctuation"},")"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-28932"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"127.0.0.1:6379> get foo\n(nil)\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-28932","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),Z=s("h5",{id:"多行字符串回复"},[s("a",{class:"header-anchor",href:"#多行字符串回复","aria-hidden":"true"},"#"),a(" 多行字符串回复")],-1),H=s("div",{class:"language-"},[s("pre",null,[s("code",null,"127.0.0.1:6379> keys *\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-66804"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"127.0.0.1:6379> keys *\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-66804","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),V=s("h4",{id:"配置"},[s("a",{class:"header-anchor",href:"#配置","aria-hidden":"true"},"#"),a(" 配置")],-1),Y=s("p",null,[a("也可以通过cli的方式去修改"),s("code",null,"/usr/local/etc/redis.conf"),a("中的配置")],-1),K=s("div",{class:"language-"},[s("pre",null,[s("code",null,"config set loglevel warning\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-4303"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"config set loglevel warning\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-4303","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),X=s("h4",{id:"多数据库"},[s("a",{class:"header-anchor",href:"#多数据库","aria-hidden":"true"},"#"),a(" 多数据库")],-1),W=s("p",null,[a("而实际上一个Redis实例提供了多个用来存储数据的字典，客户端可以指定将数据存储在哪个字典中。这与我们熟知的在一个关系数据库实例中可以创建多个数据库类似，所以可以将其中的每个字典都理解成一个独立的数据库。"),s("br"),a(" 每个数据库对外都是以一个从0开始的递增数字命名，Redis默认支持16个数据库，可以通过配置参数databases来修改这一数字。客户端与Redis建立连接后会自动选择0号数据库，不过可以随时使用SELECT命令更换数据库，如要选择1号数据库：")],-1),Q=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a("SELECT "),s("span",{class:"token number"},"1"),a("\nOK\nredis "),s("span",{class:"token punctuation"},"["),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token operator"},">"),a("GET foo\n"),s("span",{class:"token punctuation"},"("),a("nil"),s("span",{class:"token punctuation"},")"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-99000"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis>SELECT 1\nOK\nredis [1]>GET foo\n(nil)\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-99000","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),J=s("p",null,[a("然而这些以数字命名的数据库又与我们理解的数据库有所区别。首先Redis不支持自定义数据库的名字，每个数据库都以编号命名，开发者必须自己记录哪些数据库存储了哪些数据。另外Redis也不支持为每个数据库己记录哪些数据库存储了哪些数据。**另外Redis也不支持为每个数据库设置不同的访问密码，所以一个客户端要么可以访问全部数据库，要么连一个数据库也没有权限访问。**最重要的一点是多个数据库之间并不是完全隔离的，比如FLUSHALL命令可以清空一个Redis实例中所有数据库中的数据。综上所述，这些数据库更像是一种命名空间，而不适宜存储不同应用程序的数据。"),s("strong",null,"比如可以使用0号数据库存储某个应用生产环境中的数据，使用1号数据库存储测试环境中的数据，但不适宜使用0号数据库存储A应用的数据而使用1号数据库存储B应用的数据，不同的应用应该使用不同的Redis实例存储数据"),a("。由于redis非常轻量级，一个空Redis实例占用的内存只有1MB左右，所以不用担心多个Redis实例会额外占用很多内存。")],-1),z=s("h3",{id:"redis数据类型"},[s("a",{class:"header-anchor",href:"#redis数据类型","aria-hidden":"true"},"#"),a(" Redis数据类型")],-1),nn=s("p",null,"了解过redis基础知识后，进入真正的redis世界。",-1),tn=s("ol",null,[s("li",null,"获得符合规则的键名列表")],-1),en=s("div",{class:"language-"},[s("pre",null,[s("code",null,"KEYS pattern\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-69172"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"KEYS pattern\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-69172","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),sn=e('',11),an=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis＞SET foo "),s("span",{class:"token number"},"1"),a("\nOK\n\nredis＞TYPE foo\nstring\n\nredis＞LPUSH bar "),s("span",{class:"token number"},"1"),a("\n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"1"),a("\n\nredis＞TYPE bar\nlist\n\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-99216"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis＞SET foo 1\nOK\n\nredis＞TYPE foo\nstring\n\nredis＞LPUSH bar 1\n(integer) 1\n\nredis＞TYPE bar\nlist\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-99216","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br")])],-1),cn=e('',9),on=s("div",{class:"language-"},[s("pre",null,[s("code",null,"SET foo bar\nINCR foo\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-53903"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"SET foo bar\nINCR foo\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-53903","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),ln=s("p",null,"有人可能会想到可以借助GET和SET两个命令自己实现incr函数，伪代码如下：",-1),pn=s("ol",null,[s("li",null,"会通过 key取值"),s("li",null,"判断是否有值"),s("li",null,"如果没有就归 0， 有呢就进行+1操作")],-1),dn=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"function"),a(),s("span",{class:"token function"},"incr"),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},"$key"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n\t"),s("span",{class:"token keyword"},"var"),a(" $value "),s("span",{class:"token operator"},"="),a(" redis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"get"),s("span",{class:"token punctuation"},"("),a("$key"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n  "),s("span",{class:"token keyword"},"if"),s("span",{class:"token punctuation"},"("),s("span",{class:"token operator"},"!"),a("$value"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n     $value "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"0"),s("span",{class:"token punctuation"},";"),a("\n \t"),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token keyword"},"else"),a(),s("span",{class:"token punctuation"},"{"),a("\n    $value "),s("span",{class:"token operator"},"="),a(" $value "),s("span",{class:"token operator"},"+"),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},";"),a(),s("span",{class:"token comment"},"// $value = 5"),a("\n    "),s("span",{class:"token keyword"},"return"),a(" $value\n  "),s("span",{class:"token punctuation"},"}"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-13386"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"function incr($key) {\n\tvar $value = redis.get($key);\n  if(!$value) {\n     $value = 0;\n \t} else {\n    $value = $value + 1; // $value = 5\n    return $value\n  }\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-13386","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br")])],-1),rn=s("blockquote",null,[s("p",null,'如果 Redis 同时只连接了一个客户端，那么上面的代码没有任何问题（其实还没有加入错误处理，不过这并不是此处讨论的重点）。可当同一时间有多个客户端连接到Redis时则有可能出现竞态条件（race condition）[3] 。例如有两个客户端A 和B 都要执行我们自己实现的 incr 函数并准备将同一个键的键值递增，当它们恰好同时执行到代码第二行时二者读取到的键值是一样的，如“5”，而后它们各自将该值递增到“6”并使用 SET 命令将其赋给原键，结果虽然对键执行了两次递增操作，最终的键值却是“6”而不是预想中的“7”。这一部分跟 "事务"，举个例子： 付款与扣款，能讲整个流程的状态初始化。')],-1),un=s("h5",{id:"ex-文章访问量统计标题-正文访问量"},[s("a",{class:"header-anchor",href:"#ex-文章访问量统计标题-正文访问量","aria-hidden":"true"},"#"),a(" ex: 文章访问量统计(标题， 正文，访问量)")],-1),mn=s("p",null,"博客的一个常见的功能是统计文章的访问量，我们可以为每篇文章使用一个名为post:文章ID:page.view的键来记录文章的访问量，每次访问文章的时候使用INCR命令使相应的键值递增。",-1),yn=s("ul",null,[s("li",null,"以 post:文章id:page 存储文章信息"),s("li",null,"以post:文章id:page.view 存储访问量")],-1),bn=s("blockquote",null,[s("p",null,"Redis 对于键的命名并没有强制的要求，但比较好的实践是用“对象类型:对象ID:对象属性”来命名一个键，如使用键user:1:friends来存储ID为1的用户的好友列表。")],-1),kn=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"// 字符串 "),a("\n"),s("span",{class:"token comment"},"// 存储过程"),a("\n"),s("span",{class:"token keyword"},"var"),a(" redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'redis'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" client "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n"),s("span",{class:"token comment"},"//一些配置"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"var"),a(" $post_id "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"incr"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'post:count'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"var"),a(" $airticle "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token constant"},"JSON"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"stringify"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n    title"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'hello'"),s("span",{class:"token punctuation"},","),a("\n    content"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'world'"),s("span",{class:"token punctuation"},","),a("\n    views"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"0"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n\n"),s("span",{class:"token comment"},"// 赋值"),a("\nclient"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"set"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"post:"),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("$post_id"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token string"},":data "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("$airticle"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token comment"},"// 读取过程"),a("\n"),s("span",{class:"token keyword"},"var"),a(" airticle "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"get"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'post:1:data'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" data "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token constant"},"JSON"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"parse"),s("span",{class:"token punctuation"},"("),a("airticle"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token comment"},"// 每次访问文章 都会调用 "),a("\n"),s("span",{class:"token keyword"},"var"),a(" $post_id "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"incr"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'post:count'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998322-91871"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// 字符串 \n// 存储过程\nvar redis = require('redis');\nvar client = new redis({\n//一些配置\n});\n\nvar $post_id = client.incr('post:count');\n\nvar $airticle = JSON.stringify({\n    title: 'hello',\n    content: 'world',\n    views: 0\n})\n\n// 赋值\nclient.set(`post:${$post_id}:data ${$airticle}`);\n\n// 读取过程\nvar airticle = client.get('post:1:data');\nvar data = JSON.parse(airticle);\n\n// 每次访问文章 都会调用 \nvar $post_id = client.incr('post:count');\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998322-91871","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br"),s("span",{class:"line-number"},"22"),s("br"),s("span",{class:"line-number"},"23"),s("br"),s("span",{class:"line-number"},"24"),s("br")])],-1),hn=e('',8),fn=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" INCRBYFLOAT bar "),s("span",{class:"token number"},"2.7"),a(),s("span",{class:"token string"},'"6.7"'),a(" \nredis"),s("span",{class:"token operator"},">"),a(" INCRBYFLOAT bar 5E+4 "),s("span",{class:"token string"},'"50006.69999999999999929"'),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998323-9029"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> INCRBYFLOAT bar 2.7 "6.7" \nredis> INCRBYFLOAT bar 5E+4 "50006.69999999999999929"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998323-9029","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),gn=e('',8),Cn=s("div",{class:"language-"},[s("pre",null,[s("code",null,"MSET key1 v1 key2 v2\nMGET key1 key2\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998323-82547"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"MSET key1 v1 key2 v2\nMGET key1 key2\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998323-82547","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),vn=s("ol",{start:"7"},[s("li",null,"位操作")],-1),xn=s("p",null,[s("code",null,"GETBIT key offset")],-1),En=s("div",{class:"language-"},[s("pre",null,[s("code",null,"SET foo bar\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998323-54962"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"SET foo bar\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998323-54962","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),wn=s("p",null,"b,a,r 对应的ASCII码分别为98，97，114。转换成二进制分别为 1100010， 1100001， 1110010。",-1),Tn=s("blockquote",null,[s("p",null,"所有的文字： 英文 ，汉子，汉语，日语，符号。。。其实都是通过数字。")],-1),In=s("p",null,[s("img",{src:"https://gitee.com/artiely/Figure-bed/raw/master/images/20200313155702.png",alt:"image-20190609121432754"})],-1),Rn=s("div",{class:"language-"},[s("pre",null,[s("code",null,"GETBIT foo 0\nGETBIT foo 6\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998323-44011"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"GETBIT foo 0\nGETBIT foo 6\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998323-44011","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),$n=e('',18),Sn=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> HSET car price 500 \n(integer) 1 \nredis> HSET car name BMW \n(integer) 1 \nredis> HGET car name "BMW"\n\n\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998323-74127"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> HSET car price 500 \n(integer) 1 \nredis> HSET car name BMW \n(integer) 1 \nredis> HGET car name "BMW"\n\n\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998323-74127","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br")])],-1),Nn=s("blockquote",null,[s("p",null,"HSET 命令的方便之处在于不区分插入和更新操作，这意味着修改数据时不用事先判断字段是否存在来决定要执行的是插入操作（update）还是更新操作（insert）。当执行的是插入操作时（即之前字段不存在）HSET命令会返回1，当执行的是更新操作时（即之前字段已经存在）HSET命令会返回0。更进一步，当键本身不存在时，HSET命令还会自动建立它。")],-1),An=s("p",null,"2.获取键中所有的字段和值",-1),jn=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> HGETALL car \n1) "price" \n2) "500" \n3) "name" \n4) "BMW"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998323-82275"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> HGETALL car \n1) "price" \n2) "500" \n3) "name" \n4) "BMW"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998323-82275","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),_n=s("blockquote",null,[s("p",null,"不要担心结构不好用，在nodejs中会把返回值封装成js的object")],-1),Dn=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"hgetall"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},'"car"'),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token keyword"},"function"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("error"),s("span",{class:"token punctuation"},","),a(" car")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a(" \n\t"),s("span",{class:"token comment"},"//hgetall 方法的返回的值被封装成了 JavaScript的对象 "),a("\n\tconsole"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"log"),s("span",{class:"token punctuation"},"("),a("car"),s("span",{class:"token punctuation"},"."),a("price"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998323-94327"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis.hgetall("car", function (error, car) { \n\t//hgetall 方法的返回的值被封装成了 JavaScript的对象 \n\tconsole.log(car.price);\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998323-94327","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),Pn=s("p",null,"3.判断字段是否存在",-1),Bn=s("p",null,[s("code",null,"HEXISTS key field")],-1),On=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" HEXISTS car model \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"0"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" HSET car model C200 \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"1"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" HEXISTS car model \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"1"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998323-45909"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> HEXISTS car model \n(integer) 0 \nredis> HSET car model C200 \n(integer) 1 \nredis> HEXISTS car model \n(integer) 1\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998323-45909","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br")])],-1),Fn=s("ol",{start:"4"},[s("li",null,"增加数字")],-1),Ln=s("p",null,[s("code",null,"HINCRBY key field increment")],-1),Mn=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" HINCRBY person score "),s("span",{class:"token number"},"60"),a(" \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"60"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998323-2849"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> HINCRBY person score 60 \n(integer) 60\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998323-2849","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),qn=s("p",null,"5.删除字段",-1),Un=s("p",null,[s("code",null,"HDEL key field [field …]")],-1),Gn=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" HDEL car price \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"1"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" HDEL car price \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"0"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998323-5236"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> HDEL car price \n(integer) 1 \nredis> HDEL car price \n(integer) 0\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998323-5236","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),Zn=e('',6),Hn=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"// 散列其实就是hash  hget hset"),a("\n"),s("span",{class:"token keyword"},"var"),a(" redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'redis'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" client "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n"),s("span",{class:"token comment"},"//一些配置"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token comment"},"// # 1. 文章的赋值"),a("\n"),s("span",{class:"token comment"},"// # 自增的id "),a("\n"),s("span",{class:"token keyword"},"var"),a(" $post_id "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"incr"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'posts:count'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" $slug "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token string"},"'hello-world'"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" $title "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token string"},"'hello world'"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" $content "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token string"},"'xxxxxxxxxxxxx'"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" views "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"0"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token comment"},"// # 文章的缩略名和id互相有一个引用来维持关系  slug.to.id"),a("\n"),s("span",{class:"token comment"},"// # HSETNX 也是赋值  如果这个值已经存在 则返回0，并且赋值失败  反之返回1， 赋值成功"),a("\n"),s("span",{class:"token keyword"},"var"),a(" isSlug "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"hsetnx"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"slug.to.id "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("$slug"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token string"}," "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("$post_id"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token comment"},"// # 1.通过散列去存储文章"),a("\n"),s("span",{class:"token keyword"},"if"),s("span",{class:"token punctuation"},"("),a("isSlug "),s("span",{class:"token operator"},"==="),a(),s("span",{class:"token number"},"0"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"exit"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token keyword"},"else"),a(),s("span",{class:"token punctuation"},"{"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"hmset"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"post:"),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("$post_id"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token string"}," title "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("$title"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token string"}," content "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("$content"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token string"}," views "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("$views"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n\n"),s("span",{class:"token comment"},"// # 2. 读取文章"),a("\n"),s("span",{class:"token keyword"},"var"),a(" postID "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"hget"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'slug.to.id $slug'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a(" \n"),s("span",{class:"token keyword"},"if"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token operator"},"!"),a("postID"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"exit"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'文章不存在'"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token keyword"},"else"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"var"),a(" post "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"hgetall"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"post:"),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("postID"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("err"),s("span",{class:"token punctuation"},","),a(" data")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n        console"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"log"),s("span",{class:"token punctuation"},"("),a("data"),s("span",{class:"token punctuation"},")"),a("\n    "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n\n"),s("span",{class:"token comment"},"// # 3.修改缩略名"),a("\n"),s("span",{class:"token comment"},"// # 加入你要给id=42的文章  修改缩略名"),a("\n"),s("span",{class:"token keyword"},"var"),a(" newSlug "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token string"},"'xxx'"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" isSlugExit "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"hsetnx"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"slug.to.id "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("newSlug"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token string"}," 42"),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),a(" \n\n"),s("span",{class:"token keyword"},"if"),s("span",{class:"token punctuation"},"("),a("isSlugExit "),s("span",{class:"token operator"},"==="),a(),s("span",{class:"token number"},"0"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token function"},"exit"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'缩略名已存在，请换其它'"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token keyword"},"else"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"var"),a(" oldSlug "),s("span",{class:"token operator"},"="),a(" client "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"hget"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"post:42 slug"),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"hset"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"post:42 slug "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("newSlug"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"hdel"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"slug.to.id "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("$oldSlug"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998323-70391"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// 散列其实就是hash  hget hset\nvar redis = require('redis');\nvar client = new redis({\n//一些配置\n});\n\n// # 1. 文章的赋值\n// # 自增的id \nvar $post_id = client.incr('posts:count');\nvar $slug = 'hello-world';\nvar $title = 'hello world';\nvar $content = 'xxxxxxxxxxxxx';\nvar views = 0;\n// # 文章的缩略名和id互相有一个引用来维持关系  slug.to.id\n// # HSETNX 也是赋值  如果这个值已经存在 则返回0，并且赋值失败  反之返回1， 赋值成功\nvar isSlug = client.hsetnx(`slug.to.id ${$slug} ${$post_id}`);\n\n// # 1.通过散列去存储文章\nif(isSlug === 0) {\n    client.exit();\n} else {\n    client.hmset(`post:${$post_id} title ${$title} content ${$content} views ${$views}`)\n}\n\n// # 2. 读取文章\nvar postID = client.hget('slug.to.id $slug'); \nif (!postID) {\n    client.exit('文章不存在')\n} else {\n    var post = client.hgetall(`post:${postID}`, (err, data) => {\n        console.log(data)\n    })\n}\n\n// # 3.修改缩略名\n// # 加入你要给id=42的文章  修改缩略名\nvar newSlug = 'xxx';\nvar isSlugExit = client.hsetnx(`slug.to.id ${newSlug} 42`) \n\nif(isSlugExit === 0) {\n    exit('缩略名已存在，请换其它')\n} else {\n    var oldSlug = client = client.hget(`post:42 slug`);\n    client.hset(`post:42 slug ${newSlug}`);\n    client.hdel(`slug.to.id ${$oldSlug}`);\n}\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998323-70391","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br"),s("span",{class:"line-number"},"22"),s("br"),s("span",{class:"line-number"},"23"),s("br"),s("span",{class:"line-number"},"24"),s("br"),s("span",{class:"line-number"},"25"),s("br"),s("span",{class:"line-number"},"26"),s("br"),s("span",{class:"line-number"},"27"),s("br"),s("span",{class:"line-number"},"28"),s("br"),s("span",{class:"line-number"},"29"),s("br"),s("span",{class:"line-number"},"30"),s("br"),s("span",{class:"line-number"},"31"),s("br"),s("span",{class:"line-number"},"32"),s("br"),s("span",{class:"line-number"},"33"),s("br"),s("span",{class:"line-number"},"34"),s("br"),s("span",{class:"line-number"},"35"),s("br"),s("span",{class:"line-number"},"36"),s("br"),s("span",{class:"line-number"},"37"),s("br"),s("span",{class:"line-number"},"38"),s("br"),s("span",{class:"line-number"},"39"),s("br"),s("span",{class:"line-number"},"40"),s("br"),s("span",{class:"line-number"},"41"),s("br"),s("span",{class:"line-number"},"42"),s("br"),s("span",{class:"line-number"},"43"),s("br"),s("span",{class:"line-number"},"44"),s("br"),s("span",{class:"line-number"},"45"),s("br"),s("span",{class:"line-number"},"46"),s("br"),s("span",{class:"line-number"},"47"),s("br")])],-1),Vn=e('',16),Yn=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" LPUSH numbers "),s("span",{class:"token number"},"1"),a(" \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"1"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-17142"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> LPUSH numbers 1 \n(integer) 1\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-17142","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),Kn=e('',18),Xn=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"var"),a(" redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'redis'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" client "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token comment"},"// 配置"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"var"),a(" currentPage "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"var"),a(" listLength "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"10"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" start "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("currentPage "),s("span",{class:"token operator"},"-"),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"*"),a(" listLength"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" end "),s("span",{class:"token operator"},"="),a(" currentPage "),s("span",{class:"token operator"},"*"),a(" listLength "),s("span",{class:"token operator"},"-"),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" postIdArr "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"lrange"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"post:list "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("start"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token string"}," "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("end"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\npostIdArr"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"forEach"),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},"id"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"hgetall"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"post:"),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("id"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},"data"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n        console"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"log"),s("span",{class:"token punctuation"},"("),a("data"),s("span",{class:"token punctuation"},")"),a("\n    "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-68952"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var redis = require('redis');\nvar client = new redis({\n    // 配置\n});\n\nvar currentPage = 1;\n\nvar listLength = 10;\nvar start = (currentPage - 1) * listLength;\nvar end = currentPage * listLength - 1;\nvar postIdArr = client.lrange(`post:list ${start} ${end}`);\n\npostIdArr.forEach(id => {\n    client.hgetall(`post:${id}`, (data) => {\n        console.log(data)\n    });\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-68952","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br")])],-1),Wn=s("blockquote",null,[s("p",null,"美中不足的一点是散列类型没有类似字符串类型的 MGET命令那样可以通过一条命令同时获得多个键的键值的版本，所以对于每个文章ID都需要请求一次数据库，也就都会产生一次往返时延（round-trip delay time）[11] ，之后我们会介绍使用管道和脚本来优化这个问题。"),s("p",null,"另外使用列表类型键存储文章ID列表有以下两个问题。"),s("p",null,"（1）文章的发布时间不易修改：修改文章的发布时间不仅要修改post:文章ID中的time字段，还需要按照实际的发布时间重新排列posts:list中的元素顺序，而这一操作相对比较繁琐。"),s("p",null,"（2）当文章数量较多时访问中间的页面性能较差：前面已经介绍过，列表类型是通过链表实现的，所以当列表元素非常多时访问中间的元素效率并不高。")],-1),Qn=s("h4",{id:"ex-存储评论列表"},[s("a",{class:"header-anchor",href:"#ex-存储评论列表","aria-hidden":"true"},"#"),a(" ex: 存储评论列表")],-1),Jn=s("p",null,"在博客中还可以使用列表类型键存储文章的评论。由于博客不允许访客修改自己发表的评论，而且考虑到读取评论时需要获得评论的全部数据（评论者姓名，联系方式，评论时间和评论内容），不像文章一样有时只需要文章标题而不需要文章正文。所以适合将一条评论的各个元素序列化成字符串后作为列表类型键中的元素来存储。",-1),zn=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"var"),a(" commentsStr "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token constant"},"JSON"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"stringify"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n    author"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'xxx'"),s("span",{class:"token punctuation"},","),a("\n    time"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'xxx'"),s("span",{class:"token punctuation"},","),a("\n    content"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'xxx'"),s("span",{class:"token punctuation"},","),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n\nclient"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"lpush"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'post:id:comment'"),s("span",{class:"token punctuation"},","),a(" commentsStr"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-82384"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var commentsStr = JSON.stringify({\n    author: 'xxx',\n    time: 'xxx',\n    content: 'xxx',\n})\n\nclient.lpush('post:id:comment', commentsStr);\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-82384","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br")])],-1),nt=s("h4",{id:"命令补充-1"},[s("a",{class:"header-anchor",href:"#命令补充-1","aria-hidden":"true"},"#"),a(" 命令补充")],-1),tt=s("ol",null,[s("li",null,[s("p",null,"获得/设置指定索引的元素值"),s("p",null,[s("code",null,"LINDEX key index ")]),s("p",null,[s("code",null,"LSET key index value")])]),s("li",null,[s("p",null,"只保留列表指定片段"),s("p",null,[s("code",null,"LTRIM"),a(" 命令可以删除指定索引范围之外的所有元素，其指定列表范围的方法和LRANGE命令相同。就像这样：")]),s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> LRANGE numbers 0 -1 \n1) "1" \n2) "2" \n3) "7" \n4) "3" \nredis> LTRIM numbers 1 2 \nOK \nredis> LRANGE numbers 0 1 \n1) "2"\n2) "7"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-70175"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> LRANGE numbers 0 -1 \n1) "1" \n2) "2" \n3) "7" \n4) "3" \nredis> LTRIM numbers 1 2 \nOK \nredis> LRANGE numbers 0 1 \n1) "2"\n2) "7"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-70175","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br")])]),s("p",null,"LTRIM命令常和LPUSH命令一起使用来限制列表中元素的数量，比如记录日志时我们希望只保留最近的100条日志，则每次加入新元素时调用一次LTRIM命令即可："),s("div",{class:"language-"},[s("pre",null,[s("code",null,"LPUSH logs $newLog \nLTRIM logs 0 99\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-26529"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"LPUSH logs $newLog \nLTRIM logs 0 99\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-26529","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])])]),s("li",null,[s("p",null,"向列表中插入元素"),s("p",null,[s("code",null,"LINSERT key BEFORE|AFTER pivot value")]),s("p",null,"LINSERT 命令首先会在列表中从左到右查找值为 pivot 的元素，然后根据第二个参数是BEFORE还是AFTER来决定将value插入到该元素的前面还是后面。"),s("p",null,"LINSERT命令的返回值是插入后列表的元素个数。示例如下："),s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> LRANGE numbers 0 -1 \n1) "2" \n2) "7"\n3) "0" \nredis> LINSERT numbers AFTER 7 3 \n(integer) 4 \nredis> LRANGE numbers 0 -1 \n1) "2" \n2) "7" \n3) "3" \n4) "0" \nredis> LINSERT numbers BEFORE 2 1 \n(integer) 5 \nredis> LRANGE numbers 0 -1 \n1) "1" \n2) "2" \n3) "7" \n4) "3" \n5) "0"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-78675"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> LRANGE numbers 0 -1 \n1) "2" \n2) "7"\n3) "0" \nredis> LINSERT numbers AFTER 7 3 \n(integer) 4 \nredis> LRANGE numbers 0 -1 \n1) "2" \n2) "7" \n3) "3" \n4) "0" \nredis> LINSERT numbers BEFORE 2 1 \n(integer) 5 \nredis> LRANGE numbers 0 -1 \n1) "1" \n2) "2" \n3) "7" \n4) "3" \n5) "0"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-78675","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br")])])]),s("li",null,[s("p",null,"将元素从一个列表转到另一个列表"),s("p",null,[s("code",null,"RPOPLPUSH source destination")]),s("p",null,"RPOPLPUSH是个很有意思的命令，从名字就可以看出它的功能：先执行RPOP命令再执行LPUSH命令。RPOPLPUSH命令会先从source列表类型键的右边弹出一个元素，然后将其加入到destination列表类型键的左边，并返回这个元素的值，整个过程是原子的。"),s("blockquote",null,[s("p",null,"当把列表类型作为队列使用时，RPOPLPUSH 命令可以很直观地在多个队列中传递数据。当source和destination相同时，RPOPLPUSH命令会不断地将队尾的元素移到队首，借助这个特性我们可以实现一个网站监控系统：使用一个队列存储需要监控的网址，然后监控程序不断地使用 RPOPLPUSH 命令循环取出一个网址来测试可用性。这里使用RPOPLPUSH命令的好处在于在程序执行过程中仍然可以不断地向网址列表中加入新网址，而且整个系统容易扩展，允许多个客户端同时处理队列。")])])],-1),et=e('',7),st=s("ol",null,[s("li",null,[s("p",null,"增加/删除元素"),s("p",null,[s("code",null,"SADD key member [member …] ")]),s("p",null,[s("code",null,"SREM key member [member …]")]),s("p",null,"SADD 命令用来向集合中增加一个或多个元素，如果键不存在则会自动创建。因为在一个集合中不能有相同的元素，所以如果要加入的元素已经存在于集合中就会忽略这个元素。本命令的返回值是成功加入的元素数量（忽略的元素不计算在内）。例如："),s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a(" redis"),s("span",{class:"token operator"},">"),a(" SADD letters a \n "),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"1"),a(" \n redis"),s("span",{class:"token operator"},">"),a(" SADD letters a b c \n "),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"2"),a(" \n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-39226"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":" redis> SADD letters a \n (integer) 1 \n redis> SADD letters a b c \n (integer) 2 \n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-39226","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])]),s("p",null,"第二条SADD命令的返回值为2是因为元素“a”已经存在，所以实际上只加入了两个元素。"),s("p",null,"SREM命令用来从集合中删除一个或多个元素，并返回删除成功的个数，例如："),s("div",{class:"language-"},[s("pre",null,[s("code",null," redis> SREM letters c d \n (integer) 1 \n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-20450"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":" redis> SREM letters c d \n (integer) 1 \n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-20450","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])]),s("p",null,"由于元素“d”在集合中不存在，所以只删除了一个元素，返回值为1。")])],-1),at=s("p",null,"2．获得集合中的所有元素",-1),ct=s("p",null,[s("code",null," SMEMBERS key ")],-1),ot=s("p",null,"SMEMBERS命令会返回集合中的所有元素，例如：",-1),it=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> SMEMBERS letters \n1) "b" \n2) "a"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-70839"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> SMEMBERS letters \n1) "b" \n2) "a"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-70839","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br")])],-1),lt=s("ol",{start:"3"},[s("li",null,[s("p",null,"判断元素是否在集合中"),s("p",null,[s("code",null,"SISMEMBER key member")]),s("p",null,"判断一个元素是否在集合中是一个时间复杂度为O(1)的操作，无论集合中有多少个元素，SISMEMBER命令始终可以极快地返回结果。当值存在时判断一个元素是否在集合中是一个时间复杂度为O(1)的操作，无论集合中有多少个元素，SISMEMBER命令始终可以极快地返回结果。当值存在时 SISMEMBER命令返回1，当值不存在或键不存在时返回0，例如："),s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" SISMEMBER letters a \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"1"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" SISMEMBER letters d \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"0"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-34492"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> SISMEMBER letters a \n(integer) 1 \nredis> SISMEMBER letters d \n(integer) 0\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-34492","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])])])],-1),pt=s("p",null,"4．集合间运算",-1),dt=s("p",null,[s("code",null,"SDIFF key [key „]")],-1),rt=s("p",null,[s("code",null,"SINTER key [key „]")],-1),ut=s("p",null,[s("code",null,"SUNION key [key „]")],-1),mt=s("p",null,"接下来要介绍的3个命令都是用来进行多个集合间运算的。",-1),yt=s("p",null,"1）SDIFF命令用来对多个集合执行差集运算。集合A与集合B的差集表示为A−B，代表所有属于A且不属于B的元素构成的集合（如图3-13所示），即A−B ={x | x∈A且x∈B}。例如：",-1),bt=s("p",null,[s("img",{src:"https://gitee.com/artiely/Figure-bed/raw/master/images/20200313155708.png",alt:"image-20190611140833117"})],-1),kt=s("p",null,"{1, 2, 3} - {2, 3, 4} = {1} {2, 3, 4} - {1, 2, 3} = {4} SDIFF命令的使用方法如下：",-1),ht=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" SADD setA "),s("span",{class:"token number"},"1"),a(),s("span",{class:"token number"},"2"),a(),s("span",{class:"token number"},"3"),a(" \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"3"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" SADD setB "),s("span",{class:"token number"},"2"),a(),s("span",{class:"token number"},"3"),a(),s("span",{class:"token number"},"4"),a(" \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"3"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" SDIFF setA setB \n"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"1"'),a(" \nredis"),s("span",{class:"token operator"},">"),a(" SDIFF setB setA \n"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"4"'),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-98210"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> SADD setA 1 2 3 \n(integer) 3 \nredis> SADD setB 2 3 4 \n(integer) 3 \nredis> SDIFF setA setB \n1) "1" \nredis> SDIFF setB setA \n1) "4"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-98210","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br")])],-1),ft=s("p",null,"SDIFF命令支持同时传入多个键，例如：",-1),gt=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" SADD setC "),s("span",{class:"token number"},"2"),a(),s("span",{class:"token number"},"3"),a(" \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"2"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" SDIFF setA setB setC \n"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"1"'),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-73943"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> SADD setC 2 3 \n(integer) 2 \nredis> SDIFF setA setB setC \n1) "1"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-73943","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),Ct=s("p",null,"（2）SINTER命令用来对多个集合执行交集运算。集合A与集合B的交集表示为A ∩ B，代表所有属于A 且属于B的元素构成的集合（如图3-14所示），即A ∩ B ={x | x ∈ A 且x ∈B}。",-1),vt=s("p",null,"例如： {1, 2, 3} ∩ {2, 3, 4} = {2, 3} SINTER命令的使用方法如下：",-1),xt=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" SINTER setA setB \n"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"2"'),a(" \n"),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"3"'),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-56234"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> SINTER setA setB \n1) "2" \n2) "3"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-56234","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br")])],-1),Et=s("p",null,"SINTER命令同样支持同时传入多个键，如：",-1),wt=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" SINTER setA setB setC \n"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"2"'),a(" \n"),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"3"'),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998324-94808"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> SINTER setA setB setC \n1) "2" \n2) "3"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998324-94808","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br")])],-1),Tt=s("p",null,"（3）SUNION命令用来对多个集合执行并集运算。集合A与集合B的并集表示为A∪B，代表所有属于A 或属于B的元素构成的集合（如图3-15所示）即A∪B ={x | x∈A或x ∈B}。",-1),It=s("p",null,"例如： {1, 2, 3} ∪{2, 3, 4} = {1, 2, 3, 4}",-1),Rt=s("p",null,[s("img",{src:"https://gitee.com/artiely/Figure-bed/raw/master/images/20200313155709.png",alt:"image-20190611141307449"})],-1),$t=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" SUNION setA setB \n"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"1"'),a(" \n"),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"2"'),a(" \n"),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"3"'),a(" \n"),s("span",{class:"token number"},"4"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"4"'),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998325-43994"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> SUNION setA setB \n1) "1" \n2) "2" \n3) "3" \n4) "4"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998325-43994","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),St=s("p",null,"SUNION命令同样支持同时传入多个键，例如：",-1),Nt=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> SUNION setA setB setC \n1) "1" \n2) "2"\n3) "3" \n4) "4"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998325-92697"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> SUNION setA setB setC \n1) "1" \n2) "2"\n3) "3" \n4) "4"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998325-92697","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),At=s("h4",{id:"ex-存储文章标签"},[s("a",{class:"header-anchor",href:"#ex-存储文章标签","aria-hidden":"true"},"#"),a(" ex: 存储文章标签")],-1),jt=s("p",null,"考虑到一个文章的所有标签都是互不相同的，而且展示时对这些标签的排列顺序并没有要求，我们可以使用集合类型键存储文章标签。",-1),_t=s("p",null,"对每篇文章使用键名为post:文章ID:tags的键存储该篇文章的标签。具体操作如伪代码：",-1),Dt=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"var"),a(" redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'redis'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" client "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token comment"},"// 配置"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\nclient"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"sadd"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'post:42:tags 杂文 技术文章 java'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\nclient"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"srem"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'post:42:tags 杂文'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"var"),a(" tags "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"smembers"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'post:42:tags'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998325-97307"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var redis = require('redis');\nvar client = new redis({\n    // 配置\n});\n\nclient.sadd('post:42:tags 杂文 技术文章 java');\n\nclient.srem('post:42:tags 杂文');\n\nvar tags = client.smembers('post:42:tags');\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998325-97307","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br")])],-1),Pt=e('',11),Bt=s("div",{class:"language-sql line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"SELECT"),a(" p"),s("span",{class:"token punctuation"},"."),a("post_title "),s("span",{class:"token keyword"},"FROM"),a(" posts_tags pt"),s("span",{class:"token punctuation"},","),a(" posts p"),s("span",{class:"token punctuation"},","),a(" tags t "),s("span",{class:"token keyword"},"WHERE"),a(" pt"),s("span",{class:"token punctuation"},"."),a("tag_id "),s("span",{class:"token operator"},"="),a(" t"),s("span",{class:"token punctuation"},"."),a("tag_id "),s("span",{class:"token operator"},"AND"),a(),s("span",{class:"token punctuation"},"("),a("t"),s("span",{class:"token punctuation"},"."),a("tag_name "),s("span",{class:"token operator"},"IN"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'Java'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'MySQL'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'Redis'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"AND"),a(" p"),s("span",{class:"token punctuation"},"."),a("post_id "),s("span",{class:"token operator"},"="),a(" pt"),s("span",{class:"token punctuation"},"."),a("post_id "),s("span",{class:"token keyword"},"GROUP"),a(),s("span",{class:"token keyword"},"BY"),a(" p"),s("span",{class:"token punctuation"},"."),a("post_id "),s("span",{class:"token keyword"},"HAVING"),a(),s("span",{class:"token function"},"COUNT"),s("span",{class:"token punctuation"},"("),a("p"),s("span",{class:"token punctuation"},"."),a("post_id"),s("span",{class:"token punctuation"},")"),s("span",{class:"token operator"},"="),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998325-93204"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"SELECT p.post_title FROM posts_tags pt, posts p, tags t WHERE pt.tag_id = t.tag_id AND (t.tag_name IN ('Java', 'MySQL', 'Redis')) AND p.post_id = pt.post_id GROUP BY p.post_id HAVING COUNT(p.post_id)=3;\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998325-93204","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),Ot=e('',7),Ft=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> SMEMBERS letters \n1) "b" \n2) "a" \nredis> SCARD letters \n(integer) 2\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998326-34544"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> SMEMBERS letters \n1) "b" \n2) "a" \nredis> SCARD letters \n(integer) 2\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998326-34544","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),Lt=e('',3),Mt=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> SRANDMEMBER letters \n"a" \nredis> SRANDMEMBER letters \n"b" \nredis> SRANDMEMBER letters \n"a"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998326-75586"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> SRANDMEMBER letters \n"a" \nredis> SRANDMEMBER letters \n"b" \nredis> SRANDMEMBER letters \n"a"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998326-75586","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br")])],-1),qt=e('',22),Ut=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" ZADD scoreboard "),s("span",{class:"token number"},"89"),a(" Tom "),s("span",{class:"token number"},"67"),a(" Peter "),s("span",{class:"token number"},"100"),a(" David \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"3"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998326-18822"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> ZADD scoreboard 89 Tom 67 Peter 100 David \n(integer) 3\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998326-18822","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),Gt=s("p",null,"这时我们发现Peter的分数录入有误，实际的分数应该是76分，可以用ZADD命令修改Peter的分数：",-1),Zt=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" ZADD scoreboard "),s("span",{class:"token number"},"76"),a(" Peter \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"0"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998326-25296"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> ZADD scoreboard 76 Peter \n(integer) 0\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998326-25296","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),Ht=s("p",null,"分数不仅可以是整数，还支持双精度浮点数：",-1),Vt=s("div",{class:"language-"},[s("pre",null,[s("code",null,"redis> ZADD testboard 17E+307 a \n(integer) 1 \nredis> ZADD testboard 1.5 b \n(integer) 1 \nredis> ZADD testboard +inf c \n(integer) 1 \nredis> ZADD testboard -inf d \n(integer) 1\n\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-67567"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> ZADD testboard 17E+307 a \n(integer) 1 \nredis> ZADD testboard 1.5 b \n(integer) 1 \nredis> ZADD testboard +inf c \n(integer) 1 \nredis> ZADD testboard -inf d \n(integer) 1\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-67567","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br")])],-1),Yt=s("ol",{start:"2"},[s("li",null,"获得元素的分数")],-1),Kt=s("p",null,[s("code",null,"ZSCORE key member")],-1),Xt=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> ZSCORE scoreboard Tom \n"89"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-9999"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZSCORE scoreboard Tom \n"89"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-9999","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),Wt=s("ol",{start:"3"},[s("li",null,"获得排名在某个范围的元素列表")],-1),Qt=s("p",null,[s("code",null,"ZRANGE key start stop [WITHSCORES] ")],-1),Jt=s("p",null,[s("code",null,"ZREVRANGE key start stop [WITHSCORES]")],-1),zt=s("p",null,"ZRANGE命令会按照元素分数从小到大的顺序返回索引从 start到stop之间的所有元素（包含两端的元素）。ZRANGE命令与LRANGE命令十分相似，如索引都是从0开始，负数代表从后向前查找（−1表示最后一个元素）。就像这样：",-1),ne=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" ZRANGE scoreboard "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"2"),a(" \n"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"Peter"'),a(" \n"),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"Tom"'),a(" \n"),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"David"'),a(" \nredis"),s("span",{class:"token operator"},">"),a(" ZRANGE scoreboard "),s("span",{class:"token number"},"1"),a(" -1 \n"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"Tom"'),a(" \n"),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"David"'),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-43467"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZRANGE scoreboard 0 2 \n1) "Peter" \n2) "Tom" \n3) "David" \nredis> ZRANGE scoreboard 1 -1 \n1) "Tom" \n2) "David"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-43467","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br")])],-1),te=s("p",null,[s("strong",null,"如果需要同时获得元素的分数"),a("的话可以在 ZRANGE 命令的尾部加上 WITHSCORES 参数，这时返回的数据格式就从“元素1, 元素2, „, 元素n”变为了“元素1, 分数1, 元素2, 分数2, „, 元素n, 分数n”。")],-1),ee=s("p",null,"ZRANGE命令的时间复杂度为O(log n+m)（其中n为有序集合的基数，m为返回的元素个数）。",-1),se=s("p",null,'如果两个元素的分数相同，Redis会按照字典顺序（即"0"<"9"<"A"<"Z"<"a"<"z"这样的顺序）来进行排列。再进一步，如果元素的值是中文怎么处理呢？答案是取决于中文的编码方式，如使用UTF-8编码：',-1),ae=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" ZADD chineseName "),s("span",{class:"token number"},"0"),a(" 马华 "),s("span",{class:"token number"},"0"),a(" 刘墉 "),s("span",{class:"token number"},"0"),a(" 司马光 "),s("span",{class:"token number"},"0"),a(" 赵哲 \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"4"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" ZRANGE chineseName "),s("span",{class:"token number"},"0"),a(" -1\n"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},[a('"'),s("span",{class:"token entity",title:"\\xe5"},"\\xe5"),s("span",{class:"token entity",title:"\\x88"},"\\x88"),s("span",{class:"token entity",title:"\\x98"},"\\x98"),s("span",{class:"token entity",title:"\\xe5"},"\\xe5"),s("span",{class:"token entity",title:"\\xa2"},"\\xa2"),s("span",{class:"token entity",title:"\\x89"},"\\x89"),a('"')]),a(" \n"),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},[a('"'),s("span",{class:"token entity",title:"\\xe5"},"\\xe5"),s("span",{class:"token entity",title:"\\x8f"},"\\x8f"),s("span",{class:"token entity",title:"\\xb8"},"\\xb8"),s("span",{class:"token entity",title:"\\xe9"},"\\xe9"),s("span",{class:"token entity",title:"\\xa9"},"\\xa9"),s("span",{class:"token entity",title:"\\xac"},"\\xac"),s("span",{class:"token entity",title:"\\xe5"},"\\xe5"),s("span",{class:"token entity",title:"\\x85"},"\\x85"),s("span",{class:"token entity",title:"\\x89"},"\\x89"),a('"')]),a(" \n"),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},[a('"'),s("span",{class:"token entity",title:"\\xe8"},"\\xe8"),s("span",{class:"token entity",title:"\\xb5"},"\\xb5"),s("span",{class:"token entity",title:"\\xb5"},"\\xb5"),s("span",{class:"token entity",title:"\\xe5"},"\\xe5"),s("span",{class:"token entity",title:"\\x93"},"\\x93"),s("span",{class:"token entity",title:"\\xb2"},"\\xb2"),a('"')]),a(" \n"),s("span",{class:"token number"},"4"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},[a('"'),s("span",{class:"token entity",title:"\\xe9"},"\\xe9"),s("span",{class:"token entity",title:"\\xa9"},"\\xa9"),s("span",{class:"token entity",title:"\\xac"},"\\xac"),s("span",{class:"token entity",title:"\\xe5"},"\\xe5"),s("span",{class:"token entity",title:"\\x8d"},"\\x8d"),s("span",{class:"token entity",title:"\\x8e"},"\\x8e"),a('"')]),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-20495"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZADD chineseName 0 马华 0 刘墉 0 司马光 0 赵哲 \n(integer) 4 \nredis> ZRANGE chineseName 0 -1\n1) "\\xe5\\x88\\x98\\xe5\\xa2\\x89" \n2) "\\xe5\\x8f\\xb8\\xe9\\xa9\\xac\\xe5\\x85\\x89" \n3) "\\xe8\\xb5\\xb5\\xe5\\x93\\xb2" \n4) "\\xe9\\xa9\\xac\\xe5\\x8d\\x8e"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-20495","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br")])],-1),ce=s("p",null,[a("可见此时Redis依然按照字典顺序排列这些元素。 "),s("strong",null,"ZREVRANGE命令和ZRANGE的唯一不同在于ZREVRANGE命令是按照元素分数从大到小的顺序给出结果的。")],-1),oe=s("ol",{start:"4"},[s("li",null,"获得指定分数范围的元素")],-1),ie=s("p",null,[s("code",null,"ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]")],-1),le=s("p",null,"ZRANGEBYSCORE 命令参数虽然多，但是都很好理解。该命令按照元素分数从小到大的顺序返回分数在min和max之间（包含min和max）的元素：",-1),pe=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> ZRANGEBYSCORE scoreboard 80 100\n1) "Tom" \n2) "David"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-33516"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZRANGEBYSCORE scoreboard 80 100\n1) "Tom" \n2) "David"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-33516","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br")])],-1),de=s("p",null,"如果希望分数范围不包含端点值，可以在分数前加上“(”符号。例如，希望返回”80分到100分的数据，可以含80分，但不包含100分，则稍微修改一下上面的命令即可：",-1),re=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> ZRANGEBYSCORE scoreboard 80 (100 \n1) "Tom"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-16235"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZRANGEBYSCORE scoreboard 80 (100 \n1) "Tom"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-16235","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),ue=s("p",null,"min和max还支持无穷大，同ZADD命令一样，-inf和+inf分别表示负无穷和正无穷。比如你希望得到所有分数高于80分（不包含80分）的人的名单，但你却不知道最高分是多少（虽然有些背离现实，但是为了叙述方便，这里假设可以获得的分数是无上限的），这时就可以用上+inf了：",-1),me=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> ZRANGEBYSCORE scoreboard (80 +inf \n1) "Tom"\n2) "David"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-34199"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZRANGEBYSCORE scoreboard (80 +inf \n1) "Tom"\n2) "David"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-34199","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br")])],-1),ye=s("p",null,"WITHSCORES参数的用法与ZRANGE命令一样，不再赘述。",-1),be=s("p",null,"了解 SQL 语句的读者对 LIMIT offset count 应该很熟悉，在本命令中 LIMIT offset count 与 SQL 中的用法基本相同，即在获得的元素列表的基础上向后偏移offset个元素，并且只获取前count个元素。为了便于演示，我们先向scoreboard键中再增加些元素：",-1),ke=s("div",{class:"language-"},[s("pre",null,[s("code",null,"redis> ZADD scoreboard 56 Jerry 92 Wendy 67 Yvonne \n(integer) 3\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-38687"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> ZADD scoreboard 56 Jerry 92 Wendy 67 Yvonne \n(integer) 3\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-38687","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),he=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> ZRANGE scoreboard 0 -1 WITHSCORES \n1) "Jerry" \n2) "56" \n3) "Yvonne"\n4) "67" \n5) "Peter" \n6) "76" \n7) "Tom" \n8) "89" \n9) "Wendy" \n10) "92" \n11) "David" \n12) "100"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-48457"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZRANGE scoreboard 0 -1 WITHSCORES \n1) "Jerry" \n2) "56" \n3) "Yvonne"\n4) "67" \n5) "Peter" \n6) "76" \n7) "Tom" \n8) "89" \n9) "Wendy" \n10) "92" \n11) "David" \n12) "100"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-48457","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br")])],-1),fe=s("p",null,"想获得分数高于60分的从第二个人开始的3个人：",-1),ge=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" ZRANGEBYSCORE scoreboard "),s("span",{class:"token number"},"60"),a(" +inf LIMIT "),s("span",{class:"token number"},"1"),a(),s("span",{class:"token number"},"3"),a(" \n"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"Peter"'),a(" \n"),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"Tom"'),a(" \n"),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"Wendy"'),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-2901"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZRANGEBYSCORE scoreboard 60 +inf LIMIT 1 3 \n1) "Peter" \n2) "Tom" \n3) "Wendy"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-2901","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),Ce=s("p",null,"那么，如果想获取分数低于或等于 100 分的前 3 个人怎么办呢？这时可以借助ZREVRANGEBYSCORE命令实现。对照前文提到的ZRANGE命令和ZREVRANGE命令之间的关系，相信很容易能明白ZREVRANGEBYSCORE 命令的功能。需要注意的是ZREVRANGEBYSCORE 命令不仅是按照元素分数从大往小的顺序给出结果的，而且它的 min和max参数的顺序和ZRANGEBYSCORE命令是相反的。就像这样：",-1),ve=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" ZREVRANGEBYSCORE scoreboard "),s("span",{class:"token number"},"100"),a(),s("span",{class:"token number"},"0"),a(" LIMIT "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"3"),a(" \n"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"David"'),a(" \n"),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"Wendy"'),a(" \n"),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"Tom"'),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-27364"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZREVRANGEBYSCORE scoreboard 100 0 LIMIT 0 3 \n1) "David" \n2) "Wendy" \n3) "Tom"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-27364","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),xe=s("ol",{start:"5"},[s("li",null,"增加某个元素的分数")],-1),Ee=s("p",null,[s("code",null,"ZINCRBY key increment member")],-1),we=s("p",null,"ZINCRBY 命令可以增加一个元素的分数，返回值是更改后的分数。例如，想给 Jerry加4分：",-1),Te=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> ZINCRBY scoreboard 4 Jerry\n"60" \nredis> ZINCRBY scoreboard -4 \nJerry \n"56"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-74933"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZINCRBY scoreboard 4 Jerry\n"60" \nredis> ZINCRBY scoreboard -4 \nJerry \n"56"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-74933","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),Ie=s("h4",{id:"ex-实现按点击量排名"},[s("a",{class:"header-anchor",href:"#ex-实现按点击量排名","aria-hidden":"true"},"#"),a(" ex: 实现按点击量排名")],-1),Re=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"var"),a(" redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'redis'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" client "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token comment"},"// 配置"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"var"),a(" currentPage "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},";"),a("  "),s("span",{class:"token comment"},"// 当前页面为1"),a("\n"),s("span",{class:"token keyword"},"var"),a(" listLength "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"10"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"var"),a(" start "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"("),a("currentPage "),s("span",{class:"token operator"},"-"),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"*"),a(" listLength"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" end "),s("span",{class:"token operator"},"="),a(" currentPage "),s("span",{class:"token operator"},"*"),a(" listLength "),s("span",{class:"token operator"},"-"),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},";"),a(),s("span",{class:"token comment"},"// 0-9"),a("\n\n"),s("span",{class:"token keyword"},"var"),a(" postID "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"zrevrange"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"post:page.view "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("start"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token string"}," "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("end"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("    "),s("span",{class:"token comment"},"// 递减"),a("\n\npostID"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"forEach"),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},"id"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"hgetall"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"post:"),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("id"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998327-54281"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var redis = require('redis');\nvar client = new redis({\n    // 配置\n});\n\nvar currentPage = 1;  // 当前页面为1\nvar listLength = 10;\n\nvar start = (currentPage - 1) * listLength;\nvar end = currentPage * listLength - 1; // 0-9\n\nvar postID = client.zrevrange(`post:page.view ${start} ${end}`);    // 递减\n\npostID.forEach(id => {\n    client.hgetall(`post:${id}`)\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998327-54281","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br")])],-1),$e=s("blockquote",null,[s("p",null,"如果需要按时间排序，只需修改文章存储时的分数为对应文章发布的Unix时间即可。")],-1),Se=s("h4",{id:"命令补充-3"},[s("a",{class:"header-anchor",href:"#命令补充-3","aria-hidden":"true"},"#"),a(" 命令补充")],-1),Ne=s("ol",null,[s("li",null,"获取集合中元素的数量")],-1),Ae=s("p",null,[s("code",null,"ZCARD key")],-1),je=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" ZCARD scoreboard\n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"6"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998328-78105"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> ZCARD scoreboard\n(integer) 6\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998328-78105","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),_e=s("ol",{start:"2"},[s("li",null,"获得指定分数范围内的元素个数")],-1),De=s("p",null,[s("code",null,"ZCOUNT key min max")],-1),Pe=s("div",{class:"language-"},[s("pre",null,[s("code",null,"redis> ZCOUNT scoreboard 90 100\n(integer) 2\nredis> ZCOUNT scoreboard (89 +inf \n(integer) 2\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998328-67989"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> ZCOUNT scoreboard 90 100\n(integer) 2\nredis> ZCOUNT scoreboard (89 +inf \n(integer) 2\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998328-67989","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),Be=s("p",null,"3．删除一个或多个元素",-1),Oe=s("p",null,[s("code",null,"ZREM key member [member …] ")],-1),Fe=s("p",null,"ZREM命令的返回值是成功删除的元素数量（不包含本来就不存在的元素）。",-1),Le=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" ZREM scoreboard Wendy \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"1"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" ZCARD scoreboard \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"5"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998328-60582"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> ZREM scoreboard Wendy \n(integer) 1 \nredis> ZCARD scoreboard \n(integer) 5\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998328-60582","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),Me=s("p",null,"4．按照排名范围删除元素",-1),qe=s("p",null,[s("code",null,"ZREMRANGEBYRANK key start stop")],-1),Ue=s("p",null,"ZREMRANGEBYRANK 命令按照元素分数从小到大的顺序（即索引 0表示最小的值）删除处在指定排名范围内的所有元素，并返回删除的元素数量。如：",-1),Ge=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" ZADD testRem "),s("span",{class:"token number"},"1"),a(" a "),s("span",{class:"token number"},"2"),a(" b "),s("span",{class:"token number"},"3"),a(" c "),s("span",{class:"token number"},"4"),a(" d "),s("span",{class:"token number"},"5"),a(" e "),s("span",{class:"token number"},"6"),a(" f \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"6"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" ZREMRANGEBYRANK testRem "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"2"),a(" \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"3"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" ZRANGE testRem "),s("span",{class:"token number"},"0"),a(" -1 \n"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"d"'),a(" \n"),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"e"'),a(" \n"),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token string"},'"f"'),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998328-60568"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZADD testRem 1 a 2 b 3 c 4 d 5 e 6 f \n(integer) 6 \nredis> ZREMRANGEBYRANK testRem 0 2 \n(integer) 3 \nredis> ZRANGE testRem 0 -1 \n1) "d" \n2) "e" \n3) "f"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998328-60568","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br")])],-1),Ze=s("p",null,"5．按照分数范围删除元素",-1),He=s("p",null,[s("code",null,"ZREMRANGEBYSCORE key min max ")],-1),Ve=s("p",null,"ZREMRANGEBYSCORE命令会删除指定分数范围内的所有元素，参数min和max的特性和ZRANGEBYSCORE命令中的一样。返回值是删除的元素数量。如：",-1),Ye=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> ZREMRANGEBYSCORE testRem (4 5 \n(integer) 1 \nredis> ZRANGE testRem 0 -1 \n1) "d" \n2) "f"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998328-63660"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZREMRANGEBYSCORE testRem (4 5 \n(integer) 1 \nredis> ZRANGE testRem 0 -1 \n1) "d" \n2) "f"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998328-63660","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),Ke=s("p",null,"6．获得元素的排名",-1),Xe=s("p",null,[s("code",null,"ZRANK key member")],-1),We=s("p",null,[s("code",null," ZREVRANK key member")],-1),Qe=s("p",null,"ZRANK命令会按照元素分数从小到大的顺序获得指定的元素的排名（从0开始，即分数最小的元素排名为0）。如：",-1),Je=s("div",{class:"language-"},[s("pre",null,[s("code",null,"redis> ZRANK scoreboard Peter \n(integer) 0\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998328-15681"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> ZRANK scoreboard Peter \n(integer) 0\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998328-15681","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),ze=s("p",null,"ZREVRANK命令则相反（分数最大的元素排名为0）：",-1),ns=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" ZREVRANK scoreboard Peter \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"4"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998328-86719"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> ZREVRANK scoreboard Peter \n(integer) 4\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998328-86719","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),ts=e('',6),es=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"var"),a(" redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'redis'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" client "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token comment"},"// 配置"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"function"),a(),s("span",{class:"token function"},"follow"),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("currentUser"),s("span",{class:"token punctuation"},","),a(" targetUser")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"sadd"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"post:"),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("currentUser"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token string"},":following "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("targetUser"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"sadd"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"post:"),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("targetUser"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token string"},":followers "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("currentUser"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998328-48929"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var redis = require('redis');\nvar client = new redis({\n    // 配置\n});\n\nfunction follow(currentUser, targetUser) {\n    client.sadd(`post:${currentUser}:following ${targetUser}`);\n    client.sadd(`post:${targetUser}:followers ${currentUser}`);\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998328-48929","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br")])],-1),ss=s("h5",{id:"命令-5"},[s("a",{class:"header-anchor",href:"#命令-5","aria-hidden":"true"},"#"),a(" 命令")],-1),as=s("p",null,[s("code",null,"MULTI")],-1),cs=s("p",null,[a("Redis中的事务（transaction）是一组命令的集合。事务同命令一样都是Redis中的事务（transaction）是一组命令的集合。事务同命令一样都是 Redis 的最小执行单位，"),s("strong",null,"一个事务中的命令要么都执行，要么都不执行。")],-1),os=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> MULTI OK \nredis> SADD "user:1:following" 2 \nQUEUED \nredis> SADD "user:2:followers" 1 \nQUEUED redis> EXEC \n1) (integer) 1 \n2) (integer) 1\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998328-45349"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> MULTI OK \nredis> SADD "user:1:following" 2 \nQUEUED \nredis> SADD "user:2:followers" 1 \nQUEUED redis> EXEC \n1) (integer) 1 \n2) (integer) 1\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998328-45349","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br")])],-1),is=s("h5",{id:"错误处理"},[s("a",{class:"header-anchor",href:"#错误处理","aria-hidden":"true"},"#"),a(" 错误处理")],-1),ls=s("ul",null,[s("li",null,[s("p",null,"语法错误： 可以发现并且中断后面的执行"),s("div",{class:"language-"},[s("pre",null,[s("code",null,"127.0.0.1:6379> MULTI\nOK\n127.0.0.1:6379> set shiwu hello\nQUEUED\n127.0.0.1:6379> asdasdasd\n(error) ERR unknown command `asdasdasd`, with args beginning with:\n127.0.0.1:6379> exec\n(error) EXECABORT Transaction discarded because of previous errors.\n127.0.0.1:6379> get shiwu\n(nil)\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998328-6661"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"127.0.0.1:6379> MULTI\nOK\n127.0.0.1:6379> set shiwu hello\nQUEUED\n127.0.0.1:6379> asdasdasd\n(error) ERR unknown command `asdasdasd`, with args beginning with:\n127.0.0.1:6379> exec\n(error) EXECABORT Transaction discarded because of previous errors.\n127.0.0.1:6379> get shiwu\n(nil)\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998328-6661","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br")])])]),s("li",null,[s("p",null,"运行错误： redis无法发现")])],-1),ps=s("blockquote",null,[s("p",null,"Redis的事务没有关系数据库事务提供的回滚（rollback）[1] 功能。为此开发者必须在事务执行出错后自己收拾剩下的摊子（将数据库复原回事务执行前的状态等）。 不过由于 Redis 不支持回滚功能，也使得 Redis 在事务上可以保持简洁和快速。另外回顾刚才提到的会导致事务执行失败的两种错误，其中语法错误完全可以在开发时找出并解决，另外如果能够很好地规划数据库（保证键名规范等）的使用，是不会出现如命令与数据类型不匹配这样的运行错误的。")],-1),ds=s("h5",{id:"watch命令介绍"},[s("a",{class:"header-anchor",href:"#watch命令介绍","aria-hidden":"true"},"#"),a(" WATCH命令介绍")],-1),rs=s("p",null,"我们已经知道在一个事务中只有当所有命令都依次执行完后才能得到每个结果的返回值，可是有些情况下需要先获得一条命令的返回值，然后再根据这个值执行下一条命令。",-1),us=s("p",null,[s("code",null,"WATCH"),a("命令可以监控一个或多个键，一旦其中有一个键被修改（或删除），之后的事务就不会执行。")],-1),ms=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" SET key "),s("span",{class:"token number"},"1"),a(" OK \nredis"),s("span",{class:"token operator"},">"),a(" WATCH key OK \nredis"),s("span",{class:"token operator"},">"),a(" SET key "),s("span",{class:"token number"},"2"),a(" OK \nredis"),s("span",{class:"token operator"},">"),a(" MULTI OK \nredis"),s("span",{class:"token operator"},">"),a(" SET key "),s("span",{class:"token number"},"3"),a(" QUEUED \nredis"),s("span",{class:"token operator"},">"),a(" EXEC "),s("span",{class:"token punctuation"},"("),a("nil"),s("span",{class:"token punctuation"},")"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" GET key "),s("span",{class:"token string"},'"2"'),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998328-8742"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> SET key 1 OK \nredis> WATCH key OK \nredis> SET key 2 OK \nredis> MULTI OK \nredis> SET key 3 QUEUED \nredis> EXEC (nil) \nredis> GET key "2"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998328-8742","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br")])],-1),ys=s("p",null,"我们可以利用WATCH来重构之前实现的incr函数来避免竞态",-1),bs=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"var"),a(" redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'redis'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" client "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token comment"},"// 配置"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"function"),a(),s("span",{class:"token function"},"incr"),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},"$key"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"watch"),s("span",{class:"token punctuation"},"("),a("$key"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token keyword"},"var"),a(" value "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"get"),s("span",{class:"token punctuation"},"("),a("$key"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token keyword"},"if"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token operator"},"!"),a("value"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n        value "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"0"),s("span",{class:"token punctuation"},";"),a("\n        value "),s("span",{class:"token operator"},"="),a(" value "),s("span",{class:"token operator"},"+"),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token keyword"},"else"),a(),s("span",{class:"token punctuation"},"{"),a("\n        client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"multi"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n        client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"set"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("$key"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token string"}," value"),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n        client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"exit"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n        "),s("span",{class:"token keyword"},"return"),a(" value"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token punctuation"},"}"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998329-13097"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var redis = require('redis');\nvar client = new redis({\n    // 配置\n});\n\nfunction incr($key) {\n    client.watch($key);\n    var value = client.get($key);\n    if (!value) {\n        value = 0;\n        value = value + 1;\n    } else {\n        client.multi();\n        client.set(`${$key} value`);\n        client.exit();\n        return value;\n    }\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998329-13097","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br")])],-1),ks=s("h4",{id:"过期时间"},[s("a",{class:"header-anchor",href:"#过期时间","aria-hidden":"true"},"#"),a(" 过期时间")],-1),hs=s("p",null,"在实际的开发中经常会遇到一些有时效的数据，比如限时优惠活动、缓存或验证码等，过了一定的时间就需要删除这些数据。在关系数据库中一般需要额外的一个字段记录到期时间，然后定期检测删除过期数据。而在Redis中可以使用 EXPIRE命令设置一个键的过期时间，到时间后Redis会自动删除它。",-1),fs=s("p",null,[a("EXPIRE 命令的使用方法为 "),s("code",null,"EXPIRE key seconds"),a("，其中 seconds 参数表示键的过期时间，单位是秒。如要想让session:29e3d键在15分钟后被删除：")],-1),gs=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" SET session:29e3d uid1314 \nOK \nredis"),s("span",{class:"token operator"},">"),a(" EXPIRE session:29e3d "),s("span",{class:"token number"},"900"),a(" \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"1"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998329-85799"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> SET session:29e3d uid1314 \nOK \nredis> EXPIRE session:29e3d 900 \n(integer) 1\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998329-85799","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),Cs=s("p",null,"**EXPIRE命令返回1表示设置成功，返回0则表示键不存在或设置失败。**例如：",-1),vs=s("div",{class:"language-"},[s("pre",null,[s("code",null,"redis> DEL session:29e3d \n(integer) 1 \nredis> EXPIRE session:29e3d 900 \n(integer) 0\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998329-9131"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> DEL session:29e3d \n(integer) 1 \nredis> EXPIRE session:29e3d 900 \n(integer) 0\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998329-9131","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),xs=s("p",null,"**如果想知道一个键还有多久的时间会被删除，可以使用TTL命令。**返回值是键的剩余时间（单位是秒）：",-1),Es=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" SET foo bar \nOK \nredis"),s("span",{class:"token operator"},">"),a(" EXPIRE foo "),s("span",{class:"token number"},"20"),a(" \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"1"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" TTL foo \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"15"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" TTL foo \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"7"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" TTL foo \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(" –2\n\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998329-61937"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> SET foo bar \nOK \nredis> EXPIRE foo 20 \n(integer) 1 \nredis> TTL foo \n(integer) 15 \nredis> TTL foo \n(integer) 7 \nredis> TTL foo \n(integer) –2\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998329-61937","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br")])],-1),ws=s("p",null,[a("可见随着时间的不同，foo键的过期时间逐渐减少，20秒后foo键会被删除。"),s("strong",null,"当键不存在时TTL命令会返回−2。"),a(" 那么没有为键设置过期时间（即永久存在，这是建立一个键后的默认情况）的情况下会返回什么呢？"),s("strong",null,"答案是返回−1：")],-1),Ts=s("p",null,[s("strong",null,"如果想取消键的过期时间设置（即将键恢复成永久的）"),a("，则可以使用"),s("code",null,"PERSIST"),a("命令。如果过期时间被成功清除则返回1；否则返回0（因为键不存在或键本来就是永久的）：")],-1),Is=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" SET foo bar \nOK \nredis"),s("span",{class:"token operator"},">"),a(" EXPIRE foo "),s("span",{class:"token number"},"20"),a(" \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"1"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" PERSIST foo \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"1"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" TTL foo \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(" –1\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998329-52571"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> SET foo bar \nOK \nredis> EXPIRE foo 20 \n(integer) 1 \nredis> PERSIST foo \n(integer) 1 \nredis> TTL foo \n(integer) –1\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998329-52571","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br")])],-1),Rs=s("p",null,[s("strong",null,"除了PERSIST命令之外"),a("，使用SET或GETSET命令为键赋值也会"),s("strong",null,"同时清除键的过期时间"),a("，例如：")],-1),$s=s("div",{class:"language-"},[s("pre",null,[s("code",null,"redis> EXPIRE foo 20 \n(integer) 1 \nredis> SET foo bar OK \nredis> TTL foo \n(integer) –1\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998329-32741"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> EXPIRE foo 20 \n(integer) 1 \nredis> SET foo bar OK \nredis> TTL foo \n(integer) –1\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998329-32741","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),Ss=e("",5),Ns=s("div",{class:"language-"},[s("pre",null,[s("code",null,"redis> SET foo bar OK \nredis> EXPIREAT foo 1351858600 \n(integer) 1 \nredis> TTL foo \n(integer) 142 \nredis> PEXPIREAT foo 1351858700000 \n(integer) 1\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998329-67743"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> SET foo bar OK \nredis> EXPIREAT foo 1351858600 \n(integer) 1 \nredis> TTL foo \n(integer) 142 \nredis> PEXPIREAT foo 1351858700000 \n(integer) 1\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998329-67743","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br")])],-1),As=e('',5),js=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"var"),a(" redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'redis'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" client "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token comment"},"// 配置"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"var"),a(" isKeyExists "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"exists"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"rate:limite:$ip"),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"if"),a(),s("span",{class:"token punctuation"},"("),a("isKeyExists"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"var"),a(" time "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"incr"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'rate:limite:$ip'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token keyword"},"if"),a(),s("span",{class:"token punctuation"},"("),a("time "),s("span",{class:"token operator"},">"),a(),s("span",{class:"token number"},"100"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n        client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"exit"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'你已经不能访问了，请休息下'"),s("span",{class:"token punctuation"},")"),a("\n    "),s("span",{class:"token punctuation"},"}"),a("\n"),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token keyword"},"else"),a(),s("span",{class:"token punctuation"},"{"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"incr"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'rate:limite:$ip'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"expire"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'rate:limite:$ip 60'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998329-56333"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var redis = require('redis');\nvar client = new redis({\n    // 配置\n});\n\nvar isKeyExists = client.exists(`rate:limite:$ip`);\n\nif (isKeyExists) {\n    var time = client.incr('rate:limite:$ip');\n    if (time > 100) {\n        client.exit('你已经不能访问了，请休息下')\n    }\n} else {\n    client.incr('rate:limite:$ip');\n    client.expire('rate:limite:$ip 60');\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998329-56333","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br")])],-1),_s=e("",5),Ds=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"var"),a(" redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'redis'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" client "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token comment"},"// 配置"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"var"),a(" listLength "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"llen"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'rate:limit:$ip'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"if"),a(),s("span",{class:"token punctuation"},"("),a("listLength "),s("span",{class:"token operator"},"<"),a(),s("span",{class:"token number"},"10"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"lpush"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"rate:limit:$ip "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"Date"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"valueOf"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token keyword"},"else"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"var"),a(" time "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"lindex"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'rate:limit:$ip -1'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token keyword"},"if"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"Date"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"valueOf"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"-"),a(" time "),s("span",{class:"token operator"},"<"),a(),s("span",{class:"token number"},"60"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n        client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"exit"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'访问超过限制'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token keyword"},"else"),a(),s("span",{class:"token punctuation"},"{"),a("\n        client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"lpush"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"rate:limit:$ip "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"Date"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"valueOf"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n        client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"ltrim"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"rate:limit:$ip 0 9"),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token punctuation"},"}"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998329-3492"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var redis = require('redis');\nvar client = new redis({\n    // 配置\n});\n\nvar listLength = client.llen('rate:limit:$ip');\n\nif (listLength < 10) {\n    client.lpush(`rate:limit:$ip ${new Date().valueOf()}`);\n} else {\n    var time = client.lindex('rate:limit:$ip -1');\n    if(new Date().valueOf() - time < 60) {\n        client.exit('访问超过限制');\n    } else {\n        client.lpush(`rate:limit:$ip ${new Date().valueOf()}`);\n        client.ltrim(`rate:limit:$ip 0 9`);\n    }\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998329-3492","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br")])],-1),Ps=s("h5",{id:"ex实现缓存"},[s("a",{class:"header-anchor",href:"#ex实现缓存","aria-hidden":"true"},"#"),a(" ex：实现缓存")],-1),Bs=s("p",null,"假设学生成绩总在不断地变化，需要每隔两个小时就重新计算一次排名，这可以通过给键设置过期时间的方式实现。每次用户访问首页时程序先查询缓存键是否存在，如果存在则直接使用缓存的值；否则重新计算排名并将计算结果赋值给该键并同时设置该键的过期时间为两个小时。伪代码如下：",-1),Os=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"var"),a(" redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'redis'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" client "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token comment"},"// 配置"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"var"),a(" rank "),s("span",{class:"token operator"},"="),a(" client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"get"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'cache:rank'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"if"),s("span",{class:"token punctuation"},"("),s("span",{class:"token operator"},"!"),a("rank"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"var"),a(" $rank "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"jisuan"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"multi"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"set"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"cache:rank "),s("span",{class:"token interpolation"},[s("span",{class:"token interpolation-punctuation punctuation"},"${"),a("$rank"),s("span",{class:"token interpolation-punctuation punctuation"},"}")]),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"expire"),s("span",{class:"token punctuation"},"("),s("span",{class:"token template-string"},[s("span",{class:"token template-punctuation string"},"`"),s("span",{class:"token string"},"cache:rank 7200"),s("span",{class:"token template-punctuation string"},"`")]),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    client"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"exec"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998330-49751"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var redis = require('redis');\nvar client = new redis({\n    // 配置\n});\n\nvar rank = client.get('cache:rank');\n\nif(!rank) {\n    var $rank = jisuan();\n    client.multi();\n    client.set(`cache:rank ${$rank}`);\n    client.expire(`cache:rank 7200`);\n    client.exec();\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998330-49751","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br")])],-1),Fs=e('',6),Ls=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token operator"},">"),a(" LPUSH mylist "),s("span",{class:"token number"},"4"),a(),s("span",{class:"token number"},"2"),a(),s("span",{class:"token number"},"6"),a(),s("span",{class:"token number"},"1"),a(),s("span",{class:"token number"},"3"),a(),s("span",{class:"token number"},"7"),a(" \n"),s("span",{class:"token punctuation"},"("),a("integer"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token number"},"6"),a(" \nredis"),s("span",{class:"token operator"},">"),a(" SORT mylist\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998330-97044"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis> LPUSH mylist 4 2 6 1 3 7 \n(integer) 6 \nredis> SORT mylist\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998330-97044","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br")])],-1),Ms=s("ol",{start:"2"},[s("li",null,"sort可以对有序集合进行排序")],-1),qs=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> ZADD myzset 50 2 40 3 20 1 60 5 \n(integer) 4 \nredis> SORT myzset \n1) "1" \n2) "2" \n3) "3" \n4) "5"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998330-79194"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> ZADD myzset 50 2 40 3 20 1 60 5 \n(integer) 4 \nredis> SORT myzset \n1) "1" \n2) "2" \n3) "3" \n4) "5"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998330-79194","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br")])],-1),Us=s("blockquote",null,[s("p",null,"在对有序集合类型排序时会忽略元素的分数，只针对元素自身的值进行排序。")],-1),Gs=s("ol",{start:"3"},[s("li",null,"还可以对非数字类型进行排序")],-1),Zs=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> LPUSH mylistalpha a c e d B C A \n(integer) 7 \nredis> SORT mylistalpha \n(error) ERR One or more scores can\'t be converted into double \nredis> SORT mylistalpha ALPHA \n1) "A" \n2) "B" \n3) "C" \n4) "a" \n5) "c" \n6) "d" \n7) "e"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998330-62779"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> LPUSH mylistalpha a c e d B C A \n(integer) 7 \nredis> SORT mylistalpha \n(error) ERR One or more scores can\'t be converted into double \nredis> SORT mylistalpha ALPHA \n1) "A" \n2) "B" \n3) "C" \n4) "a" \n5) "c" \n6) "d" \n7) "e"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998330-62779","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br")])],-1),Hs=s("ol",{start:"4"},[s("li",null,"DESC参数可以从大到小排序，还可以加入limit参数"),s("li",null,[a("通过"),s("code",null,"BY"),a("来根据时间排序")])],-1),Vs=s("p",null,"BY参数的语法为BY参考键。其中参考键可以是字符串类型键或者是散列类型键的某个字段（表示为键名->字段名）。如果提供了 BY 参数，SORT 命令将不再依据元素自身的值进行排序，而是对每个元素使用元素的值替换参考键中的第一个“*”并获取其值，然后依据该值对元素排序。就像这样：",-1),Ys=s("div",{class:"language-"},[s("pre",null,[s("code",null,'redis> SORT tag:ruby:posts BY post:*->time DESC \n1) "12" \n2) "26" \n3) "6"\n4) "2"\n'),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998330-11230"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'redis> SORT tag:ruby:posts BY post:*->time DESC \n1) "12" \n2) "26" \n3) "6"\n4) "2"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998330-11230","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),Ks=e('',31),Xs=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"var"),a(" Redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'ioredis'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"var"),a(" redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"Redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\nredis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"set"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'foo'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'bar'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\nredis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"get"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'foo'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token keyword"},"function"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("err"),s("span",{class:"token punctuation"},","),a(" result")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n  console"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"log"),s("span",{class:"token punctuation"},"("),a("result"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\nredis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"del"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'foo'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token comment"},"// Or using a promise if the last argument isn't a function"),a("\nredis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"get"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'foo'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"then"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"function"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},"result"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n  console"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"log"),s("span",{class:"token punctuation"},"("),a("result"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token comment"},"// Arguments to commands are flattened, so the following are the same:"),a("\nredis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"sadd"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'set'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token number"},"5"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token number"},"7"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\nredis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"sadd"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'set'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token punctuation"},"["),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token number"},"5"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token number"},"7"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token comment"},"// All arguments are passed directly to the redis server:"),a("\nredis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"set"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'key'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token number"},"100"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'EX'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token number"},"10"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998330-71815"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var Redis = require('ioredis');\nvar redis = new Redis();\n\nredis.set('foo', 'bar');\nredis.get('foo', function (err, result) {\n  console.log(result);\n});\nredis.del('foo');\n\n// Or using a promise if the last argument isn't a function\nredis.get('foo').then(function (result) {\n  console.log(result);\n});\n\n// Arguments to commands are flattened, so the following are the same:\nredis.sadd('set', 1, 3, 5, 7);\nredis.sadd('set', [1, 3, 5, 7]);\n\n// All arguments are passed directly to the redis server:\nredis.set('key', 100, 'EX', 10);\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998330-71815","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br")])],-1),Ws=s("ul",null,[s("li",null,"连接redis")],-1),Qs=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"Redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a("       "),s("span",{class:"token comment"},"// Connect to 127.0.0.1:6379"),a("\n"),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"Redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token number"},"6380"),s("span",{class:"token punctuation"},")"),a("   "),s("span",{class:"token comment"},"// 127.0.0.1:6380"),a("\n"),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"Redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token number"},"6379"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'192.168.1.1'"),s("span",{class:"token punctuation"},")"),a("        "),s("span",{class:"token comment"},"// 192.168.1.1:6379"),a("\n"),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"Redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'/tmp/redis.sock'"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"Redis"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n  port"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"6379"),s("span",{class:"token punctuation"},","),a("          "),s("span",{class:"token comment"},"// Redis port"),a("\n  host"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'127.0.0.1'"),s("span",{class:"token punctuation"},","),a("   "),s("span",{class:"token comment"},"// Redis host"),a("\n  family"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"4"),s("span",{class:"token punctuation"},","),a("           "),s("span",{class:"token comment"},"// 4 (IPv4) or 6 (IPv6)"),a("\n  password"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'auth'"),s("span",{class:"token punctuation"},","),a("\n  db"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"0"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998330-22201"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"new Redis()       // Connect to 127.0.0.1:6379\nnew Redis(6380)   // 127.0.0.1:6380\nnew Redis(6379, '192.168.1.1')        // 192.168.1.1:6379\nnew Redis('/tmp/redis.sock')\nnew Redis({\n  port: 6379,          // Redis port\n  host: '127.0.0.1',   // Redis host\n  family: 4,           // 4 (IPv4) or 6 (IPv6)\n  password: 'auth',\n  db: 0\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998330-22201","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br")])],-1),Js=s("ul",null,[s("li",null,"pipelining")],-1),zs=s("p",null,"对redis实现的管道，避免出现前面提到的往返时延问题。",-1),na=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"var"),a(" pipeline "),s("span",{class:"token operator"},"="),a(" redis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"pipeline"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\npipeline"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"set"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'foo'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'bar'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\npipeline"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"del"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'cc'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\npipeline"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"exec"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"function"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("err"),s("span",{class:"token punctuation"},","),a(" results")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token comment"},"// `err` is always null, and `results` is an array of responses"),a("\n  "),s("span",{class:"token comment"},"// corresponding to the sequence of queued commands."),a("\n  "),s("span",{class:"token comment"},"// Each response follows the format `[err, result]`."),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token comment"},"// You can even chain the commands:"),a("\nredis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"pipeline"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"set"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'foo'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'bar'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"del"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'cc'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"exec"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"function"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("err"),s("span",{class:"token punctuation"},","),a(" results")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token comment"},"// `exec` also returns a Promise:"),a("\n"),s("span",{class:"token keyword"},"var"),a(" promise "),s("span",{class:"token operator"},"="),a(" redis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"pipeline"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"set"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'foo'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'bar'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"get"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'foo'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"exec"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\npromise"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"then"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"function"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},"result"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token comment"},"// result === [[null, 'OK'], [null, 'bar']]"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998331-9991"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var pipeline = redis.pipeline();\npipeline.set('foo', 'bar');\npipeline.del('cc');\npipeline.exec(function (err, results) {\n  // `err` is always null, and `results` is an array of responses\n  // corresponding to the sequence of queued commands.\n  // Each response follows the format `[err, result]`.\n});\n\n// You can even chain the commands:\nredis.pipeline().set('foo', 'bar').del('cc').exec(function (err, results) {\n});\n\n// `exec` also returns a Promise:\nvar promise = redis.pipeline().set('foo', 'bar').get('foo').exec();\npromise.then(function (result) {\n  // result === [[null, 'OK'], [null, 'bar']]\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998331-9991","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br")])],-1),ta=s("p",null,"还有另外一种调用方式：",-1),ea=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"pipeline"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"["),a("\n  "),s("span",{class:"token punctuation"},"["),s("span",{class:"token string"},"'set'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'foo'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'bar'"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token punctuation"},"["),s("span",{class:"token string"},"'get'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'foo'"),s("span",{class:"token punctuation"},"]"),a("\n"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"exec"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"function"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a(),s("span",{class:"token comment"},"/* ... */"),a(),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998331-28882"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis.pipeline([\n  ['set', 'foo', 'bar'],\n  ['get', 'foo']\n]).exec(function () { /* ... */ });\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998331-28882","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),sa=s("ul",null,[s("li",null,"事务")],-1),aa=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[a("redis"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"multi"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"set"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'foo'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'bar'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"get"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'foo'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"exec"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"function"),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("err"),s("span",{class:"token punctuation"},","),a(" results")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token comment"},"// results === [[null, 'OK'], [null, 'bar']]"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998331-34580"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"redis.multi().set('foo', 'bar').get('foo').exec(function (err, results) {\n  // results === [[null, 'OK'], [null, 'bar']]\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998331-34580","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br")])],-1),ca=e('',7),oa=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("brew "),s("span",{class:"token function"},"install"),a(" memcached\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998331-51804"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"brew install memcached\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998331-51804","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),ia=s("h3",{id:"api"},[s("a",{class:"header-anchor",href:"#api","aria-hidden":"true"},"#"),a(" API")],-1),la=s("ol",null,[s("li",null,[s("strong",null,"set")])],-1),pa=s("p",null,[a("Memcached set 命令用于将 "),s("strong",null,"value(数据值)"),a(" 存储在指定的 "),s("strong",null,"key(键)"),a(" 中。")],-1),da=s("p",null,"如果set的key已经存在，该命令可以更新该key所对应的原来的数据，也就是实现更新的作用。",-1),ra=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token builtin class-name"},"set"),a(" key flags exptime bytes "),s("span",{class:"token punctuation"},"["),a("noreply"),s("span",{class:"token punctuation"},"]"),a(" \nvalue \n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998331-4046"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"set key flags exptime bytes [noreply] \nvalue \n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998331-4046","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),ua=e("",2),ma=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token builtin class-name"},"set"),a(" runoob "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"900"),a(),s("span",{class:"token number"},"9"),a("\nmemcached\nSTORED\n\nget runoob\nVALUE runoob "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"9"),a("\nmemcached\n\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998331-86101"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"set runoob 0 900 9\nmemcached\nSTORED\n\nget runoob\nVALUE runoob 0 9\nmemcached\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998331-86101","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br")])],-1),ya=s("p",null,"如果数据添加成功，则输出：",-1),ba=s("div",{class:"language-"},[s("pre",null,[s("code",null,"STORED\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998331-66241"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"STORED\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998331-66241","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),ka=s("ol",{start:"2"},[s("li",null,[s("strong",null,"add")])],-1),ha=s("p",null,[a("Memcached add 命令用于将 "),s("strong",null,"value(数据值)"),a(" 存储在指定的 "),s("strong",null,"key(键)"),a(" 中。")],-1),fa=s("p",null,[a("如果 add 的 key 已经存在，则不会更新数据(过期的 key 会更新)，之前的值将仍然保持相同，并且您将获得响应 "),s("strong",null,"NOT_STORED"),a("。(说明只能存新值，没有修改功能)")],-1),ga=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token function"},"add"),a(" key flags exptime bytes "),s("span",{class:"token punctuation"},"["),a("noreply"),s("span",{class:"token punctuation"},"]"),a("\nvalue\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998331-98154"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"add key flags exptime bytes [noreply]\nvalue\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998331-98154","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),Ca=e("",2),va=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token function"},"add"),a(" new_key "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"900"),a(),s("span",{class:"token number"},"10"),a("\ndata_value\nSTORED\nget new_key\nVALUE new_key "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"10"),a("\ndata_value\nEND\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998331-7181"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"add new_key 0 900 10\ndata_value\nSTORED\nget new_key\nVALUE new_key 0 10\ndata_value\nEND\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998331-7181","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br")])],-1),xa=s("p",null,"如果数据添加成功，则输出：",-1),Ea=s("div",{class:"language-"},[s("pre",null,[s("code",null,"STORED\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998331-16715"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"STORED\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998331-16715","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),wa=s("ol",{start:"3"},[s("li",null,"replace")],-1),Ta=s("p",null,[a("Memcached replace 命令用于替换已存在的 "),s("strong",null,"key(键)"),a(" 的 "),s("strong",null,"value(数据值)"),a("。")],-1),Ia=s("p",null,[a("如果 key 不存在，则替换失败，并且您将获得响应 "),s("strong",null,"NOT_STORED"),a("。")],-1),Ra=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("replace key flags exptime bytes "),s("span",{class:"token punctuation"},"["),a("noreply"),s("span",{class:"token punctuation"},"]"),a("\nvalue\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998331-77417"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"replace key flags exptime bytes [noreply]\nvalue\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998331-77417","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),$a=e("",2),Sa=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token function"},"add"),a(" mykey "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"900"),a(),s("span",{class:"token number"},"10"),a("\ndata_value\nSTORED\nget mykey\nVALUE mykey "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"10"),a("\ndata_value\nEND\nreplace mykey "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"900"),a(),s("span",{class:"token number"},"16"),a("\nsome_other_value\nget mykey\nVALUE mykey "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"16"),a("\nsome_other_value\nEND\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998331-57523"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"add mykey 0 900 10\ndata_value\nSTORED\nget mykey\nVALUE mykey 0 10\ndata_value\nEND\nreplace mykey 0 900 16\nsome_other_value\nget mykey\nVALUE mykey 0 16\nsome_other_value\nEND\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998331-57523","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br")])],-1),Na=s("p",null,"如果数据添加成功，则输出：",-1),Aa=s("div",{class:"language-"},[s("pre",null,[s("code",null,"STORED\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998332-96352"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"STORED\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998332-96352","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),ja=s("ol",{start:"4"},[s("li",null,"append")],-1),_a=s("p",null,[a("Memcached append 命令用于向已存在 "),s("strong",null,"key(键)"),a(" 的 "),s("strong",null,"value(数据值)"),a(" 后面追加数据 。")],-1),Da=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[a("append key flags exptime bytes "),s("span",{class:"token punctuation"},"["),a("noreply"),s("span",{class:"token punctuation"},"]"),a("\nvalue\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998332-11042"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"append key flags exptime bytes [noreply]\nvalue\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998332-11042","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),Pa=e("",2),Ba=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token builtin class-name"},"set"),a(" runoob "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"900"),a(),s("span",{class:"token number"},"9"),a("\nmemcached\nSTORED\nget runoob\nVALUE runoob "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"9"),a("\nmemcached\nEND\nappend runoob "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"900"),a(),s("span",{class:"token number"},"5"),a("\nredis\nSTORED\nget runoob\nVALUE runoob "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"14"),a("\nmemcachedredis\nEND\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998332-27095"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"set runoob 0 900 9\nmemcached\nSTORED\nget runoob\nVALUE runoob 0 9\nmemcached\nEND\nappend runoob 0 900 5\nredis\nSTORED\nget runoob\nVALUE runoob 0 14\nmemcachedredis\nEND\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998332-27095","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br")])],-1),Oa=s("p",null,"如果数据添加成功，则输出：",-1),Fa=s("div",{class:"language-"},[s("pre",null,[s("code",null,"STORED\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998332-42290"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"STORED\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998332-42290","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),La=s("ol",{start:"5"},[s("li",null,"prepend")],-1),Ma=s("p",null,[a("Memcached prepend 命令用于向已存在 "),s("strong",null,"key(键)"),a(" 的 "),s("strong",null,"value(数据值)"),a(" 前面追加数据 。")],-1),qa=s("div",{class:"language-"},[s("pre",null,[s("code",null,"prepend key flags exptime bytes [noreply]\nvalue\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998332-55064"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"prepend key flags exptime bytes [noreply]\nvalue\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998332-55064","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),Ua=e("",2),Ga=s("div",{class:"language-shell line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token builtin class-name"},"set"),a(" runoob "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"900"),a(),s("span",{class:"token number"},"9"),a("\nmemcached\nSTORED\nget runoob\nVALUE runoob "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"9"),a("\nmemcached\nEND\nprepend runoob "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"900"),a(),s("span",{class:"token number"},"5"),a("\nredis\nSTORED\nget runoob\nVALUE runoob "),s("span",{class:"token number"},"0"),a(),s("span",{class:"token number"},"14"),a("\nredismemcached\nEND\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998332-2466"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"set runoob 0 900 9\nmemcached\nSTORED\nget runoob\nVALUE runoob 0 9\nmemcached\nEND\nprepend runoob 0 900 5\nredis\nSTORED\nget runoob\nVALUE runoob 0 14\nredismemcached\nEND\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998332-2466","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br")])],-1),Za=s("p",null,"如果数据添加成功，则输出：",-1),Ha=s("div",{class:"language-"},[s("pre",null,[s("code",null,"STORED\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998332-64776"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"STORED\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998332-64776","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),Va=e('',14),Ya=s("div",{class:"language-"},[s("pre",null,[s("code",null,"sudo brew install mongodb\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998332-14672"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"sudo brew install mongodb\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998332-14672","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),Ka=e('',5),Xa=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token function-variable function"},"insertDocuments"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"function"),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("db"),s("span",{class:"token punctuation"},","),a(" callback")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token comment"},"// Get the documents collection"),a("\n  "),s("span",{class:"token keyword"},"const"),a(" collection "),s("span",{class:"token operator"},"="),a(" db"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"collection"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'documents'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n  "),s("span",{class:"token comment"},"// Insert some documents"),a("\n  collection"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"insertMany"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"["),a("\n    "),s("span",{class:"token punctuation"},"{"),a("a "),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},","),a(" b"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token punctuation"},"{"),a("a "),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},","),a(" b"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token punctuation"},"{"),a("a "),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},","),a(" b"),s("span",{class:"token operator"},":"),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},"}"),a("\n  "),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token keyword"},"function"),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("err"),s("span",{class:"token punctuation"},","),a(" result")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    console"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"log"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},'"Inserted 3 documents into the collection"'),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token function"},"callback"),s("span",{class:"token punctuation"},"("),a("result"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998332-36855"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const insertDocuments = function(db, callback) {\n  // Get the documents collection\n  const collection = db.collection('documents');\n  // Insert some documents\n  collection.insertMany([\n    {a : 1, b: 2}, {a : 2, b: 2}, {a : 3, b:3}\n  ], function(err, result) {\n    console.log(\"Inserted 3 documents into the collection\");\n    callback(result);\n  });\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998332-36855","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br")])],-1),Wa=s("h4",{id:"查"},[s("a",{class:"header-anchor",href:"#查","aria-hidden":"true"},"#"),a(" 查")],-1),Qa=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token function-variable function"},"selectData"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"function"),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("db"),s("span",{class:"token punctuation"},","),a(" callback")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"const"),a(" collection "),s("span",{class:"token operator"},"="),a(" db"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"collection"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'documents'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token keyword"},"var"),a(" whereStr "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"{"),a(" b"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"2"),a(),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},";"),a("\n    collection"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"find"),s("span",{class:"token punctuation"},"("),a("whereStr"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"toArray"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("err"),s("span",{class:"token punctuation"},","),a(" result")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n        "),s("span",{class:"token function"},"callback"),s("span",{class:"token punctuation"},"("),a("result"),s("span",{class:"token punctuation"},")"),a("\n    "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998332-19594"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const selectData = function(db, callback) {\n    const collection = db.collection('documents');\n    var whereStr = { b: 2 };\n    collection.find(whereStr).toArray((err, result) => {\n        callback(result)\n    })\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998332-19594","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br")])],-1),Ja=s("h4",{id:"改"},[s("a",{class:"header-anchor",href:"#改","aria-hidden":"true"},"#"),a(" 改")],-1),za=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token function-variable function"},"updateData"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"function"),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("db"),s("span",{class:"token punctuation"},","),a(" callback")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"const"),a(" collection "),s("span",{class:"token operator"},"="),a(" db"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"collection"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'documents'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n    "),s("span",{class:"token keyword"},"var"),a(" whereStr "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"{"),a("\n        a"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"1"),a("\n    "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token keyword"},"var"),a(" updataStr "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"{"),a("\n        $set"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n            b"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"1"),a("\n        "),s("span",{class:"token punctuation"},"}"),a("\n    "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},";"),a("\n\n    collection"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"update"),s("span",{class:"token punctuation"},"("),a("whereStr"),s("span",{class:"token punctuation"},","),a(" updataStr"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token keyword"},"function"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n        "),s("span",{class:"token function"},"callback"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998332-76824"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const updateData = function(db, callback) {\n    const collection = db.collection('documents');\n\n    var whereStr = {\n        a: 1\n    };\n    var updataStr = {\n        $set: {\n            b: 1\n        }\n    };\n\n    collection.update(whereStr, updataStr, function() {\n        callback();\n    });\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998332-76824","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br")])],-1),nc=s("h4",{id:"删"},[s("a",{class:"header-anchor",href:"#删","aria-hidden":"true"},"#"),a(" 删")],-1),tc=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token function-variable function"},"delData"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"function"),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("db"),s("span",{class:"token punctuation"},","),a(" callback")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"const"),a(" collection "),s("span",{class:"token operator"},"="),a(" db"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"collection"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'documents'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token keyword"},"var"),a(" whereStr "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"{"),a(" a"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"1"),a(),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},";"),a("\n    collection"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"remove"),s("span",{class:"token punctuation"},"("),a("whereStr"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("err"),s("span",{class:"token punctuation"},","),a(" result")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n        "),s("span",{class:"token function"},"callback"),s("span",{class:"token punctuation"},"("),a("result"),s("span",{class:"token punctuation"},")"),a("\n    "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998332-74950"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const delData = function(db, callback) {\n    const collection = db.collection('documents');\n    var whereStr = { a: 1 };\n    collection.remove(whereStr, (err, result) => {\n        callback(result)\n    });\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998332-74950","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br")])],-1),ec=e('',23),sc=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token property"},'"我是老板"'),s("span",{class:"token operator"},":"),s("span",{class:"token punctuation"},"{"),a("\n\txxx1"),s("span",{class:"token operator"},":"),a(" 'xxx'"),s("span",{class:"token punctuation"},","),a("\n\txxx2"),s("span",{class:"token operator"},":"),a(" 'xxxx'"),s("span",{class:"token punctuation"},","),a("\n  ...\n"),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998333-24419"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"\"我是老板\":{\n\txxx1: 'xxx',\n\txxx2: 'xxxx',\n  ...\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998333-24419","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),ac=e('',7),cc=s("div",{class:"language-"},[s("pre",null,[s("code",null,"npm init egg --type=simple\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998333-24953"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm init egg --type=simple\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998333-24953","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),oc=s("h4",{id:"项目依赖"},[s("a",{class:"header-anchor",href:"#项目依赖","aria-hidden":"true"},"#"),a(" 项目依赖")],-1),ic=s("ul",null,[s("li",null,"egg-mongoose"),s("li",null,"egg-redis"),s("li",null,"egg-session")],-1),lc=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token property"},'"name"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"session-redis"'),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token property"},'"version"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"1.0.0"'),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token property"},'"description"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'""'),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token property"},'"private"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token property"},'"egg"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token property"},'"declarations"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),a("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token property"},'"dependencies"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token property"},'"egg"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^2.15.1"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"egg-mongoose"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^3.2.0"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"egg-redis"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^2.4.0"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"egg-scripts"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^2.11.0"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"egg-session"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^3.1.0"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"egg-view-nunjucks"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^2.2.0"'),a("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token property"},'"devDependencies"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token property"},'"autod"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^3.0.1"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"autod-egg"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^1.1.0"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"egg-bin"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^4.13.1"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"egg-ci"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^1.11.0"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"egg-mock"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^3.21.0"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"eslint"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^5.13.0"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"eslint-config-egg"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"^7.1.0"'),a("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token property"},'"engines"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token property"},'"node"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'">=10.0.0"'),a("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token property"},'"scripts"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token property"},'"start"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"egg-scripts start --daemon --title=egg-server-session-redis"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"stop"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"egg-scripts stop --title=egg-server-session-redis"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"dev"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"egg-bin dev"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"debug"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"egg-bin debug"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"test"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"npm run lint -- --fix && npm run test-local"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"test-local"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"egg-bin test"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"cov"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"egg-bin cov"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"lint"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"eslint ."'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"ci"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"npm run lint && npm run cov"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"autod"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"autod"'),a("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token property"},'"ci"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token property"},'"version"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"10"'),a("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token property"},'"repository"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token property"},'"type"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"git"'),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token property"},'"url"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'""'),a("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token property"},'"author"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'""'),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token property"},'"license"'),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"MIT"'),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998333-20241"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "name": "session-redis",\n  "version": "1.0.0",\n  "description": "",\n  "private": true,\n  "egg": {\n    "declarations": true\n  },\n  "dependencies": {\n    "egg": "^2.15.1",\n    "egg-mongoose": "^3.2.0",\n    "egg-redis": "^2.4.0",\n    "egg-scripts": "^2.11.0",\n    "egg-session": "^3.1.0",\n    "egg-view-nunjucks": "^2.2.0"\n  },\n  "devDependencies": {\n    "autod": "^3.0.1",\n    "autod-egg": "^1.1.0",\n    "egg-bin": "^4.13.1",\n    "egg-ci": "^1.11.0",\n    "egg-mock": "^3.21.0",\n    "eslint": "^5.13.0",\n    "eslint-config-egg": "^7.1.0"\n  },\n  "engines": {\n    "node": ">=10.0.0"\n  },\n  "scripts": {\n    "start": "egg-scripts start --daemon --title=egg-server-session-redis",\n    "stop": "egg-scripts stop --title=egg-server-session-redis",\n    "dev": "egg-bin dev",\n    "debug": "egg-bin debug",\n    "test": "npm run lint -- --fix && npm run test-local",\n    "test-local": "egg-bin test",\n    "cov": "egg-bin cov",\n    "lint": "eslint .",\n    "ci": "npm run lint && npm run cov",\n    "autod": "autod"\n  },\n  "ci": {\n    "version": "10"\n  },\n  "repository": {\n    "type": "git",\n    "url": ""\n  },\n  "author": "",\n  "license": "MIT"\n}\n\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998333-20241","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br"),s("span",{class:"line-number"},"22"),s("br"),s("span",{class:"line-number"},"23"),s("br"),s("span",{class:"line-number"},"24"),s("br"),s("span",{class:"line-number"},"25"),s("br"),s("span",{class:"line-number"},"26"),s("br"),s("span",{class:"line-number"},"27"),s("br"),s("span",{class:"line-number"},"28"),s("br"),s("span",{class:"line-number"},"29"),s("br"),s("span",{class:"line-number"},"30"),s("br"),s("span",{class:"line-number"},"31"),s("br"),s("span",{class:"line-number"},"32"),s("br"),s("span",{class:"line-number"},"33"),s("br"),s("span",{class:"line-number"},"34"),s("br"),s("span",{class:"line-number"},"35"),s("br"),s("span",{class:"line-number"},"36"),s("br"),s("span",{class:"line-number"},"37"),s("br"),s("span",{class:"line-number"},"38"),s("br"),s("span",{class:"line-number"},"39"),s("br"),s("span",{class:"line-number"},"40"),s("br"),s("span",{class:"line-number"},"41"),s("br"),s("span",{class:"line-number"},"42"),s("br"),s("span",{class:"line-number"},"43"),s("br"),s("span",{class:"line-number"},"44"),s("br"),s("span",{class:"line-number"},"45"),s("br"),s("span",{class:"line-number"},"46"),s("br"),s("span",{class:"line-number"},"47"),s("br"),s("span",{class:"line-number"},"48"),s("br"),s("span",{class:"line-number"},"49"),s("br"),s("span",{class:"line-number"},"50"),s("br"),s("span",{class:"line-number"},"51"),s("br")])],-1),pc=s("h4",{id:"插件配置"},[s("a",{class:"header-anchor",href:"#插件配置","aria-hidden":"true"},"#"),a(" 插件配置")],-1),dc=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[a("  config"),s("span",{class:"token punctuation"},"."),a("session "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"{"),a("\n    encrypt"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"false"),s("span",{class:"token punctuation"},","),a("\n    signed"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"false"),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token comment"},"// maxAge: 10000"),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n\n  config"),s("span",{class:"token punctuation"},"."),a("redis "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"{"),a("\n    client"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n      port"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"6379"),s("span",{class:"token punctuation"},","),a("          "),s("span",{class:"token comment"},"// Redis port"),a("\n      host"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'127.0.0.1'"),s("span",{class:"token punctuation"},","),a("   "),s("span",{class:"token comment"},"// Redis host"),a("\n      password"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'auth'"),s("span",{class:"token punctuation"},","),a("\n      db"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"0"),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token punctuation"},"}"),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n\n  config"),s("span",{class:"token punctuation"},"."),a("mongoose "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"{"),a("\n    url"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'mongodb://127.0.0.1/redis-mongoose'"),s("span",{class:"token punctuation"},","),a("\n    options"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token comment"},"// mongoose global plugins, expected a function or an array of function and options"),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998334-30883"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"  config.session = {\n    encrypt: false,\n    signed: false,\n    // maxAge: 10000\n  }\n\n  config.redis = {\n    client: {\n      port: 6379,          // Redis port\n      host: '127.0.0.1',   // Redis host\n      password: 'auth',\n      db: 0,\n    }\n  }\n\n  config.mongoose = {\n    url: 'mongodb://127.0.0.1/redis-mongoose',\n    options: {},\n    // mongoose global plugins, expected a function or an array of function and options\n  }\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998334-30883","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br")])],-1),rc=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"/** @type Egg.EggPlugin */"),a("\nmodule"),s("span",{class:"token punctuation"},"."),a("exports "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token comment"},"// had enabled by egg"),a("\n  "),s("span",{class:"token comment"},"// static: {"),a("\n  "),s("span",{class:"token comment"},"//   enable: true,"),a("\n  "),s("span",{class:"token comment"},"// }"),a("\n  nunjucks"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n    enable"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token keyword"},"package"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'egg-view-nunjucks'"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a("\n  redis"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n    enable"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token keyword"},"package"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'egg-redis'"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a("\n  session"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),a("\n  mongoose"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n    enable"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token keyword"},"package"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'egg-mongoose'"),s("span",{class:"token punctuation"},","),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998334-83350"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"/** @type Egg.EggPlugin */\nmodule.exports = {\n  // had enabled by egg\n  // static: {\n  //   enable: true,\n  // }\n  nunjucks: {\n    enable: true,\n    package: 'egg-view-nunjucks',\n  },\n  redis: {\n    enable: true,\n    package: 'egg-redis',\n  },\n  session: true,\n  mongoose: {\n    enable: true,\n    package: 'egg-mongoose',\n  }\n};\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998334-83350","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br")])],-1),uc=s("h4",{id:"路由"},[s("a",{class:"header-anchor",href:"#路由","aria-hidden":"true"},"#"),a(" 路由")],-1),mc=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[a("module"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function-variable function"},"exports"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token parameter"},"app"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" router"),s("span",{class:"token punctuation"},","),a(" controller "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(" app"),s("span",{class:"token punctuation"},";"),a("\n  router"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"get"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'/'"),s("span",{class:"token punctuation"},","),a(" controller"),s("span",{class:"token punctuation"},"."),a("home"),s("span",{class:"token punctuation"},"."),a("index"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n  \n  router"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"get"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'/sign'"),s("span",{class:"token punctuation"},","),a(" controller"),s("span",{class:"token punctuation"},"."),a("login"),s("span",{class:"token punctuation"},"."),a("signHtml"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n  router"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"post"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'/api/sign'"),s("span",{class:"token punctuation"},","),a(" controller"),s("span",{class:"token punctuation"},"."),a("login"),s("span",{class:"token punctuation"},"."),a("sign"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n\n  router"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"get"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'/login'"),s("span",{class:"token punctuation"},","),a(" controller"),s("span",{class:"token punctuation"},"."),a("login"),s("span",{class:"token punctuation"},"."),a("loginHtml"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n  router"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"post"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'/api/login'"),s("span",{class:"token punctuation"},","),a(" controller"),s("span",{class:"token punctuation"},"."),a("login"),s("span",{class:"token punctuation"},"."),a("login"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n  router"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"get"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'/logout'"),s("span",{class:"token punctuation"},","),a(" controller"),s("span",{class:"token punctuation"},"."),a("login"),s("span",{class:"token punctuation"},"."),a("logout"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998334-36361"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"module.exports = app => {\n  const { router, controller } = app;\n  router.get('/', controller.home.index);\n  \n  router.get('/sign', controller.login.signHtml);\n  router.post('/api/sign', controller.login.sign);\n\n  router.get('/login', controller.login.loginHtml);\n  router.post('/api/login', controller.login.login);\n  router.get('/logout', controller.login.logout);\n};\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998334-36361","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br")])],-1),yc=s("h4",{id:"控制器"},[s("a",{class:"header-anchor",href:"#控制器","aria-hidden":"true"},"#"),a(" 控制器")],-1),bc=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"//app/controller/home.js"),a("\n"),s("span",{class:"token string"},"'use strict'"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"const"),a(" Controller "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'egg'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),a("Controller"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"class"),a(),s("span",{class:"token class-name"},"HomeController"),a(),s("span",{class:"token keyword"},"extends"),a(),s("span",{class:"token class-name"},"Controller"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token keyword"},"async"),a(),s("span",{class:"token function"},"index"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" ctx "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"this"),s("span",{class:"token punctuation"},";"),a("\n    \n    "),s("span",{class:"token keyword"},"if"),a(),s("span",{class:"token punctuation"},"("),a("ctx"),s("span",{class:"token punctuation"},"."),a("session"),s("span",{class:"token punctuation"},"."),a("login"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n      "),s("span",{class:"token keyword"},"await"),a(" ctx"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"render"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'home'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token keyword"},"else"),a(),s("span",{class:"token punctuation"},"{"),a("\n      ctx"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"redirect"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'/login'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token punctuation"},"}"),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n\nmodule"),s("span",{class:"token punctuation"},"."),a("exports "),s("span",{class:"token operator"},"="),a(" HomeController"),s("span",{class:"token punctuation"},";"),a("\n\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998334-42641"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"//app/controller/home.js\n'use strict';\n\nconst Controller = require('egg').Controller;\n\nclass HomeController extends Controller {\n  async index() {\n    const { ctx } = this;\n    \n    if (ctx.session.login) {\n      await ctx.render('home');\n    } else {\n      ctx.redirect('/login');\n    }\n  }\n}\n\nmodule.exports = HomeController;\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998334-42641","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br")])],-1),kc=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"// app/controller/login.js"),a("\n"),s("span",{class:"token string"},"'use strict'"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"const"),a(" Controller "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'egg'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),a("Controller"),s("span",{class:"token punctuation"},";"),a("\n\n"),s("span",{class:"token keyword"},"class"),a(),s("span",{class:"token class-name"},"SignController"),a(),s("span",{class:"token keyword"},"extends"),a(),s("span",{class:"token class-name"},"Controller"),a(),s("span",{class:"token punctuation"},"{"),a("\n  "),s("span",{class:"token keyword"},"async"),a(),s("span",{class:"token function"},"signHtml"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" ctx"),s("span",{class:"token punctuation"},","),a(" app "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"this"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token comment"},"// console.log(user);"),a("\n    "),s("span",{class:"token keyword"},"await"),a(" ctx"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"render"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'sign'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n\n  "),s("span",{class:"token keyword"},"async"),a(),s("span",{class:"token function"},"sign"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" ctx"),s("span",{class:"token punctuation"},","),a(" app "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"this"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token comment"},"// console.log('================',ctx.request.body);"),a("\n    "),s("span",{class:"token keyword"},"const"),a(" requestBody "),s("span",{class:"token operator"},"="),a(" ctx"),s("span",{class:"token punctuation"},"."),a("request"),s("span",{class:"token punctuation"},"."),a("body"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token keyword"},"await"),a(" ctx"),s("span",{class:"token punctuation"},"."),a("model"),s("span",{class:"token punctuation"},"."),a("User"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"insertMany"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n        username"),s("span",{class:"token operator"},":"),a(" requestBody"),s("span",{class:"token punctuation"},"."),a("username"),s("span",{class:"token punctuation"},","),a("\n        password"),s("span",{class:"token operator"},":"),a(" requestBody"),s("span",{class:"token punctuation"},"."),a("password\n    "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token comment"},"// console.log(user);"),a("\n    ctx"),s("span",{class:"token punctuation"},"."),a("body "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token string"},"'<h1>注册成功！</h1>'"),s("span",{class:"token punctuation"},";"),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n\n  "),s("span",{class:"token keyword"},"async"),a(),s("span",{class:"token function"},"loginHtml"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" ctx"),s("span",{class:"token punctuation"},","),a(" app "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"this"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token keyword"},"await"),a(" ctx"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"render"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'login'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n\n  "),s("span",{class:"token keyword"},"async"),a(),s("span",{class:"token function"},"login"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" ctx"),s("span",{class:"token punctuation"},","),a(" app "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"this"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token keyword"},"const"),a(" requestBody "),s("span",{class:"token operator"},"="),a(" ctx"),s("span",{class:"token punctuation"},"."),a("request"),s("span",{class:"token punctuation"},"."),a("body"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token keyword"},"const"),a(" inputPassword "),s("span",{class:"token operator"},"="),a(" requestBody"),s("span",{class:"token punctuation"},"."),a("password"),s("span",{class:"token punctuation"},";"),a("\n\n    "),s("span",{class:"token keyword"},"const"),a(" findUser "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"await"),a(" ctx"),s("span",{class:"token punctuation"},"."),a("model"),s("span",{class:"token punctuation"},"."),a("User"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"find"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n        username"),s("span",{class:"token operator"},":"),a(" requestBody"),s("span",{class:"token punctuation"},"."),a("username"),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    \n    "),s("span",{class:"token keyword"},"if"),a(),s("span",{class:"token punctuation"},"("),a("findUser"),s("span",{class:"token punctuation"},"."),a("length "),s("span",{class:"token operator"},"&&"),a(" findUser"),s("span",{class:"token punctuation"},"["),s("span",{class:"token number"},"0"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},"."),a("password "),s("span",{class:"token operator"},"==="),a(" inputPassword"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n        ctx"),s("span",{class:"token punctuation"},"."),a("session"),s("span",{class:"token punctuation"},"."),a("login "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},";"),a("\n        ctx"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"redirect"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'/'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token keyword"},"else"),a(),s("span",{class:"token punctuation"},"{"),a("\n        ctx"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"redirect"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'/login'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n    "),s("span",{class:"token punctuation"},"}"),a("\n    "),s("span",{class:"token comment"},"// console.log('findUser', findUser)"),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n\n  "),s("span",{class:"token keyword"},"async"),a(),s("span",{class:"token function"},"logout"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" ctx"),s("span",{class:"token punctuation"},","),a(" app "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token keyword"},"this"),s("span",{class:"token punctuation"},";"),a("\n    ctx"),s("span",{class:"token punctuation"},"."),a("session"),s("span",{class:"token punctuation"},"."),a("login "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token boolean"},"false"),s("span",{class:"token punctuation"},";"),a("\n    ctx"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"redirect"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'/login'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n  "),s("span",{class:"token punctuation"},"}"),a("\n"),s("span",{class:"token punctuation"},"}"),a("\n\nmodule"),s("span",{class:"token punctuation"},"."),a("exports "),s("span",{class:"token operator"},"="),a(" SignController"),s("span",{class:"token punctuation"},";"),a("\n\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998340-20826"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// app/controller/login.js\n'use strict';\n\nconst Controller = require('egg').Controller;\n\nclass SignController extends Controller {\n  async signHtml() {\n    const { ctx, app } = this;\n    // console.log(user);\n    await ctx.render('sign');\n  }\n\n  async sign() {\n    const { ctx, app } = this;\n    // console.log('================',ctx.request.body);\n    const requestBody = ctx.request.body;\n    await ctx.model.User.insertMany({\n        username: requestBody.username,\n        password: requestBody.password\n    });\n    // console.log(user);\n    ctx.body = '<h1>注册成功！</h1>';\n  }\n\n  async loginHtml() {\n    const { ctx, app } = this;\n    await ctx.render('login');\n  }\n\n  async login() {\n    const { ctx, app } = this;\n    const requestBody = ctx.request.body;\n    const inputPassword = requestBody.password;\n\n    const findUser = await ctx.model.User.find({\n        username: requestBody.username,\n    });\n    \n    if (findUser.length && findUser[0].password === inputPassword) {\n        ctx.session.login = true;\n        ctx.redirect('/');\n    } else {\n        ctx.redirect('/login');\n    }\n    // console.log('findUser', findUser)\n  }\n\n  async logout() {\n    const { ctx, app } = this;\n    ctx.session.login = false;\n    ctx.redirect('/login');\n  }\n}\n\nmodule.exports = SignController;\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998340-20826","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br"),s("span",{class:"line-number"},"22"),s("br"),s("span",{class:"line-number"},"23"),s("br"),s("span",{class:"line-number"},"24"),s("br"),s("span",{class:"line-number"},"25"),s("br"),s("span",{class:"line-number"},"26"),s("br"),s("span",{class:"line-number"},"27"),s("br"),s("span",{class:"line-number"},"28"),s("br"),s("span",{class:"line-number"},"29"),s("br"),s("span",{class:"line-number"},"30"),s("br"),s("span",{class:"line-number"},"31"),s("br"),s("span",{class:"line-number"},"32"),s("br"),s("span",{class:"line-number"},"33"),s("br"),s("span",{class:"line-number"},"34"),s("br"),s("span",{class:"line-number"},"35"),s("br"),s("span",{class:"line-number"},"36"),s("br"),s("span",{class:"line-number"},"37"),s("br"),s("span",{class:"line-number"},"38"),s("br"),s("span",{class:"line-number"},"39"),s("br"),s("span",{class:"line-number"},"40"),s("br"),s("span",{class:"line-number"},"41"),s("br"),s("span",{class:"line-number"},"42"),s("br"),s("span",{class:"line-number"},"43"),s("br"),s("span",{class:"line-number"},"44"),s("br"),s("span",{class:"line-number"},"45"),s("br"),s("span",{class:"line-number"},"46"),s("br"),s("span",{class:"line-number"},"47"),s("br"),s("span",{class:"line-number"},"48"),s("br"),s("span",{class:"line-number"},"49"),s("br"),s("span",{class:"line-number"},"50"),s("br"),s("span",{class:"line-number"},"51"),s("br"),s("span",{class:"line-number"},"52"),s("br"),s("span",{class:"line-number"},"53"),s("br"),s("span",{class:"line-number"},"54"),s("br"),s("span",{class:"line-number"},"55"),s("br"),s("span",{class:"line-number"},"56"),s("br")])],-1),hc=s("h4",{id:"model"},[s("a",{class:"header-anchor",href:"#model","aria-hidden":"true"},"#"),a(" model")],-1),fc=s("div",{class:"language-"},[s("pre",null,[s("code",null,"// {app_root}/app/model/user.js\nmodule.exports = app => {\n    const mongoose = app.mongoose;\n    const Schema = mongoose.Schema;\n\n    const UserSchema = new Schema({\n        username: { type: String },\n        password: { type: String },\n    });\n\n    return mongoose.model('User', UserSchema);\n}\n"),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556998340-27553"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// {app_root}/app/model/user.js\nmodule.exports = app => {\n    const mongoose = app.mongoose;\n    const Schema = mongoose.Schema;\n\n    const UserSchema = new Schema({\n        username: { type: String },\n        password: { type: String },\n    });\n\n    return mongoose.model('User', UserSchema);\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556998340-27553","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br")])],-1);o.render=function(e,s,a,c,o,gc){return n(),t("div",null,[i,l,p,d,r,u,m,y,b,k,h,f,g,C,v,x,E,w,T,I,R,$,S,N,A,j,_,D,P,B,O,F,L,M,q,U,G,Z,H,V,Y,K,X,W,Q,J,z,nn,tn,en,sn,an,cn,on,ln,pn,dn,rn,un,mn,yn,bn,kn,hn,fn,gn,Cn,vn,xn,En,wn,Tn,In,Rn,$n,Sn,Nn,An,jn,_n,Dn,Pn,Bn,On,Fn,Ln,Mn,qn,Un,Gn,Zn,Hn,Vn,Yn,Kn,Xn,Wn,Qn,Jn,zn,nt,tt,et,st,at,ct,ot,it,lt,pt,dt,rt,ut,mt,yt,bt,kt,ht,ft,gt,Ct,vt,xt,Et,wt,Tt,It,Rt,$t,St,Nt,At,jt,_t,Dt,Pt,Bt,Ot,Ft,Lt,Mt,qt,Ut,Gt,Zt,Ht,Vt,Yt,Kt,Xt,Wt,Qt,Jt,zt,ne,te,ee,se,ae,ce,oe,ie,le,pe,de,re,ue,me,ye,be,ke,he,fe,ge,Ce,ve,xe,Ee,we,Te,Ie,Re,$e,Se,Ne,Ae,je,_e,De,Pe,Be,Oe,Fe,Le,Me,qe,Ue,Ge,Ze,He,Ve,Ye,Ke,Xe,We,Qe,Je,ze,ns,ts,es,ss,as,cs,os,is,ls,ps,ds,rs,us,ms,ys,bs,ks,hs,fs,gs,Cs,vs,xs,Es,ws,Ts,Is,Rs,$s,Ss,Ns,As,js,_s,Ds,Ps,Bs,Os,Fs,Ls,Ms,qs,Us,Gs,Zs,Hs,Vs,Ys,Ks,Xs,Ws,Qs,Js,zs,na,ta,ea,sa,aa,ca,oa,ia,la,pa,da,ra,ua,ma,ya,ba,ka,ha,fa,ga,Ca,va,xa,Ea,wa,Ta,Ia,Ra,$a,Sa,Na,Aa,ja,_a,Da,Pa,Ba,Oa,Fa,La,Ma,qa,Ua,Ga,Za,Ha,Va,Ya,Ka,Xa,Wa,Qa,Ja,za,nc,tc,ec,sc,ac,cc,oc,ic,lc,pc,dc,rc,uc,mc,yc,bc,kc,hc,fc])};export default o;export{c as __pageData};
