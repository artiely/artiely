import{o as n,c as t,t as s,a,x as e}from"./app.746f22cf.js";const o='{"title":"nodejs核心api","description":"","frontmatter":{"title":"nodejs核心api","tag":["nodejs"],"author":"Artiely","date":"2019-11-16","cover":"https://gitee.com/artiely/Figure-bed/raw/master/images/20200315143059.png","base64":"fee200"},"headers":[{"level":2,"title":"目标","slug":"目标"},{"level":2,"title":"核心api","slug":"核心api"},{"level":3,"title":"Buffer","slug":"buffer"},{"level":3,"title":"dgram","slug":"dgram"},{"level":3,"title":"Events事件触发器","slug":"events事件触发器"},{"level":3,"title":"fs模块","slug":"fs模块"},{"level":3,"title":"fs模块高级方法","slug":"fs模块高级方法"},{"level":3,"title":"http模块","slug":"http模块"},{"level":3,"title":"http2模块","slug":"http2模块"},{"level":3,"title":"https模块","slug":"https模块"}],"relativePath":"post/2019/2019-11-16-nodejs-api.md","lastUpdated":1629110830323}',c={},l=s('',9),p=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// 创建一个长度为 10、且用零填充的 Buffer。"),e("\n"),a("span",{class:"token keyword"},"const"),e(" buf1 "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"alloc"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"10"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// 创建一个长度为 10、且用 0x1 填充的 Buffer。 "),e("\n"),a("span",{class:"token keyword"},"const"),e(" buf2 "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"alloc"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"10"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// 创建一个长度为 10、且未初始化的 Buffer。"),e("\n"),a("span",{class:"token comment"},"// 这个方法比调用 Buffer.alloc() 更快，"),e("\n"),a("span",{class:"token comment"},"// 但返回的 Buffer 实例可能包含旧数据，"),e("\n"),a("span",{class:"token comment"},"// 因此需要使用 fill() 或 write() 重写。"),e("\n"),a("span",{class:"token keyword"},"const"),e(" buf3 "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"allocUnsafe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"10"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// 创建一个包含 [0x1, 0x2, 0x3] 的 Buffer。"),e("\n"),a("span",{class:"token keyword"},"const"),e(" buf4 "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"from"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// 创建一个包含 UTF-8 字节 [0x74, 0xc3, 0xa9, 0x73, 0x74] 的 Buffer。"),e("\n"),a("span",{class:"token keyword"},"const"),e(" buf5 "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"from"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'tést'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// 创建一个包含 Latin-1 字节 [0x74, 0xe9, 0x73, 0x74] 的 Buffer。"),e("\n"),a("span",{class:"token keyword"},"const"),e(" buf6 "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"from"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'tést'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'latin1'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996078-12795"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// 创建一个长度为 10、且用零填充的 Buffer。\nconst buf1 = Buffer.alloc(10);\n\n// 创建一个长度为 10、且用 0x1 填充的 Buffer。 \nconst buf2 = Buffer.alloc(10, 1);\n\n// 创建一个长度为 10、且未初始化的 Buffer。\n// 这个方法比调用 Buffer.alloc() 更快，\n// 但返回的 Buffer 实例可能包含旧数据，\n// 因此需要使用 fill() 或 write() 重写。\nconst buf3 = Buffer.allocUnsafe(10);\n\n// 创建一个包含 [0x1, 0x2, 0x3] 的 Buffer。\nconst buf4 = Buffer.from([1, 2, 3]);\n\n// 创建一个包含 UTF-8 字节 [0x74, 0xc3, 0xa9, 0x73, 0x74] 的 Buffer。\nconst buf5 = Buffer.from('tést');\n\n// 创建一个包含 Latin-1 字节 [0x74, 0xe9, 0x73, 0x74] 的 Buffer。\nconst buf6 = Buffer.from('tést', 'latin1');\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996078-12795","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br")])],-1),i=s('',8),u=a("div",{class:"language-"},[a("pre",null,[a("code",null,"new TypedArray(); // ES2017中新增\nnew TypedArray(length); \nnew TypedArray(typedArray); \nnew TypedArray(object); \nnew TypedArray(buffer [, byteOffset [, length]]); \n\nTypedArray()指的是以下的其中之一： \n\nInt8Array(); \nUint8Array(); \nUint8ClampedArray();\nInt16Array(); \nUint16Array();\nInt32Array(); \nUint32Array(); \nFloat32Array(); \nFloat64Array();\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996078-23966"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"new TypedArray(); // ES2017中新增\nnew TypedArray(length); \nnew TypedArray(typedArray); \nnew TypedArray(object); \nnew TypedArray(buffer [, byteOffset [, length]]); \n\nTypedArray()指的是以下的其中之一： \n\nInt8Array(); \nUint8Array(); \nUint8ClampedArray();\nInt16Array(); \nUint16Array();\nInt32Array(); \nUint32Array(); \nFloat32Array(); \nFloat64Array();\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996078-23966","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br")])],-1),r=a("p",null,"ArrayBuffer对象：代表原始的二进制数据。",-1),d=a("p",null,"TypedArray视图：用来读写简单类型的二进制数据。",-1),k=a("p",null,"DataView视图：用来读写复杂类型的二进制数据。",-1),m=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token function"},"str2ab"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"str"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"var"),e(" buf "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"ArrayBuffer"),a("span",{class:"token punctuation"},"("),e("str"),a("span",{class:"token punctuation"},"."),e("length "),a("span",{class:"token operator"},"*"),e(),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// 每个字符占用2个字节"),e("\n  "),a("span",{class:"token keyword"},"var"),e(" bufView "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"Uint8Array"),a("span",{class:"token punctuation"},"("),e("buf"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token keyword"},"for"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"var"),e(" i "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},","),e(" strLen "),a("span",{class:"token operator"},"="),e(" str"),a("span",{class:"token punctuation"},"."),e("length"),a("span",{class:"token punctuation"},";"),e(" i "),a("span",{class:"token operator"},"<"),e(" strLen"),a("span",{class:"token punctuation"},";"),e(" i"),a("span",{class:"token operator"},"++"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    bufView"),a("span",{class:"token punctuation"},"["),e("i"),a("span",{class:"token punctuation"},"]"),e(),a("span",{class:"token operator"},"="),e(" str"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"charCodeAt"),a("span",{class:"token punctuation"},"("),e("i"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n  "),a("span",{class:"token keyword"},"return"),e(" buf"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996078-52288"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"function str2ab(str) {\n  var buf = new ArrayBuffer(str.length * 2); // 每个字符占用2个字节\n  var bufView = new Uint8Array(buf);\n  for (var i = 0, strLen = str.length; i < strLen; i++) {\n    bufView[i] = str.charCodeAt(i);\n  }\n  return buf;\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996078-52288","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br")])],-1),b=s('',6),y=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" arr "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"Uint16Array"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\narr"),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},"]"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"5000"),a("span",{class:"token punctuation"},";"),e("\narr"),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"]"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"4000"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// 拷贝 `arr` 的内容。"),e("\n"),a("span",{class:"token keyword"},"const"),e(" buf1 "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"from"),a("span",{class:"token punctuation"},"("),e("arr"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"// 与 `arr` 共享内存。"),e("\n"),a("span",{class:"token keyword"},"const"),e(" buf2 "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"from"),a("span",{class:"token punctuation"},"("),e("arr"),a("span",{class:"token punctuation"},"."),e("buffer"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("buf1"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"// 打印: <Buffer 88 a0>"),e("\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("buf2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"// 打印: <Buffer 88 13 a0 0f>"),e("\n\narr"),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"]"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"6000"),a("span",{class:"token punctuation"},";"),e("\n\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("buf1"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"// 打印: <Buffer 88 a0>"),e("\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("buf2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"// 打印: <Buffer 88 13 70 17>"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996078-78078"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const arr = new Uint16Array(2);\n\narr[0] = 5000;\narr[1] = 4000;\n\n// 拷贝 `arr` 的内容。\nconst buf1 = Buffer.from(arr);\n// 与 `arr` 共享内存。\nconst buf2 = Buffer.from(arr.buffer);\n\nconsole.log(buf1);\n// 打印: <Buffer 88 a0>\nconsole.log(buf2);\n// 打印: <Buffer 88 13 a0 0f>\n\narr[1] = 6000;\n\nconsole.log(buf1);\n// 打印: <Buffer 88 a0>\nconsole.log(buf2);\n// 打印: <Buffer 88 13 70 17>\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996078-78078","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br")])],-1),f=a("h3",{id:"dgram"},[a("a",{class:"header-anchor",href:"#dgram","aria-hidden":"true"},"#"),e(" dgram")],-1),h=a("p",null,[a("code",null,"dgram"),e(" 模块提供了 UDP 数据包 socket 的实现。")],-1),g=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" dgram "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'dgram'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" dgram"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'udp4'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'error'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"服务器异常：\\n"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("err"),a("span",{class:"token punctuation"},"."),e("stack"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"close"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'message'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("msg"),a("span",{class:"token punctuation"},","),e(" rinfo")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"服务器接收到来自 "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("rinfo"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("rinfo"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"}," 的 "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("msg"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'listening'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"const"),e(" address "),a("span",{class:"token operator"},"="),e(" server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"address"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"服务器监听 "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("address"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("address"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token function"},"server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"bind"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"41234"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"// 服务器监听 0.0.0.0:41234"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996079-18690"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const dgram = require('dgram');\nconst server = dgram.createSocket('udp4');\n\nserver.on('error', (err) => {\n  console.log(`服务器异常：\\n${err.stack}`);\n  server.close();\n});\n\nserver.on('message', (msg, rinfo) => {\n  console.log(`服务器接收到来自 ${rinfo.address}:${rinfo.port} 的 ${msg}`);\n});\n\nserver.on('listening', () => {\n  const address = server.address();\n  console.log(`服务器监听 ${address.address}:${address.port}`);\n});\n\nserver.bind(41234);\n// 服务器监听 0.0.0.0:41234\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996079-18690","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br")])],-1),v=s('',2),C=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// 示例，发送 UDP 包到 localhost 上的某个端口："),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" dgram "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'dgram'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" message "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"from"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'一些字节'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" client "),a("span",{class:"token operator"},"="),e(" dgram"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'udp4'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),e("message"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"41234"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'localhost'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"close"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"// 示例，发送包含多个 buffer 的 UDP 包到 127.0.0.1 上的某个端口："),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" dgram "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'dgram'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" buf1 "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"from"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'一些 '"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" buf2 "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"from"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'字节'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" client "),a("span",{class:"token operator"},"="),e(" dgram"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'udp4'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"["),e("buf1"),a("span",{class:"token punctuation"},","),e(" buf2"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"41234"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"close"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"// 发送多个 buffer 的速度取决于应用和操作系统。 逐案运行基准来确定最佳策略是很重要的。 但是一般来说，发送多个 buffer 速度更快。"),e("\n\n"),a("span",{class:"token comment"},"// 示例，使用已连接的 socket 发送 UDP 包到 localhost 上的某个端口："),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" dgram "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'dgram'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" message "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"from"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'一些字节'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" client "),a("span",{class:"token operator"},"="),e(" dgram"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'udp4'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"connect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"41234"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'localhost'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),e("message"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"close"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996079-583"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// 示例，发送 UDP 包到 localhost 上的某个端口：\n\nconst dgram = require('dgram');\nconst message = Buffer.from('一些字节');\nconst client = dgram.createSocket('udp4');\nclient.send(message, 41234, 'localhost', (err) => {\n  client.close();\n});\n// 示例，发送包含多个 buffer 的 UDP 包到 127.0.0.1 上的某个端口：\n\nconst dgram = require('dgram');\nconst buf1 = Buffer.from('一些 ');\nconst buf2 = Buffer.from('字节');\nconst client = dgram.createSocket('udp4');\nclient.send([buf1, buf2], 41234, (err) => {\n  client.close();\n});\n// 发送多个 buffer 的速度取决于应用和操作系统。 逐案运行基准来确定最佳策略是很重要的。 但是一般来说，发送多个 buffer 速度更快。\n\n// 示例，使用已连接的 socket 发送 UDP 包到 localhost 上的某个端口：\n\nconst dgram = require('dgram');\nconst message = Buffer.from('一些字节');\nconst client = dgram.createSocket('udp4');\nclient.connect(41234, 'localhost', (err) => {\n  client.send(message, (err) => {\n    client.close();\n  });\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996079-583","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br")])],-1),x=s('',6),w=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" EventEmitter "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'events'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token keyword"},"class"),e(),a("span",{class:"token class-name"},"MyEmitter"),e(),a("span",{class:"token keyword"},"extends"),e(),a("span",{class:"token class-name"},"EventEmitter"),e(),a("span",{class:"token punctuation"},"{"),a("span",{class:"token punctuation"},"}"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" myEmitter "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"MyEmitter"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'触发事件'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996079-23032"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const EventEmitter = require('events');\n\nclass MyEmitter extends EventEmitter {}\n\nconst myEmitter = new MyEmitter();\nmyEmitter.on('event', () => {\n  console.log('触发事件');\n});\nmyEmitter.emit('event');\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996079-23032","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br")])],-1),T=a("h4",{id:"将参数和-this-传给监听器"},[a("a",{class:"header-anchor",href:"#将参数和-this-传给监听器","aria-hidden":"true"},"#"),e(" 将参数和 this 传给监听器")],-1),_=a("p",null,[a("code",null,"eventEmitter.emit()"),e(" 方法可以传任意数量的参数到监听器函数。 当监听器函数被调用时， "),a("code",null,"this"),e(" 关键词会被指向监听器所绑定的 "),a("code",null,"EventEmitter"),e(" 实例。")],-1),E=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" myEmitter "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"MyEmitter"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("a"),a("span",{class:"token punctuation"},","),e(" b")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("a"),a("span",{class:"token punctuation"},","),e(" b"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"this"),e(),a("span",{class:"token operator"},"==="),e(" myEmitter"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token comment"},"// 打印:"),e("\n  "),a("span",{class:"token comment"},"//   a b MyEmitter {"),e("\n  "),a("span",{class:"token comment"},"//     domain: null,"),e("\n  "),a("span",{class:"token comment"},"//     _events: { event: [Function] },"),e("\n  "),a("span",{class:"token comment"},"//     _eventsCount: 1,"),e("\n  "),a("span",{class:"token comment"},"//     _maxListeners: undefined } true"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'a'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'b'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996079-45652"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const myEmitter = new MyEmitter();\nmyEmitter.on('event', function(a, b) {\n  console.log(a, b, this, this === myEmitter);\n  // 打印:\n  //   a b MyEmitter {\n  //     domain: null,\n  //     _events: { event: [Function] },\n  //     _eventsCount: 1,\n  //     _maxListeners: undefined } true\n});\nmyEmitter.emit('event', 'a', 'b');\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996079-45652","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br")])],-1),S=a("p",null,[e("也可以使用 ES6 的箭头函数作为监听器。但 "),a("code",null,"this"),e(" 关键词不会指向 "),a("code",null,"EventEmitter"),e(" 实例：")],-1),j=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" myEmitter "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"MyEmitter"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("a"),a("span",{class:"token punctuation"},","),e(" b")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("a"),a("span",{class:"token punctuation"},","),e(" b"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token comment"},"// 打印: a b {}"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'a'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'b'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996080-58249"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const myEmitter = new MyEmitter();\nmyEmitter.on('event', (a, b) => {\n  console.log(a, b, this);\n  // 打印: a b {}\n});\nmyEmitter.emit('event', 'a', 'b');\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996080-58249","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),A=a("h4",{id:"同步vs异步"},[a("a",{class:"header-anchor",href:"#同步vs异步","aria-hidden":"true"},"#"),e(" 同步vs异步")],-1),F=a("p",null,[a("code",null,"EventEmitter"),e(" 会按照监听器注册的顺序同步地调用所有监听器。 所以必须确保事件的排序正确，且避免竞态条件。 可以使用 "),a("code",null,"setImmediate()"),e(" 或 "),a("code",null,"process.nextTick()"),e(" 切换到异步模式：")],-1),P=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" myEmitter "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"MyEmitter"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("a"),a("span",{class:"token punctuation"},","),e(" b")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"setImmediate"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'异步进行'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'a'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'b'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996080-1666"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const myEmitter = new MyEmitter();\nmyEmitter.on('event', (a, b) => {\n  setImmediate(() => {\n    console.log('异步进行');\n  });\n});\nmyEmitter.emit('event', 'a', 'b');\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996080-1666","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br")])],-1),B=a("h4",{id:"仅处理事件一次"},[a("a",{class:"header-anchor",href:"#仅处理事件一次","aria-hidden":"true"},"#"),e(" 仅处理事件一次")],-1),I=a("p",null,[e("当使用 "),a("code",null,"eventEmitter.on()"),e(" 注册监听器时，监听器会在每次触发命名事件时被调用。")],-1),$=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" myEmitter "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"MyEmitter"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"let"),e(" m "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},";"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token operator"},"++"),e("m"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"// 打印: 1"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"// 打印: 2"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996080-52923"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const myEmitter = new MyEmitter();\nlet m = 0;\nmyEmitter.on('event', () => {\n  console.log(++m);\n});\nmyEmitter.emit('event');\n// 打印: 1\nmyEmitter.emit('event');\n// 打印: 2\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996080-52923","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1),H=a("p",null,[e("使用 "),a("code",null,"eventEmitter.once()"),e(" 可以注册最多可调用一次的监听器。 当事件被触发时，监听器会被注销，然后再调用。")],-1),N=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" myEmitter "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"MyEmitter"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"let"),e(" m "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},";"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"once"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token operator"},"++"),e("m"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"// 打印: 1"),e("\nmyEmitter"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'event'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"// 不触发"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996080-58995"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const myEmitter = new MyEmitter();\nlet m = 0;\nmyEmitter.once('event', () => {\n  console.log(++m);\n});\nmyEmitter.emit('event');\n// 打印: 1\nmyEmitter.emit('event');\n// 不触发\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996080-58995","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1),D=s('',22),q=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"fs"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token keyword"},"let"),e(" buf "),a("span",{class:"token operator"},"="),e(" fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFileSync"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"1.txt"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"let"),e(" data "),a("span",{class:"token operator"},"="),e(" fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFileSync"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"1.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"utf8"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("buf"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// <Buffer 48 65 6c 6c 6f>"),e("\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// Hello"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996080-4864"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const fs = require("fs");\n\nlet buf = fs.readFileSync("1.txt");\nlet data = fs.readFileSync("1.txt", "utf8");\n\nconsole.log(buf); // <Buffer 48 65 6c 6c 6f>\nconsole.log(data); // Hello\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996080-4864","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br")])],-1),R=s('',4),U=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"fs"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nfs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"1.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"utf8"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" data")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("err"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// null"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// Hello"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996080-48154"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const fs = require("fs");\n\nfs.readFile("1.txt", "utf8", (err, data) => {\n    console.log(err); // null\n    console.log(data); // Hello\n});\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996080-48154","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),V=s('',5),M=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"fs"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nfs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"writeFileSync"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"2.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"Hello world"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"let"),e(" data "),a("span",{class:"token operator"},"="),e(" fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFileSync"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"2.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"utf8"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// Hello world"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996080-93213"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const fs = require("fs");\n\nfs.writeFileSync("2.txt", "Hello world");\nlet data = fs.readFileSync("2.txt", "utf8");\n\nconsole.log(data); // Hello world\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996080-93213","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),L=a("h4",{id:"4-异步写入方法-writefile"},[a("a",{class:"header-anchor",href:"#4-异步写入方法-writefile","aria-hidden":"true"},"#"),e(" (4) 异步写入方法 writeFile")],-1),J=a("p",null,[e("异步写入方法 "),a("code",null,"writeFile"),e(" 与 "),a("code",null,"writeFileSync"),e(" 的前三个参数相同，最后一个参数为回调函数，函数内有一个参数 "),a("code",null,"err"),e(" （错误），回调函数在文件写入数据成功后执行。")],-1),W=a("p",null,"异步写入 writeFile",-1),K=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"fs"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nfs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"writeFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"2.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"Hello world"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"err"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token operator"},"!"),e("err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n        fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"2.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"utf8"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" data")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n            console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// Hello world"),e("\n        "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996080-49315"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const fs = require("fs");\n\nfs.writeFile("2.txt", "Hello world", err => {\n    if (!err) {\n        fs.readFile("2.txt", "utf8", (err, data) => {\n            console.log(data); // Hello world\n        });\n    }\n})\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996080-49315","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1),Z=s('',5),G=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"fs"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nfs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"appendFileSync"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"3.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'" world"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"let"),e(" data "),a("span",{class:"token operator"},"="),e(" fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFileSync"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"3.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"utf8"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// Hello world"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996081-46493"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const fs = require("fs");\n\nfs.appendFileSync("3.txt", " world");\nlet data = fs.readFileSync("3.txt", "utf8");\n\nconsole.log(data); // Hello world\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996081-46493","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),X=a("h4",{id:"6-异步追加写入方法-appendfile"},[a("a",{class:"header-anchor",href:"#6-异步追加写入方法-appendfile","aria-hidden":"true"},"#"),e(" (6) 异步追加写入方法 appendFile")],-1),O=a("p",null,[e("异步追加写入方法 "),a("code",null,"appendFile"),e(" 与 "),a("code",null,"appendFileSync"),e(" 的前三个参数相同，最后一个参数为回调函数，函数内有一个参数 "),a("code",null,"err"),e(" （错误），回调函数在文件追加写入数据成功后执行。")],-1),Q=a("p",null,"异步追加 appendFile",-1),Y=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"fs"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nfs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"appendFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"3.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'" world"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"err"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token operator"},"!"),e("err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n        fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"3.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"utf8"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" data")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n            console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// Hello world"),e("\n        "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996081-44805"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const fs = require("fs");\n\nfs.appendFile("3.txt", " world", err => {\n    if (!err) {\n        fs.readFile("3.txt", "utf8", (err, data) => {\n            console.log(data); // Hello world\n        });\n    }\n});\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996081-44805","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1),z=a("h4",{id:"7-同步拷贝写入方法-copyfilesync"},[a("a",{class:"header-anchor",href:"#7-同步拷贝写入方法-copyfilesync","aria-hidden":"true"},"#"),e(" (7) 同步拷贝写入方法 copyFileSync")],-1),nn=a("p",null,[e("同步拷贝写入方法 "),a("code",null,"copyFileSync"),e(" 有两个参数，第一个参数为被拷贝的源文件路径，第二个参数为拷贝到的目标文件路径，如果目标文件不存在，则会创建并拷贝。")],-1),tn=a("p",null,[e("现在将上面 "),a("code",null,"3.txt"),e(" 的内容拷贝到 "),a("code",null,"4.txt"),e(" 中：")],-1),sn=a("p",null,"同步拷贝 copyFileSync",-1),an=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"fs"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nfs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"copyFileSync"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"3.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"4.txt"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"let"),e(" data "),a("span",{class:"token operator"},"="),e(" fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFileSync"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"4.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"utf8"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// Hello world"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996081-92622"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const fs = require("fs");\n\nfs.copyFileSync("3.txt", "4.txt");\nlet data = fs.readFileSync("4.txt", "utf8");\n\nconsole.log(data); // Hello world\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996081-92622","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),en=a("h4",{id:"8-异步拷贝写入方法-copyfile"},[a("a",{class:"header-anchor",href:"#8-异步拷贝写入方法-copyfile","aria-hidden":"true"},"#"),e(" (8) 异步拷贝写入方法 copyFile")],-1),on=a("p",null,[e("异步拷贝写入方法 "),a("code",null,"copyFile"),e(" 和 "),a("code",null,"copyFileSync"),e(" 前两个参数相同，最后一个参数为回调函数，在拷贝完成后执行。")],-1),cn=a("p",null,"异步拷贝 copyFile",-1),ln=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"fs"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nfs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"copyFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"3.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"4.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"4.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"utf8"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" data")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n        console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// Hello world"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996081-90980"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const fs = require("fs");\n\nfs.copyFile("3.txt", "4.txt", () => {\n    fs.readFile("4.txt", "utf8", (err, data) => {\n        console.log(data); // Hello world\n    });\n});\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996081-90980","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br")])],-1),pn=s('',5),un=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"fs"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nfs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"open"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"4.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"r"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" fd")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("fd"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"open"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"5.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"r"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" fd")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n        console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("fd"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// 3"),e("\n"),a("span",{class:"token comment"},"// 4"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996081-82858"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const fs = require("fs");\n\nfs.open("4.txt", "r", (err, fd) => {\n    console.log(fd);\n    fs.open("5.txt", "r", (err, fd) => {\n        console.log(fd);\n    });\n});\n\n// 3\n// 4\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996081-82858","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br")])],-1),rn=a("h4",{id:"2-关闭文件-close"},[a("a",{class:"header-anchor",href:"#2-关闭文件-close","aria-hidden":"true"},"#"),e(" 2、关闭文件 close")],-1),dn=a("p",null,[a("code",null,"close"),e(" 方法有两个参数，第一个参数为关闭文件的文件描述符 "),a("code",null,"fd"),e(" ，第二参数为回调函数，回调函数有一个参数 "),a("code",null,"err"),e(" （错误），关闭文件后执行。")],-1),kn=a("p",null,"异步关闭文件",-1),mn=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"fs"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nfs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"open"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"4.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"r"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" fd")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"close"),a("span",{class:"token punctuation"},"("),e("fd"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"err"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n        console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"关闭成功"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// 关闭成功"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996081-72557"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const fs = require("fs");\n\nfs.open("4.txt", "r", (err, fd) => {\n    fs.close(fd, err => {\n        console.log("关闭成功");\n    });\n});\n\n// 关闭成功\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996081-72557","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1),bn=s('',7),yn=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"fs"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"let"),e(" buf "),a("span",{class:"token operator"},"="),e(" Buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"alloc"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"6"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// 打开文件"),e("\nfs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"open"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"6.txt"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"r"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" fd")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token comment"},"// 读取文件"),e("\n    fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"read"),a("span",{class:"token punctuation"},"("),e("fd"),a("span",{class:"token punctuation"},","),e(" buf"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" bytesRead"),a("span",{class:"token punctuation"},","),e(" buffer")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n        console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("bytesRead"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n        console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("buffer"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n        "),a("span",{class:"token comment"},"// 继续读取"),e("\n        fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"read"),a("span",{class:"token punctuation"},"("),e("fd"),a("span",{class:"token punctuation"},","),e(" buf"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" bytesRead"),a("span",{class:"token punctuation"},","),e(" buffer")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n            console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("bytesRead"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n            console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("buffer"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n            console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("buffer"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toString"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n        "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// 3"),e("\n"),a("span",{class:"token comment"},"// <Buffer e4 bd a0 00 00 00>"),e("\n\n"),a("span",{class:"token comment"},"// 3"),e("\n"),a("span",{class:"token comment"},"// <Buffer e4 bd a0 e5 a5 bd>"),e("\n"),a("span",{class:"token comment"},"// 你好"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996082-31229"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const fs = require("fs");\nlet buf = Buffer.alloc(6);\n\n// 打开文件\nfs.open("6.txt", "r", (err, fd) => {\n    // 读取文件\n    fs.read(fd, buf, 0, 3, 0, (err, bytesRead, buffer) => {\n        console.log(bytesRead);\n        console.log(buffer);\n\n        // 继续读取\n        fs.read(fd, buf, 3, 3, 3, (err, bytesRead, buffer) => {\n            console.log(bytesRead);\n            console.log(buffer);\n            console.log(buffer.toString());\n        });\n    });\n});\n\n// 3\n// <Buffer e4 bd a0 00 00 00>\n\n// 3\n// <Buffer e4 bd a0 e5 a5 bd>\n// 你好\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996082-31229","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br")])],-1),fn=a("h4",{id:"4fscreatereadstream"},[a("a",{class:"header-anchor",href:"#4fscreatereadstream","aria-hidden":"true"},"#"),e(" 4.fs.createReadStream")],-1),hn=a("p",null,"这个api的作用是打开一个可读的文件流并且返回一个fs.ReadStream对象",-1),gn=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" fs"),a("span",{class:"token operator"},"="),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'fs'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" path"),a("span",{class:"token operator"},"="),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'path'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"let"),e(" readStream"),a("span",{class:"token operator"},"="),e("fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createReadStream"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'./test/b.js'"),a("span",{class:"token punctuation"},","),a("span",{class:"token punctuation"},"{"),e("encoding"),a("span",{class:"token operator"},":"),a("span",{class:"token string"},"'utf8'"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"//console.log(readStream);"),e("\n \n"),a("span",{class:"token comment"},"//读取文件发生错误事件"),e("\nreadStream"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'error'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'发生异常:'"),a("span",{class:"token punctuation"},","),e(" err"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"//已打开要读取的文件事件"),e("\nreadStream"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'open'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"fd"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'文件已打开:'"),a("span",{class:"token punctuation"},","),e(" fd"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token comment"},"//文件已经就位，可用于读取事件"),e("\nreadStream"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'ready'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'文件已准备好..'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n \n"),a("span",{class:"token comment"},"//文件读取中事件·····"),e("\nreadStream"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'data'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"chunk"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'读取文件数据:'"),a("span",{class:"token punctuation"},","),e(" chunk"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n \n"),a("span",{class:"token comment"},"//文件读取完成事件"),e("\nreadStream"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'end'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'读取已完成..'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n \n"),a("span",{class:"token comment"},"//文件已关闭事件"),e("\nreadStream"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'close'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'文件已关闭！'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996082-52949"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const fs=require('fs');\nconst path=require('path');\nlet readStream=fs.createReadStream('./test/b.js',{encoding:'utf8'});\n//console.log(readStream);\n \n//读取文件发生错误事件\nreadStream.on('error', (err) => {\n    console.log('发生异常:', err);\n});\n//已打开要读取的文件事件\nreadStream.on('open', (fd) => {\n    console.log('文件已打开:', fd);\n});\n//文件已经就位，可用于读取事件\nreadStream.on('ready', () => {\n    console.log('文件已准备好..');\n});\n \n//文件读取中事件·····\nreadStream.on('data', (chunk) => {\n    console.log('读取文件数据:', chunk);\n});\n \n//文件读取完成事件\nreadStream.on('end', () => {\n    console.log('读取已完成..');\n});\n \n//文件已关闭事件\nreadStream.on('close', () => {\n    console.log('文件已关闭！');\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996082-52949","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br")])],-1),vn=a("h3",{id:"http模块"},[a("a",{class:"header-anchor",href:"#http模块","aria-hidden":"true"},"#"),e(" http模块")],-1),Cn=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"var"),e(" http "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'http'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nhttp"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createServer"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("req"),a("span",{class:"token punctuation"},","),e(" res")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"writeHead"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"200"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"{"),e(),a("span",{class:"token string"},"'Content-Type'"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'text/html'"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"write"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'<h1>Node.js</h1>'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'<p>Hello World</p>'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"listen"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"3000"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"HTTP server is listening at port 3000."'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996082-74067"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var http = require('http');\nhttp.createServer(function (req, res) {\n    res.writeHead(200, { 'Content-Type': 'text/html' });\n    res.write('<h1>Node.js</h1>');\n    res.end('<p>Hello World</p>');\n}).listen(3000);\nconsole.log(\"HTTP server is listening at port 3000.\");\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996082-74067","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br")])],-1),xn=a("h3",{id:"http2模块"},[a("a",{class:"header-anchor",href:"#http2模块","aria-hidden":"true"},"#"),e(" http2模块")],-1),wn=a("h4",{id:"安装本地证书"},[a("a",{class:"header-anchor",href:"#安装本地证书","aria-hidden":"true"},"#"),e(" 安装本地证书")],-1),Tn=a("p",null,[a("code",null,"openssl req -newkey rsa:2048 -nodes -keyout rsa_private.key -x509 -days 365 -out cert.crt")],-1),_n=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" http2 "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'http2'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'fs'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" http2"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createSecureServer"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e("\n  key"),a("span",{class:"token operator"},":"),e(" fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFileSync"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'rsa_private.key'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},","),e("\n  cert"),a("span",{class:"token operator"},":"),e(" fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFileSync"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'cert.crt'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'error'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(" console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"error"),a("span",{class:"token punctuation"},"("),e("err"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'stream'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("stream"),a("span",{class:"token punctuation"},","),e(" headers")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// stream is a Duplex"),e("\n  stream"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"respond"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token string"},"'content-type'"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'text/html'"),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token string"},"':status'"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"200"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  stream"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'<h1>Hello World</h1>'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"listen"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"8443"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996082-14020"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const http2 = require('http2');\nconst fs = require('fs');\n\nconst server = http2.createSecureServer({\n  key: fs.readFileSync('rsa_private.key'),\n  cert: fs.readFileSync('cert.crt')\n});\n\nserver.on('error', (err) => console.error(err));\n\nserver.on('stream', (stream, headers) => {\n  // stream is a Duplex\n  stream.respond({\n    'content-type': 'text/html',\n    ':status': 200\n  });\n  stream.end('<h1>Hello World</h1>');\n});\n\nserver.listen(8443);\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996082-14020","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br")])],-1),En=s('',73);c.render=function(s,a,e,o,c,Sn){return n(),t("div",null,[l,p,i,u,r,d,k,m,b,y,f,h,g,v,C,x,w,T,_,E,S,j,A,F,P,B,I,$,H,N,D,q,R,U,V,M,L,J,W,K,Z,G,X,O,Q,Y,z,nn,tn,sn,an,en,on,cn,ln,pn,un,rn,dn,kn,mn,bn,yn,fn,hn,gn,vn,Cn,xn,wn,Tn,_n,En])};export default c;export{o as __pageData};
