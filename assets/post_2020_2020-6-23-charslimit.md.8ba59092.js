import{o as n,c as s,a,x as t}from"./app.5f3fb606.js";const e='{"title":"指令限制字符的长度","description":"","frontmatter":{"title":"指令限制字符的长度","tag":["vue"],"cover":"https://gitee.com/artiely/Figure-bed/raw/master/image/20200620152351.png","base64":"68a863","date":"2020-6-23","author":"artiely"},"relativePath":"post/2020/2020-6-23-charslimit.md","lastUpdated":1629110852306}',o={},c=a("h1",{id:"指令限制字符的长度"},[a("a",{class:"header-anchor",href:"#指令限制字符的长度","aria-hidden":"true"},"#"),t(" 指令限制字符的长度")],-1),p=a("p",null,"show code",-1),l=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// 计算当前输入的字节"),t("\n"),a("span",{class:"token keyword"},"export"),t(),a("span",{class:"token keyword"},"function"),t(),a("span",{class:"token function"},"strlen"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"str"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n  "),a("span",{class:"token keyword"},"var"),t(" len "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token number"},"0"),t("\n  "),a("span",{class:"token keyword"},"for"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"var"),t(" i "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},";"),t(" i "),a("span",{class:"token operator"},"<"),t(" str"),a("span",{class:"token punctuation"},"."),t("length"),a("span",{class:"token punctuation"},";"),t(" i"),a("span",{class:"token operator"},"++"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"var"),t(" c "),a("span",{class:"token operator"},"="),t(" str"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"charCodeAt"),a("span",{class:"token punctuation"},"("),t("i"),a("span",{class:"token punctuation"},")"),t("\n    "),a("span",{class:"token comment"},"// 单字节加1"),t("\n    "),a("span",{class:"token keyword"},"if"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),t("c "),a("span",{class:"token operator"},">="),t(),a("span",{class:"token number"},"0x0001"),t(),a("span",{class:"token operator"},"&&"),t(" c "),a("span",{class:"token operator"},"<="),t(),a("span",{class:"token number"},"0x007e"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token operator"},"||"),t(),a("span",{class:"token punctuation"},"("),t("c "),a("span",{class:"token operator"},"<="),t(),a("span",{class:"token number"},"0xff9f"),t(),a("span",{class:"token operator"},"&&"),t(" c "),a("span",{class:"token operator"},">="),t(),a("span",{class:"token number"},"0xff60"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      len"),a("span",{class:"token operator"},"++"),t("\n    "),a("span",{class:"token punctuation"},"}"),t(),a("span",{class:"token keyword"},"else"),t(),a("span",{class:"token punctuation"},"{"),t("\n      len "),a("span",{class:"token operator"},"+="),t(),a("span",{class:"token number"},"2"),t("\n    "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token keyword"},"return"),t(" len\n"),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token comment"},"// 计算还可输入的字节"),t("\n"),a("span",{class:"token keyword"},"export"),t(),a("span",{class:"token keyword"},"function"),t(),a("span",{class:"token function"},"maxlen"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[t("str"),a("span",{class:"token punctuation"},","),t(" len "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token number"},"60")]),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n  "),a("span",{class:"token keyword"},"for"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"var"),t(" i "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},";"),t(" i "),a("span",{class:"token operator"},"<"),t(" str"),a("span",{class:"token punctuation"},"."),t("length"),a("span",{class:"token punctuation"},";"),t(" i"),a("span",{class:"token operator"},"++"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"var"),t(" c "),a("span",{class:"token operator"},"="),t(" str"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"charCodeAt"),a("span",{class:"token punctuation"},"("),t("i"),a("span",{class:"token punctuation"},")"),t("\n    "),a("span",{class:"token comment"},"// 单字节加1"),t("\n    "),a("span",{class:"token keyword"},"if"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),t("c "),a("span",{class:"token operator"},">="),t(),a("span",{class:"token number"},"0x0001"),t(),a("span",{class:"token operator"},"&&"),t(" c "),a("span",{class:"token operator"},"<="),t(),a("span",{class:"token number"},"0x007e"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token operator"},"||"),t(),a("span",{class:"token punctuation"},"("),t("c "),a("span",{class:"token operator"},"<="),t(),a("span",{class:"token number"},"0xff9f"),t(),a("span",{class:"token operator"},"&&"),t(" c "),a("span",{class:"token operator"},">="),t(),a("span",{class:"token number"},"0xff60"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      "),a("span",{class:"token comment"},"// ..."),t("\n    "),a("span",{class:"token punctuation"},"}"),t(),a("span",{class:"token keyword"},"else"),t(),a("span",{class:"token punctuation"},"{"),t("\n      len "),a("span",{class:"token operator"},"-="),t(),a("span",{class:"token number"},"1"),t("\n    "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token keyword"},"return"),t(" len\n"),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token keyword"},"function"),t(),a("span",{class:"token function"},"event"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[t("name"),a("span",{class:"token punctuation"},","),t(" arg")]),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n  "),a("span",{class:"token keyword"},"var"),t(" evt "),a("span",{class:"token operator"},"="),t(" document"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createEvent"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Event'"),a("span",{class:"token punctuation"},")"),t("\n  evt"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"initEvent"),a("span",{class:"token punctuation"},"("),t("name"),a("span",{class:"token punctuation"},","),t(),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},","),t(),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},")"),t("\n  "),a("span",{class:"token keyword"},"if"),t(),a("span",{class:"token punctuation"},"("),t("name "),a("span",{class:"token operator"},"==="),t(),a("span",{class:"token string"},"'dispatch'"),t(),a("span",{class:"token operator"},"&&"),t(" arg"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"let"),t(),a("span",{class:"token punctuation"},"{"),t(" textLength"),a("span",{class:"token punctuation"},","),t(" leftLength "),a("span",{class:"token punctuation"},"}"),t(),a("span",{class:"token operator"},"="),t(" arg\n    evt"),a("span",{class:"token punctuation"},"."),t("textLength "),a("span",{class:"token operator"},"="),t(" textLength\n    evt"),a("span",{class:"token punctuation"},"."),t("leftLength "),a("span",{class:"token operator"},"="),t(" leftLength\n  "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token keyword"},"return"),t(" evt\n"),a("span",{class:"token punctuation"},"}"),t("\n"),a("span",{class:"token keyword"},"export"),t(),a("span",{class:"token keyword"},"default"),t(),a("span",{class:"token punctuation"},"{"),t("\n  "),a("span",{class:"token function-variable function"},"update"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[t("el"),a("span",{class:"token punctuation"},","),t(" binding")]),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token comment"},"// 对input元素有效"),t("\n    "),a("span",{class:"token keyword"},"if"),t(),a("span",{class:"token punctuation"},"("),t("el"),a("span",{class:"token punctuation"},"."),t("tagName"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toLocaleUpperCase"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token operator"},"!=="),t(),a("span",{class:"token string"},"'INPUT'"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      "),a("span",{class:"token keyword"},"var"),t(" els "),a("span",{class:"token operator"},"="),t(" el"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"getElementsByTagName"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'input'"),a("span",{class:"token punctuation"},")"),t("\n      "),a("span",{class:"token keyword"},"if"),t(),a("span",{class:"token punctuation"},"("),t("els"),a("span",{class:"token punctuation"},"."),t("length "),a("span",{class:"token operator"},"!=="),t(),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n        "),a("span",{class:"token keyword"},"throw"),t(),a("span",{class:"token keyword"},"new"),t(),a("span",{class:"token class-name"},"Error"),a("span",{class:"token punctuation"},"("),t("\n          "),a("span",{class:"token string"},"'v-charslimit directive requires 1 input, found '"),t(),a("span",{class:"token operator"},"+"),t(" els"),a("span",{class:"token punctuation"},"."),t("length\n        "),a("span",{class:"token punctuation"},")"),t("\n      "),a("span",{class:"token punctuation"},"}"),t(),a("span",{class:"token keyword"},"else"),t(),a("span",{class:"token punctuation"},"{"),t("\n        el "),a("span",{class:"token operator"},"="),t(" els"),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},"]"),t("\n      "),a("span",{class:"token punctuation"},"}"),t("\n    "),a("span",{class:"token punctuation"},"}"),t("\n    "),a("span",{class:"token comment"},"// 监听输入事件"),t("\n    el"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"oninput"),t(),a("span",{class:"token operator"},"="),t(),a("span",{class:"token parameter"},"e"),t(),a("span",{class:"token operator"},"=>"),t(),a("span",{class:"token punctuation"},"{"),t("\n      "),a("span",{class:"token keyword"},"if"),t(),a("span",{class:"token punctuation"},"("),a("span",{class:"token operator"},"!"),t("e"),a("span",{class:"token punctuation"},"."),t("isTrusted"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token keyword"},"return"),t("\n      "),a("span",{class:"token comment"},"// 当前的值"),t("\n      "),a("span",{class:"token keyword"},"let"),t(" value "),a("span",{class:"token operator"},"="),t(" el"),a("span",{class:"token punctuation"},"."),t("value\n      "),a("span",{class:"token comment"},"// 当前输入的字符长度"),t("\n      "),a("span",{class:"token keyword"},"let"),t(" textLength "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token function"},"strlen"),a("span",{class:"token punctuation"},"("),t("value"),a("span",{class:"token punctuation"},")"),t("\n\n      "),a("span",{class:"token comment"},"// 获取配置"),t("\n      "),a("span",{class:"token keyword"},"const"),t(),a("span",{class:"token punctuation"},"{"),t(" maxLength "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token number"},"10"),t(),a("span",{class:"token punctuation"},"}"),t(),a("span",{class:"token operator"},"="),t(" binding"),a("span",{class:"token punctuation"},"."),t("value\n      "),a("span",{class:"token comment"},"// 剩余字符长度"),t("\n      "),a("span",{class:"token keyword"},"let"),t(" leftLength "),a("span",{class:"token operator"},"="),t(),a("span",{class:"token function"},"parseInt"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),t("maxLength "),a("span",{class:"token operator"},"-"),t(" textLength"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token operator"},"/"),t(),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},")"),t("\n      "),a("span",{class:"token keyword"},"if"),t(),a("span",{class:"token punctuation"},"("),t("textLength "),a("span",{class:"token operator"},">"),t(" maxLength"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n        "),a("span",{class:"token comment"},"// 因为不知道用户输入的每个字是多少字符"),t("\n        "),a("span",{class:"token comment"},"// 每次从末尾删除1个字符"),t("\n        el"),a("span",{class:"token punctuation"},"."),t("value "),a("span",{class:"token operator"},"="),t(" el"),a("span",{class:"token punctuation"},"."),t("value"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"substring"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},","),t(" el"),a("span",{class:"token punctuation"},"."),t("value"),a("span",{class:"token punctuation"},"."),t("length "),a("span",{class:"token operator"},"-"),t(),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},")"),t("\n        el"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"dispatchEvent"),a("span",{class:"token punctuation"},"("),a("span",{class:"token function"},"event"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'input'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),t("\n      "),a("span",{class:"token punctuation"},"}"),t("\n      el"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"dispatchEvent"),a("span",{class:"token punctuation"},"("),t("\n        "),a("span",{class:"token comment"},"// textLength 当前字符长度"),t("\n        "),a("span",{class:"token comment"},"// leftLength 还剩字符长度"),t("\n        "),a("span",{class:"token function"},"event"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'dispatch'"),a("span",{class:"token punctuation"},","),t(),a("span",{class:"token punctuation"},"{"),t(" textLength"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token function"},"strlen"),a("span",{class:"token punctuation"},"("),t("el"),a("span",{class:"token punctuation"},"."),t("value"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},","),t(" leftLength "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),t("\n      "),a("span",{class:"token punctuation"},")"),t("\n    "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n"),a("span",{class:"token punctuation"},"}"),t("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557007247-66445"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// 计算当前输入的字节\nexport function strlen(str) {\n  var len = 0\n  for (var i = 0; i < str.length; i++) {\n    var c = str.charCodeAt(i)\n    // 单字节加1\n    if ((c >= 0x0001 && c <= 0x007e) || (c <= 0xff9f && c >= 0xff60)) {\n      len++\n    } else {\n      len += 2\n    }\n  }\n  return len\n}\n// 计算还可输入的字节\nexport function maxlen(str, len = 60) {\n  for (var i = 0; i < str.length; i++) {\n    var c = str.charCodeAt(i)\n    // 单字节加1\n    if ((c >= 0x0001 && c <= 0x007e) || (c <= 0xff9f && c >= 0xff60)) {\n      // ...\n    } else {\n      len -= 1\n    }\n  }\n  return len\n}\nfunction event(name, arg) {\n  var evt = document.createEvent('Event')\n  evt.initEvent(name, true, true)\n  if (name === 'dispatch' && arg) {\n    let { textLength, leftLength } = arg\n    evt.textLength = textLength\n    evt.leftLength = leftLength\n  }\n  return evt\n}\nexport default {\n  update: function(el, binding) {\n    // 对input元素有效\n    if (el.tagName.toLocaleUpperCase() !== 'INPUT') {\n      var els = el.getElementsByTagName('input')\n      if (els.length !== 1) {\n        throw new Error(\n          'v-charslimit directive requires 1 input, found ' + els.length\n        )\n      } else {\n        el = els[0]\n      }\n    }\n    // 监听输入事件\n    el.oninput = e => {\n      if (!e.isTrusted) return\n      // 当前的值\n      let value = el.value\n      // 当前输入的字符长度\n      let textLength = strlen(value)\n\n      // 获取配置\n      const { maxLength = 10 } = binding.value\n      // 剩余字符长度\n      let leftLength = parseInt((maxLength - textLength) / 2)\n      if (textLength > maxLength) {\n        // 因为不知道用户输入的每个字是多少字符\n        // 每次从末尾删除1个字符\n        el.value = el.value.substring(0, el.value.length - 1)\n        el.dispatchEvent(event('input'))\n      }\n      el.dispatchEvent(\n        // textLength 当前字符长度\n        // leftLength 还剩字符长度\n        event('dispatch', { textLength: strlen(el.value), leftLength })\n      )\n    }\n  },\n}\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557007247-66445","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br"),a("span",{class:"line-number"},"34"),a("br"),a("span",{class:"line-number"},"35"),a("br"),a("span",{class:"line-number"},"36"),a("br"),a("span",{class:"line-number"},"37"),a("br"),a("span",{class:"line-number"},"38"),a("br"),a("span",{class:"line-number"},"39"),a("br"),a("span",{class:"line-number"},"40"),a("br"),a("span",{class:"line-number"},"41"),a("br"),a("span",{class:"line-number"},"42"),a("br"),a("span",{class:"line-number"},"43"),a("br"),a("span",{class:"line-number"},"44"),a("br"),a("span",{class:"line-number"},"45"),a("br"),a("span",{class:"line-number"},"46"),a("br"),a("span",{class:"line-number"},"47"),a("br"),a("span",{class:"line-number"},"48"),a("br"),a("span",{class:"line-number"},"49"),a("br"),a("span",{class:"line-number"},"50"),a("br"),a("span",{class:"line-number"},"51"),a("br"),a("span",{class:"line-number"},"52"),a("br"),a("span",{class:"line-number"},"53"),a("br"),a("span",{class:"line-number"},"54"),a("br"),a("span",{class:"line-number"},"55"),a("br"),a("span",{class:"line-number"},"56"),a("br"),a("span",{class:"line-number"},"57"),a("br"),a("span",{class:"line-number"},"58"),a("br"),a("span",{class:"line-number"},"59"),a("br"),a("span",{class:"line-number"},"60"),a("br"),a("span",{class:"line-number"},"61"),a("br"),a("span",{class:"line-number"},"62"),a("br"),a("span",{class:"line-number"},"63"),a("br"),a("span",{class:"line-number"},"64"),a("br"),a("span",{class:"line-number"},"65"),a("br"),a("span",{class:"line-number"},"66"),a("br"),a("span",{class:"line-number"},"67"),a("br"),a("span",{class:"line-number"},"68"),a("br"),a("span",{class:"line-number"},"69"),a("br"),a("span",{class:"line-number"},"70"),a("br"),a("span",{class:"line-number"},"71"),a("br"),a("span",{class:"line-number"},"72"),a("br"),a("span",{class:"line-number"},"73"),a("br"),a("span",{class:"line-number"},"74"),a("br"),a("span",{class:"line-number"},"75"),a("br"),a("span",{class:"line-number"},"76"),a("br"),a("span",{class:"line-number"},"77"),a("br")])],-1),u=a("p",null,"use",-1),r=a("div",{class:"language-vue line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),t("template")]),a("span",{class:"token punctuation"},">")]),t("\n"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),t("a-input")]),t("\n          "),a("span",{class:"token attr-name"},"v-charslimit"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),t("{\n            maxLength: 30,\n          }"),a("span",{class:"token punctuation"},'"')]),t("\n          "),a("span",{class:"token attr-name"},"v-model"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),t("val"),a("span",{class:"token punctuation"},'"')]),t("\n          "),a("span",{class:"token attr-name"},"ref"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),t("input"),a("span",{class:"token punctuation"},'"')]),t("\n          "),a("span",{class:"token attr-name"},"@dispatch"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),t("handle"),a("span",{class:"token punctuation"},'"')]),t("\n        "),a("span",{class:"token punctuation"},">")]),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),t("a-input")]),a("span",{class:"token punctuation"},">")]),t("\n        已输入{{ textLength }} 剩余{{ leftLength }}\n"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),t("template")]),a("span",{class:"token punctuation"},">")]),t("\n"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),t("script")]),a("span",{class:"token punctuation"},">")]),a("span",{class:"token script"},[a("span",{class:"token language-javascript"},[t("\n"),a("span",{class:"token keyword"},"export"),t(),a("span",{class:"token keyword"},"default"),t(),a("span",{class:"token punctuation"},"{"),t("\n  "),a("span",{class:"token function"},"data"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n    "),a("span",{class:"token keyword"},"return"),t(),a("span",{class:"token punctuation"},"{"),t("\n      val"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token string"},"''"),a("span",{class:"token punctuation"},","),t("\n      textLength"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token string"},"''"),a("span",{class:"token punctuation"},","),t("\n      leftLength"),a("span",{class:"token operator"},":"),t(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},","),t("\n    "),a("span",{class:"token punctuation"},"}"),t("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n  "),a("span",{class:"token function"},"handle"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"e"),a("span",{class:"token punctuation"},")"),t(),a("span",{class:"token punctuation"},"{"),t("\n      "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("textLength "),a("span",{class:"token operator"},"="),t(" e"),a("span",{class:"token punctuation"},"."),t("textLength\n      "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),t("leftLength "),a("span",{class:"token operator"},"="),t(" e"),a("span",{class:"token punctuation"},"."),t("leftLength\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),t("\n"),a("span",{class:"token punctuation"},"}"),t("\n")])]),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),t("script")]),a("span",{class:"token punctuation"},">")]),t("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557007248-69459"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'<template>\n<a-input\n          v-charslimit="{\n            maxLength: 30,\n          }"\n          v-model="val"\n          ref="input"\n          @dispatch="handle"\n        ></a-input>\n        已输入{{ textLength }} 剩余{{ leftLength }}\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      val: \'\',\n      textLength: \'\',\n      leftLength: 0,\n    }\n  },\n  handle(e) {\n      this.textLength = e.textLength\n      this.leftLength = e.leftLength\n    },\n}\n<\/script>\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557007248-69459","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br")])],-1),i=a("div",{class:"warning custom-block"},[a("p",{class:"custom-block-title"},"WARNING"),a("p",null,[t("除了 "),a("code",null,"el"),t(" 之外，其它参数都应该是只读的，切勿进行修改。如果需要在钩子之间共享数据，建议通过元素的 "),a("code",null,"dataset"),t(" 来进行。")])],-1),k=a("p",null,[t("参考："),a("a",{href:"https://cn.vuejs.org/v2/guide/custom-directive.html",target:"_blank",rel:"noopener noreferrer"},"https://cn.vuejs.org/v2/guide/custom-directive.html")],-1);o.render=function(a,t,e,o,m,b){return n(),s("div",null,[c,p,l,u,r,i,k])};export default o;export{e as __pageData};
