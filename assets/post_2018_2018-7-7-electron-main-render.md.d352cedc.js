import{o as n,c as t,f as e,a as s,x as a}from"./app.5f3fb606.js";const c='{"title":"Electron 主进程和渲染进程通信","description":"","frontmatter":{"title":"Electron 主进程和渲染进程通信","tag":["electron","nodejs"],"author":"Artiely","date":"2018-7-7","cover":"https://gitee.com/artiely/Figure-bed/raw/master/images/20200315170838.png","base64":"50737e"},"headers":[{"level":2,"title":"Electron渲染进程通过 localstorage给另一个渲染进程传值","slug":"electron渲染进程通过-localstorage给另一个渲染进程传值"},{"level":2,"title":"通过 BrowserWindow 和 webContents 模块实现渲染进程和渲染进程的通信。","slug":"通过-browserwindow-和-webcontents-模块实现渲染进程和渲染进程的通信"}],"relativePath":"post/2018/2018-7-7-electron-main-render.md","lastUpdated":1629110797953}',o={},i=e('<h1 id="electron-主进程和渲染进程通信"><a class="header-anchor" href="#electron-主进程和渲染进程通信" aria-hidden="true">#</a> Electron 主进程和渲染进程通信</h1><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200315170838.png" alt=""></p><p>有时候我们想在渲染进程中通过一个事件去执行主进程里面的方法。或者在渲染进程中通知 主进程处理事件，主进程处理完成后广播一个事件让渲染进程去处理一些事情。这个时候就 用到了主进程和渲染进程之间的相互通信。</p><blockquote><p>Electron 主进程，和渲染进程的通信主要用到两个模块：<strong>ipcMain 和 ipcRenderer</strong></p></blockquote><blockquote><p><strong>ipcMain</strong>：当在主进程中使用时，它处理从渲染器进程（网页）发送出来的异步和同步信息, 当然也有可能从主进程向渲染进程发送消息。</p></blockquote><blockquote><p><strong>ipcRenderer</strong>： 使用它提供的一些方法从渲染进程 (web 页面) 发送同步或异步的消息到主 进程。 也可以接收主进程回复的消息。</p></blockquote><p><strong>场景 1：渲染进程给主进程发送异步消息：</strong></p>',7),l=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"//渲染进程 "),a("\n"),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" ipcRenderer "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'electron'"),s("span",{class:"token punctuation"},")"),a(" \nipcRenderer"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"send"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'msg'"),s("span",{class:"token punctuation"},","),s("span",{class:"token punctuation"},"{"),a("name"),s("span",{class:"token operator"},":"),s("span",{class:"token string"},"'张三'"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a(),s("span",{class:"token comment"},"//异步"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556988829-39037"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"//渲染进程 \nconst { ipcRenderer } = require('electron') \nipcRenderer.send('msg',{name:'张三'}); //异步\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556988829-39037","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br")])],-1),p=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"//主进程 "),a("\n"),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" ipcMain "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'electron'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a(" \nipcMain"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"on"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"''"),a("msg"),s("span",{class:"token string"},"''"),s("span",{class:"token punctuation"},","),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("event"),s("span",{class:"token punctuation"},","),a("arg")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a(" \n  "),s("span",{class:"token comment"},"// 处理业务"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556988829-97201"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"//主进程 \nconst { ipcMain } = require('electron'); \nipcMain.on(''msg'',(event,arg) => { \n  // 处理业务\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556988829-97201","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br")])],-1),d=s("p",null,[s("strong",null,"场景 2：渲染进程给主进程发送异步消息，主进程接收到异步消息以后通知渲染进程：")],-1),u=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"//渲染进程"),a("\n"),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" ipcRenderer "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'electron'"),s("span",{class:"token punctuation"},")"),a("\nipcRenderer"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"send"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'msg'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token punctuation"},"{"),a(" name"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'张三'"),a(),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token comment"},"//异步"),a("\n"),s("span",{class:"token comment"},"//主进程"),a("\n"),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" ipcMain "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'electron'"),s("span",{class:"token punctuation"},")"),a("\nipcMain"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"on"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'msg'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("event"),s("span",{class:"token punctuation"},","),a(" arg")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n  event"),s("span",{class:"token punctuation"},"."),a("sender"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"send"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'reply'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'pong'"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token comment"},"//渲染进程"),a("\n"),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" ipcRenderer "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'electron'"),s("span",{class:"token punctuation"},")"),a("\nipcRenderer"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"on"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'reply'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token keyword"},"function"),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},[a("event"),s("span",{class:"token punctuation"},","),a(" arg")]),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token punctuation"},"{"),a("\n  console"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"log"),s("span",{class:"token punctuation"},"("),a("arg"),s("span",{class:"token punctuation"},")"),a("\n  "),s("span",{class:"token comment"},'// prints "pong"'),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556988829-90735"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"//渲染进程\nconst { ipcRenderer } = require('electron')\nipcRenderer.send('msg', { name: '张三' })\n//异步\n//主进程\nconst { ipcMain } = require('electron')\nipcMain.on('msg', (event, arg) => {\n  event.sender.send('reply', 'pong')\n})\n//渲染进程\nconst { ipcRenderer } = require('electron')\nipcRenderer.on('reply', function(event, arg) {\n  console.log(arg)\n  // prints \"pong\"\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556988829-90735","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br")])],-1),r=s("p",null,[s("strong",null,"场景 3：渲染进程给主进程发送同步消息：")],-1),m=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token comment"},"//渲染进程"),a("\n"),s("span",{class:"token keyword"},"const"),a(),s("span",{class:"token punctuation"},"{"),a(" ipcRenderer "),s("span",{class:"token punctuation"},"}"),a(),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'electron'"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token keyword"},"const"),a(" msg "),s("span",{class:"token operator"},"="),a(" ipcRenderer"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"sendSync"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'msg-a'"),s("span",{class:"token punctuation"},")"),a("\nconsole"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"log"),s("span",{class:"token punctuation"},"("),a("msg"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token comment"},"//主进程"),a("\nipcMain"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"on"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'msg-a'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token parameter"},"event"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a("\n  event"),s("span",{class:"token punctuation"},"."),a("returnValue "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token string"},"'hello'"),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556988829-46879"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"//渲染进程\nconst { ipcRenderer } = require('electron')\nconst msg = ipcRenderer.sendSync('msg-a')\nconsole.log(msg)\n//主进程\nipcMain.on('msg-a', event => {\n  event.returnValue = 'hello'\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556988829-46879","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br")])],-1),y=s("h2",{id:"electron渲染进程通过-localstorage给另一个渲染进程传值"},[s("a",{class:"header-anchor",href:"#electron渲染进程通过-localstorage给另一个渲染进程传值","aria-hidden":"true"},"#"),a(" Electron渲染进程通过 localstorage给另一个渲染进程传值")],-1),k=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[a("localStorage"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"setItem"),s("span",{class:"token punctuation"},"("),a("key"),s("span",{class:"token punctuation"},","),a("value"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a(" \nlocalStorage"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"getItem"),s("span",{class:"token punctuation"},"("),a("key"),s("span",{class:"token punctuation"},")"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556988829-65065"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"localStorage.setItem(key,value); \nlocalStorage.getItem(key)\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556988829-65065","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br")])],-1),b=s("h2",{id:"通过-browserwindow-和-webcontents-模块实现渲染进程和渲染进程的通信"},[s("a",{class:"header-anchor",href:"#通过-browserwindow-和-webcontents-模块实现渲染进程和渲染进程的通信","aria-hidden":"true"},"#"),a(" 通过 BrowserWindow 和 webContents 模块实现渲染进程和渲染进程的通信。")],-1),g=s("p",null,"webContents 是一个 事件发出者.它负责渲染并控制网页，也是 BrowserWindow 对象的属性。",-1),f=s("p",null,[s("strong",null,"需要了解的几个知识点：")],-1),h=s("p",null,[s("strong",null,"1、获取当前窗口的 id：")],-1),C=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(" winId "),s("span",{class:"token operator"},"="),a(" BrowserWindow"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"getFocusedWindow"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"."),a("id"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556988829-47734"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const winId = BrowserWindow.getFocusedWindow().id;\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556988829-47734","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),w=s("p",null,[s("strong",null,"2、监听当前窗口加载完成的事件")],-1),v=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[a("win"),s("span",{class:"token punctuation"},"."),a("webContents"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"on"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'did-finish-load'"),s("span",{class:"token punctuation"},","),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},"event"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a(),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556988829-42039"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"win.webContents.on('did-finish-load',(event) => { })\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556988829-42039","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1),x=s("p",null,[s("strong",null,"3、同一窗口之间广播数据")],-1),j=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[a("win"),s("span",{class:"token punctuation"},"."),a("webContents"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"on"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'did-finish-load'"),s("span",{class:"token punctuation"},","),s("span",{class:"token punctuation"},"("),s("span",{class:"token parameter"},"event"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token punctuation"},"{"),a(" \n  win"),s("span",{class:"token punctuation"},"."),a("webContents"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"send"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'msg'"),s("span",{class:"token punctuation"},","),a("winId"),s("span",{class:"token punctuation"},","),s("span",{class:"token string"},"'我是 index.html 的数据'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a(" \n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556988829-25353"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"win.webContents.on('did-finish-load',(event) => { \n  win.webContents.send('msg',winId,'我是 index.html 的数据'); \n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556988829-25353","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br")])],-1),I=s("p",null,[s("strong",null,"4、通过 id 查找窗口")],-1),$=s("div",{class:"language-js line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"let"),a(" win "),s("span",{class:"token operator"},"="),a(" BrowserWindow"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"fromId"),s("span",{class:"token punctuation"},"("),a("winId"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\n")]),s("div",{class:"m-mdic-copy-wrapper"},[s("div",{class:"u-mdic-copy-notify",id:"j-notify-1629556988829-15187"},"复制成功"),s("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"let win = BrowserWindow.fromId(winId);\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629556988829-15187","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br")])],-1);o.render=function(e,s,a,c,o,E){return n(),t("div",null,[i,l,p,d,u,r,m,y,k,b,g,f,h,C,w,v,x,j,I,$])};export default o;export{c as __pageData};
