import{o as n,c as t,t as s,a,x as e}from"./app.746f22cf.js";const o='{"title":"Node.js 网络通信","description":"","frontmatter":{"title":"Node.js 网络通信","tag":["TCP","UDP","http","https"],"author":"Artiely","date":"2019-4-15","cover":"https://gitee.com/artiely/Figure-bed/raw/master/images/20200315154530.png","base64":"0755a2"},"headers":[{"level":2,"title":"网络七层模型","slug":"网络七层模型"},{"level":2,"title":"mac 地址","slug":"mac-地址"},{"level":2,"title":"IP 地址","slug":"ip-地址"},{"level":2,"title":"Port 端口号","slug":"port-端口号"},{"level":2,"title":"域名","slug":"域名"},{"level":2,"title":"TCP 和 UDP","slug":"tcp-和-udp"},{"level":2,"title":"什么是 Socket","slug":"什么是-socket"},{"level":2,"title":"基本示例","slug":"基本示例"},{"level":2,"title":"相关 API","slug":"相关-api"},{"level":3,"title":"服务端相关 API","slug":"服务端相关-api"},{"level":3,"title":"套接字 Socket 相关 API","slug":"套接字-socket-相关-api"},{"level":3,"title":"其它 API","slug":"其它-api"},{"level":2,"title":"案例：聊天室","slug":"案例聊天室"},{"level":3,"title":"初始化","slug":"初始化"},{"level":3,"title":"核心需求","slug":"核心需求"},{"level":3,"title":"数据格式设计（语言协议）","slug":"数据格式设计语言协议"},{"level":3,"title":"用户登录","slug":"用户登录"},{"level":3,"title":"群发消息","slug":"群发消息"},{"level":3,"title":"私聊","slug":"私聊"},{"level":3,"title":"上线|离线通知","slug":"上线离线通知"},{"level":2,"title":"总结","slug":"总结"},{"level":2,"title":"UDP 简介","slug":"udp-简介"},{"level":3,"title":"TCP 和 UDP","slug":"tcp-和-udp-1"},{"level":3,"title":"UDP 的三种传播方式","slug":"udp-的三种传播方式"},{"level":3,"title":"UDP 一对多通信场景","slug":"udp-一对多通信场景"},{"level":2,"title":"Node 中的 dgram 模块","slug":"node-中的-dgram-模块"},{"level":3,"title":"Socket 方法","slug":"socket-方法"},{"level":3,"title":"Socket 事件","slug":"socket-事件"},{"level":2,"title":"使用 Node 实现 UDP 单播","slug":"使用-node-实现-udp-单播"},{"level":3,"title":"服务端","slug":"服务端"},{"level":3,"title":"客户端","slug":"客户端"},{"level":2,"title":"使用 Node 实现 UDP 广播","slug":"使用-node-实现-udp-广播"},{"level":3,"title":"服务端","slug":"服务端-1"},{"level":3,"title":"客户端","slug":"客户端-1"},{"level":2,"title":"使用 Node 实现 UDP 组播","slug":"使用-node-实现-udp-组播"},{"level":3,"title":"服务端","slug":"服务端-2"},{"level":3,"title":"客户端","slug":"客户端-2"},{"level":2,"title":"Node 中的 http 模块","slug":"node-中的-http-模块"},{"level":3,"title":"Server 实例","slug":"server-实例"},{"level":3,"title":"请求对象","slug":"请求对象"},{"level":3,"title":"响应对象","slug":"响应对象"},{"level":2,"title":"使用 Node 构建 http 服务","slug":"使用-node-构建-http-服务"},{"level":3,"title":"Hello World","slug":"hello-world"},{"level":3,"title":"根据不同 url 处理不同请求","slug":"根据不同-url-处理不同请求"},{"level":3,"title":"响应 HTML 内容","slug":"响应-html-内容"},{"level":3,"title":"处理页面中的静态资源","slug":"处理页面中的静态资源"},{"level":3,"title":"统一处理页面中的静态资源","slug":"统一处理页面中的静态资源"},{"level":2,"title":"使用模板引擎处理动态页面","slug":"使用模板引擎处理动态页面"},{"level":3,"title":"基本使用","slug":"基本使用"},{"level":3,"title":"结合 http 服务渲染页面","slug":"结合-http-服务渲染页面"},{"level":2,"title":"实现一个静态文件服务器","slug":"实现一个静态文件服务器"},{"level":2,"title":"使用数据库中的数据","slug":"使用数据库中的数据"},{"level":2,"title":"实现一个留言本案例","slug":"实现一个留言本案例"},{"level":2,"title":"第三方 HTTP 服务框架","slug":"第三方-http-服务框架"},{"level":2,"title":"占位","slug":"占位"},{"level":3,"title":"WebSocket 介绍","slug":"websocket-介绍"},{"level":3,"title":"客户端 WebSocket","slug":"客户端-websocket"},{"level":3,"title":"服务端 WebSocket 实现","slug":"服务端-websocket-实现"},{"level":3,"title":"综合案例：聊天室","slug":"综合案例聊天室"},{"level":3,"title":"相关链接","slug":"相关链接"}],"relativePath":"post/2019/2019-4-15-nodejs-tcp-udp-h2.md","lastUpdated":1629110828188}',c={},l=s('',58),p=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" net "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'net'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" net"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createServer"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"c"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// 'connection' listener"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'client connected'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  c"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'end'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'client disconnected'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  c"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"write"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'hello\\r\\n'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  c"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"pipe"),a("span",{class:"token punctuation"},"("),e("c"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'error'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"throw"),e(" err"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"listen"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"8124"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'server bound'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996483-25480"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const net = require('net');\nconst server = net.createServer((c) => {\n  // 'connection' listener\n  console.log('client connected');\n  c.on('end', () => {\n    console.log('client disconnected');\n  });\n  c.write('hello\\r\\n');\n  c.pipe(c);\n});\nserver.on('error', (err) => {\n  throw err;\n});\nserver.listen(8124, () => {\n  console.log('server bound');\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996483-25480","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br")])],-1),i=a("p",null,"客户端：",-1),r=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" net "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'net'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" client "),a("span",{class:"token operator"},"="),e(" net"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createConnection"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e(" port"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"8124"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// 'connect' listener"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'connected to server!'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"write"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'world!\\r\\n'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'data'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"data"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toString"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'end'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'disconnected from server'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996483-15402"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const net = require('net');\nconst client = net.createConnection({ port: 8124 }, () => {\n  // 'connect' listener\n  console.log('connected to server!');\n  client.write('world!\\r\\n');\n});\nclient.on('data', (data) => {\n  console.log(data.toString());\n  client.end();\n});\nclient.on('end', () => {\n  console.log('disconnected from server');\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996483-15402","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br")])],-1),u=s('',18),d=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"type"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"login"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"nickname"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"xxx"'),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996483-2440"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "type": "login",\n  "nickname": "xxx"\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996483-2440","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br")])],-1),k=a("p",null,"服务端：",-1),m=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"type"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"login"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"success"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"true"),e(" | "),a("span",{class:"token boolean"},"false"),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"message"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"登录成功|失败"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"sumUsers"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"10"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996484-2279"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "type": "login",\n  "success": true | false,\n  "message": "登录成功|失败",\n  "sumUsers": 10\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996484-2279","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),b=a("blockquote",null,[a("p",null,[a("strong",null,"广播消息")])],-1),y=a("p",null,"客户端：",-1),h=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"type"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"broadcast"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"message"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"xxx"'),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996484-54516"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "type": "broadcast",\n  "message": "xxx"\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996484-54516","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br")])],-1),f=a("p",null,"服务端：",-1),g=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"type"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"broadcast"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"nickname"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"xxx"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"message"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"xxx"'),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996484-82527"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "type": "broadcast",\n  "nickname": "xxx",\n  "message": "xxx"\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996484-82527","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),v=a("blockquote",null,[a("p",null,[a("strong",null,"点对点消息")])],-1),C=a("p",null,"客户端：",-1),w=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"type"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"p2p"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"to"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"xxx"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"message"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"xxx"'),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996484-48478"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "type": "p2p",\n  "to": "xxx",\n  "message": "xxx"\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996484-48478","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),x=a("p",null,"服务端：",-1),_=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"type"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"p2p"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"from"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"xxx"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"to"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"xxx"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"message"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"xxx"'),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996484-8060"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "type": "p2p",\n  "from": "xxx",\n  "to": "xxx",\n  "message": "xxx"\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996484-8060","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),j=a("blockquote",null,[a("p",null,"上线|离线通知日志")],-1),T=a("p",null,"服务端：",-1),P=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"type"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"log"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"message"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"xxx 进入|离开了聊天室，当前在线人数：xx"'),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996484-34818"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "type": "log",\n  "message": "xxx 进入|离开了聊天室，当前在线人数：xx"\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996484-34818","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br")])],-1),$=s('',12),I=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"type"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"xxx"'),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996484-77390"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "type": "xxx"\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996484-77390","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),E=s('',41),S=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" dgram "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'dgram'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" socket "),a("span",{class:"token operator"},"="),e(" dgram"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'udp4'"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996484-46784"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const dgram = require('dgram')\nconst socket = dgram.createSocket('udp4')\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996484-46784","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br")])],-1),N=s('',6),A=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" dgram "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'dgram'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" dgram"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'udp4'"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'listening'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"const"),e(" address "),a("span",{class:"token operator"},"="),e(" server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"address"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"server running "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("address"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("address"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'message'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("msg"),a("span",{class:"token punctuation"},","),e(" remoteInfo")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"server got "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("msg"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"}," from "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("remoteInfo"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("remoteInfo"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n  server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'world'"),a("span",{class:"token punctuation"},","),e(" remoteInfo"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token punctuation"},","),e(" remoteInfo"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'error'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"err"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'server error'"),a("span",{class:"token punctuation"},","),e(" err"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token function"},"server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"bind"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"3000"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996484-58997"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const dgram = require('dgram')\n\nconst server = dgram.createSocket('udp4')\n\nserver.on('listening', () => {\n  const address = server.address()\n  console.log(`server running ${address.address}:${address.port}`)\n})\n\nserver.on('message', (msg, remoteInfo) => {\n  console.log(`server got ${msg} from ${remoteInfo.address}:${remoteInfo.port}`)\n  server.send('world', remoteInfo.port, remoteInfo.address)\n})\n\nserver.on('error', err => {\n  console.log('server error', err)\n})\n\nserver.bind(3000)\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996484-58997","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br")])],-1),D=a("h3",{id:"客户端"},[a("a",{class:"header-anchor",href:"#客户端","aria-hidden":"true"},"#"),e(" 客户端")],-1),q=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" dgram "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'dgram'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" client "),a("span",{class:"token operator"},"="),e(" dgram"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'udp4'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token comment"},"// client.send('hello', 3000, 'localhost')"),e("\n\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'listening'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"const"),e(" address "),a("span",{class:"token operator"},"="),e(" client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"address"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"client running "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("address"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("address"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n\n  client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'hello'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"3000"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'localhost'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'message'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("msg"),a("span",{class:"token punctuation"},","),e(" remoteInfo")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"client got "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("msg"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"}," from "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("remoteInfo"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("remoteInfo"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'error'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"err"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'client error'"),a("span",{class:"token punctuation"},","),e(" err"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token function"},"client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"bind"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"8000"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996485-25354"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const dgram = require('dgram')\n\nconst client = dgram.createSocket('udp4')\n\n// client.send('hello', 3000, 'localhost')\n\nclient.on('listening', () => {\n  const address = client.address()\n  console.log(`client running ${address.address}:${address.port}`)\n\n  client.send('hello', 3000, 'localhost')\n})\n\nclient.on('message', (msg, remoteInfo) => {\n  console.log(`client got ${msg} from ${remoteInfo.address}:${remoteInfo.port}`)\n})\n\nclient.on('error', err => {\n  console.log('client error', err)\n})\n\nclient.bind(8000)\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996485-25354","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br")])],-1),B=a("h2",{id:"使用-node-实现-udp-广播"},[a("a",{class:"header-anchor",href:"#使用-node-实现-udp-广播","aria-hidden":"true"},"#"),e(" 使用 Node 实现 UDP 广播")],-1),F=a("h3",{id:"服务端-1"},[a("a",{class:"header-anchor",href:"#服务端-1","aria-hidden":"true"},"#"),e(" 服务端")],-1),H=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" dgram "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'dgram'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" dgram"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'udp4'"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'listening'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"const"),e(" address "),a("span",{class:"token operator"},"="),e(" server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"address"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n  \n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"server running "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("address"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("address"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n  \n  server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"setBroadcast"),a("span",{class:"token punctuation"},"("),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token comment"},"// 开启广播模式"),e("\n  \n  server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'hello'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"8000"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'255.255.255.255'"),a("span",{class:"token punctuation"},")"),e("\n\n  "),a("span",{class:"token comment"},"// 每隔2秒发送一条广播消息"),e("\n  "),a("span",{class:"token function"},"setInterval"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token comment"},"// 直接地址 192.168.10.255"),e("\n    "),a("span",{class:"token comment"},"// 受限地址 255.255.255.255"),e("\n    server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'hello'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"8000"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'192.168.10.255'"),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token comment"},"// server.send('hello', 8000, '255.255.255.255')"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"2000"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'message'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("msg"),a("span",{class:"token punctuation"},","),e(" remoteInfo")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"server got "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("msg"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"}," from "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("remoteInfo"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("remoteInfo"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n  server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'world'"),a("span",{class:"token punctuation"},","),e(" remoteInfo"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token punctuation"},","),e(" remoteInfo"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'error'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"err"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'server error'"),a("span",{class:"token punctuation"},","),e(" err"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token function"},"server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"bind"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"3000"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996485-44669"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const dgram = require('dgram')\n\nconst server = dgram.createSocket('udp4')\n\nserver.on('listening', () => {\n  const address = server.address()\n  \n  console.log(`server running ${address.address}:${address.port}`)\n  \n  server.setBroadcast(true) // 开启广播模式\n  \n  server.send('hello', 8000, '255.255.255.255')\n\n  // 每隔2秒发送一条广播消息\n  setInterval(function () {\n    // 直接地址 192.168.10.255\n    // 受限地址 255.255.255.255\n    server.send('hello', 8000, '192.168.10.255')\n    // server.send('hello', 8000, '255.255.255.255')\n  }, 2000)\n})\n\nserver.on('message', (msg, remoteInfo) => {\n  console.log(`server got ${msg} from ${remoteInfo.address}:${remoteInfo.port}`)\n  server.send('world', remoteInfo.port, remoteInfo.address)\n})\n\nserver.on('error', err => {\n  console.log('server error', err)\n})\n\nserver.bind(3000)\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996485-44669","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br")])],-1),U=a("h3",{id:"客户端-1"},[a("a",{class:"header-anchor",href:"#客户端-1","aria-hidden":"true"},"#"),e(" 客户端")],-1),W=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" dgram "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'dgram'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" client "),a("span",{class:"token operator"},"="),e(" dgram"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'udp4'"),a("span",{class:"token punctuation"},")"),e("\n\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'message'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("msg"),a("span",{class:"token punctuation"},","),e(" remoteInfo")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"client got "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("msg"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"}," from "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("remoteInfo"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("remoteInfo"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'error'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"err"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'client error'"),a("span",{class:"token punctuation"},","),e(" err"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token function"},"client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"bind"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"8000"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996485-77014"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const dgram = require('dgram')\n\nconst client = dgram.createSocket('udp4')\n\nclient.on('message', (msg, remoteInfo) => {\n  console.log(`client got ${msg} from ${remoteInfo.address}:${remoteInfo.port}`)\n})\n\nclient.on('error', err => {\n  console.log('client error', err)\n})\n\nclient.bind(8000)\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996485-77014","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br")])],-1),L=a("h2",{id:"使用-node-实现-udp-组播"},[a("a",{class:"header-anchor",href:"#使用-node-实现-udp-组播","aria-hidden":"true"},"#"),e(" 使用 Node 实现 UDP 组播")],-1),V=a("h3",{id:"服务端-2"},[a("a",{class:"header-anchor",href:"#服务端-2","aria-hidden":"true"},"#"),e(" 服务端")],-1),O=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" dgram "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'dgram'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" dgram"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'udp4'"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'listening'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"const"),e(" address "),a("span",{class:"token operator"},"="),e(" server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"address"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token function"},"setInterval"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'hello'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"8000"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'224.0.1.100'"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"2000"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'message'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("msg"),a("span",{class:"token punctuation"},","),e(" remoteInfo")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"server got "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("msg"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"}," from "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("remoteInfo"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("remoteInfo"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n  server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'world'"),a("span",{class:"token punctuation"},","),e(" remoteInfo"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token punctuation"},","),e(" remoteInfo"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'error'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"err"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'server error'"),a("span",{class:"token punctuation"},","),e(" err"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token function"},"server"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"bind"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"3000"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996485-21870"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const dgram = require('dgram')\n\nconst server = dgram.createSocket('udp4')\n\nserver.on('listening', () => {\n  const address = server.address()\n  setInterval(function () {\n    server.send('hello', 8000, '224.0.1.100')\n  }, 2000)\n})\n\nserver.on('message', (msg, remoteInfo) => {\n  console.log(`server got ${msg} from ${remoteInfo.address}:${remoteInfo.port}`)\n  server.send('world', remoteInfo.port, remoteInfo.address)\n})\n\nserver.on('error', err => {\n  console.log('server error', err)\n})\n\nserver.bind(3000)\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996485-21870","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br")])],-1),R=a("h3",{id:"客户端-2"},[a("a",{class:"header-anchor",href:"#客户端-2","aria-hidden":"true"},"#"),e(" 客户端")],-1),M=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" dgram "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'dgram'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" client "),a("span",{class:"token operator"},"="),e(" dgram"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'udp4'"),a("span",{class:"token punctuation"},")"),e("\n\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'listening'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"const"),e(" address "),a("span",{class:"token operator"},"="),e(" client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"address"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"client running "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("address"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("address"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n\n  client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"addMembership"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'224.0.1.100'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'message'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("msg"),a("span",{class:"token punctuation"},","),e(" remoteInfo")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"client got "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("msg"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"}," from "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("remoteInfo"),a("span",{class:"token punctuation"},"."),e("address"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("remoteInfo"),a("span",{class:"token punctuation"},"."),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nclient"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'error'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"err"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'client error'"),a("span",{class:"token punctuation"},","),e(" err"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token function"},"client"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"bind"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"8000"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996486-53815"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const dgram = require('dgram')\n\nconst client = dgram.createSocket('udp4')\n\nclient.on('listening', () => {\n  const address = client.address()\n  console.log(`client running ${address.address}:${address.port}`)\n\n  client.addMembership('224.0.1.100')\n})\n\nclient.on('message', (msg, remoteInfo) => {\n  console.log(`client got ${msg} from ${remoteInfo.address}:${remoteInfo.port}`)\n})\n\nclient.on('error', err => {\n  console.log('client error', err)\n})\n\nclient.bind(8000)\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996486-53815","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br")])],-1),J=s('',8),z=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" http "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'http'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" http"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createServer"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996486-68727"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const http = require('http')\nconst server = http.createServer()\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996486-68727","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),K=s('',8),Q=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" http "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'http'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" hostname "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token string"},"'127.0.0.1'"),e("\n"),a("span",{class:"token keyword"},"const"),e(" port "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"3000"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" http"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createServer"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("req"),a("span",{class:"token punctuation"},","),e(" res")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  res"),a("span",{class:"token punctuation"},"."),e("statusCode "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"200"),e("\n  res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"setHeader"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Content-Type'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'text/plain'"),a("span",{class:"token punctuation"},")"),e("\n  res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Hello World\\n'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"listen"),a("span",{class:"token punctuation"},"("),e("port"),a("span",{class:"token punctuation"},","),e(" hostname"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"Server running at http://"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("hostname"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},"/"),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996486-18089"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const http = require('http')\n\nconst hostname = '127.0.0.1'\nconst port = 3000\n\nconst server = http.createServer((req, res) => {\n  res.statusCode = 200\n  res.setHeader('Content-Type', 'text/plain')\n  res.end('Hello World\\n')\n})\n\nserver.listen(port, hostname, () => {\n  console.log(`Server running at http://${hostname}:${port}/`)\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996486-18089","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br")])],-1),G=a("h3",{id:"根据不同-url-处理不同请求"},[a("a",{class:"header-anchor",href:"#根据不同-url-处理不同请求","aria-hidden":"true"},"#"),e(" 根据不同 url 处理不同请求")],-1),Y=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" http "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'http'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" hostname "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token string"},"'127.0.0.1'"),e("\n"),a("span",{class:"token keyword"},"const"),e(" port "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"3000"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" http"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createServer"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("req"),a("span",{class:"token punctuation"},","),e(" res")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"const"),e(" url "),a("span",{class:"token operator"},"="),e(" req"),a("span",{class:"token punctuation"},"."),e("url\n  "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("url "),a("span",{class:"token operator"},"==="),e(),a("span",{class:"token string"},"'/'"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Hello World!'"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"else"),e(),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("url "),a("span",{class:"token operator"},"==="),e(),a("span",{class:"token string"},"'/a'"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Hello a!'"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"else"),e(),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("url "),a("span",{class:"token operator"},"==="),e(),a("span",{class:"token string"},"'/b'"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Hello b!'"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"else"),e(),a("span",{class:"token punctuation"},"{"),e("\n    res"),a("span",{class:"token punctuation"},"."),e("statusCode "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"404"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'404 Not Found.'"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"listen"),a("span",{class:"token punctuation"},"("),e("port"),a("span",{class:"token punctuation"},","),e(" hostname"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"Server running at http://"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("hostname"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},"/"),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996486-38232"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const http = require('http')\n\nconst hostname = '127.0.0.1'\nconst port = 3000\n\nconst server = http.createServer((req, res) => {\n  const url = req.url\n  if (url === '/') {\n    res.end('Hello World!')\n  } else if (url === '/a') {\n    res.end('Hello a!')\n  } else if (url === '/b') {\n    res.end('Hello b!')\n  } else {\n    res.statusCode = 404\n    res.end('404 Not Found.')\n  }\n})\n\nserver.listen(port, hostname, () => {\n  console.log(`Server running at http://${hostname}:${port}/`)\n})\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996486-38232","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br")])],-1),X=a("h3",{id:"响应-html-内容"},[a("a",{class:"header-anchor",href:"#响应-html-内容","aria-hidden":"true"},"#"),e(" 响应 HTML 内容")],-1),Z=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" http "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'http'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'fs'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" hostname "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token string"},"'127.0.0.1'"),e("\n"),a("span",{class:"token keyword"},"const"),e(" port "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"3000"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" http"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createServer"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("req"),a("span",{class:"token punctuation"},","),e(" res")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'./index.html'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" data")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token keyword"},"throw"),e(" err\n    "),a("span",{class:"token punctuation"},"}"),e("\n    res"),a("span",{class:"token punctuation"},"."),e("statusCode "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"200"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"setHeader"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Content-Type'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'text/html; charset=utf-8'"),a("span",{class:"token punctuation"},")"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token comment"},"//   res.end(`"),e("\n"),a("span",{class:"token comment"},"// <h1>Hello World!</h1>"),e("\n"),a("span",{class:"token comment"},"// <p>你好，世界！</p>"),e("\n"),a("span",{class:"token comment"},"//   `)"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"listen"),a("span",{class:"token punctuation"},"("),e("port"),a("span",{class:"token punctuation"},","),e(" hostname"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"Server running at http://"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("hostname"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},"/"),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996487-24042"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const http = require('http')\nconst fs = require('fs')\n\nconst hostname = '127.0.0.1'\nconst port = 3000\n\nconst server = http.createServer((req, res) => {\n  fs.readFile('./index.html', (err, data) => {\n    if (err) {\n      throw err\n    }\n    res.statusCode = 200\n    res.setHeader('Content-Type', 'text/html; charset=utf-8')\n    res.end(data)\n  })\n\n//   res.end(`\n// <h1>Hello World!</h1>\n// <p>你好，世界！</p>\n//   `)\n})\n\nserver.listen(port, hostname, () => {\n  console.log(`Server running at http://${hostname}:${port}/`)\n})\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996487-24042","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br")])],-1),nn=a("h3",{id:"处理页面中的静态资源"},[a("a",{class:"header-anchor",href:"#处理页面中的静态资源","aria-hidden":"true"},"#"),e(" 处理页面中的静态资源")],-1),tn=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" http "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'http'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'fs'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" hostname "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token string"},"'127.0.0.1'"),e("\n"),a("span",{class:"token keyword"},"const"),e(" port "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"3000"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" http"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createServer"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("req"),a("span",{class:"token punctuation"},","),e(" res")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"const"),e(" url "),a("span",{class:"token operator"},"="),e(" req"),a("span",{class:"token punctuation"},"."),e("url\n  "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("url "),a("span",{class:"token operator"},"==="),e(),a("span",{class:"token string"},"'/'"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'./index.html'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" data")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n        "),a("span",{class:"token keyword"},"throw"),e(" err\n      "),a("span",{class:"token punctuation"},"}"),e("\n      res"),a("span",{class:"token punctuation"},"."),e("statusCode "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"200"),e("\n      res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"setHeader"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Content-Type'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'text/html; charset=utf-8'"),a("span",{class:"token punctuation"},")"),e("\n      res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"else"),e(),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("url "),a("span",{class:"token operator"},"==="),e(),a("span",{class:"token string"},"'/assets/css/main.css'"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'./assets/css/main.css'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" data")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n        "),a("span",{class:"token keyword"},"throw"),e(" err\n      "),a("span",{class:"token punctuation"},"}"),e("\n      res"),a("span",{class:"token punctuation"},"."),e("statusCode "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"200"),e("\n      res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"setHeader"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Content-Type'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'text/css; charset=utf-8'"),a("span",{class:"token punctuation"},")"),e("\n      res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"else"),e(),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("url "),a("span",{class:"token operator"},"==="),e(),a("span",{class:"token string"},"'/assets/js/main.js'"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'./assets/js/main.js'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" data")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n        "),a("span",{class:"token keyword"},"throw"),e(" err\n      "),a("span",{class:"token punctuation"},"}"),e("\n      res"),a("span",{class:"token punctuation"},"."),e("statusCode "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"200"),e("\n      res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"setHeader"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Content-Type'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'text/javascript; charset=utf-8'"),a("span",{class:"token punctuation"},")"),e("\n      res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"else"),e(),a("span",{class:"token punctuation"},"{"),e("\n    res"),a("span",{class:"token punctuation"},"."),e("statusCode "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"404"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"setHeader"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Content-Type'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'text/plain; charset=utf-8'"),a("span",{class:"token punctuation"},")"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'404 Not Found.'"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"listen"),a("span",{class:"token punctuation"},"("),e("port"),a("span",{class:"token punctuation"},","),e(" hostname"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"Server running at http://"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("hostname"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},"/"),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996487-72906"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const http = require('http')\nconst fs = require('fs')\n\nconst hostname = '127.0.0.1'\nconst port = 3000\n\nconst server = http.createServer((req, res) => {\n  const url = req.url\n  if (url === '/') {\n    fs.readFile('./index.html', (err, data) => {\n      if (err) {\n        throw err\n      }\n      res.statusCode = 200\n      res.setHeader('Content-Type', 'text/html; charset=utf-8')\n      res.end(data)\n    })\n  } else if (url === '/assets/css/main.css') {\n    fs.readFile('./assets/css/main.css', (err, data) => {\n      if (err) {\n        throw err\n      }\n      res.statusCode = 200\n      res.setHeader('Content-Type', 'text/css; charset=utf-8')\n      res.end(data)\n    })\n  } else if (url === '/assets/js/main.js') {\n    fs.readFile('./assets/js/main.js', (err, data) => {\n      if (err) {\n        throw err\n      }\n      res.statusCode = 200\n      res.setHeader('Content-Type', 'text/javascript; charset=utf-8')\n      res.end(data)\n    })\n  } else {\n    res.statusCode = 404\n    res.setHeader('Content-Type', 'text/plain; charset=utf-8')\n    res.end('404 Not Found.')\n  }\n})\n\nserver.listen(port, hostname, () => {\n  console.log(`Server running at http://${hostname}:${port}/`)\n})\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996487-72906","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br"),a("span",{class:"line-number"},"34"),a("br"),a("span",{class:"line-number"},"35"),a("br"),a("span",{class:"line-number"},"36"),a("br"),a("span",{class:"line-number"},"37"),a("br"),a("span",{class:"line-number"},"38"),a("br"),a("span",{class:"line-number"},"39"),a("br"),a("span",{class:"line-number"},"40"),a("br"),a("span",{class:"line-number"},"41"),a("br"),a("span",{class:"line-number"},"42"),a("br"),a("span",{class:"line-number"},"43"),a("br"),a("span",{class:"line-number"},"44"),a("br"),a("span",{class:"line-number"},"45"),a("br"),a("span",{class:"line-number"},"46"),a("br")])],-1),sn=a("h3",{id:"统一处理页面中的静态资源"},[a("a",{class:"header-anchor",href:"#统一处理页面中的静态资源","aria-hidden":"true"},"#"),e(" 统一处理页面中的静态资源")],-1),an=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" http "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'http'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'fs'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" mime "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'mime'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" path "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'path'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" hostname "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token string"},"'127.0.0.1'"),e("\n"),a("span",{class:"token keyword"},"const"),e(" port "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"3000"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" http"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createServer"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("req"),a("span",{class:"token punctuation"},","),e(" res")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"const"),e(" url "),a("span",{class:"token operator"},"="),e(" req"),a("span",{class:"token punctuation"},"."),e("url\n  "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("url "),a("span",{class:"token operator"},"==="),e(),a("span",{class:"token string"},"'/'"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'./index.html'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" data")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n        "),a("span",{class:"token keyword"},"throw"),e(" err\n      "),a("span",{class:"token punctuation"},"}"),e("\n      res"),a("span",{class:"token punctuation"},"."),e("statusCode "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"200"),e("\n      res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"setHeader"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Content-Type'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'text/html; charset=utf-8'"),a("span",{class:"token punctuation"},")"),e("\n      res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"else"),e(),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("url"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"startsWith"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'/assets/'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token comment"},"// /assets/js/main.js"),e("\n    fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"."),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("url"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" data")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n        res"),a("span",{class:"token punctuation"},"."),e("statusCode "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"404"),e("\n        res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"setHeader"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Content-Type'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'text/plain; charset=utf-8'"),a("span",{class:"token punctuation"},")"),e("\n        res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'404 Not Found.'"),a("span",{class:"token punctuation"},")"),e("\n      "),a("span",{class:"token punctuation"},"}"),e("\n      "),a("span",{class:"token keyword"},"const"),e(" contentType "),a("span",{class:"token operator"},"="),e(" mime"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"getType"),a("span",{class:"token punctuation"},"("),e("path"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"extname"),a("span",{class:"token punctuation"},"("),e("url"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),e("\n      res"),a("span",{class:"token punctuation"},"."),e("statusCode "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"200"),e("\n      res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"setHeader"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Content-Type'"),a("span",{class:"token punctuation"},","),e(" contentType"),a("span",{class:"token punctuation"},")"),e("\n      res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"else"),e(),a("span",{class:"token punctuation"},"{"),e("\n    res"),a("span",{class:"token punctuation"},"."),e("statusCode "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"404"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"setHeader"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Content-Type'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'text/plain; charset=utf-8'"),a("span",{class:"token punctuation"},")"),e("\n    res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'404 Not Found.'"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"listen"),a("span",{class:"token punctuation"},"("),e("port"),a("span",{class:"token punctuation"},","),e(" hostname"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"Server running at http://"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("hostname"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},"/"),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996487-34056"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const http = require('http')\nconst fs = require('fs')\nconst mime = require('mime')\nconst path = require('path')\n\nconst hostname = '127.0.0.1'\nconst port = 3000\n\nconst server = http.createServer((req, res) => {\n  const url = req.url\n  if (url === '/') {\n    fs.readFile('./index.html', (err, data) => {\n      if (err) {\n        throw err\n      }\n      res.statusCode = 200\n      res.setHeader('Content-Type', 'text/html; charset=utf-8')\n      res.end(data)\n    })\n  } else if (url.startsWith('/assets/')) {\n    // /assets/js/main.js\n    fs.readFile(`.${url}`, (err, data) => {\n      if (err) {\n        res.statusCode = 404\n        res.setHeader('Content-Type', 'text/plain; charset=utf-8')\n        res.end('404 Not Found.')\n      }\n      const contentType = mime.getType(path.extname(url))\n      res.statusCode = 200\n      res.setHeader('Content-Type', contentType)\n      res.end(data)\n    })\n  } else {\n    res.statusCode = 404\n    res.setHeader('Content-Type', 'text/plain; charset=utf-8')\n    res.end('404 Not Found.')\n  }\n})\n\nserver.listen(port, hostname, () => {\n  console.log(`Server running at http://${hostname}:${port}/`)\n})\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996487-34056","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br"),a("span",{class:"line-number"},"34"),a("br"),a("span",{class:"line-number"},"35"),a("br"),a("span",{class:"line-number"},"36"),a("br"),a("span",{class:"line-number"},"37"),a("br"),a("span",{class:"line-number"},"38"),a("br"),a("span",{class:"line-number"},"39"),a("br"),a("span",{class:"line-number"},"40"),a("br"),a("span",{class:"line-number"},"41"),a("br"),a("span",{class:"line-number"},"42"),a("br"),a("span",{class:"line-number"},"43"),a("br")])],-1),en=a("h2",{id:"使用模板引擎处理动态页面"},[a("a",{class:"header-anchor",href:"#使用模板引擎处理动态页面","aria-hidden":"true"},"#"),e(" 使用模板引擎处理动态页面")],-1),on=a("p",null,[e("假如我们有一份数据 "),a("code",null,"todos"),e(" 需要展示到页面中")],-1),cn=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" todos "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"["),e("\n  "),a("span",{class:"token punctuation"},"{"),e(" title"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'吃饭'"),a("span",{class:"token punctuation"},","),e(" completed"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"false"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token punctuation"},"{"),e(" title"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'睡觉'"),a("span",{class:"token punctuation"},","),e(" completed"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"true"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token punctuation"},"{"),e(" title"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'打豆豆'"),a("span",{class:"token punctuation"},","),e(" completed"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"false"),e(),a("span",{class:"token punctuation"},"}"),e("  \n"),a("span",{class:"token punctuation"},"]"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996488-61941"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const todos = [\n  { title: '吃饭', completed: false },\n  { title: '睡觉', completed: true },\n  { title: '打豆豆', completed: false }  \n]\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996488-61941","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),ln=a("p",null,"如何将一组数据列表展示到一个页面中，最简单的方式就是字符串替换，但是如果有不止一份数据需要展示到页面中的时候就会变得非常麻烦，所以前人将此种方式整合规则之后开发了我们常见的模板引擎。",-1),pn=a("p",null,"例如我们经常在网页源码中看到下面这样一段代码",-1),rn=a("div",{class:"language-ejs line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),e("ul")]),a("span",{class:"token punctuation"},">")]),e("\n  "),a("span",{class:"token ejs language-ejs"},[a("span",{class:"token delimiter punctuation"},"<%"),a("span",{class:"token language-javascript"},[e(" todos"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"forEach"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"item"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e()]),a("span",{class:"token delimiter punctuation"},"%>")]),e("\n  "),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),e("li")]),a("span",{class:"token punctuation"},">")]),a("span",{class:"token ejs language-ejs"},[a("span",{class:"token delimiter punctuation"},"<%="),a("span",{class:"token language-javascript"},[e(" item"),a("span",{class:"token punctuation"},"."),e("title ")]),a("span",{class:"token delimiter punctuation"},"%>")]),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),e("li")]),a("span",{class:"token punctuation"},">")]),e("\n  "),a("span",{class:"token ejs language-ejs"},[a("span",{class:"token delimiter punctuation"},"<%"),a("span",{class:"token language-javascript"},[e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e()]),a("span",{class:"token delimiter punctuation"},"%>")]),e("\n"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),e("ul")]),a("span",{class:"token punctuation"},">")]),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996488-9005"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"<ul>\n  <% todos.forEach(function (item) { %>\n  <li><%= item.title %></li>\n  <% }) %>\n</ul>\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996488-9005","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),un=a("p",null,"或者是",-1),dn=a("div",{class:"language-ejs line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),e("ul")]),a("span",{class:"token punctuation"},">")]),e("\n  {{ each todos }}\n  "),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),e("li")]),a("span",{class:"token punctuation"},">")]),e("{{ $value.title }}"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),e("li")]),a("span",{class:"token punctuation"},">")]),e("\n  {{ /each }}\n"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),e("ul")]),a("span",{class:"token punctuation"},">")]),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996492-15416"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"<ul>\n  {{ each todos }}\n  <li>{{ $value.title }}</li>\n  {{ /each }}\n</ul>\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996492-15416","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),kn=s('',4),mn=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" template "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'art-template'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token comment"},"// const ret = template.render('Hello {{ message }}', {"),e("\n"),a("span",{class:"token comment"},"//   message: 'World'"),e("\n"),a("span",{class:"token comment"},"// })"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" ret "),a("span",{class:"token operator"},"="),e(" template"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"render"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},'\n<!DOCTYPE html>\n<html lang="en">\n<head>\n<meta charset="UTF-8" />\n<title>Document</title>\n</head>\n<body>\n  <h1>Hello {{ message }}</h1>\n  <ul>\n    {{ each todos }}\n    <li>{{ $value.title }} <input type="checkbox" {{ $value.completed ? \'checked\' : \'\' }} /></li>\n    {{ /each }}\n  </ul>\n</body>\n</html>\n'),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"{"),e("\n  message"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'World'"),a("span",{class:"token punctuation"},","),e("\n  todos"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n    "),a("span",{class:"token punctuation"},"{"),e(" title"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'吃饭'"),a("span",{class:"token punctuation"},","),e(" completed"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"false"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token punctuation"},"{"),e(" title"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'睡觉'"),a("span",{class:"token punctuation"},","),e(" completed"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"true"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token punctuation"},"{"),e(" title"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'打豆豆'"),a("span",{class:"token punctuation"},","),e(" completed"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"false"),e(),a("span",{class:"token punctuation"},"}"),e("\n  "),a("span",{class:"token punctuation"},"]"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("ret"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996492-91398"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const template = require('art-template')\n\n// const ret = template.render('Hello {{ message }}', {\n//   message: 'World'\n// })\n\nconst ret = template.render(`\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<title>Document</title>\n</head>\n<body>\n  <h1>Hello {{ message }}</h1>\n  <ul>\n    {{ each todos }}\n    <li>{{ $value.title }} <input type=\"checkbox\" {{ $value.completed ? 'checked' : '' }} /></li>\n    {{ /each }}\n  </ul>\n</body>\n</html>\n`, {\n  message: 'World',\n  todos: [\n    { title: '吃饭', completed: false },\n    { title: '睡觉', completed: true },\n    { title: '打豆豆', completed: false }\n  ]\n})\n\nconsole.log(ret)\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996492-91398","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br")])],-1),bn=a("h3",{id:"结合-http-服务渲染页面"},[a("a",{class:"header-anchor",href:"#结合-http-服务渲染页面","aria-hidden":"true"},"#"),e(" 结合 http 服务渲染页面")],-1),yn=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" http "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'http'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" template "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'art-template'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" fs "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'fs'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" hostname "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token string"},"'127.0.0.1'"),e("\n"),a("span",{class:"token keyword"},"const"),e(" port "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"3000"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(" server "),a("span",{class:"token operator"},"="),e(" http"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createServer"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("req"),a("span",{class:"token punctuation"},","),e(" res")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"const"),e(" url "),a("span",{class:"token operator"},"="),e(" req"),a("span",{class:"token punctuation"},"."),e("url\n  "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("url "),a("span",{class:"token operator"},"==="),e(),a("span",{class:"token string"},"'/'"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    fs"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readFile"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'./index2.html'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" data")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n        "),a("span",{class:"token keyword"},"throw"),e(" err\n      "),a("span",{class:"token punctuation"},"}"),e("\n      "),a("span",{class:"token keyword"},"const"),e(" htmlStr "),a("span",{class:"token operator"},"="),e(" template"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"render"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toString"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"{"),e("\n        message"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'前端程序员'"),a("span",{class:"token punctuation"},","),e("\n        todos"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n          "),a("span",{class:"token punctuation"},"{"),e(" title"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'吃饭'"),a("span",{class:"token punctuation"},","),e(" completed"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"true"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n          "),a("span",{class:"token punctuation"},"{"),e(" title"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'睡觉'"),a("span",{class:"token punctuation"},","),e(" completed"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"true"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n          "),a("span",{class:"token punctuation"},"{"),e(" title"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'打豆豆'"),a("span",{class:"token punctuation"},","),e(" completed"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"false"),e(),a("span",{class:"token punctuation"},"}"),e("\n        "),a("span",{class:"token punctuation"},"]"),e("\n      "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n      res"),a("span",{class:"token punctuation"},"."),e("statusCode "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"200"),e("\n      res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"setHeader"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Content-Type'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'text/html'"),a("span",{class:"token punctuation"},")"),e("\n      res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),e("htmlStr"),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nserver"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"listen"),a("span",{class:"token punctuation"},"("),e("port"),a("span",{class:"token punctuation"},","),e(" hostname"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"Server running at http://"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("hostname"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},":"),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("port"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},"/"),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996492-14130"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const http = require('http')\nconst template = require('art-template')\nconst fs = require('fs')\n\nconst hostname = '127.0.0.1'\nconst port = 3000\n\nconst server = http.createServer((req, res) => {\n  const url = req.url\n  if (url === '/') {\n    fs.readFile('./index2.html', (err, data) => {\n      if (err) {\n        throw err\n      }\n      const htmlStr = template.render(data.toString(), {\n        message: '前端程序员',\n        todos: [\n          { title: '吃饭', completed: true },\n          { title: '睡觉', completed: true },\n          { title: '打豆豆', completed: false }\n        ]\n      })\n      res.statusCode = 200\n      res.setHeader('Content-Type', 'text/html')\n      res.end(htmlStr)\n    })\n  }\n})\n\nserver.listen(port, hostname, () => {\n  console.log(`Server running at http://${hostname}:${port}/`)\n})\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996492-14130","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br")])],-1),hn=s('',26),fn=a("div",{class:"language-"},[a("pre",null,[a("code",null,"ws://example.com:80/some/path\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996493-67364"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"ws://example.com:80/some/path\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996493-67364","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),gn=s('',5),vn=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"var"),e(" ws "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"WebSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"wss://echo.websocket.org"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\nws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"onopen"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"evt"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e(" \n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"Connection open ..."'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(" \n  ws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"Hello WebSockets!"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n\nws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"onmessage"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"evt"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e(),a("span",{class:"token string"},'"Received Message: "'),e(),a("span",{class:"token operator"},"+"),e(" evt"),a("span",{class:"token punctuation"},"."),e("data"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  ws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"close"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n\nws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"onclose"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"evt"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"Connection closed."'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996493-96990"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'var ws = new WebSocket("wss://echo.websocket.org");\n\nws.onopen = function(evt) { \n  console.log("Connection open ..."); \n  ws.send("Hello WebSockets!");\n};\n\nws.onmessage = function(evt) {\n  console.log( "Received Message: " + evt.data);\n  ws.close();\n};\n\nws.onclose = function(evt) {\n  console.log("Connection closed.");\n};\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996493-96990","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br")])],-1),Cn=a("h4",{id:"常用-api"},[a("a",{class:"header-anchor",href:"#常用-api","aria-hidden":"true"},"#"),e(" 常用 API")],-1),wn=a("h5",{id:"websocket-构造函数"},[a("a",{class:"header-anchor",href:"#websocket-构造函数","aria-hidden":"true"},"#"),e(" WebSocket 构造函数")],-1),xn=a("p",null,"WebSocket 对象作为一个构造函数，用于新建 WebSocket 实例。",-1),_n=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"var"),e(" ws "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"WebSocket"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'ws://localhost:8080'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996493-42787"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var ws = new WebSocket('ws://localhost:8080');\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996493-42787","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),jn=a("p",null,"执行上面语句之后，客户端就会与服务器进行连接。",-1),Tn=a("h5",{id:"事件-onopen"},[a("a",{class:"header-anchor",href:"#事件-onopen","aria-hidden":"true"},"#"),e(" 事件： onopen")],-1),Pn=a("p",null,[e("实例对象的"),a("code",null,"onopen"),e("属性，用于指定连接成功后的回调函数。")],-1),$n=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("ws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"onopen"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  \n  "),a("span",{class:"token comment"},"// 发送消息一定要在建立连接成功以后"),e("\n  ws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Hello Server!'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996493-30581"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"ws.onopen = function () {\n  \n  // 发送消息一定要在建立连接成功以后\n  ws.send('Hello Server!');\n}\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996493-30581","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),In=a("p",null,[e("如果要指定多个回调函数，可以使用"),a("code",null,"addEventListener"),e("方法。")],-1),En=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("ws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"addEventListener"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'open'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"event"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  ws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Hello Server!'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996493-64939"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"ws.addEventListener('open', function (event) {\n  ws.send('Hello Server!');\n});\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996493-64939","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br")])],-1),Sn=a("h5",{id:"事件-onclose"},[a("a",{class:"header-anchor",href:"#事件-onclose","aria-hidden":"true"},"#"),e(" 事件： onclose")],-1),Nn=a("p",null,[e("实例对象的"),a("code",null,"onclose"),e("属性，用于指定连接关闭后的回调函数。")],-1),An=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("ws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"onclose"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"event"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"var"),e(" code "),a("span",{class:"token operator"},"="),e(" event"),a("span",{class:"token punctuation"},"."),e("code"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token keyword"},"var"),e(" reason "),a("span",{class:"token operator"},"="),e(" event"),a("span",{class:"token punctuation"},"."),e("reason"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token keyword"},"var"),e(" wasClean "),a("span",{class:"token operator"},"="),e(" event"),a("span",{class:"token punctuation"},"."),e("wasClean"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token comment"},"// handle close event"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n\nws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"addEventListener"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"close"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"event"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"var"),e(" code "),a("span",{class:"token operator"},"="),e(" event"),a("span",{class:"token punctuation"},"."),e("code"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token keyword"},"var"),e(" reason "),a("span",{class:"token operator"},"="),e(" event"),a("span",{class:"token punctuation"},"."),e("reason"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token keyword"},"var"),e(" wasClean "),a("span",{class:"token operator"},"="),e(" event"),a("span",{class:"token punctuation"},"."),e("wasClean"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token comment"},"// handle close event"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996493-1137"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'ws.onclose = function(event) {\n  var code = event.code;\n  var reason = event.reason;\n  var wasClean = event.wasClean;\n  // handle close event\n};\n\nws.addEventListener("close", function(event) {\n  var code = event.code;\n  var reason = event.reason;\n  var wasClean = event.wasClean;\n  // handle close event\n});\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996493-1137","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br")])],-1),Dn=a("h5",{id:"事件-onmessage"},[a("a",{class:"header-anchor",href:"#事件-onmessage","aria-hidden":"true"},"#"),e(" 事件： onmessage")],-1),qn=a("p",null,[e("实例对象的"),a("code",null,"onmessage"),e("属性，用于指定收到服务器数据后的回调函数。")],-1),Bn=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("ws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"onmessage"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"event"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"var"),e(" data "),a("span",{class:"token operator"},"="),e(" event"),a("span",{class:"token punctuation"},"."),e("data"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token comment"},"// 处理数据"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n\nws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"addEventListener"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"message"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"event"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"var"),e(" data "),a("span",{class:"token operator"},"="),e(" event"),a("span",{class:"token punctuation"},"."),e("data"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token comment"},"// 处理数据"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996493-82932"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'ws.onmessage = function(event) {\n  var data = event.data;\n  // 处理数据\n};\n\nws.addEventListener("message", function(event) {\n  var data = event.data;\n  // 处理数据\n});\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996493-82932","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1),Fn=a("p",null,[e("注意，服务器数据可能是文本，也可能是二进制数据（"),a("code",null,"blob"),e("对象或"),a("code",null,"Arraybuffer"),e("对象）。")],-1),Hn=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("ws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"onmessage"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"event"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"if"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"typeof"),e(" event"),a("span",{class:"token punctuation"},"."),e("data "),a("span",{class:"token operator"},"==="),e(" String"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"Received data string"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n\n  "),a("span",{class:"token keyword"},"if"),a("span",{class:"token punctuation"},"("),e("event"),a("span",{class:"token punctuation"},"."),e("data "),a("span",{class:"token keyword"},"instanceof"),e(),a("span",{class:"token class-name"},"ArrayBuffer"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"var"),e(" buffer "),a("span",{class:"token operator"},"="),e(" event"),a("span",{class:"token punctuation"},"."),e("data"),a("span",{class:"token punctuation"},";"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"Received arraybuffer"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996493-84080"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'ws.onmessage = function(event){\n  if(typeof event.data === String) {\n    console.log("Received data string");\n  }\n\n  if(event.data instanceof ArrayBuffer){\n    var buffer = event.data;\n    console.log("Received arraybuffer");\n  }\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996493-84080","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br")])],-1),Un=a("p",null,[e("除了动态判断收到的数据类型，也可以使用"),a("code",null,"binaryType"),e("属性，显式指定收到的二进制数据类型。")],-1),Wn=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// 收到的是 blob 数据"),e("\nws"),a("span",{class:"token punctuation"},"."),e("binaryType "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token string"},'"blob"'),a("span",{class:"token punctuation"},";"),e("\nws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"onmessage"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"e"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("e"),a("span",{class:"token punctuation"},"."),e("data"),a("span",{class:"token punctuation"},"."),e("size"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// 收到的是 ArrayBuffer 数据"),e("\nws"),a("span",{class:"token punctuation"},"."),e("binaryType "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token string"},'"arraybuffer"'),a("span",{class:"token punctuation"},";"),e("\nws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"onmessage"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"e"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("e"),a("span",{class:"token punctuation"},"."),e("data"),a("span",{class:"token punctuation"},"."),e("byteLength"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996495-2087"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'// 收到的是 blob 数据\nws.binaryType = "blob";\nws.onmessage = function(e) {\n  console.log(e.data.size);\n};\n\n// 收到的是 ArrayBuffer 数据\nws.binaryType = "arraybuffer";\nws.onmessage = function(e) {\n  console.log(e.data.byteLength);\n};\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996495-2087","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br")])],-1),Ln=a("h5",{id:"事件onerror"},[a("a",{class:"header-anchor",href:"#事件onerror","aria-hidden":"true"},"#"),e(" 事件：onerror")],-1),Vn=a("p",null,[e("实例对象的"),a("code",null,"onerror"),e("属性，用于指定报错时的回调函数。")],-1),On=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("socket"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"onerror"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"event"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// handle error event"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n\nsocket"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"addEventListener"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"error"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"event"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// handle error event"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996495-76699"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'socket.onerror = function(event) {\n  // handle error event\n};\n\nsocket.addEventListener("error", function(event) {\n  // handle error event\n});\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996495-76699","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br")])],-1),Rn=a("h5",{id:"方法send"},[a("a",{class:"header-anchor",href:"#方法send","aria-hidden":"true"},"#"),e(" 方法：send()")],-1),Mn=a("p",null,[e("实例对象的"),a("code",null,"send()"),e("方法用于向服务器发送数据。")],-1),Jn=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("ws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'your message'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996495-95189"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"ws.send('your message');\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996495-95189","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),zn=a("p",null,"发送 Blob 对象的例子。",-1),Kn=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"var"),e(" file "),a("span",{class:"token operator"},"="),e(" document\n  "),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"querySelector"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'input[type=\"file\"]'"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"."),e("files"),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},";"),e("\nws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),e("file"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996495-9317"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var file = document\n  .querySelector('input[type=\"file\"]')\n  .files[0];\nws.send(file);\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996495-9317","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br")])],-1),Qn=a("p",null,"发送 ArrayBuffer 对象的例子。",-1),Gn=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// Sending canvas ImageData as ArrayBuffer"),e("\n"),a("span",{class:"token keyword"},"var"),e(" img "),a("span",{class:"token operator"},"="),e(" canvas_context"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"getImageData"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"400"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"320"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"var"),e(" binary "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"Uint8Array"),a("span",{class:"token punctuation"},"("),e("img"),a("span",{class:"token punctuation"},"."),e("data"),a("span",{class:"token punctuation"},"."),e("length"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"for"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"var"),e(" i "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},";"),e(" i "),a("span",{class:"token operator"},"<"),e(" img"),a("span",{class:"token punctuation"},"."),e("data"),a("span",{class:"token punctuation"},"."),e("length"),a("span",{class:"token punctuation"},";"),e(" i"),a("span",{class:"token operator"},"++"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  binary"),a("span",{class:"token punctuation"},"["),e("i"),a("span",{class:"token punctuation"},"]"),e(),a("span",{class:"token operator"},"="),e(" img"),a("span",{class:"token punctuation"},"."),e("data"),a("span",{class:"token punctuation"},"["),e("i"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\nws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),e("binary"),a("span",{class:"token punctuation"},"."),e("buffer"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996495-21818"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// Sending canvas ImageData as ArrayBuffer\nvar img = canvas_context.getImageData(0, 0, 400, 320);\nvar binary = new Uint8Array(img.data.length);\nfor (var i = 0; i < img.data.length; i++) {\n  binary[i] = img.data[i];\n}\nws.send(binary.buffer);\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996495-21818","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br")])],-1),Yn=a("h5",{id:"方法close"},[a("a",{class:"header-anchor",href:"#方法close","aria-hidden":"true"},"#"),e(" 方法：close()")],-1),Xn=a("p",null,[e("实例对象的 "),a("code",null,"close()"),e(" 方法用于关闭连接。")],-1),Zn=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("ws"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"close"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996496-81129"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"ws.close()\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996496-81129","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),nt=a("blockquote",null,[a("p",null,[e("连接关闭之后会触发实例对象的 "),a("code",null,"onclose"),e(" 事件。")])],-1),tt=a("h5",{id:"实例属性bufferedamount"},[a("a",{class:"header-anchor",href:"#实例属性bufferedamount","aria-hidden":"true"},"#"),e(" 实例属性：bufferedAmount")],-1),st=a("p",null,[e("实例对象的"),a("code",null,"bufferedAmount"),e("属性，表示还有多少字节的二进制数据没有发送出去。它可以用来判断发送是否结束。")],-1),at=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"var"),e(" data "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"ArrayBuffer"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"10000000"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\nsocket"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("socket"),a("span",{class:"token punctuation"},"."),e("bufferedAmount "),a("span",{class:"token operator"},"==="),e(),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// 发送完毕"),e("\n"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"else"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// 发送还没结束"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996496-72350"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var data = new ArrayBuffer(10000000);\nsocket.send(data);\n\nif (socket.bufferedAmount === 0) {\n  // 发送完毕\n} else {\n  // 发送还没结束\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996496-72350","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br")])],-1),et=s('',10),ot=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" express "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'express'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" app "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"express"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" http "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'http'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"Server"),a("span",{class:"token punctuation"},"("),e("app"),a("span",{class:"token punctuation"},")"),e("\n\napp"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"get"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'/'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("req"),a("span",{class:"token punctuation"},","),e(" res")]),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n  res"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"send"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'<h1>Hello world</h1>'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nhttp"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"listen"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"3000"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'listening on *:3000'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996496-19259"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const express = require('express')\nconst app = express()\nconst http = require('http').Server(app)\n\napp.get('/', function(req, res){\n  res.send('<h1>Hello world</h1>');\n})\n\nhttp.listen(3000, () => {\n  console.log('listening on *:3000')\n})\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996496-19259","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br")])],-1),ct=a("ul",null,[a("li",null,"启动服务测试"),a("li",null,"服务静态网页")],-1),lt=a("p",null,[e("将 "),a("code",null,"app.get(/)"),e(" 代码替换为以下内容")],-1),pt=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("app"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"use"),a("span",{class:"token punctuation"},"("),e("express"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"static"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'./public'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996496-24054"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"app.use(express.static('./public'))\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996496-24054","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),it=a("ul",null,[a("li",null,"测试页面访问"),a("li",null,[e("使用 "),a("a",{href:"http://Socket.IO",target:"_blank",rel:"noopener noreferrer"},"Socket.IO"),a("ul",null,[a("li",null,[e("安装 "),a("code",null,"npm i socket.io")])])]),a("li",null,"服务端代码修改如下")],-1),rt=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" express "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'express'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" app "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"express"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" http "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'http'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"Server"),a("span",{class:"token punctuation"},"("),e("app"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" io "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'socket.io'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"("),e("http"),a("span",{class:"token punctuation"},")"),e("\n\napp"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"use"),a("span",{class:"token punctuation"},"("),e("express"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"static"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'./public/'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),e("\n\nio"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'connection'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"socket"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'a user connected'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\nhttp"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"listen"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"3000"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'listening on *:3000'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996496-25190"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const express = require('express')\nconst app = express()\nconst http = require('http').Server(app)\nconst io = require('socket.io')(http)\n\napp.use(express.static('./public/'))\n\nio.on('connection', socket => {\n  console.log('a user connected');\n})\n\nhttp.listen(3000, () => {\n  console.log('listening on *:3000')\n})\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996496-25190","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br")])],-1),ut=a("ul",null,[a("li",null,"在网页中")],-1),dt=a("div",{class:"language-html line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),e("script")]),e(),a("span",{class:"token attr-name"},"src"),a("span",{class:"token attr-value"},[a("span",{class:"token punctuation attr-equals"},"="),a("span",{class:"token punctuation"},'"'),e("/socket.io/socket.io.js"),a("span",{class:"token punctuation"},'"')]),a("span",{class:"token punctuation"},">")]),a("span",{class:"token script"}),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),e("script")]),a("span",{class:"token punctuation"},">")]),e("\n"),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"<"),e("script")]),a("span",{class:"token punctuation"},">")]),a("span",{class:"token script"},[a("span",{class:"token language-javascript"},[e("\n  "),a("span",{class:"token comment"},"// 默认链接当前网页地址，也就是 ws://localhost:3000"),e("\n  "),a("span",{class:"token keyword"},"var"),e(" socket "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"io"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n")])]),a("span",{class:"token tag"},[a("span",{class:"token tag"},[a("span",{class:"token punctuation"},"</"),e("script")]),a("span",{class:"token punctuation"},">")]),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996496-56679"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'<script src="/socket.io/socket.io.js"><\/script>\n<script>\n  // 默认链接当前网页地址，也就是 ws://localhost:3000\n  var socket = io()\n<\/script>\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996496-56679","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),kt=a("ul",null,[a("li",null,"刷新网页测试效果"),a("li",null,[e("每一个 socket 都有一个 "),a("code",null,"disconnect"),e(" 事件")])],-1),mt=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("io"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'connection'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"socket"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'a user connected'"),a("span",{class:"token punctuation"},")"),e("\n  socket"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'disconnect'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'user disconnected'"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996496-62856"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"io.on('connection', function(socket){\n  console.log('a user connected')\n  socket.on('disconnect', () => {\n    console.log('user disconnected')\n  })\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996496-62856","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),bt=a("ul",null,[a("li",null,"刷新网页测试效果"),a("li",null,"客户端发送消息")],-1),yt=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("socket"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'chat message'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'hello'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996497-54805"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"socket.emit('chat message', 'hello');\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996497-54805","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),ht=a("ul",null,[a("li",null,"服务端接收消息")],-1),ft=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("socket"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'chat message'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"msg"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'message: '"),e(),a("span",{class:"token operator"},"+"),e(" msg"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996497-90092"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"socket.on('chat message', function(msg){\n  console.log('message: ' + msg);\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996497-90092","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),gt=a("ul",null,[a("li",null,"测试"),a("li",null,"给当前连接 socket 发送消息")],-1),vt=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("socket"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'request'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'消息'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996497-6403"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"socket.emit('request', '消息');\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996497-6403","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Ct=a("ul",null,[a("li",null,"服务端发送广播消息")],-1),wt=a("p",null,"如果你想向除了某个套接字以外的所有人发送消息",-1),xt=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("socket"),a("span",{class:"token punctuation"},"."),e("broadcast"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'hi'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996497-57697"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"socket.broadcast.emit('hi');\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996497-57697","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),_t=a("p",null,"将消息发送给所有人，包括发送消息的客户端",-1),jt=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("io"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"emit"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'chat message'"),a("span",{class:"token punctuation"},","),e(" msg"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996497-95426"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"io.emit('chat message', msg)\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996497-95426","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Tt=a("ul",null,[a("li",null,"客户端接收消息")],-1),Pt=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[e("socket"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'chat message'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"msg"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"$"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'#messages'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"append"),a("span",{class:"token punctuation"},"("),a("span",{class:"token function"},"$"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'<li>'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"text"),a("span",{class:"token punctuation"},"("),e("msg"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557996497-99465"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"socket.on('chat message', function(msg){\n  $('#messages').append($('<li>').text(msg));\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557996497-99465","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),$t=s('',6);c.render=function(s,a,e,o,c,It){return n(),t("div",null,[l,p,i,r,u,d,k,m,b,y,h,f,g,v,C,w,x,_,j,T,P,$,I,E,S,N,A,D,q,B,F,H,U,W,L,V,O,R,M,J,z,K,Q,G,Y,X,Z,nn,tn,sn,an,en,on,cn,ln,pn,rn,un,dn,kn,mn,bn,yn,hn,fn,gn,vn,Cn,wn,xn,_n,jn,Tn,Pn,$n,In,En,Sn,Nn,An,Dn,qn,Bn,Fn,Hn,Un,Wn,Ln,Vn,On,Rn,Mn,Jn,zn,Kn,Qn,Gn,Yn,Xn,Zn,nt,tt,st,at,et,ot,ct,lt,pt,it,rt,ut,dt,kt,mt,bt,yt,ht,ft,gt,vt,Ct,wt,xt,_t,jt,Tt,Pt,$t])};export default c;export{o as __pageData};
