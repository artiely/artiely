import{o as n,c as t,a,x as s}from"./app.746f22cf.js";const e='{"title":"Electron注册全局快捷键（globalShortcut）,剪切板（clipboard ）与nativeImage 模块","description":"","frontmatter":{"title":"Electron注册全局快捷键（globalShortcut）,剪切板（clipboard ）与nativeImage 模块","tag":["nodejs","electron"],"author":"Artiely","date":"2018-7-11","cover":"https://gitee.com/artiely/Figure-bed/raw/master/images/20200315165123.png","base64":"8c8f8f"},"headers":[{"level":2,"title":"Electron 注册全局快捷键（globalShortcut）","slug":"electron-注册全局快捷键globalshortcut"},{"level":2,"title":"clipboard 剪切板事件 clipboard 模块以及 nativeImage 模块","slug":"clipboard-剪切板事件-clipboard-模块以及-nativeimage-模块"}],"relativePath":"post/2018/2018-7-11-electron-shortcut-cliboard-nativeimage.md","lastUpdated":1629110798839}',o={},c=a("h2",{id:"electron-注册全局快捷键globalshortcut"},[a("a",{class:"header-anchor",href:"#electron-注册全局快捷键globalshortcut","aria-hidden":"true"},"#"),s(" Electron 注册全局快捷键（globalShortcut）")],-1),l=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"var"),s(" app "),a("span",{class:"token operator"},"="),s(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'app'"),a("span",{class:"token punctuation"},")"),s("\n"),a("span",{class:"token keyword"},"var"),s(" globalShortcut "),a("span",{class:"token operator"},"="),s(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'electron'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),s("globalShortcut\napp"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'ready'"),a("span",{class:"token punctuation"},","),s(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n  "),a("span",{class:"token comment"},"// Register a 'ctrl+x' shortcut listener."),s("\n  "),a("span",{class:"token keyword"},"var"),s(" ret "),a("span",{class:"token operator"},"="),s(" globalShortcut"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"register"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'ctrl+x'"),a("span",{class:"token punctuation"},","),s(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'ctrl+x is pressed'"),a("span",{class:"token punctuation"},")"),s("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),s("\n  "),a("span",{class:"token keyword"},"if"),s(),a("span",{class:"token punctuation"},"("),a("span",{class:"token operator"},"!"),s("ret"),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'registration failed'"),a("span",{class:"token punctuation"},")"),s("\n  "),a("span",{class:"token punctuation"},"}"),s("\n  "),a("span",{class:"token comment"},"// Check whether a shortcut is registered."),s("\n  console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),s("globalShortcut"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"isRegistered"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'ctrl+x'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),s("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),s("\napp"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'will-quit'"),a("span",{class:"token punctuation"},","),s(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),s(),a("span",{class:"token punctuation"},"{"),s("\n  "),a("span",{class:"token comment"},"// Unregister a shortcut."),s("\n  globalShortcut"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"unregister"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'ctrl+x'"),a("span",{class:"token punctuation"},")"),s("\n  "),a("span",{class:"token comment"},"// Unregister all shortcuts."),s("\n  globalShortcut"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"unregisterAll"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),s("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),s("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557990985-80877"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var app = require('app')\nvar globalShortcut = require('electron').globalShortcut\napp.on('ready', function() {\n  // Register a 'ctrl+x' shortcut listener.\n  var ret = globalShortcut.register('ctrl+x', function() {\n    console.log('ctrl+x is pressed')\n  })\n  if (!ret) {\n    console.log('registration failed')\n  }\n  // Check whether a shortcut is registered.\n  console.log(globalShortcut.isRegistered('ctrl+x'))\n})\napp.on('will-quit', function() {\n  // Unregister a shortcut.\n  globalShortcut.unregister('ctrl+x')\n  // Unregister all shortcuts.\n  globalShortcut.unregisterAll()\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557990985-80877","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br")])],-1),i=a("h2",{id:"clipboard-剪切板事件-clipboard-模块以及-nativeimage-模块"},[a("a",{class:"header-anchor",href:"#clipboard-剪切板事件-clipboard-模块以及-nativeimage-模块","aria-hidden":"true"},"#"),s(" clipboard 剪切板事件 clipboard 模块以及 nativeImage 模块")],-1),p=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),s(),a("span",{class:"token punctuation"},"{"),s(" clipboard"),a("span",{class:"token punctuation"},","),s(" nativeImage "),a("span",{class:"token punctuation"},"}"),s(),a("span",{class:"token operator"},"="),s(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'electron'"),a("span",{class:"token punctuation"},")"),s("\nclipboard"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"writeText"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'这是一个机器码'"),a("span",{class:"token punctuation"},")"),s("\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),s("clipboard"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readText"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),s("\n"),a("span",{class:"token keyword"},"let"),s(" img "),a("span",{class:"token operator"},"="),s(" nativeImage"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"createFromPath"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'static/favicon2.ico'"),a("span",{class:"token punctuation"},")"),s("\nclipboard"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"writeImage"),a("span",{class:"token punctuation"},"("),s("img"),a("span",{class:"token punctuation"},")"),s("\n"),a("span",{class:"token keyword"},"const"),s(" imgDataURL "),a("span",{class:"token operator"},"="),s(" clipboard"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"readImage"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toDataURL"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),s("\n"),a("span",{class:"token keyword"},"const"),s(" img3 "),a("span",{class:"token operator"},"="),s(),a("span",{class:"token keyword"},"new"),s(),a("span",{class:"token class-name"},"Image"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),s("\nimg3"),a("span",{class:"token punctuation"},"."),s("src "),a("span",{class:"token operator"},"="),s(" imgDataURL\ndocument"),a("span",{class:"token punctuation"},"."),s("body"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"appendChild"),a("span",{class:"token punctuation"},"("),s("img3"),a("span",{class:"token punctuation"},")"),s("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629557990985-85322"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const { clipboard, nativeImage } = require('electron')\nclipboard.writeText('这是一个机器码')\nconsole.log(clipboard.readText())\nlet img = nativeImage.createFromPath('static/favicon2.ico')\nclipboard.writeImage(img)\nconst imgDataURL = clipboard.readImage().toDataURL()\nconst img3 = new Image()\nimg3.src = imgDataURL\ndocument.body.appendChild(img3)\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629557990985-85322","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1);o.render=function(a,s,e,o,r,u){return n(),t("div",null,[c,l,i,p])};export default o;export{e as __pageData};
