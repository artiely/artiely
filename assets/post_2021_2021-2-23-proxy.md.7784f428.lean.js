import{o as n,c as s,f as a,a as t,x as e}from"./app.b304d650.js";const o='{"title":"从使用场景了解proxy","description":"","frontmatter":{"title":"从使用场景了解proxy","tag":["proxy"],"cover":"https://gitee.com/artiely/Figure-bed/raw/master/20210223114632.png","base64":"f0df3d","author":"artiely","date":"2021-2-23"},"headers":[{"level":3,"title":"跟踪属性访问（get，set）","slug":"跟踪属性访问getset"},{"level":3,"title":"获取未知属性的警告","slug":"获取未知属性的警告"},{"level":3,"title":"负数组索引（get）","slug":"负数组索引get"},{"level":3,"title":"数据绑定","slug":"数据绑定"},{"level":3,"title":"访问 RESTful 接口服务","slug":"访问-restful-接口服务"},{"level":3,"title":"撤销引用","slug":"撤销引用"},{"level":3,"title":"创建类型检查","slug":"创建类型检查"},{"level":3,"title":"字段校验","slug":"字段校验"},{"level":3,"title":"级联属性","slug":"级联属性"},{"level":3,"title":"私有化属性","slug":"私有化属性"},{"level":3,"title":"日志打印","slug":"日志打印"},{"level":3,"title":"代理属性查找","slug":"代理属性查找"},{"level":3,"title":"监听每个异步的过程","slug":"监听每个异步的过程"},{"level":3,"title":"缓存","slug":"缓存"},{"level":3,"title":"计算属性","slug":"计算属性"}],"relativePath":"post/2021/2021-2-23-proxy.md","lastUpdated":1629523969252}',c={},p=a('',5),l=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"class"),e(),t("span",{class:"token class-name"},"Point"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token function"},"constructor"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("x"),t("span",{class:"token punctuation"},","),e(" y")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("x "),t("span",{class:"token operator"},"="),e(" x"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("y "),t("span",{class:"token operator"},"="),e(" y"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token punctuation"},"}"),e("\n  "),t("span",{class:"token function"},"toString"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"Point("),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("x"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token string"},", "),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("y"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token string"},")"),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token keyword"},"const"),e(" p "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Point"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"5"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token number"},"7"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// 追踪属性 `x` and `y`"),e("\np "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"tracePropAccess"),t("span",{class:"token punctuation"},"("),e("p"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"["),t("span",{class:"token string"},'"x"'),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token string"},'"y"'),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761239-13557"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  toString() {\n    return `Point(${this.x}, ${this.y})`;\n  }\n}\nconst p = new Point(5, 7);\n// 追踪属性 `x` and `y`\np = tracePropAccess(p, ["x", "y"]);\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761239-13557","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br")])],-1),u=t("p",null,"我们希望设置或获取属性时得到以下效果",-1),i=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token operator"},">"),e(" p"),t("span",{class:"token punctuation"},"."),e("x\n"),t("span",{class:"token constant"},"GET"),e(" x\n"),t("span",{class:"token number"},"5"),e("\n"),t("span",{class:"token operator"},">"),e(" p"),t("span",{class:"token punctuation"},"."),e("x "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"21"),e("\n"),t("span",{class:"token constant"},"SET"),e(" x"),t("span",{class:"token operator"},"="),t("span",{class:"token number"},"21"),e("\n"),t("span",{class:"token number"},"21"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761239-33286"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"> p.x\nGET x\n5\n> p.x = 21\nSET x=21\n21\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761239-33286","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br")])],-1),r=t("p",null,[e("基于"),t("code",null,"proxy"),e("的简单实现")],-1),k=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"tracePropAccess"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("obj"),t("span",{class:"token punctuation"},","),e(" propKeys")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"const"),e(" propKeySet "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Set"),t("span",{class:"token punctuation"},"("),e("propKeys"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("obj"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),e("propKeySet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"has"),t("span",{class:"token punctuation"},"("),e("propKey"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"GET "'),e(),t("span",{class:"token operator"},"+"),e(" propKey"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),e("\n      "),t("span",{class:"token keyword"},"return"),e(" Reflect"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token function"},"set"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" value"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),e("propKeySet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"has"),t("span",{class:"token punctuation"},"("),e("propKey"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"SET "'),e(),t("span",{class:"token operator"},"+"),e(" propKey "),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token string"},'"="'),e(),t("span",{class:"token operator"},"+"),e(" value"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),e("\n      "),t("span",{class:"token keyword"},"return"),e(" Reflect"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"set"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" value"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761239-94752"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'function tracePropAccess(obj, propKeys) {\n  const propKeySet = new Set(propKeys);\n  return new Proxy(obj, {\n    get(target, propKey, receiver) {\n      if (propKeySet.has(propKey)) {\n        console.log("GET " + propKey);\n      }\n      return Reflect.get(target, propKey, receiver);\n    },\n    set(target, propKey, value, receiver) {\n      if (propKeySet.has(propKey)) {\n        console.log("SET " + propKey + "=" + value);\n      }\n      return Reflect.set(target, propKey, value, receiver);\n    },\n  });\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761239-94752","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br")])],-1),d=t("p",null,"基于以上我们可以实现日志打印，数据统计等",-1),m=t("h3",{id:"获取未知属性的警告"},[t("a",{class:"header-anchor",href:"#获取未知属性的警告","aria-hidden":"true"},"#"),e(" 获取未知属性的警告")],-1),b=t("p",null,[e("在访问属性时，JavaScript 非常宽容。例如，如果您尝试读取属性并拼写错误的名称，则不会得到异常，而会得到结果"),t("code",null,"undefined"),e("。在这种情况下，您可以使用代理获取例外。其工作原理如下。我们使代理成为对象的原型。")],-1),y=t("p",null,"如果在对象中找不到属性，get 则会触发。如果该属性甚至在代理之后的原型链中不存在，则会引发异常。否则，我们返回继承属性的值。我们将操作转发到目标（目标的原型也是代理的原型）。",-1),f=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"const"),e(" PropertyChecker "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("\n  "),t("span",{class:"token punctuation"},"{"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token operator"},"!"),t("span",{class:"token punctuation"},"("),e("propKey "),t("span",{class:"token keyword"},"in"),e(" target"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"throw"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"ReferenceError"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"Unknown property: "'),e(),t("span",{class:"token operator"},"+"),e(" propKey"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),e("\n      "),t("span",{class:"token keyword"},"return"),e(" Reflect"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761239-37419"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const PropertyChecker = new Proxy(\n  {},\n  {\n    get(target, propKey, receiver) {\n      if (!(propKey in target)) {\n        throw new ReferenceError("Unknown property: " + propKey);\n      }\n      return Reflect.get(target, propKey, receiver);\n    },\n  }\n);\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761239-37419","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br")])],-1),h=t("p",null,[e("让我们使用"),t("code",null,"PropertyChecker"),e("创建的对象：")],-1),g=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token operator"},">"),e(),t("span",{class:"token keyword"},"const"),e(" obj "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e(" __proto__"),t("span",{class:"token operator"},":"),e(" PropertyChecker"),t("span",{class:"token punctuation"},","),e(" foo"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token number"},"123"),e(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token operator"},">"),e(" obj"),t("span",{class:"token punctuation"},"."),e("foo  "),t("span",{class:"token comment"},"// 自己的属性"),e("\n"),t("span",{class:"token number"},"123"),e("\n"),t("span",{class:"token operator"},">"),e(" obj"),t("span",{class:"token punctuation"},"."),e("fo\nReferenceError"),t("span",{class:"token operator"},":"),e(" Unknown property"),t("span",{class:"token operator"},":"),e(" fo\n"),t("span",{class:"token operator"},">"),e(" obj"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"toString"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e("  "),t("span",{class:"token comment"},"// 继承的方法"),e("\n"),t("span",{class:"token string"},"'[object Object]'"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761239-15604"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"> const obj = { __proto__: PropertyChecker, foo: 123 };\n> obj.foo  // 自己的属性\n123\n> obj.fo\nReferenceError: Unknown property: fo\n> obj.toString()  // 继承的方法\n'[object Object]'\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761239-15604","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br")])],-1),w=t("p",null,[e("如果我们"),t("code",null,"PropertyChecker"),e("使用构造函数，则可以通过 extends 继承类")],-1),v=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"PropertyChecker"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token class-name"},"PropertyChecker"),t("span",{class:"token punctuation"},"."),e("prototype "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("\n  "),t("span",{class:"token punctuation"},"{"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token operator"},"!"),t("span",{class:"token punctuation"},"("),e("propKey "),t("span",{class:"token keyword"},"in"),e(" target"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"throw"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"ReferenceError"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"Unknown property: "'),e(),t("span",{class:"token operator"},"+"),e(" propKey"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),e("\n      "),t("span",{class:"token keyword"},"return"),e(" Reflect"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token keyword"},"class"),e(),t("span",{class:"token class-name"},"Point"),e(),t("span",{class:"token keyword"},"extends"),e(),t("span",{class:"token class-name"},"PropertyChecker"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token function"},"constructor"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("x"),t("span",{class:"token punctuation"},","),e(" y")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"super"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("x "),t("span",{class:"token operator"},"="),e(" x"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("y "),t("span",{class:"token operator"},"="),e(" y"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n\n"),t("span",{class:"token keyword"},"const"),e(" p "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Point"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"5"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token number"},"7"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\nconsole"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("p"),t("span",{class:"token punctuation"},"."),e("x"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// 5"),e("\nconsole"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("p"),t("span",{class:"token punctuation"},"."),e("z"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// ReferenceError"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761239-14654"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'function PropertyChecker() {}\nPropertyChecker.prototype = new Proxy(\n  {},\n  {\n    get(target, propKey, receiver) {\n      if (!(propKey in target)) {\n        throw new ReferenceError("Unknown property: " + propKey);\n      }\n      return Reflect.get(target, propKey, receiver);\n    },\n  }\n);\n\nclass Point extends PropertyChecker {\n  constructor(x, y) {\n    super();\n    this.x = x;\n    this.y = y;\n  }\n}\n\nconst p = new Point(5, 7);\nconsole.log(p.x); // 5\nconsole.log(p.z); // ReferenceError\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761239-14654","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br")])],-1),C=t("h3",{id:"负数组索引get"},[t("a",{class:"header-anchor",href:"#负数组索引get","aria-hidden":"true"},"#"),e(" 负数组索引（get）")],-1),x=t("p",null,"某些 Array 方法可让您通过引用-1 获得最后一个元素，例如：",-1),j=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token operator"},">"),e(),t("span",{class:"token punctuation"},"["),t("span",{class:"token string"},"'a'"),e("，"),t("span",{class:"token string"},"'b'"),e("，"),t("span",{class:"token string"},"'c'"),t("span",{class:"token punctuation"},"]"),e("。slice（"),t("span",{class:"token operator"},"-"),t("span",{class:"token number"},"1"),e("）\n"),t("span",{class:"token punctuation"},"["),t("span",{class:"token string"},"'c'"),t("span",{class:"token punctuation"},"]"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761240-18465"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"> ['a'，'b'，'c']。slice（-1）\n['c']\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761240-18465","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br")])],-1),T=t("p",null,[e("通过方括号运算符（"),t("code",null,"[]"),e("）访问元素时，该方法不起作用。但是，我们可以使用代理来添加该功能。以下函数"),t("code",null,"createArray()"),e("创建支持负索引的数组。它通过将代理包装 Array 实例来实现。")],-1),P=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"createArray"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[t("span",{class:"token operator"},"..."),e("elements")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"const"),e(" handler "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"const"),e(" index "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"Number"),t("span",{class:"token punctuation"},"("),e("propKey"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),e("index "),t("span",{class:"token operator"},"<"),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        propKey "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"String"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},"."),e("length "),t("span",{class:"token operator"},"+"),e(" index"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),e("\n      "),t("span",{class:"token keyword"},"return"),e(" Reflect"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token keyword"},"const"),e(" target "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"["),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},";"),e("\n  target"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"push"),t("span",{class:"token punctuation"},"("),t("span",{class:"token operator"},"..."),e("elements"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" handler"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token keyword"},"const"),e(" arr "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"createArray"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"a"'),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token string"},'"b"'),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token string"},'"c"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\nconsole"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("arr"),t("span",{class:"token punctuation"},"["),t("span",{class:"token operator"},"-"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// c"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761240-63431"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'function createArray(...elements) {\n  const handler = {\n    get(target, propKey, receiver) {\n      const index = Number(propKey);\n      if (index < 0) {\n        propKey = String(target.length + index);\n      }\n      return Reflect.get(target, propKey, receiver);\n    },\n  };\n  const target = [];\n  target.push(...elements);\n  return new Proxy(target, handler);\n}\nconst arr = createArray("a", "b", "c");\nconsole.log(arr[-1]); // c\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761240-63431","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br")])],-1),E=t("h3",{id:"数据绑定"},[t("a",{class:"header-anchor",href:"#数据绑定","aria-hidden":"true"},"#"),e(" 数据绑定")],-1),$=t("p",null,"数据绑定是关于对象之间的数据同步。或用于一种流行的基于 MVC 模式的库",-1),A=t("p",null,"常见的有 vue,immer,mobx,...",-1),S=t("p",null,"要实现数据绑定，您必须观察并响应对对象所做的更改。在下面的代码片段中，我概述了观察更改对数组的工作方式。",-1),I=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"createObservedArray"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"callback"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"const"),e(" array "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"["),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("array"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function"},"set"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propertyKey"),t("span",{class:"token punctuation"},","),e(" value"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token function"},"callback"),t("span",{class:"token punctuation"},"("),e("propertyKey"),t("span",{class:"token punctuation"},","),e(" value"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token keyword"},"return"),e(" Reflect"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"set"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propertyKey"),t("span",{class:"token punctuation"},","),e(" value"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token keyword"},"const"),e(" observedArray "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"createObservedArray"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("key"),t("span",{class:"token punctuation"},","),e(" value")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e("\n  console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),e("key"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token string"},"="),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),e("value"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},")"),e("\n"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\nobservedArray"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"push"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"a"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761240-42002"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'function createObservedArray(callback) {\n  const array = [];\n  return new Proxy(array, {\n    set(target, propertyKey, value, receiver) {\n      callback(propertyKey, value);\n      return Reflect.set(target, propertyKey, value, receiver);\n    },\n  });\n}\nconst observedArray = createObservedArray((key, value) =>\n  console.log(`${key}=${value}`)\n);\nobservedArray.push("a");\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761240-42002","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br")])],-1),K=t("h3",{id:"访问-restful-接口服务"},[t("a",{class:"header-anchor",href:"#访问-restful-接口服务","aria-hidden":"true"},"#"),e(" 访问 RESTful 接口服务")],-1),N=t("p",null,[e("代理可用于创建可以在其上调用任意方法的对象。在以下示例中，该函数"),t("code",null,"createWebService"),e("创建一个这样的对象"),t("code",null,"service"),e("。调用"),t("code",null,"service"),e("方法，检索具有相同名称的 Web 服务资源的内容。")],-1),R=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[e("\n"),t("span",{class:"token keyword"},"const"),e(" service "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"createWebService"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'http://example.com/data'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// 读取json数据 http://example.com/data/employees"),e("\nservice"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"employees"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"json"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"const"),e(" employees "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token constant"},"JSON"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"parse"),t("span",{class:"token punctuation"},"("),e("json"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    ···\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761241-4131"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"\nconst service = createWebService('http://example.com/data');\n// 读取json数据 http://example.com/data/employees\nservice.employees().then(json => {\n    const employees = JSON.parse(json);\n    ···\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761241-4131","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br")])],-1),B=t("p",null,[t("code",null,"createWebService"),e(" 实现")],-1),D=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"createWebService"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"baseUrl"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("\n    "),t("span",{class:"token punctuation"},"{"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token function"},"httpGet"),t("span",{class:"token punctuation"},"("),e("baseUrl "),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token string"},'"/"'),e(),t("span",{class:"token operator"},"+"),e(" propKey"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n  "),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761241-67665"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'function createWebService(baseUrl) {\n  return new Proxy(\n    {},\n    {\n      get(target, propKey, receiver) {\n        return () => httpGet(baseUrl + "/" + propKey);\n      },\n    }\n  );\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761241-67665","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br")])],-1),F=t("p",null,[t("code",null,"httpGet"),e(" 实现")],-1),O=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"httpGet"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"url"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Promise"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("resolve"),t("span",{class:"token punctuation"},","),e(" reject")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"const"),e(" request "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"XMLHttpRequest"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    Object"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"assign"),t("span",{class:"token punctuation"},"("),e("request"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token function"},"onload"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("status "),t("span",{class:"token operator"},"==="),e(),t("span",{class:"token number"},"200"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n          "),t("span",{class:"token function"},"resolve"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("response"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"else"),e(),t("span",{class:"token punctuation"},"{"),e("\n          "),t("span",{class:"token function"},"reject"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Error"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("statusText"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token punctuation"},"}"),e("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n      "),t("span",{class:"token function"},"onerror"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token function"},"reject"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Error"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"XMLHttpRequest Error: "'),e(),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("statusText"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    request"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"open"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"GET"'),t("span",{class:"token punctuation"},","),e(" url"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    request"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"send"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761241-56278"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'function httpGet(url) {\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    Object.assign(request, {\n      onload() {\n        if (this.status === 200) {\n          resolve(this.response);\n        } else {\n          reject(new Error(this.statusText));\n        }\n      },\n      onerror() {\n        reject(new Error("XMLHttpRequest Error: " + this.statusText));\n      },\n    });\n    request.open("GET", url);\n    request.send();\n  });\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761241-56278","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br")])],-1),_=t("ul",null,[t("li",null,"另一种实现")],-1),G=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"const"),e(),t("span",{class:"token punctuation"},"{"),e(),t("span",{class:"token constant"},"METHODS"),e(),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"http"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"const"),e(" api "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("\n  "),t("span",{class:"token punctuation"},"{"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"const"),e(" method "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token constant"},"METHODS"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"find"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"method"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e("\n        propKey"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"startsWith"),t("span",{class:"token punctuation"},"("),e("method"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"toLowerCase"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e("\n      "),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token operator"},"!"),e("method"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token keyword"},"return"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token keyword"},"const"),e(" path "),t("span",{class:"token operator"},"="),e("\n        "),t("span",{class:"token string"},'"/"'),e(),t("span",{class:"token operator"},"+"),e("\n        propKey\n          "),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"substring"),t("span",{class:"token punctuation"},"("),e("method"),t("span",{class:"token punctuation"},"."),e("length"),t("span",{class:"token punctuation"},")"),e("\n          "),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"replace"),t("span",{class:"token punctuation"},"("),t("span",{class:"token regex"},[t("span",{class:"token regex-delimiter"},"/"),t("span",{class:"token regex-source language-regex"},"([a-z])([A-Z])"),t("span",{class:"token regex-delimiter"},"/"),t("span",{class:"token regex-flags"},"g")]),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token string"},'"$1/$2"'),t("span",{class:"token punctuation"},")"),e("\n          "),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"replace"),t("span",{class:"token punctuation"},"("),t("span",{class:"token regex"},[t("span",{class:"token regex-delimiter"},"/"),t("span",{class:"token regex-source language-regex"},"\\$"),t("span",{class:"token regex-delimiter"},"/"),t("span",{class:"token regex-flags"},"g")]),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token string"},'"/$/"'),t("span",{class:"token punctuation"},")"),e("\n          "),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"toLowerCase"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[t("span",{class:"token operator"},"..."),e("args")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"const"),e(" finalPath "),t("span",{class:"token operator"},"="),e(" path"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"replace"),t("span",{class:"token punctuation"},"("),t("span",{class:"token regex"},[t("span",{class:"token regex-delimiter"},"/"),t("span",{class:"token regex-source language-regex"},"\\$"),t("span",{class:"token regex-delimiter"},"/"),t("span",{class:"token regex-flags"},"g")]),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(" args"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"shift"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token keyword"},"const"),e(" queryOrBody "),t("span",{class:"token operator"},"="),e(" args"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"shift"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"||"),e(),t("span",{class:"token punctuation"},"{"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n        console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("method"),t("span",{class:"token punctuation"},","),e(" finalPath"),t("span",{class:"token punctuation"},","),e(" queryOrBody"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token function"},"fetch"),t("span",{class:"token punctuation"},"("),e("finalPath"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e(" method"),t("span",{class:"token punctuation"},","),e(" body"),t("span",{class:"token operator"},":"),e(" queryOrBody "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// GET /"),e("\napi"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// GET /users"),e("\napi"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getUsers"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// GET /users/1234/likes"),e("\napi"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getUsers$Likes"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"1234"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// GET /users/1234/likes?page=2"),e("\napi"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getUsers$Likes"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"1234"'),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e(" page"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token number"},"2"),e(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// POST /items with body"),e("\napi"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"postItems"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),e(" name"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"Item name"'),e(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// api.foobar is not a function"),e("\napi"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"foobar"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761241-12265"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const { METHODS } = require("http");\nconst api = new Proxy(\n  {},\n  {\n    get(target, propKey) {\n      const method = METHODS.find((method) =>\n        propKey.startsWith(method.toLowerCase())\n      );\n      if (!method) return;\n      const path =\n        "/" +\n        propKey\n          .substring(method.length)\n          .replace(/([a-z])([A-Z])/g, "$1/$2")\n          .replace(/\\$/g, "/$/")\n          .toLowerCase();\n      return (...args) => {\n        const finalPath = path.replace(/\\$/g, () => args.shift());\n        const queryOrBody = args.shift() || {};\n        console.log(method, finalPath, queryOrBody);\n        return fetch(finalPath, { method, body: queryOrBody });\n      };\n    },\n  }\n);\n// GET /\napi.get();\n// GET /users\napi.getUsers();\n// GET /users/1234/likes\napi.getUsers$Likes("1234");\n// GET /users/1234/likes?page=2\napi.getUsers$Likes("1234", { page: 2 });\n// POST /items with body\napi.postItems({ name: "Item name" });\n// api.foobar is not a function\napi.foobar();\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761241-12265","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br"),t("span",{class:"line-number"},"32"),t("br"),t("span",{class:"line-number"},"33"),t("br"),t("span",{class:"line-number"},"34"),t("br"),t("span",{class:"line-number"},"35"),t("br"),t("span",{class:"line-number"},"36"),t("br"),t("span",{class:"line-number"},"37"),t("br")])],-1),U=t("ul",null,[t("li",null,"再来一种")],-1),q=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"let"),e(" handlers "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" property"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token operator"},"!"),e("target"),t("span",{class:"token punctuation"},"."),e("init"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token comment"},"// 初始化对象"),e("\n      "),t("span",{class:"token punctuation"},"["),t("span",{class:"token string"},'"GET"'),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token string"},'"POST"'),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"forEach"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"method"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n        target"),t("span",{class:"token punctuation"},"["),e("method"),t("span",{class:"token punctuation"},"]"),e(),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("url"),t("span",{class:"token punctuation"},","),e(" params "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),t("span",{class:"token punctuation"},"}")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n          "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token function"},"fetch"),t("span",{class:"token punctuation"},"("),e("url"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e("\n            headers"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token punctuation"},"{"),e("\n              "),t("span",{class:"token string"},'"content-type"'),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"application/json"'),t("span",{class:"token punctuation"},","),e("\n            "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n            mode"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"cors"'),t("span",{class:"token punctuation"},","),e("\n            credentials"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"same-origin"'),t("span",{class:"token punctuation"},","),e("\n            method"),t("span",{class:"token punctuation"},","),e("\n            "),t("span",{class:"token operator"},"..."),e("params"),t("span",{class:"token punctuation"},","),e("\n          "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"response"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(" response"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"json"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n\n    "),t("span",{class:"token keyword"},"return"),e(" target"),t("span",{class:"token punctuation"},"["),e("property"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"let"),e(),t("span",{class:"token constant"},"API"),e(),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e(" handlers"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token keyword"},"await"),e(),t("span",{class:"token constant"},"API"),t("span",{class:"token punctuation"},"."),t("span",{class:"token constant"},"GET"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"XXX"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"await"),e(),t("span",{class:"token constant"},"API"),t("span",{class:"token punctuation"},"."),t("span",{class:"token constant"},"POST"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"XXX"'),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e("\n  body"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token constant"},"JSON"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"stringify"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),e(" name"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token number"},"1"),e(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761241-39211"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'let handlers = {\n  get(target, property) {\n    if (!target.init) {\n      // 初始化对象\n      ["GET", "POST"].forEach((method) => {\n        target[method] = (url, params = {}) => {\n          return fetch(url, {\n            headers: {\n              "content-type": "application/json",\n            },\n            mode: "cors",\n            credentials: "same-origin",\n            method,\n            ...params,\n          }).then((response) => response.json());\n        };\n      });\n    }\n\n    return target[property];\n  },\n};\nlet API = new Proxy({}, handlers);\n\nawait API.GET("XXX");\nawait API.POST("XXX", {\n  body: JSON.stringify({ name: 1 }),\n});\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761241-39211","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br")])],-1),M=t("ul",null,[t("li",null,"有趣的方式")],-1),J=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"const"),e(" www "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"URL"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"https://www"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token function-variable function"},"get"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("target"),t("span",{class:"token punctuation"},","),e(" prop")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"let"),e(" o "),t("span",{class:"token operator"},"="),e(" Reflect"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" prop"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"🚀 ~ file: 2021-2-23-proxy.md ~ line 21 ~ get ~ o"'),t("span",{class:"token punctuation"},","),e(" o"),t("span",{class:"token punctuation"},","),e(" prop"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"typeof"),e(" o "),t("span",{class:"token operator"},"==="),e(),t("span",{class:"token string"},'"function"'),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token function"},"o"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"bind"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"typeof"),e(" prop "),t("span",{class:"token operator"},"!=="),e(),t("span",{class:"token string"},'"string"'),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"return"),e(" o"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),e("prop "),t("span",{class:"token operator"},"==="),e(),t("span",{class:"token string"},'"then"'),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token class-name"},"Promise"),t("span",{class:"token punctuation"},"."),e("prototype"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"bind"),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"fetch"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n    target "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"URL"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    target"),t("span",{class:"token punctuation"},"."),e("hostname "),t("span",{class:"token operator"},"+="),e(),t("span",{class:"token template-string"},[t("span",{class:"token template-punctuation string"},"`"),t("span",{class:"token string"},"."),t("span",{class:"token interpolation"},[t("span",{class:"token interpolation-punctuation punctuation"},"${"),e("prop"),t("span",{class:"token interpolation-punctuation punctuation"},"}")]),t("span",{class:"token template-punctuation string"},"`")]),t("span",{class:"token punctuation"},";"),e("\n    console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"get"'),t("span",{class:"token punctuation"},","),e(" get"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e(" get "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token comment"},"// 访问百度"),e("\nwww"),t("span",{class:"token punctuation"},"."),e("baidu"),t("span",{class:"token punctuation"},"."),e("com"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"response"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n  console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("response"),t("span",{class:"token punctuation"},"."),e("status"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token comment"},"// ==> 200"),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token comment"},"// 使用 async/await 语法："),e("\n"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"async"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"const"),e(" response "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"await"),e(" www"),t("span",{class:"token punctuation"},"."),e("baidu"),t("span",{class:"token punctuation"},"."),e("com"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token string"},'"foo/1111"'),t("span",{class:"token punctuation"},";"),e("\n\n  console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("response"),t("span",{class:"token punctuation"},"."),e("ok"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token comment"},"// ==> true"),e("\n\n  console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("response"),t("span",{class:"token punctuation"},"."),e("status"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token comment"},"// ==> 200"),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761242-79697"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const www = new Proxy(new URL("https://www"), {\n  get: function get(target, prop) {\n    let o = Reflect.get(target, prop);\n    console.log("🚀 ~ file: 2021-2-23-proxy.md ~ line 21 ~ get ~ o", o, prop);\n    if (typeof o === "function") {\n      return o.bind(target);\n    }\n    if (typeof prop !== "string") {\n      return o;\n    }\n    if (prop === "then") {\n      return Promise.prototype.then.bind(fetch(target));\n    }\n    target = new URL(target);\n    target.hostname += `.${prop}`;\n    console.log("get", get);\n    return new Proxy(target, { get });\n  },\n});\n\n// 访问百度\nwww.baidu.com.then((response) => {\n  console.log(response.status);\n  // ==> 200\n});\n\n// 使用 async/await 语法：\n(async () => {\n  const response = (await www.baidu.com) + "foo/1111";\n\n  console.log(response.ok);\n  // ==> true\n\n  console.log(response.status);\n  // ==> 200\n})();\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761242-79697","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br"),t("span",{class:"line-number"},"32"),t("br"),t("span",{class:"line-number"},"33"),t("br"),t("span",{class:"line-number"},"34"),t("br"),t("span",{class:"line-number"},"35"),t("br"),t("span",{class:"line-number"},"36"),t("br")])],-1),L=t("h3",{id:"撤销引用"},[t("a",{class:"header-anchor",href:"#撤销引用","aria-hidden":"true"},"#"),e(" 撤销引用")],-1),X=t("p",null,[e("可撤销引用的工作方式如下："),t("br"),e(" 不允许用户直接访问对象属性（或者转发你的服务器资源），用户完成引用后，通过撤消引用（将其关闭）来保护资源。此后，再引用将引发异常，并且不再转发任何内容。")],-1),W=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"const"),e(" resource "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e(" x"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token number"},"11"),t("span",{class:"token punctuation"},","),e(" y"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token number"},"8"),e(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"const"),e(),t("span",{class:"token punctuation"},"{"),e(" reference"),t("span",{class:"token punctuation"},","),e(" revoke "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"createRevocableReference"),t("span",{class:"token punctuation"},"("),e("resource"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token comment"},"// 引用授权"),e("\nconsole"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("reference"),t("span",{class:"token punctuation"},"."),e("x"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// 11"),e("\n"),t("span",{class:"token comment"},"// 撤销"),e("\n"),t("span",{class:"token function"},"revoke"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\nconsole"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("reference"),t("span",{class:"token punctuation"},"."),e("x"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// TypeError: Revoked"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761250-75785"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const resource = { x: 11, y: 8 };\nconst { reference, revoke } = createRevocableReference(resource);\n\n// 引用授权\nconsole.log(reference.x); // 11\n// 撤销\nrevoke();\n\nconsole.log(reference.x); // TypeError: Revoked\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761250-75785","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br")])],-1),V=t("p",null,[e("代理非常适合实现可撤销引用，因为它们可以拦截和转发操作。这是基于代理的简单实现"),t("code",null,"createRevocableReference"),e("：")],-1),H=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"createRevocableReference"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"target"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"let"),e(" enabled "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token punctuation"},"{"),e("\n        reference"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e("\n            "),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n                "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token operator"},"!"),e("enabled"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n                    "),t("span",{class:"token keyword"},"throw"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"TypeError"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'Revoked'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                "),t("span",{class:"token punctuation"},"}"),e("\n                "),t("span",{class:"token keyword"},"return"),e(" Reflect"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n            "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n            "),t("span",{class:"token function"},"has"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("target"),t("span",{class:"token punctuation"},","),e(" propKey")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n                "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token operator"},"!"),e("enabled"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n                    "),t("span",{class:"token keyword"},"throw"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"TypeError"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'Revoked'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                "),t("span",{class:"token punctuation"},"}"),e("\n                "),t("span",{class:"token keyword"},"return"),e(" Reflect"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"has"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n            "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n            ···\n        "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),e("\n        "),t("span",{class:"token function"},"revoke"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n            enabled "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761251-46571"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"function createRevocableReference(target) {\n    let enabled = true;\n    return {\n        reference: new Proxy(target, {\n            get(target, propKey, receiver) {\n                if (!enabled) {\n                    throw new TypeError('Revoked');\n                }\n                return Reflect.get(target, propKey, receiver);\n            },\n            has(target, propKey) {\n                if (!enabled) {\n                    throw new TypeError('Revoked');\n                }\n                return Reflect.has(target, propKey);\n            },\n            ···\n        }),\n        revoke() {\n            enabled = false;\n        },\n    };\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761251-46571","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br")])],-1),z=t("p",null,"简化",-1),Z=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"createRevocableReference"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"target"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"let"),e(" enabled "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token keyword"},"const"),e(" handler "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("\n    "),t("span",{class:"token punctuation"},"{"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("dummyTarget"),t("span",{class:"token punctuation"},","),e(" trapName"),t("span",{class:"token punctuation"},","),e(" receiver"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token operator"},"!"),e("enabled"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n          "),t("span",{class:"token keyword"},"throw"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"TypeError"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"Revoked"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token punctuation"},"}"),e("\n        "),t("span",{class:"token keyword"},"return"),e(" Reflect"),t("span",{class:"token punctuation"},"["),e("trapName"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n  "),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token punctuation"},"{"),e("\n    reference"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" handler"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token function"},"revoke"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      enabled "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761251-92330"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'function createRevocableReference(target) {\n  let enabled = true;\n  const handler = new Proxy(\n    {},\n    {\n      get(dummyTarget, trapName, receiver) {\n        if (!enabled) {\n          throw new TypeError("Revoked");\n        }\n        return Reflect[trapName];\n      },\n    }\n  );\n  return {\n    reference: new Proxy(target, handler),\n    revoke() {\n      enabled = false;\n    },\n  };\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761251-92330","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br")])],-1),Q=t("p",null,[e("不过我们不必自己实现撤销，因为 "),t("code",null,"proxy"),e(" 自带改方法")],-1),Y=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"createRevocableReference"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"target"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"const"),e(" handler "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// {} 就会转发所有"),e("\n  "),t("span",{class:"token keyword"},"const"),e(),t("span",{class:"token punctuation"},"{"),e(" proxy"),t("span",{class:"token punctuation"},","),e(" revoke "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token operator"},"="),e(" Proxy"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"revocable"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" handler"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token punctuation"},"{"),e(" reference"),t("span",{class:"token operator"},":"),e(" proxy"),t("span",{class:"token punctuation"},","),e(" revoke "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761251-31490"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"function createRevocableReference(target) {\n  const handler = {}; // {} 就会转发所有\n  const { proxy, revoke } = Proxy.revocable(target, handler);\n  return { reference: proxy, revoke };\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761251-31490","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br")])],-1),nn=t("h3",{id:"创建类型检查"},[t("a",{class:"header-anchor",href:"#创建类型检查","aria-hidden":"true"},"#"),e(" 创建类型检查")],-1),sn=t("p",null,"防止用户输入不合法",-1),an=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"var"),e(" person "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  name"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"Artiely"'),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token keyword"},"var"),e(" typeSafePerson "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"createTypeSafeObject"),t("span",{class:"token punctuation"},"("),e("person"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\ntypeSafePerson"),t("span",{class:"token punctuation"},"."),e("name "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token string"},'"Mike"'),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// ok"),e("\ntypeSafePerson"),t("span",{class:"token punctuation"},"."),e("age "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"18"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// ok"),e("\ntypeSafePerson"),t("span",{class:"token punctuation"},"."),e("age "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token string"},'"red"'),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// throws an error, different types"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761251-52008"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'var person = {\n  name: "Artiely",\n};\n\nvar typeSafePerson = createTypeSafeObject(person);\n\ntypeSafePerson.name = "Mike"; // ok\ntypeSafePerson.age = 18; // ok\ntypeSafePerson.age = "red"; // throws an error, different types\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761251-52008","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br")])],-1),tn=t("p",null,"只需简单的判断当前赋值的类型是否等于上次的类型",-1),en=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"createTypeSafeObject"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"object"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("object"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function-variable function"},"set"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token keyword"},"function"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("target"),t("span",{class:"token punctuation"},","),e(" property"),t("span",{class:"token punctuation"},","),e(" value")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"var"),e(" currentType "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"typeof"),e(" target"),t("span",{class:"token punctuation"},"["),e("property"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},","),e("\n        newType "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"typeof"),e(" value"),t("span",{class:"token punctuation"},";"),e("\n\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),e("property "),t("span",{class:"token keyword"},"in"),e(" target "),t("span",{class:"token operator"},"&&"),e(" currentType "),t("span",{class:"token operator"},"!=="),e(" newType"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"throw"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Error"),t("span",{class:"token punctuation"},"("),e("\n          "),t("span",{class:"token string"},'"Property "'),e(),t("span",{class:"token operator"},"+"),e(" property "),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token string"},'" must be a "'),e(),t("span",{class:"token operator"},"+"),e(" currentType "),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token string"},'"."'),e("\n        "),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"else"),e(),t("span",{class:"token punctuation"},"{"),e("\n        target"),t("span",{class:"token punctuation"},"["),e("property"),t("span",{class:"token punctuation"},"]"),e(),t("span",{class:"token operator"},"="),e(" value"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761251-46573"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'function createTypeSafeObject(object) {\n  return new Proxy(object, {\n    set: function(target, property, value) {\n      var currentType = typeof target[property],\n        newType = typeof value;\n\n      if (property in target && currentType !== newType) {\n        throw new Error(\n          "Property " + property + " must be a " + currentType + "."\n        );\n      } else {\n        target[property] = value;\n      }\n    },\n  });\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761251-46573","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br")])],-1),on=t("h3",{id:"字段校验"},[t("a",{class:"header-anchor",href:"#字段校验","aria-hidden":"true"},"#"),e(" 字段校验")],-1),cn=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"let"),e(" p "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"validator"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\np"),t("span",{class:"token punctuation"},"."),e("age "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"18"),t("span",{class:"token punctuation"},";"),e("\np"),t("span",{class:"token punctuation"},"."),e("age "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token string"},'"young"'),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// throws an error"),e("\np"),t("span",{class:"token punctuation"},"."),e("age "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"200"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// throws an error"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761251-18273"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'let p = validator({});\np.age = 18;\np.age = "young"; // throws an error\np.age = 200; // throws an error\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761251-18273","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br")])],-1),pn=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"const"),e(),t("span",{class:"token function-variable function"},"validator"),e(),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"target"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),e("target "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function"},"set"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" props"),t("span",{class:"token punctuation"},","),e(" value"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),e("props "),t("span",{class:"token operator"},"==="),e(),t("span",{class:"token string"},'"age"'),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token operator"},"!"),e("Number"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"isInteger"),t("span",{class:"token punctuation"},"("),e("value"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"||"),e(" value "),t("span",{class:"token operator"},">"),e(),t("span",{class:"token number"},"200"),e(),t("span",{class:"token operator"},"||"),e(" value "),t("span",{class:"token operator"},"<"),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n          "),t("span",{class:"token keyword"},"throw"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"TypeError"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"age should be an integer between 0 and 150"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token punctuation"},"}"),e("\n        target"),t("span",{class:"token punctuation"},"["),e("props"),t("span",{class:"token punctuation"},"]"),e(),t("span",{class:"token operator"},"="),e(" value"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761252-52411"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const validator = (target) => {\n  return new Proxy((target = {}), {\n    set(target, props, value) {\n      if (props === "age") {\n        if (!Number.isInteger(value) || value > 200 || value < 0) {\n          throw new TypeError("age should be an integer between 0 and 150");\n        }\n        target[props] = value;\n        return true;\n      }\n    },\n  });\n};\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761252-52411","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br")])],-1),ln=t("h3",{id:"级联属性"},[t("a",{class:"header-anchor",href:"#级联属性","aria-hidden":"true"},"#"),e(" 级联属性")],-1),un=t("p",null,"数据对应关系",-1),rn=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[e("JavaScript Street  "),t("span",{class:"token operator"},"--"),e("  "),t("span",{class:"token number"},"232200"),e("\nPython Street "),t("span",{class:"token operator"},"--"),e(),t("span",{class:"token number"},"234422"),e("\nGolang Street "),t("span",{class:"token operator"},"--"),e(),t("span",{class:"token number"},"231142"),e("\n\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761252-27662"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"JavaScript Street  --  232200\nPython Street -- 234422\nGolang Street -- 231142\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761252-27662","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br")])],-1),kn=t("p",null,"两组映射关系表",-1),dn=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"const"),e(" location2postcode "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token string"},'"JavaScript Street"'),t("span",{class:"token operator"},":"),e(),t("span",{class:"token number"},"232200"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token string"},'"Python Street"'),t("span",{class:"token operator"},":"),e(),t("span",{class:"token number"},"234422"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token string"},'"Golang Street"'),t("span",{class:"token operator"},":"),e(),t("span",{class:"token number"},"231142"),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"const"),e(" postcode2location "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token string"},'"232200"'),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"JavaScript Street"'),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token string"},'"234422"'),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"Python Street"'),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token string"},'"231142"'),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"Golang Street"'),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761252-69922"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const location2postcode = {\n  "JavaScript Street": 232200,\n  "Python Street": 234422,\n  "Golang Street": 231142,\n};\nconst postcode2location = {\n  "232200": "JavaScript Street",\n  "234422": "Python Street",\n  "231142": "Golang Street",\n};\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761252-69922","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br")])],-1),mn=t("p",null,"使用示例",-1),bn=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"let"),e(" person "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  name"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},"'Jon'"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token keyword"},"let"),e(" p "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"postcodeValidate"),t("span",{class:"token punctuation"},"("),e("person"),t("span",{class:"token punctuation"},")"),e("\np"),t("span",{class:"token punctuation"},"."),e("postcode "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"232200"),e("\np"),t("span",{class:"token punctuation"},"."),e("location\n"),t("span",{class:"token operator"},">"),e("JavaScript Street\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761252-85336"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"let person = {\n  name: 'Jon'\n}\nlet p = postcodeValidate(person)\np.postcode = 232200\np.location\n>JavaScript Street\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761252-85336","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br")])],-1),yn=t("p",null,"实现",-1),fn=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"const"),e(),t("span",{class:"token function-variable function"},"postcodeValidate"),e(),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"obj"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("obj"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function"},"set"),t("span",{class:"token punctuation"},"("),e("item"),t("span",{class:"token punctuation"},","),e(" property"),t("span",{class:"token punctuation"},","),e(" value"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),e("property "),t("span",{class:"token operator"},"==="),e(),t("span",{class:"token string"},'"location"'),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        item"),t("span",{class:"token punctuation"},"."),e("postcode "),t("span",{class:"token operator"},"="),e(" location2postcode"),t("span",{class:"token punctuation"},"["),e("value"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),e("\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),e("property "),t("span",{class:"token operator"},"==="),e(),t("span",{class:"token string"},'"postcode"'),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        item"),t("span",{class:"token punctuation"},"."),e("location "),t("span",{class:"token operator"},"="),e(" postcode2location"),t("span",{class:"token punctuation"},"["),e("value"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761252-86531"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const postcodeValidate = (obj) => {\n  return new Proxy(obj, {\n    set(item, property, value) {\n      if (property === "location") {\n        item.postcode = location2postcode[value];\n      }\n      if (property === "postcode") {\n        item.location = postcode2location[value];\n      }\n    },\n  });\n};\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761252-86531","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br")])],-1),hn=t("h3",{id:"私有化属性"},[t("a",{class:"header-anchor",href:"#私有化属性","aria-hidden":"true"},"#"),e(" 私有化属性")],-1),gn=t("p",null,[e("使带有"),t("code",null,"_"),e("的属性私有化，外界不可访问,如下")],-1),wn=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"let"),e(" obj "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  name"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"artiely"'),t("span",{class:"token punctuation"},","),e("\n  _age"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token number"},"18"),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"let"),e(" objProxy "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"setPrivateField"),t("span",{class:"token punctuation"},"("),e("obj"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\nobj"),t("span",{class:"token punctuation"},"."),e("_age"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"//undefined"),e("\n_age "),t("span",{class:"token keyword"},"in"),e(" objProxy"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// false"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761252-27549"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'let obj = {\n  name: "artiely",\n  _age: 18,\n};\nlet objProxy = setPrivateField(obj);\n\nobj._age; //undefined\n_age in objProxy; // false\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761252-27549","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br")])],-1),vn=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"setPrivateField"),t("span",{class:"token punctuation"},"("),e("obj"),t("span",{class:"token punctuation"},","),e(" prefix "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token string"},'"_"'),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("obj"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function-variable function"},"has"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("obj"),t("span",{class:"token punctuation"},","),e(" prop")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"typeof"),e(" prop "),t("span",{class:"token operator"},"==="),e(),t("span",{class:"token string"},'"string"'),e(),t("span",{class:"token operator"},"&&"),e(" prop"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"startsWith"),t("span",{class:"token punctuation"},"("),e("prefix"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token boolean"},"false"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),e("\n      "),t("span",{class:"token keyword"},"return"),e(" prop "),t("span",{class:"token keyword"},"in"),e(" obj"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token function-variable function"},"ownKeys"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"obj"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"return"),e(" Reflect"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"ownKeys"),t("span",{class:"token punctuation"},"("),e("obj"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"filter"),t("span",{class:"token punctuation"},"("),e("\n        "),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"prop"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token keyword"},"typeof"),e(" prop "),t("span",{class:"token operator"},"!=="),e(),t("span",{class:"token string"},'"string"'),e(),t("span",{class:"token operator"},"||"),e(),t("span",{class:"token operator"},"!"),e("prop"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"startsWith"),t("span",{class:"token punctuation"},"("),e("prefix"),t("span",{class:"token punctuation"},")"),e("\n      "),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token function-variable function"},"get"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("obj"),t("span",{class:"token punctuation"},","),e(" prop")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"typeof"),e(" prop "),t("span",{class:"token operator"},"==="),e(),t("span",{class:"token string"},'"string"'),e(),t("span",{class:"token operator"},"&&"),e(" prop"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"startsWith"),t("span",{class:"token punctuation"},"("),e("prefix"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"undefined"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),e("\n      "),t("span",{class:"token keyword"},"return"),e(" obj"),t("span",{class:"token punctuation"},"["),e("prop"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761252-32667"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'function setPrivateField(obj, prefix = "_") {\n  return new Proxy(obj, {\n    has: (obj, prop) => {\n      if (typeof prop === "string" && prop.startsWith(prefix)) {\n        return false;\n      }\n      return prop in obj;\n    },\n    ownKeys: (obj) => {\n      return Reflect.ownKeys(obj).filter(\n        (prop) => typeof prop !== "string" || !prop.startsWith(prefix)\n      );\n    },\n    get: (obj, prop) => {\n      if (typeof prop === "string" && prop.startsWith(prefix)) {\n        return undefined;\n      }\n      return obj[prop];\n    },\n  });\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761252-32667","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br")])],-1),Cn=t("h3",{id:"日志打印"},[t("a",{class:"header-anchor",href:"#日志打印","aria-hidden":"true"},"#"),e(" 日志打印")],-1),xn=t("h3",{id:"代理属性查找"},[t("a",{class:"header-anchor",href:"#代理属性查找","aria-hidden":"true"},"#"),e(" 代理属性查找")],-1),jn=t("p",null,"起因",-1),Tn=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"const"),e(" obj "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  name"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"artiely"'),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\nconsole"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("obj"),t("span",{class:"token punctuation"},"."),e("age"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// undefined"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761252-1081"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const obj = {\n  name: "artiely",\n};\nconsole.log(obj.age);\n// undefined\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761252-1081","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br")])],-1),Pn=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"let"),e(" handler "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token function-variable function"},"get"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token keyword"},"function"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("target"),t("span",{class:"token punctuation"},","),e(" props")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"return"),e(" props "),t("span",{class:"token keyword"},"in"),e(" target "),t("span",{class:"token operator"},"?"),e(" target"),t("span",{class:"token punctuation"},"["),e("props"),t("span",{class:"token punctuation"},"]"),e(),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"未设置值"'),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token keyword"},"let"),e(" obj "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  name"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"artiely"'),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token keyword"},"let"),e(" p "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("obj"),t("span",{class:"token punctuation"},","),e(" handler"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\nconsole"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("p"),t("span",{class:"token punctuation"},"."),e("age"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// 未设置的值"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761253-28974"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'let handler = {\n  get: function(target, props) {\n    return props in target ? target[props] : "未设置值";\n  },\n};\n\nlet obj = {\n  name: "artiely",\n};\n\nlet p = new Proxy(obj, handler);\n\nconsole.log(p.age); // 未设置的值\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761253-28974","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br")])],-1),En=t("h3",{id:"监听每个异步的过程"},[t("a",{class:"header-anchor",href:"#监听每个异步的过程","aria-hidden":"true"},"#"),e(" 监听每个异步的过程")],-1),$n=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"const"),e(" logUpdate "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"log-update"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"const"),e(" asciichart "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"asciichart"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"const"),e(" chalk "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"chalk"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"const"),e(" Measured "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"require"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"measured"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"const"),e(" timer "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},[e("Measured"),t("span",{class:"token punctuation"},"."),e("Timer")]),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"const"),e(" history "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Array"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"120"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\nhistory"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"fill"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"const"),e(),t("span",{class:"token function-variable function"},"monitor"),e(),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"obj"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("obj"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" propKey"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"const"),e(" origMethod "),t("span",{class:"token operator"},"="),e(" target"),t("span",{class:"token punctuation"},"["),e("propKey"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token operator"},"!"),e("origMethod"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token keyword"},"return"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[t("span",{class:"token operator"},"..."),e("args")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"const"),e(" stopwatch "),t("span",{class:"token operator"},"="),e(" timer"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"start"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token keyword"},"const"),e(" result "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"origMethod"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"apply"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},","),e(" args"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token keyword"},"return"),e(" result"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"out"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n          "),t("span",{class:"token keyword"},"const"),e(" n "),t("span",{class:"token operator"},"="),e(" stopwatch"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"end"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n          history"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"shift"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n          history"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"push"),t("span",{class:"token punctuation"},"("),e("n"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n          "),t("span",{class:"token keyword"},"return"),e(" out"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"const"),e(" service "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token function"},"callService"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Promise"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"resolve"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e("\n      "),t("span",{class:"token function"},"setTimeout"),t("span",{class:"token punctuation"},"("),e("resolve"),t("span",{class:"token punctuation"},","),e(" Math"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"random"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"*"),e(),t("span",{class:"token number"},"50"),e(),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token number"},"50"),t("span",{class:"token punctuation"},")"),e("\n    "),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"const"),e(" monitoredService "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"monitor"),t("span",{class:"token punctuation"},"("),e("service"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token function"},"setInterval"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n  monitoredService\n    "),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"callService"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e("\n    "),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"then"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"const"),e(" fields "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"["),e("\n        "),t("span",{class:"token string"},'"min"'),t("span",{class:"token punctuation"},","),e("\n        "),t("span",{class:"token string"},'"max"'),t("span",{class:"token punctuation"},","),e("\n        "),t("span",{class:"token string"},'"sum"'),t("span",{class:"token punctuation"},","),e("\n        "),t("span",{class:"token string"},'"variance"'),t("span",{class:"token punctuation"},","),e("\n        "),t("span",{class:"token string"},'"mean"'),t("span",{class:"token punctuation"},","),e("\n        "),t("span",{class:"token string"},'"count"'),t("span",{class:"token punctuation"},","),e("\n        "),t("span",{class:"token string"},'"median"'),t("span",{class:"token punctuation"},","),e("\n      "),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token keyword"},"const"),e(" histogram "),t("span",{class:"token operator"},"="),e(" timer"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"toJSON"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),e("histogram"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token keyword"},"const"),e(" lines "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"["),e("\n        "),t("span",{class:"token string"},'""'),t("span",{class:"token punctuation"},","),e("\n        "),t("span",{class:"token operator"},"..."),e("fields"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"map"),t("span",{class:"token punctuation"},"("),e("\n          "),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"field"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e("\n            chalk"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"cyan"),t("span",{class:"token punctuation"},"("),e("field"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token string"},'": "'),e(),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token punctuation"},"("),e("histogram"),t("span",{class:"token punctuation"},"["),e("field"),t("span",{class:"token punctuation"},"]"),e(),t("span",{class:"token operator"},"||"),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"toFixed"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"2"),t("span",{class:"token punctuation"},")"),e("\n        "),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),e("\n      "),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},";"),e("\n      "),t("span",{class:"token function"},"logUpdate"),t("span",{class:"token punctuation"},"("),e("asciichart"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"plot"),t("span",{class:"token punctuation"},"("),e("history"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token punctuation"},"{"),e(" height"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token number"},"10"),e(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"+"),e(" lines"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"join"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"\\n"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},")"),e("\n    "),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"catch"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"err"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(" console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"error"),t("span",{class:"token punctuation"},"("),e("err"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token number"},"100"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761253-15465"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const logUpdate = require("log-update");\nconst asciichart = require("asciichart");\nconst chalk = require("chalk");\nconst Measured = require("measured");\nconst timer = new Measured.Timer();\nconst history = new Array(120);\nhistory.fill(0);\nconst monitor = (obj) => {\n  return new Proxy(obj, {\n    get(target, propKey) {\n      const origMethod = target[propKey];\n      if (!origMethod) return;\n      return (...args) => {\n        const stopwatch = timer.start();\n        const result = origMethod.apply(this, args);\n        return result.then((out) => {\n          const n = stopwatch.end();\n          history.shift();\n          history.push(n);\n          return out;\n        });\n      };\n    },\n  });\n};\nconst service = {\n  callService() {\n    return new Promise((resolve) =>\n      setTimeout(resolve, Math.random() * 50 + 50)\n    );\n  },\n};\nconst monitoredService = monitor(service);\nsetInterval(() => {\n  monitoredService\n    .callService()\n    .then(() => {\n      const fields = [\n        "min",\n        "max",\n        "sum",\n        "variance",\n        "mean",\n        "count",\n        "median",\n      ];\n      const histogram = timer.toJSON().histogram;\n      const lines = [\n        "",\n        ...fields.map(\n          (field) =>\n            chalk.cyan(field) + ": " + (histogram[field] || 0).toFixed(2)\n        ),\n      ];\n      logUpdate(asciichart.plot(history, { height: 10 }) + lines.join("\\n"));\n    })\n    .catch((err) => console.error(err));\n}, 100);\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761253-15465","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br"),t("span",{class:"line-number"},"32"),t("br"),t("span",{class:"line-number"},"33"),t("br"),t("span",{class:"line-number"},"34"),t("br"),t("span",{class:"line-number"},"35"),t("br"),t("span",{class:"line-number"},"36"),t("br"),t("span",{class:"line-number"},"37"),t("br"),t("span",{class:"line-number"},"38"),t("br"),t("span",{class:"line-number"},"39"),t("br"),t("span",{class:"line-number"},"40"),t("br"),t("span",{class:"line-number"},"41"),t("br"),t("span",{class:"line-number"},"42"),t("br"),t("span",{class:"line-number"},"43"),t("br"),t("span",{class:"line-number"},"44"),t("br"),t("span",{class:"line-number"},"45"),t("br"),t("span",{class:"line-number"},"46"),t("br"),t("span",{class:"line-number"},"47"),t("br"),t("span",{class:"line-number"},"48"),t("br"),t("span",{class:"line-number"},"49"),t("br"),t("span",{class:"line-number"},"50"),t("br"),t("span",{class:"line-number"},"51"),t("br"),t("span",{class:"line-number"},"52"),t("br"),t("span",{class:"line-number"},"53"),t("br"),t("span",{class:"line-number"},"54"),t("br"),t("span",{class:"line-number"},"55"),t("br"),t("span",{class:"line-number"},"56"),t("br"),t("span",{class:"line-number"},"57"),t("br"),t("span",{class:"line-number"},"58"),t("br")])],-1),An=t("h3",{id:"缓存"},[t("a",{class:"header-anchor",href:"#缓存","aria-hidden":"true"},"#"),e(" 缓存")],-1),Sn=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"const"),e(),t("span",{class:"token function-variable function"},"cacheTarget"),e(),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("target"),t("span",{class:"token punctuation"},","),e(" ttl "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"60")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"const"),e(),t("span",{class:"token constant"},"CREATED_AT"),e(),t("span",{class:"token operator"},"="),e(" Date"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"now"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token keyword"},"const"),e(),t("span",{class:"token function-variable function"},"isExpired"),e(),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(" Date"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"now"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"-"),e(),t("span",{class:"token constant"},"CREATED_AT"),e(),t("span",{class:"token operator"},">"),e(" ttl "),t("span",{class:"token operator"},"*"),e(),t("span",{class:"token number"},"1000"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token keyword"},"const"),e(" handler "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function-variable function"},"get"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("target"),t("span",{class:"token punctuation"},","),e(" prop")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"isExpired"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"?"),e(),t("span",{class:"token keyword"},"undefined"),e(),t("span",{class:"token operator"},":"),e(" target"),t("span",{class:"token punctuation"},"["),e("prop"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("target"),t("span",{class:"token punctuation"},","),e(" handler"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token keyword"},"const"),e(" cache "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"cacheTarget"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"{"),e(" age"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token number"},"25"),e(),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token number"},"5"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\nconsole"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("cache"),t("span",{class:"token punctuation"},"."),e("age"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token function"},"setTimeout"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n  console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("cache"),t("span",{class:"token punctuation"},"."),e("age"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token number"},"6"),e(),t("span",{class:"token operator"},"*"),e(),t("span",{class:"token number"},"1000"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"//运行结果如下:"),e("\n"),t("span",{class:"token number"},"25"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"undefined"),t("span",{class:"token punctuation"},";"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761253-23201"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const cacheTarget = (target, ttl = 60) => {\n  const CREATED_AT = Date.now();\n  const isExpired = () => Date.now() - CREATED_AT > ttl * 1000;\n  const handler = {\n    get: (target, prop) => (isExpired() ? undefined : target[prop]),\n  };\n  return new Proxy(target, handler);\n};\n\nconst cache = cacheTarget({ age: 25 }, 5);\n\nconsole.log(cache.age);\n\nsetTimeout(() => {\n  console.log(cache.age);\n}, 6 * 1000);\n//运行结果如下:\n25;\nundefined;\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761253-23201","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br")])],-1),In=t("h3",{id:"计算属性"},[t("a",{class:"header-anchor",href:"#计算属性","aria-hidden":"true"},"#"),e(" 计算属性")],-1),Kn=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"const"),e(" bankAccount "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  balance"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token number"},"10"),t("span",{class:"token punctuation"},","),e("\n  name"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token string"},'"Artiely"'),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token keyword"},"get"),e(),t("span",{class:"token function"},"dollars"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    console"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"计算美元"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("balance "),t("span",{class:"token operator"},"*"),e(),t("span",{class:"token number"},"0.1547"),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token keyword"},"let"),e(" cache "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  currentBalance"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token keyword"},"null"),t("span",{class:"token punctuation"},","),e("\n  currentValue"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token keyword"},"null"),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token keyword"},"const"),e(" handler "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token function-variable function"},"get"),t("span",{class:"token operator"},":"),e(),t("span",{class:"token keyword"},"function"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("obj"),t("span",{class:"token punctuation"},","),e(" prop")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),e("prop "),t("span",{class:"token operator"},"==="),e(),t("span",{class:"token string"},'"dollars"'),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"let"),e(" value "),t("span",{class:"token operator"},"="),e("\n        cache"),t("span",{class:"token punctuation"},"."),e("currentBalance "),t("span",{class:"token operator"},"!=="),e(" obj"),t("span",{class:"token punctuation"},"."),e("balance "),t("span",{class:"token operator"},"?"),e(" obj"),t("span",{class:"token punctuation"},"["),e("prop"),t("span",{class:"token punctuation"},"]"),e(),t("span",{class:"token operator"},":"),e(" cache"),t("span",{class:"token punctuation"},"."),e("currentValue"),t("span",{class:"token punctuation"},";"),e("\n\n      cache"),t("span",{class:"token punctuation"},"."),e("currentValue "),t("span",{class:"token operator"},"="),e(" value"),t("span",{class:"token punctuation"},";"),e("\n      cache"),t("span",{class:"token punctuation"},"."),e("currentBalance "),t("span",{class:"token operator"},"="),e(" obj"),t("span",{class:"token punctuation"},"."),e("balance"),t("span",{class:"token punctuation"},";"),e("\n\n      "),t("span",{class:"token keyword"},"return"),e(" value"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n\n    "),t("span",{class:"token keyword"},"return"),e(" obj"),t("span",{class:"token punctuation"},"["),e("prop"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},";"),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n"),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token keyword"},"const"),e(" wrappedBankAcount "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Proxy"),t("span",{class:"token punctuation"},"("),e("bankAccount"),t("span",{class:"token punctuation"},","),e(" handler"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\nconsole"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("wrappedBankAcount"),t("span",{class:"token punctuation"},"."),e("dollars"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\nconsole"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("wrappedBankAcount"),t("span",{class:"token punctuation"},"."),e("dollars"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\nconsole"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("wrappedBankAcount"),t("span",{class:"token punctuation"},"."),e("dollars"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\nconsole"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"log"),t("span",{class:"token punctuation"},"("),e("wrappedBankAcount"),t("span",{class:"token punctuation"},"."),e("dollars"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token comment"},"// OUTPUT:"),e("\n"),t("span",{class:"token comment"},"// 计算美元"),e("\n"),t("span",{class:"token comment"},"// 34.3008459"),e("\n"),t("span",{class:"token comment"},"// 34.3008459"),e("\n"),t("span",{class:"token comment"},"// 34.3008459"),e("\n"),t("span",{class:"token comment"},"// 34.3008459"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558761254-36093"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const bankAccount = {\n  balance: 10,\n  name: "Artiely",\n  get dollars() {\n    console.log("计算美元");\n    return this.balance * 0.1547\n  },\n};\n\nlet cache = {\n  currentBalance: null,\n  currentValue: null,\n};\n\nconst handler = {\n  get: function(obj, prop) {\n    if (prop === "dollars") {\n      let value =\n        cache.currentBalance !== obj.balance ? obj[prop] : cache.currentValue;\n\n      cache.currentValue = value;\n      cache.currentBalance = obj.balance;\n\n      return value;\n    }\n\n    return obj[prop];\n  },\n};\n\nconst wrappedBankAcount = new Proxy(bankAccount, handler);\n\nconsole.log(wrappedBankAcount.dollars);\nconsole.log(wrappedBankAcount.dollars);\nconsole.log(wrappedBankAcount.dollars);\nconsole.log(wrappedBankAcount.dollars);\n\n// OUTPUT:\n// 计算美元\n// 34.3008459\n// 34.3008459\n// 34.3008459\n// 34.3008459\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558761254-36093","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br"),t("span",{class:"line-number"},"32"),t("br"),t("span",{class:"line-number"},"33"),t("br"),t("span",{class:"line-number"},"34"),t("br"),t("span",{class:"line-number"},"35"),t("br"),t("span",{class:"line-number"},"36"),t("br"),t("span",{class:"line-number"},"37"),t("br"),t("span",{class:"line-number"},"38"),t("br"),t("span",{class:"line-number"},"39"),t("br"),t("span",{class:"line-number"},"40"),t("br"),t("span",{class:"line-number"},"41"),t("br"),t("span",{class:"line-number"},"42"),t("br"),t("span",{class:"line-number"},"43"),t("br")])],-1);c.render=function(a,t,e,o,c,Nn){return n(),s("div",null,[p,l,u,i,r,k,d,m,b,y,f,h,g,w,v,C,x,j,T,P,E,$,A,S,I,K,N,R,B,D,F,O,_,G,U,q,M,J,L,X,W,V,H,z,Z,Q,Y,nn,sn,an,tn,en,on,cn,pn,ln,un,rn,kn,dn,mn,bn,yn,fn,hn,gn,wn,vn,Cn,xn,jn,Tn,Pn,En,$n,An,Sn,In,Kn])};export default c;export{o as __pageData};
