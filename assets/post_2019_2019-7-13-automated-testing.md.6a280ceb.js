import{o as n,c as t,f as s,a,x as e}from"./app.b304d650.js";const o='{"title":"自动化测试","description":"","frontmatter":{"title":"自动化测试","tag":["mocha","jest","AVA","karma","nightmare"],"author":"Artiely","date":"2019-7-13","cover":"https://gitee.com/artiely/Figure-bed/raw/master/images/20200315175943.png","base64":"00a1d8"},"headers":[{"level":2,"title":"介绍","slug":"介绍"},{"level":2,"title":"前端自动化测试","slug":"前端自动化测试"},{"level":3,"title":"测试的分类","slug":"测试的分类"},{"level":3,"title":"测试工具对比","slug":"测试工具对比"},{"level":3,"title":"最佳实践","slug":"最佳实践"},{"level":2,"title":"喜欢简单，选择Mocha","slug":"喜欢简单选择mocha"},{"level":3,"title":"安装","slug":"安装"},{"level":3,"title":"关于断言","slug":"关于断言"},{"level":3,"title":"测试案例","slug":"测试案例"},{"level":3,"title":"Mocha测试命令","slug":"mocha测试命令"},{"level":3,"title":"ES6语法支持","slug":"es6语法支持"},{"level":3,"title":"更多用法","slug":"更多用法"},{"level":3,"title":"示例项目","slug":"示例项目"},{"level":2,"title":"开箱即用Jest","slug":"开箱即用jest"},{"level":3,"title":"安装","slug":"安装-1"},{"level":3,"title":"举个例子","slug":"举个例子"},{"level":3,"title":"Mock与Spy","slug":"mock与spy"},{"level":3,"title":"CLI命令","slug":"cli命令"},{"level":3,"title":"Jest在React、Vue项目中的应用","slug":"jest在react-vue项目中的应用"},{"level":2,"title":"简约之美AVA","slug":"简约之美ava"},{"level":3,"title":"AVA特点","slug":"ava特点"},{"level":3,"title":"安装&开始","slug":"安装开始"},{"level":3,"title":"第一个ava测试例子","slug":"第一个ava测试例子"},{"level":3,"title":"CLI命令","slug":"cli命令-1"},{"level":3,"title":"其他ava设置相关","slug":"其他ava设置相关"},{"level":2,"title":"测试环境&帮手Karma","slug":"测试环境帮手karma"},{"level":3,"title":"工作原理简介","slug":"工作原理简介"},{"level":3,"title":"安装Karma","slug":"安装karma"},{"level":3,"title":"配置Karma","slug":"配置karma"},{"level":3,"title":"karma示例","slug":"karma示例"},{"level":2,"title":"UI测试利器Nightmare","slug":"ui测试利器nightmare"},{"level":3,"title":"安装与起步","slug":"安装与起步"},{"level":3,"title":"nightmare配合mocha测试","slug":"nightmare配合mocha测试"},{"level":3,"title":"API介绍","slug":"api介绍"},{"level":2,"title":"补充学习","slug":"补充学习"},{"level":3,"title":"补充资料","slug":"补充资料"},{"level":3,"title":"ava框架的配置文件","slug":"ava框架的配置文件"},{"level":2,"title":"参考资料","slug":"参考资料"}],"relativePath":"post/2019/2019-7-13-automated-testing.md","lastUpdated":1629110829855}',c={},l=s('<h1 id="自动化测试"><a class="header-anchor" href="#自动化测试" aria-hidden="true">#</a> 自动化测试</h1><h2 id="介绍"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h2><p>在前端界，浏览器兼容性是让工程师们头疼的问题，对于经验丰富的人来说，很清楚浏览器有哪些坑，但是对于大部分程序员，最可怕的是代码明明在这个浏览器运行得很好，但是到了另一个浏览器中就不能正常运行了。对于这部分的程序员，保障代码能正常运行的方法便是能尽早发现问题，然后将其解决。</p><p><strong>为什么需要自动化测试？</strong></p><p>项目经过不断的开发，最终肯定会趋于稳定，在<strong>适当的时机下</strong>引入自动化测试能及早发现问题，<strong>保证产品的质量</strong>。</p><p>测试作为完整的开发流程中最后的一环，是保证产品质量重要的一环。而前端测试一般在产品开发流程中属于偏后的环节，在整个开发架构中属于较高层次，前端测试更加偏向于GUI的特性，因此前端的测试难度很大。</p><p>测试的目的：</p><ul><li>有利于写出高质量的代码，尽早发现问题</li><li>有利于代码的扩展</li><li>有利于代码的维护</li></ul><p><strong>学习路径：</strong></p><ul><li>学习基础的概念，清晰测试不同的应用场景</li><li>学习不同的前端测试工具，了解如何进行选择</li><li>在项目中进行实践</li></ul><p><strong>主要内容：</strong></p><ul><li>介绍测试框架的分类</li><li>单元测试工具介绍：Mocha，Jest，AVA，Karma</li><li>E2E测试工具介绍：Nightmare</li></ul><p><strong>准备：</strong></p><ul><li>IDE vscode，node LTS</li><li>包管理工具：yarn, cnpm</li></ul><h2 id="前端自动化测试"><a class="header-anchor" href="#前端自动化测试" aria-hidden="true">#</a> 前端自动化测试</h2><p>测试是一个庞大的主题，包括各种分类的测试，诸如黑盒测试/白盒测试、单元测试/集成测试/端到端测试等。通常程序员在测试自己的代码的时候用得最多的便是单元测试，但是因为测试也是需要代价，很多人是不喜欢写测试的，甚至是一点都不写。</p><p>那么是什么原因让大家不愿意写呢？</p><ol><li>不熟悉</li><li>浪费时间</li><li>知识不成体系</li><li>团队氛围</li><li>缺少实践</li></ol><p>我们要从基础的东西学起，打消对测试的恐惧。</p><h3 id="测试的分类"><a class="header-anchor" href="#测试的分类" aria-hidden="true">#</a> 测试的分类</h3><p>在多浏览器的自动化测试，我们多半是进行端到端的测试工作，一小部分是大粒度的单元测试。端到端测试测试模拟用户的行为。在 Web 应用程序中，他们会启动服务器，打开浏览器，模拟用户的行为进行点击、输入、提交等动作，断言浏览器中发生了特定的事情或者是得到了期待的结果，从而让我们相信功能可以正常的运行。</p><p>而单元测试根据代码单元的公共 API 运行它们。这些测试需要创建一个类的实例，使用特定的输入调用它的方法，断言被调用的方法达到了预期的效果。在下文中我们会看到这两种测试的实践，当然有时候区分度并不大，可能无法明显地区分哪些是端对端测试哪些是单元测试，有时候他们是混合起来的，不过只要记住我们的目标是保证功能可以正常运行救足够了。</p><p>按照软件工程自底而上的概念，前端测试一般分为单元测试（Unit Testing ）、集成测试（Integration Testing）和端到端测试（E2E Testing）。从下面的图可以看出，从底向上测试的复杂度将不断提高，另一方面测试的收益反而不断降低的。</p><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105717.png" alt="img"></p><blockquote><p>关于软件测试分类，可见<a href="#%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E7%9A%84%E5%88%86%E7%B1%BB">软件测试的分类</a></p></blockquote><h3 id="测试工具对比"><a class="header-anchor" href="#测试工具对比" aria-hidden="true">#</a> 测试工具对比</h3><p>在进行项目实践前，很重要的一项工作是选择合适的技术栈。好比在前端开发时应该选择 React，Vue 还是 Angular 作为框架一样，前端的测试工作也需要选择一套技术栈。很多时候大家在制定技术栈时容易走偏，在选择技术框架时不是选择最合适的框架，而是选择最热门的框架。当然一定程度上热门的框架能反应其受欢迎程度，可能是因为其出众的优点，如较高的开发效率、高效的渲染特性或者是活跃的社区。在前端开发中，很容易有这样的感受，就是只要半个月没有关注业界的最新动态，就感觉恍若隔世，新的解决方案层出不穷，让人喘不过气。</p><p>经过几年的前端洗礼之后，就已经过了慌乱的年纪，再也不会盲目地追寻新技术，而转向关注技术背后解决的痛点，原理等。</p><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105718.png" alt="img"></p><h4 id="如何选择测试框架"><a class="header-anchor" href="#如何选择测试框架" aria-hidden="true">#</a> 如何选择测试框架</h4><p>测试框架基本上都做了一件事儿：</p><ul><li>描述你要测试的东西</li><li>对其进行测试</li><li>判断是否符合预期</li></ul><p>选择框架会考虑下面的点：</p><ul><li><p>测试框架是否有简明的语法与文档。</p><p>Mocha、Jasmine、Jest、AVA、Karma、Nightmare</p></li><li><p>断言(Assertions)：用于判断结果是否符合预期。有些框架需要单独的断言库。</p><p>Should.js、chai、expect.js等等，断言库提供了很多语义化的方法来对值做各种各样的判断。当然也可以不用断言库，Node.js中也可以直接使用原生assert库。</p></li><li><p>适合 TDD / BDD：是否适合 测试驱动型 / 行为驱动型 的测试风格。</p><blockquote><p>BDD(Bebavior Driven Developement，行为驱动测试)和TDD(Testing Driven Developement，测试驱动开发)</p></blockquote><p>BDD和TDD均有各自的适用场景，BDD一般更偏向于系统功能和业务逻辑的自动化测试设计，而TDD在快速开发并测试功能模块的过程中则更加高效，以快速完成开发为目的。下面我们看下BDD和TDD具体的特点：</p><p>BDD的特点：</p><ul><li>从业务逻辑的角度定义具体的输入与预期输出，以及可衡量的目标；</li><li>尽可能覆盖所有的测试用例情况；</li><li>描述一系列可执行的行为，根据业务的分析来定义预期输出。例如，expect, should, assert；</li><li>设定关键的测试通过节点输出提示，便于测试人员理解；</li><li>最大程度的交付出符合用户期望的产品，避免输出不一致带来的问题。</li></ul><p>TDD的特点：</p><ul><li>需求分析，快速编写对应的输入输出测试脚本；</li><li><strong>仅在自动测试失败时才编写新代码</strong>。</li><li>重构去除不必要的依赖关系，然后重复测试，最终让程序符合所有要求。</li></ul></li><li><p>异步测试：有些框架对异步测试支持良好。</p></li><li><p>使用的语言：大部分 js 测试框架使用 js。</p></li><li><p>用于特定目的：每个框架可能会擅长处理不同的问题。</p><p>是要测试单个功能、单个组件、还是集成化测试？</p><p>是要测试GUI逻辑、交互？</p><p>是要测试非功能性指标？兼容性？</p></li><li><p>社区是否活跃。</p></li></ul><h4 id="测试工具的类型"><a class="header-anchor" href="#测试工具的类型" aria-hidden="true">#</a> 测试工具的类型</h4><p>测试工具可分为以下功能。有些只为我们提供了一种功能，有些功能为我们提供了一种组合。</p><p>为了实现最灵活的集合功能，通常使用多种工具的组合。</p><ul><li><p>提供UI界面或者CLI工具：（<a href="https://karma-runner.github.io/" target="_blank" rel="noopener noreferrer">Karma</a>，<a href="http://jasmine.github.io/" target="_blank" rel="noopener noreferrer">Jasmine</a>，<a href="https://facebook.github.io/jest/" target="_blank" rel="noopener noreferrer">Jest</a>，<a href="https://github.com/DevExpress/testcafe" target="_blank" rel="noopener noreferrer">TestCafe</a>，<a href="https://www.cypress.io/" target="_blank" rel="noopener noreferrer">Cypress</a>）</p><p><strong>CLI工具</strong>会给出一系列测试，以及运行这些测试所需的各种配置和脚手架（运行什么浏览器，使用什么babel插件，如何格式化输出等）</p></li><li><p>提供测试框架（形成文件目录）：(<a href="https://mochajs.org/" target="_blank" rel="noopener noreferrer">Mocha</a>, <a href="http://jasmine.github.io/" target="_blank" rel="noopener noreferrer">Jasmine</a>, <a href="https://facebook.github.io/jest/" target="_blank" rel="noopener noreferrer">Jest</a>, <a href="https://github.com/cucumber/cucumber-js" target="_blank" rel="noopener noreferrer">Cucumber</a>, <a href="https://github.com/DevExpress/testcafe" target="_blank" rel="noopener noreferrer">TestCafe</a>, <a href="https://www.cypress.io/" target="_blank" rel="noopener noreferrer">Cypress</a>)</p></li><li><p>提供断言：（<a href="http://chaijs.com/" target="_blank" rel="noopener noreferrer">Chai</a>，<a href="http://jasmine.github.io/" target="_blank" rel="noopener noreferrer">Jasmine</a>，<a href="https://facebook.github.io/jest/" target="_blank" rel="noopener noreferrer">Jest</a>，<a href="http://unexpected.js.org/" target="_blank" rel="noopener noreferrer">Unexpected</a>，<a href="https://github.com/DevExpress/testcafe" target="_blank" rel="noopener noreferrer">TestCafe</a>，<a href="https://www.cypress.io/" target="_blank" rel="noopener noreferrer">Cypress</a>）</p><p><strong>断言函数</strong>检查测试返回的结果是否符合预期</p></li><li><p>生成，展示测试结果（<a href="https://mochajs.org/" target="_blank" rel="noopener noreferrer">Mocha</a>，<a href="http://jasmine.github.io/" target="_blank" rel="noopener noreferrer">Jasmine</a>，<a href="https://facebook.github.io/jest/" target="_blank" rel="noopener noreferrer">Jest</a>，<a href="https://karma-runner.github.io/" target="_blank" rel="noopener noreferrer">Karma</a>，<a href="https://github.com/DevExpress/testcafe" target="_blank" rel="noopener noreferrer">TestCafe</a>，<a href="https://www.cypress.io/" target="_blank" rel="noopener noreferrer">Cypress</a>）</p></li><li><p>快照测试（<a href="https://facebook.github.io/jest/" target="_blank" rel="noopener noreferrer">Jest</a>，<a href="https://github.com/avajs/ava" target="_blank" rel="noopener noreferrer">Ava</a>）</p><p>快照测试(snapshot testing)，测试 UI 或数据结构是否和之前完全一致，通常 UI 测试不在单元测试中</p></li><li><p>提供仿真（<a href="http://sinonjs.org/" target="_blank" rel="noopener noreferrer">Sinon</a>，<a href="http://jasmine.github.io/" target="_blank" rel="noopener noreferrer">Jasmine</a>，<a href="http://airbnb.io/enzyme/docs/api/" target="_blank" rel="noopener noreferrer">enzyme</a>，<a href="https://facebook.github.io/jest/" target="_blank" rel="noopener noreferrer">Jest</a>，<a href="https://testdouble.com/" target="_blank" rel="noopener noreferrer">testdouble</a>）</p><p>仿真(mocks, spies, and stubs)：获取方法的调用信息，模拟方法，模块，甚至服务器</p></li><li><p>生成测试覆盖率报告 (<a href="https://gotwarlost.github.io/istanbul/" target="_blank" rel="noopener noreferrer">Istanbul</a>, <a href="https://facebook.github.io/jest/" target="_blank" rel="noopener noreferrer">Jest</a>, <a href="http://blanketjs.org/" target="_blank" rel="noopener noreferrer">Blanket</a>)</p></li><li><p>提供类浏览器环境(<a href="http://nightwatchjs.org/" target="_blank" rel="noopener noreferrer">Nightwatch</a>, <a href="http://www.nightmarejs.org/" target="_blank" rel="noopener noreferrer">Nightmare</a>, <a href="http://phantomjs.org/" target="_blank" rel="noopener noreferrer">Phantom</a><strong>,</strong> <a href="https://github.com/GoogleChrome/puppeteer" target="_blank" rel="noopener noreferrer">Puppeteer</a>, <a href="https://github.com/DevExpress/testcafe" target="_blank" rel="noopener noreferrer">TestCafe</a>, <a href="https://www.cypress.io/" target="_blank" rel="noopener noreferrer">Cypress</a>)</p></li><li><p>可视化回归工具(<a href="https://applitools.com/" target="_blank" rel="noopener noreferrer">Applitools</a>, <a href="https://percy.io/" target="_blank" rel="noopener noreferrer">Percy</a>, <a href="http://bbc-news.github.io/wraith/" target="_blank" rel="noopener noreferrer">Wraith</a>, <a href="https://github.com/webdriverio-boneyard/webdrivercss" target="_blank" rel="noopener noreferrer">WebdriverCSS</a>)</p></li></ul><h4 id="单元测试类工具"><a class="header-anchor" href="#单元测试类工具" aria-hidden="true">#</a> 单元测试类工具</h4><p>npm trends: <a href="https://www.npmtrends.com/mocha-vs-jest-vs-ava-vs-jasmine-core" target="_blank" rel="noopener noreferrer">点击链接</a></p><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105719.jpg" alt="image-20190706101634263"></p><p><strong>Karma</strong></p><p>Karma是一个Runner（即运行环境），具体详细的介绍见 <a href="#%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83&amp;%E5%B8%AE%E6%89%8BKarma">后面的章节Karma</a></p><blockquote><p>A test runner is the library or tool that picks up an assembly (or a source code directory) that contains unit tests, and a bunch of settings, and then executes them and writes the test results to the console or log files.<br> there are many runners for different languages. See Nunit and MSTest for C#, or Junit for Java.</p></blockquote><p>karma 设计目标主要有下面四点：</p><blockquote><p>高效<br> 扩展性<br> 运行在真实设备<br> 无缝的使用流程</p></blockquote><p>karma 是一个典型的 C/S 程序，包含 client 和 server ，通讯方式基于 Http ，通常情况下，客户端和服务端基本都运行在开发者本地机器上。</p><p>一个服务端实例对应一个项目，假如想同时运行多个项目，得同时开启多个服务端实例。</p><p>Karma 的<strong>优点</strong>是能通过插件和配置的方式集成大部分的主流的测试框架和前端库，能方便的一次在多浏览器环境执行测试用例，并集成了测试覆盖率生成功能，生成页面形式覆盖率报告并能导出不同形式的覆盖率报告数据。</p><p>它的<strong>缺点</strong>是，对测试页面环境的搭建和资源文件的加载不是常见的形式，最开始搭建环境时会有很多跟预期不一致的情况，配置不直观。</p><p><strong>Jasmine</strong></p><p>Jasmine 带有 assertions(断言)，spies (用来模拟函数的执行环境)和 mocks (mock 工具)，Jasmine 初始化设置简单，同时，如果你需要一些单元功能的时候你仍然可以加一些库进来。</p><p><strong>Mocha</strong></p><p>Mocha 是一个灵活的库，提供给开发者的只有一个基础测试结构。然后，其它功能性的功能如 assertions， spies和mocks，这些功能<strong>需要引用添加其它库</strong>/插件来完成。</p><p><strong>Jest</strong></p><p>被 Facebook 和各种 React 应用推荐和使用，Jest 得到了很好的支持。Jest 也被发现是一个非常快速的测试库在平行测试报告中。</p><p>对于小型项目来说你可能在开始的时候不用过多担心，而性能的提高，对于希望全天持续部署的大型应用 app 来说是非常之好的。</p><p>而开发人员主要是用 Jest 去测试 React 应用，Jest 可以很容易地集成到其它应用程序中充许你使用更独特的特性在其它地方</p><p>快照测试是一个非常好用的工具，去确保你的应用 UI 不会有超出预期的错误，在产品发布替换的期间发生。虽然大部分功能，专门设计都是使用在 React 上。</p><p>Jest 有着很广阔的 API 。</p><p><strong>AVA</strong></p><p>AVA 它的优势是 JavaScript 的异步特性和并发运行测试.</p><p>利用了 JavaScript 的异步特性优势，优化了在部署的时间等待</p><p>保留了简单的 API 为你提供你所需要的功能。</p><p>如果搭配 mocking 来使用它会显得更加友好，但是必须安装一个单独的库。</p><h4 id="e2e测试类工具"><a class="header-anchor" href="#e2e测试类工具" aria-hidden="true">#</a> E2E测试类工具</h4><p>npm trends: <a href="https://www.npmtrends.com/cypress-vs-nightmare-vs-nightwatch-vs-testcafe-vs-webdriverio" target="_blank" rel="noopener noreferrer">点击链接</a></p><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105720.png" alt="image-20190706100636750"></p><h3 id="最佳实践"><a class="header-anchor" href="#最佳实践" aria-hidden="true">#</a> 最佳实践</h3><p>测试有很多好处，但不代表一上来就要写出100%场景覆盖的测试用例。</p><p><strong>最佳的实践：基于投入产出比来做测试</strong></p><p>由于维护测试用例也是一大笔开销（毕竟没有多少测试会专门帮前端写业务测试用例，而前端使用的流程自动化工具更是没有测试参与了）。</p><p>对于像基础组件、基础模型之类的不常变更且复用较多的部分，可以考虑去写测试用例来保证质量。个</p><p>先写少量的测试用例覆盖到80%+的场景，保证覆盖主要使用流程。</p><p>一些极端场景出现的bug可以在迭代中形成测试用例沉淀，场景覆盖也将逐渐趋近100%。</p><p>但对于迭代较快的业务逻辑以及生存时间不长的活动页面之类的就别花时间写测试用例了，维护测试用例的时间大了去了，成本太高。</p><p>大型项目，可以使用Jest快速形成配置并且开始单元测试。</p><p>需要测试快照，则可以选择Jest或者Ava。</p><p>对于配置性要求高，对测试框架性能有要求的可以选择mocha。</p><p>对模拟还原浏览器业务操作有很大的需求的，可以选择nightmare</p><p>配合CI工具完成自动化测试、测试覆盖率、测试结果推送。</p><h2 id="喜欢简单选择mocha"><a class="header-anchor" href="#喜欢简单选择mocha" aria-hidden="true">#</a> 喜欢简单，选择Mocha</h2><p><a href="https://mochajs.org/" target="_blank" rel="noopener noreferrer"><code>Mocha</code></a>（发音&quot;摩卡&quot;）诞生于2011年，是现在最流行的JavaScript测试框架之一，在浏览器和Node环境都可以使用。所谓&quot;测试框架&quot;，就是运行测试的工具。通过它，可以为JavaScript应用添加测试，从而保证代码的质量。</p><h3 id="安装"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h3><p>全局安装Mocha</p>',85),i=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"npm"),e(),a("span",{class:"token function"},"install"),e(" -g mocha\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743706-19343"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm install -g mocha\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743706-19343","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),p=a("p",null,"项目中也安装Mocha",-1),u=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"npm"),e(),a("span",{class:"token function"},"install"),e(" --save-dev mocha\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743706-2516"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm install --save-dev mocha\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743706-2516","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),r=a("p",null,"在package.json中加入下面脚本：",-1),d=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token string"},'"scripts"'),a("span",{class:"token builtin class-name"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token string"},'"test"'),a("span",{class:"token builtin class-name"},":"),e(),a("span",{class:"token string"},'"mocha"'),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743706-38466"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'"scripts": {\n    "test": "mocha"\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743706-38466","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),m=a("p",null,[e("Chai 是一个针对 Node.js 和浏览器的行为驱动测试和测试驱动测试的"),a("strong",null,"断言库"),e("，可与任何 JavaScript 测试框架集成。它是Mocha的好帮手~~")],-1),b=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"npm"),e(),a("span",{class:"token function"},"install"),e(" --save-dev chai\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743706-68530"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm install --save-dev chai\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743706-68530","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),k=a("p",null,"在package.json中加入下面脚本：",-1),y=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token property"},'"scripts"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token property"},'"test"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"mocha"'),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743706-92731"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'"scripts": {\n    "test": "mocha"\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743706-92731","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),h=a("h3",{id:"关于断言"},[a("a",{class:"header-anchor",href:"#关于断言","aria-hidden":"true"},"#"),e(" 关于断言")],-1),f=a("p",null,[a("code",null,"expect"),e("断言的优点是很接近自然语言，下面是一些例子。")],-1),g=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// 相等或不相等"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"4"),e(),a("span",{class:"token operator"},"+"),e(),a("span",{class:"token number"},"5"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"9"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"4"),e(),a("span",{class:"token operator"},"+"),e(),a("span",{class:"token number"},"5"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),e("not"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"10"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("foo"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),e("deep"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e(" bar"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'baz'"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// 布尔值为true"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'everthing'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),e("ok"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token boolean"},"false"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("not"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),e("ok"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// typeof"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'test'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"a"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'string'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e(" foo"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'bar'"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"an"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'object'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("foo"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),e("an"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"instanceof"),a("span",{class:"token punctuation"},"("),e("Foo"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// include"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},","),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"include"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'foobar'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"contain"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'foo'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e(" foo"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'bar'"),a("span",{class:"token punctuation"},","),e(" hello"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'universe'"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("include"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"keys"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'foo'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// empty"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"["),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),e("empty"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"''"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),e("empty"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),e("empty"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// match"),e("\n"),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'foobar'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"match"),a("span",{class:"token punctuation"},"("),a("span",{class:"token regex"},[a("span",{class:"token regex-delimiter"},"/"),a("span",{class:"token regex-source language-regex"},"^foo"),a("span",{class:"token regex-delimiter"},"/")]),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743706-22540"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// 相等或不相等\nexpect(4 + 5).to.be.equal(9);\nexpect(4 + 5).to.be.not.equal(10);\nexpect(foo).to.be.deep.equal({ bar: 'baz' });\n\n// 布尔值为true\nexpect('everthing').to.be.ok;\nexpect(false).to.not.be.ok;\n\n// typeof\nexpect('test').to.be.a('string');\nexpect({ foo: 'bar' }).to.be.an('object');\nexpect(foo).to.be.an.instanceof(Foo);\n\n// include\nexpect([1,2,3]).to.include(2);\nexpect('foobar').to.contain('foo');\nexpect({ foo: 'bar', hello: 'universe' }).to.include.keys('foo');\n\n// empty\nexpect([]).to.be.empty;\nexpect('').to.be.empty;\nexpect({}).to.be.empty;\n\n// match\nexpect('foobar').to.match(/^foo/);\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743706-22540","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br")])],-1),v=a("p",null,"两种使用方式：",-1),C=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// commonjs"),e("\n"),a("span",{class:"token keyword"},"const"),e(" expect "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'chai'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("expect\n\n"),a("span",{class:"token comment"},"// es6"),e("\n"),a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token punctuation"},"{"),e(" expect "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},"'chai'"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743707-87604"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// commonjs\nconst expect = require('chai').expect\n\n// es6\nimport { expect } from 'chai'\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743707-87604","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),w=a("h3",{id:"测试案例"},[a("a",{class:"header-anchor",href:"#测试案例","aria-hidden":"true"},"#"),e(" 测试案例")],-1),j=a("p",null,"其中index.js为我们的被测试代码：",-1),x=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"/**\n * 加法函数\n * @param {第一个数} a \n * @param {第二个数} b \n */"),e("\n"),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token function"},"addNum"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("a"),a("span",{class:"token punctuation"},","),e("b")]),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"return"),e(" a"),a("span",{class:"token operator"},"+"),e("b"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\nmodule"),a("span",{class:"token punctuation"},"."),e("exports"),a("span",{class:"token operator"},"="),e("addNum"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743707-78"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"/**\n * 加法函数\n * @param {第一个数} a \n * @param {第二个数} b \n */\nfunction addNum(a,b){\n    return a+b;\n}\nmodule.exports=addNum;\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743707-78","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1),_=a("p",null,[e("新建测试脚本"),a("code",null,"test/demo.js")],-1),T=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" expect "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'chai'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("expect"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"const"),e(" addNum "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'../src/index'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'测试index.js'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'测试addNum函数'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'两数相加结果为两个数字的和'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token function"},"addNum"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n      "),a("span",{class:"token comment"},"// 以上语法为chai的expect语法，它还有should语法和asset语法。"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n\n"),a("span",{class:"token comment"},"// 等价的意思"),e("\n"),a("span",{class:"token keyword"},"var"),e(" addNum"),a("span",{class:"token operator"},"="),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'../src/index'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'测试index.js'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'测试addNum函数'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'两数相加结果为两个数字的和'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n       "),a("span",{class:"token keyword"},"if"),a("span",{class:"token punctuation"},"("),a("span",{class:"token function"},"addNum"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token operator"},"!=="),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n         "),a("span",{class:"token keyword"},"throw"),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"Error"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"两数相加结果不为两个数字的和"'),a("span",{class:"token punctuation"},")"),e("；\n       "),a("span",{class:"token punctuation"},"}"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743707-13600"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const expect = require('chai').expect;\nconst addNum = require('../src/index')\n\ndescribe('测试index.js', function() {\n  describe('测试addNum函数', function() {\n    it('两数相加结果为两个数字的和', function() {\n      expect(addNum(1,2)).to.be.equal(3);\n      // 以上语法为chai的expect语法，它还有should语法和asset语法。\n    });\n  });\n});\n\n\n// 等价的意思\nvar addNum=require('../src/index')\n\ndescribe('测试index.js', function() {\n  describe('测试addNum函数', function() {\n    it('两数相加结果为两个数字的和', function() {\n       if(addNum(1,2)!==3){\n         throw new Error(\"两数相加结果不为两个数字的和\")；\n       }\n    });\n  });\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743707-13600","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br")])],-1),N=a("h3",{id:"mocha测试命令"},[a("a",{class:"header-anchor",href:"#mocha测试命令","aria-hidden":"true"},"#"),e(" Mocha测试命令")],-1),E=a("p",null,"如果想测试单一的测试js，可以用：",-1),I=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,"mocha test/index.test.js\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743707-70601"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"mocha test/index.test.js\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743707-70601","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),A=a("p",null,"或者多个js",-1),$=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,"mocha test/index.test.js test/add.test.js\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743707-80804"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"mocha test/index.test.js test/add.test.js\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743707-80804","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),B=a("p",null,"当然也可以用通配符测试某个文件夹下所有的js和jsx：",-1),D=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"# node 通配符"),e("\nmocha "),a("span",{class:"token string"},"'test/some/*.@(js|jsx)'"),e("\n\n"),a("span",{class:"token comment"},"# shell 通配符"),e("\nmocha test/unit/*.js\n\nmocha spec/"),a("span",{class:"token punctuation"},"{"),e("my,awesome"),a("span",{class:"token punctuation"},"}"),e(".js\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743707-71477"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# node 通配符\nmocha 'test/some/*.@(js|jsx)'\n\n# shell 通配符\nmocha test/unit/*.js\n\nmocha spec/{my,awesome}.js\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743707-71477","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br")])],-1),P=a("h3",{id:"es6语法支持"},[a("a",{class:"header-anchor",href:"#es6语法支持","aria-hidden":"true"},"#"),e(" ES6语法支持")],-1),S=a("p",null,[e("在上面我们用的并非是ES6的语法，那么让我们把其中的代码都改为ES6的语法。"),a("br"),e(" 其中index.js为：")],-1),F=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"/**\n * 加法函数\n * @param {第一个数} a \n * @param {第二个数} b \n */"),e("\n"),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token function"},"addNum"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("a"),a("span",{class:"token punctuation"},","),e(" b")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"return"),e(" a "),a("span",{class:"token operator"},"+"),e(" b\n"),a("span",{class:"token punctuation"},"}"),e("\n\n"),a("span",{class:"token keyword"},"export"),e(),a("span",{class:"token punctuation"},"{"),e("\n  addNum\n"),a("span",{class:"token punctuation"},"}"),e(" \n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743707-38899"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"/**\n * 加法函数\n * @param {第一个数} a \n * @param {第二个数} b \n */\nfunction addNum(a, b) {\n  return a + b\n}\n\nexport {\n  addNum\n} \n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743707-38899","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br")])],-1),R=a("p",null,"而index.test.js为：",-1),q=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token punctuation"},"{"),e(" expect "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},"'chai'"),e("\n"),a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token punctuation"},"{"),e(" addNum "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},"'../src/index'"),e("\n\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'测试index.js'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'测试addNum函数'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'两个参数相加结果为两个数字的和'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token function"},"addNum"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'两个参数相加结果不为和以外的数'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token function"},"addNum"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),e("not"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"4"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743707-96256"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"import { expect } from 'chai'\nimport { addNum } from '../src/index'\n\ndescribe('测试index.js', function () {\n  describe('测试addNum函数', function () {\n    it('两个参数相加结果为两个数字的和', function () {\n      expect(addNum(1, 2)).to.be.equal(3);\n    })\n    it('两个参数相加结果不为和以外的数', function () {\n      expect(addNum(1, 2)).to.be.not.equal(4);\n    })\n  })\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743707-96256","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br")])],-1),M=a("p",null,"此时直接运行mocha肯定是不行的，我们现需要安装一下babel：",-1),H=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"npm"),e(),a("span",{class:"token function"},"install"),e(" --save-dev @babel/cli @babel/core @babel/node @babel/register @babel/preset-env chai mocha nodemon\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743707-31774"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm install --save-dev @babel/cli @babel/core @babel/node @babel/register @babel/preset-env chai mocha nodemon\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743707-31774","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),O=a("p",null,"然后，在项目目录下面，新建一个.babelrc文件：",-1),J=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"presets"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},'"@babel/preset-env"'),a("span",{class:"token punctuation"},"]"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743707-59936"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "presets": ["@babel/preset-env"]\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743707-59936","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),V=a("p",null,"接着讲package.json中的脚本改为：",-1),K=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token property"},'"scripts"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"test"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"mocha --require @babel/register"'),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743707-86365"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'"scripts": {\n  "test": "mocha --require @babel/register"\n},\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743707-86365","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),G=a("p",null,"命令变得更加简单了",-1),W=a("h3",{id:"更多用法"},[a("a",{class:"header-anchor",href:"#更多用法","aria-hidden":"true"},"#"),e(" 更多用法")],-1),L=a("h4",{id:"超时"},[a("a",{class:"header-anchor",href:"#超时","aria-hidden":"true"},"#"),e(" 超时")],-1),U=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[e("  --timeout, -t, --timeouts  Specify "),a("span",{class:"token builtin class-name"},"test"),e(),a("span",{class:"token function"},"timeout"),e(" threshold "),a("span",{class:"token punctuation"},"("),e("in milliseconds"),a("span",{class:"token punctuation"},")"),e("\n                                                        "),a("span",{class:"token punctuation"},"["),e("number"),a("span",{class:"token punctuation"},"]"),e(),a("span",{class:"token punctuation"},"["),e("default: "),a("span",{class:"token number"},"2000"),a("span",{class:"token punctuation"},"]"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743708-90793"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"  --timeout, -t, --timeouts  Specify test timeout threshold (in milliseconds)\n                                                        [number] [default: 2000]\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743708-90793","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br")])],-1),z=s("<p>官方默认的超时是2000毫秒，即2s。</p><p>有三种方式来修改超时：</p><p><code>--no-timeout</code>参数或者<code>debug</code>模式中，全局禁用了超时；</p><p><code>--timeout</code>后面接时间（毫秒），全局修改了本次执行测试用例的超时时间；</p><p>在测试用例里面，使用<code>this.timeout</code>方法：</p>",5),X=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'should take less than 500ms'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"done"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"timeout"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"500"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token function"},"setTimeout"),a("span",{class:"token punctuation"},"("),e("done"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"300"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743708-2670"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"it('should take less than 500ms', function(done) {\n  this.timeout(500);\n  setTimeout(done, 300);\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743708-2670","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br")])],-1),Y=a("p",null,[e("在"),a("a",{href:"#%E9%92%A9%E5%AD%90%E6%96%B9%E6%B3%95%EF%BC%88%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0%EF%BC%89"},"钩子方法"),e("里面使用：")],-1),Q=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'a suite of tests'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"beforeEach"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"done"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"timeout"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"3000"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// A very long environment setup."),e("\n    "),a("span",{class:"token function"},"setTimeout"),a("span",{class:"token punctuation"},"("),e("done"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"2500"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743708-96442"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"describe('a suite of tests', function() {\n  beforeEach(function(done) {\n    this.timeout(3000); // A very long environment setup.\n    setTimeout(done, 2500);\n  });\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743708-96442","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),Z=a("blockquote",null,[a("p",null,[e("同样，可以使用"),a("code",null,"this.timeout(0)"),e("去禁用超时。")])],-1),nn=a("h4",{id:"钩子方法生命周期函数"},[a("a",{class:"header-anchor",href:"#钩子方法生命周期函数","aria-hidden":"true"},"#"),e(" 钩子方法（生命周期函数）")],-1),tn=a("p",null,"Mocha在describe块之中，提供测试用例的四个钩子：before()、after()、beforeEach()和afterEach()。它们会在指定时间执行。",-1),sn=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'测试index.js'"),a("span",{class:"token punctuation"},","),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"before"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token operator"},"=>"),e("console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"info"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"在本区块的所有测试用例之前执行"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),e("\n\n  "),a("span",{class:"token function"},"after"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token operator"},"=>"),e("console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"info"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"在本区块的所有测试用例之后执行"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),e("\n\n  "),a("span",{class:"token function"},"beforeEach"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token operator"},"=>"),e("console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"info"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"在本区块的每个测试用例之前执行"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),e("\n\n  "),a("span",{class:"token function"},"afterEach"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token operator"},"=>"),e("console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"info"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"在本区块的每个测试用例之后执行"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),e("\n\n  "),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'测试addNum函数'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'两数相加结果为两个数字的和'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n      assert"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),a("span",{class:"token function"},"addNum"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},","),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743708-57005"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'describe(\'测试index.js\',()=> {\n  before(()=>console.info("在本区块的所有测试用例之前执行"))\n\n  after(()=>console.info("在本区块的所有测试用例之后执行"))\n\n  beforeEach(()=>console.info("在本区块的每个测试用例之前执行"))\n\n  afterEach(()=>console.info("在本区块的每个测试用例之后执行"))\n\n  describe(\'测试addNum函数\', ()=> {\n    it(\'两数相加结果为两个数字的和\', ()=> {\n      assert.equal(addNum(1,2),3)\n    })\n  })\n})\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743708-57005","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br")])],-1),an=a("h4",{id:"异步测试"},[a("a",{class:"header-anchor",href:"#异步测试","aria-hidden":"true"},"#"),e(" 异步测试")],-1),en=a("p",null,[e("Mocha本身是支持异步测试的。只需要为"),a("code",null,"describe"),e("回调函数添加一个"),a("code",null,"done"),e("参数， 成功时调用"),a("code",null,"done()"),e("，失败时调用"),a("code",null,"done(err)"),e("。例如：")],-1),on=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"var"),e(" expect "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'chai'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("expect"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'db'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'#get'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"done"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n        db"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"get"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'foo'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("err"),a("span",{class:"token punctuation"},","),e(" foo")]),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n            "),a("span",{class:"token keyword"},"if"),a("span",{class:"token punctuation"},"("),e("err"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token function"},"done"),a("span",{class:"token punctuation"},"("),e("err"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("        \n            "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("foo"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'bar'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n            "),a("span",{class:"token function"},"done"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n        "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743708-37670"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var expect = require('chai').expect;\ndescribe('db', function() {\n    it('#get', function(done) {\n        db.get('foo', function(err, foo){\n            if(err) done(err);        \n            expect(foo).to.equal('bar');\n            done();\n        });\n    });\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743708-37670","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br")])],-1),cn=a("ul",null,[a("li",null,[e("如果未调用"),a("code",null,"done"),e("函数，Mocha会一直等待直到超时。")]),a("li",null,[e("如果未添加"),a("code",null,"done"),e("参数，Mocha会直接返回成功，不会捕获到异步的断言失败。例如：")])],-1),ln=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'#get'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token function"},"setTimeout"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"{"),e("\n        "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"100"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743708-80462"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"it('#get', function(){\n    setTimeout(function(){\n        expect(1).to.equal(2);\n    }, 100);\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743708-80462","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),pn=s('<p>运行上述测试<a href="https://mochajs.org/" target="_blank" rel="noopener noreferrer">Mocha</a>总会提示Passing。</p><blockquote><p>Mocha怎么知道是否要等待异步断言呢？因为JavaScript中的<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer">Function</a>有一个<code>length</code>属性， 通过它可以获得该函数的形参个数。Mocha通过传入回调的<code>length</code>来判断是否需要等待。</p></blockquote><p>或者，<code>done()</code>您可以返回<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer">Promise</a>，而不是使用回调。如果您正在测试的API返回promises而不是回调，可以这样进行使用：</p>',3),un=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"beforeEach"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"return"),e(" db"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"clear"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"then"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"return"),e(" db"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"save"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"["),e("tobi"),a("span",{class:"token punctuation"},","),e(" loki"),a("span",{class:"token punctuation"},","),e(" jane"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'#find()'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'respond with matching records'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"return"),e(" db"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"find"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e("type"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'User'"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("should"),a("span",{class:"token punctuation"},"."),e("eventually"),a("span",{class:"token punctuation"},"."),e("have"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"length"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743708-51644"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"beforeEach(function() {\n  return db.clear().then(function() {\n    return db.save([tobi, loki, jane]);\n  });\n});\n\ndescribe('#find()', function() {\n  it('respond with matching records', function() {\n    return db.find({type: 'User'}).should.eventually.have.length(3);\n  });\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743708-51644","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br")])],-1),rn=a("p",null,[e("同样，可以使用"),a("a",{href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/async_function",target:"_blank",rel:"noopener noreferrer"},"async / await"),e("，您还可以编写如下的异步测试：")],-1),dn=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"beforeEach"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"async"),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"await"),e(" db"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"clear"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token keyword"},"await"),e(" db"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"save"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"["),e("tobi"),a("span",{class:"token punctuation"},","),e(" loki"),a("span",{class:"token punctuation"},","),e(" jane"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'#find()'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'responds with matching records'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"async"),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"const"),e(" users "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"await"),e(" db"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"find"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e("type"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'User'"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    users"),a("span",{class:"token punctuation"},"."),e("should"),a("span",{class:"token punctuation"},"."),e("have"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"length"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743708-80276"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"beforeEach(async function() {\n  await db.clear();\n  await db.save([tobi, loki, jane]);\n});\n\ndescribe('#find()', function() {\n  it('responds with matching records', async function() {\n    const users = await db.find({type: 'User'});\n    users.should.have.length(3);\n  });\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743708-80276","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br")])],-1),mn=a("blockquote",null,[a("p",null,"需要Babel支持~~~")],-1),bn=a("h3",{id:"示例项目"},[a("a",{class:"header-anchor",href:"#示例项目","aria-hidden":"true"},"#"),e(" 示例项目")],-1),kn=a("h4",{id:"创建项目安装依赖"},[a("a",{class:"header-anchor",href:"#创建项目安装依赖","aria-hidden":"true"},"#"),e(" 创建项目&安装依赖")],-1),yn=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"# 初始化一个nodejs项目"),e("\n"),a("span",{class:"token function"},"npm"),e(" init -y\n\n"),a("span",{class:"token comment"},"# 安装依赖"),e("\n"),a("span",{class:"token function"},"npm"),e(),a("span",{class:"token function"},"install"),e(" --save-dev @babel/cli @babel/core @babel/node @babel/register @babel/preset-env chai mocha nodemon\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743708-92936"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 初始化一个nodejs项目\nnpm init -y\n\n# 安装依赖\nnpm install --save-dev @babel/cli @babel/core @babel/node @babel/register @babel/preset-env chai mocha nodemon\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743708-92936","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),hn=a("p",null,"形成package.json",-1),fn=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"name"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"projects"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"version"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"1.0.0"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"description"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'""'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"main"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"index.js"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"scripts"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"keywords"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"author"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'""'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"license"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"ISC"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"devDependencies"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token property"},'"@babel/cli"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^7.5.0"'),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token property"},'"@babel/core"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^7.5.0"'),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token property"},'"@babel/node"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^7.5.0"'),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token property"},'"@babel/preset-env"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^7.5.0"'),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token property"},'"@babel/register"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^7.4.4"'),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token property"},'"chai"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^4.2.0"'),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token property"},'"mocha"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^6.1.4"'),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token property"},'"nodemon"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^1.19.1"'),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-22960"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "name": "projects",\n  "version": "1.0.0",\n  "description": "",\n  "main": "index.js",\n  "scripts": {\n  },\n  "keywords": [],\n  "author": "",\n  "license": "ISC",\n  "devDependencies": {\n    "@babel/cli": "^7.5.0",\n    "@babel/core": "^7.5.0",\n    "@babel/node": "^7.5.0",\n    "@babel/preset-env": "^7.5.0",\n    "@babel/register": "^7.4.4",\n    "chai": "^4.2.0",\n    "mocha": "^6.1.4",\n    "nodemon": "^1.19.1"\n  }\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-22960","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br")])],-1),gn=a("h4",{id:"测试过程"},[a("a",{class:"header-anchor",href:"#测试过程","aria-hidden":"true"},"#"),e(" 测试过程")],-1),vn=a("p",null,[e("新建一个待测试的方法"),a("code",null,"./src/index.js")],-1),Cn=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(),a("span",{class:"token function-variable function"},"sayHello"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token string"},'"Hello world!!!"'),e("\n\nconsole"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token function"},"sayHello"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token comment"},"// ES6语法"),e("\n"),a("span",{class:"token keyword"},"export"),e(),a("span",{class:"token keyword"},"default"),e(" sayHello\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-87740"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const sayHello = () => "Hello world!!!"\n\nconsole.log(sayHello())\n\n// ES6语法\nexport default sayHello\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-87740","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br")])],-1),wn=a("p",null,[e("测试脚本"),a("code",null,"./test/index.spec.js")],-1),jn=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token punctuation"},"{"),e(" expect "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},'"chai"'),e("\n"),a("span",{class:"token keyword"},"import"),e(" sayHello "),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},'"../src/index"'),e("\n\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"index test"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"sayHello function"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"should say Hello guys!"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n\n      "),a("span",{class:"token keyword"},"const"),e(" str "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"sayHello"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n      "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("str"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"Hello guys!"'),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-54435"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'import { expect } from "chai"\nimport sayHello from "../src/index"\n\ndescribe("index test", () => {\n  describe("sayHello function", () => {\n    it("should say Hello guys!", () => {\n\n      const str = sayHello();\n      expect(str).to.equal("Hello guys!")\n    })\n  })\n})\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-54435","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br")])],-1),xn=a("p",null,[a("code",null,"package.json"),e("中的脚本：")],-1),_n=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[e("  "),a("span",{class:"token property"},'"scripts"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token comment"},'// "start": "nodemon ./src/index.js",  // 针对ES5语法'),e("\n    "),a("span",{class:"token property"},'"start:babel"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"nodemon --exec babel-node ./src/index.js"'),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token property"},'"test:watch"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"mocha --require @babel/register --watch"'),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token property"},'"test"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"mocha --require @babel/register"'),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token property"},'"build"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"babel src --out-dir ./dist --source-maps"'),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token property"},'"serve"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"node ./dist/index.js"'),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token property"},'"debug"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"node --inspect-brk ./dist/index.js"'),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-23487"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'  "scripts": {\n    // "start": "nodemon ./src/index.js",  // 针对ES5语法\n    "start:babel": "nodemon --exec babel-node ./src/index.js",\n    "test:watch": "mocha --require @babel/register --watch",\n    "test": "mocha --require @babel/register",\n    "build": "babel src --out-dir ./dist --source-maps",\n    "serve": "node ./dist/index.js",\n    "debug": "node --inspect-brk ./dist/index.js"\n  },\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-23487","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1),Tn=a("p",null,[e("开始测试："),a("code",null,"npm run test")],-1),Nn=a("p",null,"报错了，因为期望的值与实际值不一致。",-1),En=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[e("Hello world"),a("span",{class:"token operator"},"!"),a("span",{class:"token operator"},"!"),a("span",{class:"token operator"},"!"),e("\n\n\n  index "),a("span",{class:"token builtin class-name"},"test"),e("\n    sayHello "),a("span",{class:"token keyword"},"function"),e("\n      "),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},")"),e(" should say Hello guys"),a("span",{class:"token operator"},"!"),e("\n\n\n  "),a("span",{class:"token number"},"0"),e(" passing "),a("span",{class:"token punctuation"},"("),e("9ms"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token number"},"1"),e(" failing\n\n  "),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},")"),e(" index "),a("span",{class:"token builtin class-name"},"test"),e("\n       sayHello "),a("span",{class:"token keyword"},"function"),e("\n         should say Hello guys"),a("span",{class:"token operator"},"!"),e(":\n\n      AssertionError: expected "),a("span",{class:"token string"},"'Hello world!!!'"),e(" to equal "),a("span",{class:"token string"},"'Hello guys!'"),e("\n      + expected - actual\n\n      -Hello world"),a("span",{class:"token operator"},"!"),a("span",{class:"token operator"},"!"),a("span",{class:"token operator"},"!"),e("\n      +Hello guys"),a("span",{class:"token operator"},"!"),e("\n      \n      at Context.equal "),a("span",{class:"token punctuation"},"("),e("test/index.spec.js:9:22"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-74067"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"Hello world!!!\n\n\n  index test\n    sayHello function\n      1) should say Hello guys!\n\n\n  0 passing (9ms)\n  1 failing\n\n  1) index test\n       sayHello function\n         should say Hello guys!:\n\n      AssertionError: expected 'Hello world!!!' to equal 'Hello guys!'\n      + expected - actual\n\n      -Hello world!!!\n      +Hello guys!\n      \n      at Context.equal (test/index.spec.js:9:22)\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-74067","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br")])],-1),In=a("p",null,"修改测试脚本，或者修改index.js文件：",-1),An=a("p",null,[e("修改"),a("code",null,"./test/index.spec.js")],-1),$n=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token punctuation"},"{"),e(" expect "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},'"chai"'),e("\n"),a("span",{class:"token keyword"},"import"),e(" sayHello "),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},'"../src/index"'),e("\n\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"index test"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"sayHello function"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"should say Hello world!!!"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n\n      "),a("span",{class:"token keyword"},"const"),e(" str "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"sayHello"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n      "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("str"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"Hello world!!!"'),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-91885"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'import { expect } from "chai"\nimport sayHello from "../src/index"\n\ndescribe("index test", () => {\n  describe("sayHello function", () => {\n    it("should say Hello world!!!", () => {\n\n      const str = sayHello();\n      expect(str).to.equal("Hello world!!!")\n    })\n  })\n})\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-91885","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br")])],-1),Bn=a("p",null,"再次测试：",-1),Dn=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token operator"},">"),e(" mocha --require @babel/register\n\nHello world"),a("span",{class:"token operator"},"!"),a("span",{class:"token operator"},"!"),a("span",{class:"token operator"},"!"),e("\n\n\n  index "),a("span",{class:"token builtin class-name"},"test"),e("\n    sayHello "),a("span",{class:"token keyword"},"function"),e("\n      ✓ should say Hello world"),a("span",{class:"token operator"},"!"),a("span",{class:"token operator"},"!"),a("span",{class:"token operator"},"!"),e("\n\n\n  "),a("span",{class:"token number"},"1"),e(" passing "),a("span",{class:"token punctuation"},"("),e("6ms"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-27875"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"> mocha --require @babel/register\n\nHello world!!!\n\n\n  index test\n    sayHello function\n      ✓ should say Hello world!!!\n\n\n  1 passing (6ms)\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-27875","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br")])],-1),Pn=a("p",null,[e("使用"),a("code",null,"mochawesome"),e("展示你的测试结果：")],-1),Sn=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"npm"),e(),a("span",{class:"token function"},"install"),e(" --save-dev mochawesome\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-34954"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm install --save-dev mochawesome\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-34954","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Fn=a("p",null,[e("然后在"),a("code",null,"package.json"),e("的"),a("code",null,"scripts"),e("中添加如下内容，")],-1),Rn=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n\t"),a("span",{class:"token property"},'"report"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"mocha --require @babel/register --reporter mochawesome"'),a("span",{class:"token punctuation"},","),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-36441"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n\t"report": "mocha --require @babel/register --reporter mochawesome",\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-36441","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),qn=a("p",null,"使用方式：",-1),Mn=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"npm"),e(" run report\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-66767"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm run report\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-66767","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Hn=s('<p>形成出来的报告在浏览器中打开：</p><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105721.png" alt="image-20190707212821248"></p><p>在Vscode中可以安装Live Server这个插件快速打开：</p><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105722.png" alt="image-20190707212923919"></p><h2 id="开箱即用jest"><a class="header-anchor" href="#开箱即用jest" aria-hidden="true">#</a> 开箱即用Jest</h2><p>Jest是由Facebook发布的开源的、基于<a href="http://jasmine.github.io/" target="_blank" rel="noopener noreferrer">Jasmine</a>的JavaScript单元测试框架。Jest源于Facebook的构想，用于快速、可靠地测试Web聊天应用。它吸引了公司内部的兴趣，Facebook的一名软件工程师Jeff Morrison半年前又重拾这个项目，改善它的性能，并将其开源。Jest的目标是减少开始测试一个项目所要花费的时间和认知负荷，因此它提供了大部分你需要的现成工具：快速的命令行接口、Mock工具集以及它的自动模块Mock系统。此外，如果你在寻找隔离工具例如Mock库，大部分其它工具将让你在测试中（甚至经常在你的主代码中）写一些不尽如人意的样板代码，以使其生效。Jest与Jasmine框架的区别是在后者之上增加了一些层。最值得注意的是，运行测试时，Jest会自动模拟依赖。Jest自动为每个依赖的模块生成Mock，并默认提供这些Mock，这样就可以很容易地隔离模块的依赖。</p><p>Jest支持Babel，我们将很轻松的使用ES6的高级语法</p><p>Jest支持webpack，非常方便的使用它来管理我们的项目</p><p>Jest支持TypeScript，书写测试用例更加严谨</p><ol><li><p>简化API</p><p>Jest既简单又强大，内置支持以下功能：</p><ul><li>灵活的配置：比如，可以用文件名通配符来检测测试文件。</li><li>测试的事前步骤(Setup)和事后步骤(Teardown)，同时也包括测试范围。</li><li>匹配表达式(Matchers)：能使用期望<code>expect</code>句法来验证不同的内容。</li><li>测试异步代码：支持承诺(promise)数据类型和异步等待<code>async</code> / <code>await</code>功能。</li><li>模拟函数：可以修改或监查某个函数的行为。</li><li>手动模拟：测试代码时可以忽略模块的依存关系。</li><li>虚拟计时：帮助控制时间推移。</li></ul></li><li><p>性能与隔离</p><p>Jest文档里写道：</p><p>Jest能运用所有的工作部分，并列运行测试，使性能最大化。终端上的信息经过缓冲，最后与测试结果一起打印出来。沙盒中生成的测试文件，以及自动全局状态在每个测试里都会得到重置，这样就不会出现两个测试冲突的情况。</p><p>Mocha用一个进程运行所有的测试，和它比较起来，Jest则完全不同。要在测试之间模拟出隔离效果，我们必须要引入几个测试辅助函数来妥善管理清除工作。这种做法虽然不怎么理想，但99%的情况都可以用，因为测试是按顺序进行的。</p></li><li><p>沉浸式监控模式</p><p>快速互动式监控模式可以监控到哪些测试文件有过改动，只运行与改动过的文件相关的测试，并且由于优化作用，能迅速放出监控信号。设置起来非常简单，而且还有一些别的选项，可以用文件名或测试名来过滤测试。我们用Mocha时也有监控模式，不过没有那么强大，要运行某个特定的测试文件夹或文件，就不得不自己创造解决方法，而这些功能Jest本身就已经提供了，不用花力气。</p></li><li><p>代码覆盖率&amp;测试报告</p><p>Jest内置有代码覆盖率报告功能，设置起来易如反掌。可以在整个项目范围里收集代码覆盖率信息，包括未经受测试的文件。</p><p>要使完善Circle CI整合，只需要一个自定义报告功能。有了Jest，用<a href="https://github.com/michaelleeallen/jest-junit-reporter" target="_blank" rel="noopener noreferrer">jest-junit-reporter</a>就可以做到，其用法和Mocha几乎相同。</p></li><li><p>快照功能</p><p>快照测试的目的不是要替换现有的单元测试，而是要使之更有价值，让测试更轻松。在某些情况下，某些功能比如React组件功能，有了快照测试意味着无需再做单元测试，但同样这两者不是非此即彼。</p></li></ol><h3 id="安装-1"><a class="header-anchor" href="#安装-1" aria-hidden="true">#</a> 安装</h3><p>新建文件夹然后通过npm 命令安装：</p>',12),On=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"npm"),e(),a("span",{class:"token function"},"install"),e(" --save-dev jest\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-22083"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm install --save-dev jest\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-22083","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Jn=a("p",null,"或者通过yarn来安装：",-1),Vn=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"yarn"),e(),a("span",{class:"token function"},"add"),e(" --dev jest\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-31175"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"yarn add --dev jest\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-31175","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Kn=a("p",null,"然后就可以开始测试了",-1),Gn=a("p",null,[e("也可用"),a("code",null,"npm install -g jest"),e("进行全局安装；并在 package.json 中指定 test 脚本：")],-1),Wn=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"scripts"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token property"},'"test"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"jest"'),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-10609"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "scripts": {\n    "test": "jest"\n  }\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-10609","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),Ln=a("p",null,[e("Jest 的测试脚本名形如"),a("code",null,".test.js"),e("，不论 Jest 是全局运行还是通过"),a("code",null,"npm test"),e("运行，它都会执行当前目录下所有的"),a("code",null,"*.test.js"),e(" 或 "),a("code",null,"*.spec.js"),e(" 文件、完成测试。")],-1),Un=a("p",null,"ES6语法支持：",-1),zn=a("ol",null,[a("li",null,"安装依赖")],-1),Xn=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"yarn"),e(),a("span",{class:"token function"},"add"),e(" --dev babel-jest @babel/core @babel/preset-env\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-37670"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"yarn add --dev babel-jest @babel/core @babel/preset-env\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-37670","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Yn=a("ol",{start:"2"},[a("li",null,[e("配置"),a("code",null,".babelrc")])],-1),Qn=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"presets"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n    "),a("span",{class:"token punctuation"},"["),e("\n      "),a("span",{class:"token string"},'"@babel/preset-env"'),a("span",{class:"token punctuation"},","),e("\n      "),a("span",{class:"token punctuation"},"{"),e("\n        "),a("span",{class:"token property"},'"targets"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n          "),a("span",{class:"token property"},'"node"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"current"'),e("\n        "),a("span",{class:"token punctuation"},"}"),e("\n      "),a("span",{class:"token punctuation"},"}"),e("\n    "),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"]"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743709-29940"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n  "presets": [\n    [\n      "@babel/preset-env",\n      {\n        "targets": {\n          "node": "current"\n        }\n      }\n    ]\n  ]\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743709-29940","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br")])],-1),Zn=s('<p>接下来就可以使用ES6的语法了~~~</p><p>更多高阶的ES6/7/8…语法，可以参见：<a href="https://babeljs.io/" target="_blank" rel="noopener noreferrer">babel官网</a></p><p>关于Typescript的支持，可以参见 ：<a href="https://jestjs.io/docs/en/getting-started#using-typescript" target="_blank" rel="noopener noreferrer">Using Typescript</a></p><h3 id="举个例子"><a class="header-anchor" href="#举个例子" aria-hidden="true">#</a> 举个例子</h3><p>关于test suite与test case：</p><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105723.png" alt="img"></p><p>describe属于 test suite 的描述，而每个 test 或者 it 则描述了每个 test case。</p><p>例如：<code>math.js</code></p>',8),nt=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"export"),e(),a("span",{class:"token keyword"},"const"),e(),a("span",{class:"token function-variable function"},"add"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("a"),a("span",{class:"token punctuation"},","),e(" b")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(" a "),a("span",{class:"token operator"},"+"),e(" b"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token keyword"},"export"),e(),a("span",{class:"token keyword"},"const"),e(),a("span",{class:"token function-variable function"},"multiple"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("a"),a("span",{class:"token punctuation"},","),e(" b")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(" a "),a("span",{class:"token operator"},"*"),e(" b"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743710-87000"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"export const add = (a, b) => a + b;\n\nexport const multiple = (a, b) => a * b;\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743710-87000","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),tt=a("p",null,[e("测试脚本："),a("code",null,"math.test.js")],-1),st=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" math "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'./src/math'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"math"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"let"),e(" a\n  "),a("span",{class:"token keyword"},"let"),e(" b\n\n  "),a("span",{class:"token function"},"beforeEach"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    a "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},";"),e("\n    b "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n  "),a("span",{class:"token function"},"test"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"#should return result as a+b"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token comment"},"// test code"),e("\n    "),a("span",{class:"token keyword"},"const"),e(" result "),a("span",{class:"token operator"},"="),e(" math"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"add"),a("span",{class:"token punctuation"},"("),e("a"),a("span",{class:"token punctuation"},","),e(" b"),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("result"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toEqual"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"5"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n  "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"#should return result as a*b"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token comment"},"//test code"),e("\n    "),a("span",{class:"token keyword"},"const"),e(" result "),a("span",{class:"token operator"},"="),e(" math"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"multiple"),a("span",{class:"token punctuation"},"("),e("a"),a("span",{class:"token punctuation"},","),e(" b"),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("result"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toEqual"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"6"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743710-11687"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const math = require(\'./src/math\')\n\ndescribe("math", () => {\n  let a\n  let b\n\n  beforeEach(function () {\n    a = 2;\n    b = 3;\n  });\n\n  test("#should return result as a+b", () => {\n    // test code\n    const result = math.add(a, b)\n    expect(result).toEqual(5)\n  });\n\n  it("#should return result as a*b", () => {\n    //test code\n    const result = math.multiple(a, b)\n    expect(result).toEqual(6)\n  });\n});\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743710-11687","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br")])],-1),at=a("p",null,"test suite 可以进行嵌套：",-1),et=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"foo"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"bar"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"foo bar"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token comment"},"//test code"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743710-57218"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'describe("foo", () => {\n  describe("bar", () => {\n    it("foo bar", () => {\n      //test code\n    });\n  });\n});\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743710-57218","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br")])],-1),ot=a("p",null,"test case 也可以脱离 test suite 独立运行：",-1),ct=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// hello.js"),e("\nmodule"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"exports"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token string"},"'Hello world'"),e("\n\n"),a("span",{class:"token comment"},"// hello.test.js"),e("\n"),a("span",{class:"token keyword"},"let"),e(" hello "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'hello.js'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token function"},"test"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'should get \"Hello world\"'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token function"},"hello"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toBe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Hello world'"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token comment"},"// 测试成功"),e("\n"),a("span",{class:"token comment"},"// expect(hello()).toBe('Hello') // 测试失败"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743710-31452"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// hello.js\nmodule.exports = () => 'Hello world'\n\n// hello.test.js\nlet hello = require('hello.js')\n\ntest('should get \"Hello world\"', () => {\n    expect(hello()).toBe('Hello world') // 测试成功\n// expect(hello()).toBe('Hello') // 测试失败\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743710-31452","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br")])],-1),lt=s('<h3 id="mock与spy"><a class="header-anchor" href="#mock与spy" aria-hidden="true">#</a> Mock与Spy</h3><p><strong>mock</strong>测试就是在测试过程中，对于某些不容易构造或者不容易获取的对象，用一个虚拟的对象来创建以便测试的测试方法。</p><p>Mock 是单元测试中经常使用的一种技术。单元测试，顾名思义测试的重点是某个具体单元。但是在实际代码中，代码与代码之间，模块与模块之间总是会存在着相互引用。这个时候，剥离出这种单元的依赖，让测试更加独立，使用到的技术就是 Mock。</p><p><strong>为什么要使用Mock函数？</strong></p><p>在项目中，一个模块的方法内常常会去调用另外一个模块的方法。在单元测试中，我们可能并不需要关心内部调用的方法的执行过程和结果，只想知道它是否被正确调用即可，甚至会指定该函数的返回值。此时，使用Mock函数是十分有必要。</p><p>Mock函数提供的以下三种特性，在我们写测试代码时十分有用：</p><ul><li>捕获函数调用情况</li><li>设置函数返回值</li><li>改变函数的内部实现</li></ul><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105724.jpg" alt="img"></p><p>举个例子：</p>',9),it=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// math.js"),e("\n"),a("span",{class:"token keyword"},"export"),e(),a("span",{class:"token keyword"},"const"),e(),a("span",{class:"token function-variable function"},"getFooResult"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// foo logic here"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"export"),e(),a("span",{class:"token keyword"},"const"),e(),a("span",{class:"token function-variable function"},"getBarResult"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// bar logic here"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// caculate.js"),e("\n"),a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token punctuation"},"{"),e(" getFooResult"),a("span",{class:"token punctuation"},","),e(" getBarResult "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},'"./math"'),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token keyword"},"export"),e(),a("span",{class:"token keyword"},"const"),e(),a("span",{class:"token function-variable function"},"getFooBarResult"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token function"},"getFooResult"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"+"),e(),a("span",{class:"token function"},"getBarResult"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743710-37935"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'// math.js\nexport const getFooResult = () => {\n  // foo logic here\n};\nexport const getBarResult = () => {\n  // bar logic here\n};\n\n// caculate.js\nimport { getFooResult, getBarResult } from "./math";\n\nexport const getFooBarResult = () => getFooResult() + getBarResult();\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743710-37935","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br")])],-1),pt=a("p",null,"此时，getFooResult() 和 getBarResult() 就是 getFooBarResult 这个函数的依赖。如果我们关注的点是 getFooBarResult 这个函数，我们就应该把 getFooResult 和 getBarResult Mock 掉，剥离这种依赖。下面是一个使用 Jest 进行 Mock 的例子。",-1),ut=a("p",null,[a("code",null,"jest.fn()"),e("是\b创建Mock函数最简单的方式，如果没有定义函数内部的实现，"),a("code",null,"jest.fn()"),e("会返回"),a("code",null,"undefined"),e("作为返回值。")],-1),rt=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"test"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'测试jest.fn()调用'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"let"),e(" mockFn "),a("span",{class:"token operator"},"="),e(" jest"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"fn"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token keyword"},"let"),e(" result "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"mockFn"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n  "),a("span",{class:"token comment"},"// 断言mockFn的执行后返回undefined"),e("\n  "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("result"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toBeUndefined"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token comment"},"// 断言mockFn被调用"),e("\n  "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("mockFn"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toBeCalled"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token comment"},"// 断言mockFn被调用了一次"),e("\n  "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("mockFn"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toBeCalledTimes"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token comment"},"// 断言mockFn传入的参数为1, 2, 3"),e("\n  "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("mockFn"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toHaveBeenCalledWith"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743710-34311"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"test('测试jest.fn()调用', () => {\n  let mockFn = jest.fn();\n  let result = mockFn(1, 2, 3);\n\n  // 断言mockFn的执行后返回undefined\n  expect(result).toBeUndefined();\n  // 断言mockFn被调用\n  expect(mockFn).toBeCalled();\n  // 断言mockFn被调用了一次\n  expect(mockFn).toBeCalledTimes(1);\n  // 断言mockFn传入的参数为1, 2, 3\n  expect(mockFn).toHaveBeenCalledWith(1, 2, 3);\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743710-34311","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br")])],-1),dt=a("p",null,[a("strong",null,"情景一：设置函数 的返回值")],-1),mt=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// calculate.test.js"),e("\n"),a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token punctuation"},"{"),e(" getFooBarResult "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},'"./calculate"'),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token operator"},"*"),e(),a("span",{class:"token keyword"},"as"),e(" fooBar "),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},"'./math'"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token function"},"test"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'getResult should return result getFooResult() + getBarResult()'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// mock add方法和multiple方法"),e("\n  fooBar"),a("span",{class:"token punctuation"},"."),e("getFooBarResult "),a("span",{class:"token operator"},"="),e(" jest"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"fn"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token number"},"10"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  fooBar"),a("span",{class:"token punctuation"},"."),e("getBarResult "),a("span",{class:"token operator"},"="),e(" jest"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"fn"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token number"},"5"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n  "),a("span",{class:"token keyword"},"const"),e(" result "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"getFooBarResult"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n  "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("result"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toEqual"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"15"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743710-43008"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// calculate.test.js\nimport { getFooBarResult } from \"./calculate\";\nimport * as fooBar from './math';\n\ntest('getResult should return result getFooResult() + getBarResult()', () => {\n  // mock add方法和multiple方法\n  fooBar.getFooBarResult = jest.fn(() => 10);\n  fooBar.getBarResult = jest.fn(() => 5);\n\n  const result = getFooBarResult();\n\n  expect(result).toEqual(15);\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743710-43008","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br")])],-1),bt=a("p",null,"Mock其实就是一种Spies，在Jest中使用spies来“spy”(窥探)一个函数的行为。",-1),kt=a("p",null,[a("a",{href:"https://jestjs.io/docs/en/mock-function-api.html#content",target:"_blank",rel:"noopener noreferrer"},"Jest文档"),e("对于spies的解释:")],-1),yt=a("blockquote",null,[a("p",null,[e("Mock函数也称为“spies”，因为它们让你窥探一些由其他代码间接调用的函数的行为，而不仅仅是测试输出。你可以通过使用 "),a("code",null,"jest.fn()"),e(" 创建一个mock函数。")])],-1),ht=a("p",null,"简单来说，一个spy是另一个内置的能够记录对其调用细节的函数：调用它的次数，使用什么参数。",-1),ft=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// calculate.test.js"),e("\n"),a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token punctuation"},"{"),e(" getFooBarResult "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},'"./calculate"'),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token operator"},"*"),e(),a("span",{class:"token keyword"},"as"),e(" fooBar "),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},"'./math'"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token function"},"test"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'getResult should return result getFooResult() + getBarResult()'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// mock add方法和multiple方法"),e("\n  fooBar"),a("span",{class:"token punctuation"},"."),e("getFooResult "),a("span",{class:"token operator"},"="),e(" jest"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"fn"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token number"},"10"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  fooBar"),a("span",{class:"token punctuation"},"."),e("getBarResult "),a("span",{class:"token operator"},"="),e(" jest"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"fn"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token number"},"5"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n  "),a("span",{class:"token keyword"},"const"),e(" result "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"getFooBarResult"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n  "),a("span",{class:"token comment"},"// 监控getFooResult和getBarResult的调用情况."),e("\n  "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("fooBar"),a("span",{class:"token punctuation"},"."),e("getFooResult"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toHaveBeenCalled"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("fooBar"),a("span",{class:"token punctuation"},"."),e("getBarResult"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toHaveBeenCalled"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743710-93293"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// calculate.test.js\nimport { getFooBarResult } from \"./calculate\";\nimport * as fooBar from './math';\n\ntest('getResult should return result getFooResult() + getBarResult()', () => {\n  // mock add方法和multiple方法\n  fooBar.getFooResult = jest.fn(() => 10);\n  fooBar.getBarResult = jest.fn(() => 5);\n\n  const result = getFooBarResult();\n\n  // 监控getFooResult和getBarResult的调用情况.\n  expect(fooBar.getFooResult).toHaveBeenCalled();\n  expect(fooBar.getBarResult).toHaveBeenCalled();\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743710-93293","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br")])],-1),gt=a("p",null,[a("strong",null,"情景二：捕获函数调用情况")],-1),vt=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// bot method"),e("\n"),a("span",{class:"token keyword"},"const"),e(" bot "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function-variable function"},"sayHello"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token parameter"},"name"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"Hello "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("name"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},"!"),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// test.js"),e("\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"bot"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"should say hello"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"const"),e(" spy "),a("span",{class:"token operator"},"="),e(" jest"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"spyOn"),a("span",{class:"token punctuation"},"("),e("bot"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"sayHello"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n    bot"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"sayHello"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"Michael"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n    "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("spy"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toHaveBeenCalledWith"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"Michael"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n    spy"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"mockRestore"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743711-49655"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'// bot method\nconst bot = {\n  sayHello: name => {\n    console.log(`Hello ${name}!`);\n  }\n};\n\n// test.js\ndescribe("bot", () => {\n  it("should say hello", () => {\n    const spy = jest.spyOn(bot, "sayHello");\n\n    bot.sayHello("Michael");\n\n    expect(spy).toHaveBeenCalledWith("Michael");\n\n    spy.mockRestore();\n  });\n});\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743711-49655","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br")])],-1),Ct=s('<p>我们通过 <code>jest.spyOn</code> 创建了一个监听 <code>bot</code> 对象的 <code>sayHello</code> 方法的 spy。它就像间谍一样监听了所有对 <code>bot#sayHello</code> 方法的调用。由于创建 spy 时，Jest 实际上修改了 <code>bot</code> 对象的 <code>sayHello</code> 属性，所以在断言完成后，我们还要通过 <code>mockRestore</code> 来恢复 <code>bot</code> 对象原本的 <code>sayHello</code>方法。</p><p>Jest的<a href="https://jestjs.io/docs/en/jest-object#jestspyonobject-methodname" target="_blank" rel="noopener noreferrer">spyOn介绍</a></p><p><strong>情景三：修改函数的内容实现</strong></p>',3),wt=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" bot "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function-variable function"},"sayHello"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token parameter"},"name"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"Hello "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("name"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token string"},"!"),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"bot"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"should say hello"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"const"),e(" spy "),a("span",{class:"token operator"},"="),e(" jest"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"spyOn"),a("span",{class:"token punctuation"},"("),e("bot"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"sayHello"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"mockImplementation"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"name"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n      console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token template-string"},[a("span",{class:"token template-punctuation string"},"`"),a("span",{class:"token string"},"Hello mix "),a("span",{class:"token interpolation"},[a("span",{class:"token interpolation-punctuation punctuation"},"${"),e("name"),a("span",{class:"token interpolation-punctuation punctuation"},"}")]),a("span",{class:"token template-punctuation string"},"`")]),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n    bot"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"sayHello"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"Michael"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n    "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("spy"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toHaveBeenCalledWith"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"Michael"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n    spy"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"mockRestore"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743711-15689"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'const bot = {\n  sayHello: name => {\n    console.log(`Hello ${name}!`);\n  }\n};\n\ndescribe("bot", () => {\n  it("should say hello", () => {\n    const spy = jest.spyOn(bot, "sayHello").mockImplementation(name => {\n      console.log(`Hello mix ${name}`)\n    });\n\n    bot.sayHello("Michael");\n\n    expect(spy).toHaveBeenCalledWith("Michael");\n\n    spy.mockRestore();\n  });\n});\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743711-15689","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br")])],-1),jt=a("p",null,"使用spyOn方法，还可以去修改Math.random这样的函数",-1),xt=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[e("jest"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"spyOn"),a("span",{class:"token punctuation"},"("),e("Math"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"random"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"mockImplementation"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token number"},"0.9"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743711-92428"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'jest.spyOn(Math, "random").mockImplementation(() => 0.9);\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743711-92428","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),_t=a("p",null,"举个例子：",-1),Tt=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// getNum.js"),e("\n"),a("span",{class:"token keyword"},"const"),e(" arr "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},","),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},","),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},","),a("span",{class:"token number"},"4"),a("span",{class:"token punctuation"},","),a("span",{class:"token number"},"5"),a("span",{class:"token punctuation"},","),a("span",{class:"token number"},"6"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(),a("span",{class:"token function-variable function"},"getNum"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token parameter"},"index"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"if"),e(),a("span",{class:"token punctuation"},"("),e("index"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"return"),e(" arr"),a("span",{class:"token punctuation"},"["),e("index "),a("span",{class:"token operator"},"%"),e(),a("span",{class:"token number"},"6"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"else"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"return"),e(" arr"),a("span",{class:"token punctuation"},"["),e("Math"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"floor"),a("span",{class:"token punctuation"},"("),e("Math"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"random"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"*"),e(),a("span",{class:"token number"},"6"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token comment"},"// num.test.js"),e("\n"),a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token punctuation"},"{"),e(" getNum "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},"'../src/getNum'"),e("\n\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"getNum"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"should select numbber based on index if provided"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token function"},"getNum"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toBe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n  "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},'"should select a random number based on Math.random if skuId not available"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"const"),e(" spy "),a("span",{class:"token operator"},"="),e(" jest"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"spyOn"),a("span",{class:"token punctuation"},"("),e("Math"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"random"'),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"mockImplementation"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token number"},"0.9"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n    "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token function"},"getNum"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toBe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"6"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n    "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),e("spy"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"toHaveBeenCalled"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n    spy"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"mockRestore"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743711-17920"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'// getNum.js\nconst arr = [1,2,3,4,5,6];\n\nconst getNum = index => {\n  if (index) {\n    return arr[index % 6];\n  } else {\n    return arr[Math.floor(Math.random() * 6)];\n  }\n};\n\n// num.test.js\nimport { getNum } from \'../src/getNum\'\n\ndescribe("getNum", () => {\n  it("should select numbber based on index if provided", () => {\n    expect(getNum(1)).toBe(2);\n  });\n\n  it("should select a random number based on Math.random if skuId not available", () => {\n    const spy = jest.spyOn(Math, "random").mockImplementation(() => 0.9);\n\n    expect(getNum()).toBe(6);\n    expect(spy).toHaveBeenCalled();\n\n    spy.mockRestore();\n  });\n});\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743711-17920","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br")])],-1),Nt=a("h3",{id:"cli命令"},[a("a",{class:"header-anchor",href:"#cli命令","aria-hidden":"true"},"#"),e(" CLI命令")],-1),Et=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"➜ npx jest --help\nUsage: jest [--config=<pathToConfigFile>] [TestPathPattern]\n\n选项：\n  --help, -h                    显示帮助信息                              [布尔]\n  --version, -v                 Print the version and exit                [布尔]\n  --config, -c                  The path to a jest config file specifying how to\n                                find and execute tests. If no rootDir is set in\n                                the config, the directory containing the config\n                                file is assumed to be the rootDir for the\n                                project.This can also be a JSON encoded value\n                                which Jest will use as configuration.   [字符串]\n  --coverage                    Indicates that test coverage information should\n                                be collected and reported in the output.  [布尔] \n  --timers                      Setting this value to fake allows the use of\n                                fake timers for functions such as setTimeout.\n                                                                        [字符串]\n  --verbose                     Display individual test results with the test\n                                suite hierarchy.                          [布尔]\n  --watch                       Watch files for changes and rerun tests related\n                                to changed files. If you want to re-run all\n                                tests when a file has changed, use the\n                                `--watchAll` option.                      [布尔]\n  --watchAll                    Watch files for changes and rerun all tests. If\n                                you want to re-run only the tests related to the\n                                changed files, use the `--watch` option.  [布尔]\n...\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743711-5169"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"➜ npx jest --help\nUsage: jest [--config=<pathToConfigFile>] [TestPathPattern]\n\n选项：\n  --help, -h                    显示帮助信息                              [布尔]\n  --version, -v                 Print the version and exit                [布尔]\n  --config, -c                  The path to a jest config file specifying how to\n                                find and execute tests. If no rootDir is set in\n                                the config, the directory containing the config\n                                file is assumed to be the rootDir for the\n                                project.This can also be a JSON encoded value\n                                which Jest will use as configuration.   [字符串]\n  --coverage                    Indicates that test coverage information should\n                                be collected and reported in the output.  [布尔] \n  --timers                      Setting this value to fake allows the use of\n                                fake timers for functions such as setTimeout.\n                                                                        [字符串]\n  --verbose                     Display individual test results with the test\n                                suite hierarchy.                          [布尔]\n  --watch                       Watch files for changes and rerun tests related\n                                to changed files. If you want to re-run all\n                                tests when a file has changed, use the\n                                `--watchAll` option.                      [布尔]\n  --watchAll                    Watch files for changes and rerun all tests. If\n                                you want to re-run only the tests related to the\n                                changed files, use the `--watch` option.  [布尔]\n...\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743711-5169","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br")])],-1),It=a("p",null,"常见使用：",-1),At=a("p",null,[a("code",null,"--verbose"),e("显示详细的测试信息，包括测试suite和case：")],-1),$t=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[e("➜ npx jest --verbose\n PASS  test/mock.test.js\n  bot\n    ✓ should say hello "),a("span",{class:"token punctuation"},"("),e("7ms"),a("span",{class:"token punctuation"},")"),e("\n\n  console.log test/mock.test.js:10\n    Hello mix Michael\n\n PASS  test/domain.test.js\n  getImageDomain\n    ✓ should "),a("span",{class:"token keyword"},"select"),e(" domain based on skuId "),a("span",{class:"token keyword"},"if"),e(" provided "),a("span",{class:"token punctuation"},"("),e("1ms"),a("span",{class:"token punctuation"},")"),e("\n    ✓ should "),a("span",{class:"token keyword"},"select"),e(" a random domain based on Math.random "),a("span",{class:"token keyword"},"if"),e(" skuId not available "),a("span",{class:"token punctuation"},"("),e("1ms"),a("span",{class:"token punctuation"},")"),e("\n\n  console.log test/sayhello.test.js:3\n    Hello Michael"),a("span",{class:"token operator"},"!"),e("\n\n PASS  test/sayhello.test.js\n  bot\n    ✓ should say hello "),a("span",{class:"token punctuation"},"("),e("6ms"),a("span",{class:"token punctuation"},")"),e("\n\n PASS  test/num.test.js\n  getNum\n    ✓ should "),a("span",{class:"token keyword"},"select"),e(" numbber based on index "),a("span",{class:"token keyword"},"if"),e(" provided "),a("span",{class:"token punctuation"},"("),e("1ms"),a("span",{class:"token punctuation"},")"),e("\n    ✓ should "),a("span",{class:"token keyword"},"select"),e(" a random number based on Math.random "),a("span",{class:"token keyword"},"if"),e(" skuId not available\n\n PASS  test/math.test.js\n  math\n    ✓ "),a("span",{class:"token comment"},"#should return result as a+b (1ms)"),e("\n    ✓ "),a("span",{class:"token comment"},"#should return result as a*b (4ms)"),e("\n\nTest Suites: "),a("span",{class:"token number"},"5"),e(" passed, "),a("span",{class:"token number"},"5"),e(" total\nTests:       "),a("span",{class:"token number"},"8"),e(" passed, "),a("span",{class:"token number"},"8"),e(" total\nSnapshots:   "),a("span",{class:"token number"},"0"),e(" total\nTime:        "),a("span",{class:"token number"},"1"),e(".075s\nRan all "),a("span",{class:"token builtin class-name"},"test"),e(" suites.\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743712-20816"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"➜ npx jest --verbose\n PASS  test/mock.test.js\n  bot\n    ✓ should say hello (7ms)\n\n  console.log test/mock.test.js:10\n    Hello mix Michael\n\n PASS  test/domain.test.js\n  getImageDomain\n    ✓ should select domain based on skuId if provided (1ms)\n    ✓ should select a random domain based on Math.random if skuId not available (1ms)\n\n  console.log test/sayhello.test.js:3\n    Hello Michael!\n\n PASS  test/sayhello.test.js\n  bot\n    ✓ should say hello (6ms)\n\n PASS  test/num.test.js\n  getNum\n    ✓ should select numbber based on index if provided (1ms)\n    ✓ should select a random number based on Math.random if skuId not available\n\n PASS  test/math.test.js\n  math\n    ✓ #should return result as a+b (1ms)\n    ✓ #should return result as a*b (4ms)\n\nTest Suites: 5 passed, 5 total\nTests:       8 passed, 8 total\nSnapshots:   0 total\nTime:        1.075s\nRan all test suites.\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743712-20816","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br"),a("span",{class:"line-number"},"34"),a("br"),a("span",{class:"line-number"},"35"),a("br")])],-1),Bt=a("p",null,[a("code",null,"--watch"),e("和"),a("code",null,"--watchAll"),e("用来监听测试文件的变化")],-1),Dt=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[e("Ran all "),a("span",{class:"token builtin class-name"},"test"),e(" suites.\n\nWatch Usage\n › Press f to run only failed tests.\n › Press o to only run tests related to changed files.\n › Press p to filter by a filename regex pattern.\n › Press t to filter by a "),a("span",{class:"token builtin class-name"},"test"),e(" name regex pattern.\n › Press q to quit "),a("span",{class:"token function"},"watch"),e(" mode.\n › Press Enter to trigger a "),a("span",{class:"token builtin class-name"},"test"),e(" run.\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743712-80491"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"Ran all test suites.\n\nWatch Usage\n › Press f to run only failed tests.\n › Press o to only run tests related to changed files.\n › Press p to filter by a filename regex pattern.\n › Press t to filter by a test name regex pattern.\n › Press q to quit watch mode.\n › Press Enter to trigger a test run.\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743712-80491","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1),Pt=a("p",null,[a("code",null,"--coverage"),e("用来形成测试覆盖率报告")],-1),St=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[e("-----------"),a("span",{class:"token operator"},"|"),e("----------"),a("span",{class:"token operator"},"|"),e("----------"),a("span",{class:"token operator"},"|"),e("----------"),a("span",{class:"token operator"},"|"),e("----------"),a("span",{class:"token operator"},"|"),e("-------------------"),a("span",{class:"token operator"},"|"),e("\nFile       "),a("span",{class:"token operator"},"|"),e("  % Stmts "),a("span",{class:"token operator"},"|"),e(" % Branch "),a("span",{class:"token operator"},"|"),e("  % Funcs "),a("span",{class:"token operator"},"|"),e("  % Lines "),a("span",{class:"token operator"},"|"),e(" Uncovered Line "),a("span",{class:"token comment"},"#s |"),e("\n-----------"),a("span",{class:"token operator"},"|"),e("----------"),a("span",{class:"token operator"},"|"),e("----------"),a("span",{class:"token operator"},"|"),e("----------"),a("span",{class:"token operator"},"|"),e("----------"),a("span",{class:"token operator"},"|"),e("-------------------"),a("span",{class:"token operator"},"|"),e("\nAll files  "),a("span",{class:"token operator"},"|"),e("      "),a("span",{class:"token number"},"100"),e(),a("span",{class:"token operator"},"|"),e("      "),a("span",{class:"token number"},"100"),e(),a("span",{class:"token operator"},"|"),e("      "),a("span",{class:"token number"},"100"),e(),a("span",{class:"token operator"},"|"),e("      "),a("span",{class:"token number"},"100"),e(),a("span",{class:"token operator"},"|"),e("                   "),a("span",{class:"token operator"},"|"),e("\n getNum.js "),a("span",{class:"token operator"},"|"),e("      "),a("span",{class:"token number"},"100"),e(),a("span",{class:"token operator"},"|"),e("      "),a("span",{class:"token number"},"100"),e(),a("span",{class:"token operator"},"|"),e("      "),a("span",{class:"token number"},"100"),e(),a("span",{class:"token operator"},"|"),e("      "),a("span",{class:"token number"},"100"),e(),a("span",{class:"token operator"},"|"),e("                   "),a("span",{class:"token operator"},"|"),e("\n math.js   "),a("span",{class:"token operator"},"|"),e("      "),a("span",{class:"token number"},"100"),e(),a("span",{class:"token operator"},"|"),e("      "),a("span",{class:"token number"},"100"),e(),a("span",{class:"token operator"},"|"),e("      "),a("span",{class:"token number"},"100"),e(),a("span",{class:"token operator"},"|"),e("      "),a("span",{class:"token number"},"100"),e(),a("span",{class:"token operator"},"|"),e("                   "),a("span",{class:"token operator"},"|"),e("\n-----------"),a("span",{class:"token operator"},"|"),e("----------"),a("span",{class:"token operator"},"|"),e("----------"),a("span",{class:"token operator"},"|"),e("----------"),a("span",{class:"token operator"},"|"),e("----------"),a("span",{class:"token operator"},"|"),e("-------------------"),a("span",{class:"token operator"},"|"),e("\n\nTest Suites: "),a("span",{class:"token number"},"5"),e(" passed, "),a("span",{class:"token number"},"5"),e(" total\nTests:       "),a("span",{class:"token number"},"8"),e(" passed, "),a("span",{class:"token number"},"8"),e(" total\nSnapshots:   "),a("span",{class:"token number"},"0"),e(" total\nTime:        "),a("span",{class:"token number"},"1"),e(".497s\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743712-69396"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"-----------|----------|----------|----------|----------|-------------------|\nFile       |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |\n-----------|----------|----------|----------|----------|-------------------|\nAll files  |      100 |      100 |      100 |      100 |                   |\n getNum.js |      100 |      100 |      100 |      100 |                   |\n math.js   |      100 |      100 |      100 |      100 |                   |\n-----------|----------|----------|----------|----------|-------------------|\n\nTest Suites: 5 passed, 5 total\nTests:       8 passed, 8 total\nSnapshots:   0 total\nTime:        1.497s\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743712-69396","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br")])],-1),Ft=a("h3",{id:"jest在react-vue项目中的应用"},[a("a",{class:"header-anchor",href:"#jest在react-vue项目中的应用","aria-hidden":"true"},"#"),e(" Jest在React、Vue项目中的应用")],-1),Rt=a("p",null,[e("在"),a("code",null,"create-react-app"),e("中的应用：")],-1),qt=a("p",null,"安装对应的依赖：",-1),Mt=a("div",{class:"language-"},[a("pre",null,[a("code",null,"npm install react-test-renderer enzyme enzyme-adapter-react-16 \n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743712-53443"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm install react-test-renderer enzyme enzyme-adapter-react-16 \n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743712-53443","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Ht=s('<p><a href="https://github.com/airbnb/enzyme" target="_blank" rel="noopener noreferrer">Enzyme</a>是一个非常棒的React组件测试测试库。</p><blockquote><p>Enzyme is a JavaScript Testing utility for React that makes it easier to test your React Components&#39; output. You can also manipulate, traverse, and in some ways simulate runtime given the output.</p><p>Enzyme&#39;s API is meant to be intuitive and flexible by mimicking jQuery&#39;s API for DOM manipulation and traversal</p></blockquote><p>需要注意的两点是：</p><ul><li>需要配置Adapter，不同的React的Adapter不同</li></ul><table><thead><tr><th>Enzyme Adapter Package</th><th>React semver compatibility</th></tr></thead><tbody><tr><td><code>enzyme-adapter-react-16</code></td><td><code>^16.4.0-0</code></td></tr><tr><td><code>enzyme-adapter-react-16.3</code></td><td><code>~16.3.0-0</code></td></tr><tr><td><code>enzyme-adapter-react-16.2</code></td><td><code>~16.2</code></td></tr><tr><td><code>enzyme-adapter-react-16.1</code></td><td>`~16.0.0-0</td></tr><tr><td><code>enzyme-adapter-react-15</code></td><td><code>^15.5.0</code></td></tr><tr><td><code>enzyme-adapter-react-15.4</code></td><td><code>15.0.0-0 - 15.4.x</code></td></tr><tr><td><code>enzyme-adapter-react-14</code></td><td><code>^0.14.0</code></td></tr><tr><td><code>enzyme-adapter-react-13</code></td><td><code>^0.13.0</code></td></tr></tbody></table>',5),Ot=a("ul",null,[a("li",null,[a("p",null,[e("需要初始化配置"),a("code",null,"setUpTests.js")]),a("p",null,[e("官方文档在Package.json中设置jest配置，已经过时，Jest框架最新会默认加载文件"),a("code",null,"src/setUpTests.js")])]),a("li",null,[a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token punctuation"},"{"),e(" configure "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},"'enzyme'"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token keyword"},"import"),e(" Adapter "),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},"'enzyme-adapter-react-16'"),e("\n\n"),a("span",{class:"token function"},"configure"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e(" adapter"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"Adapter"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743712-35925"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"import { configure } from 'enzyme';\nimport Adapter from 'enzyme-adapter-react-16'\n\nconfigure({ adapter: new Adapter() })\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743712-35925","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br")])])])],-1),Jt=a("p",null,"在vue工程化项目中：",-1),Vt=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token property"},'"devDependencies"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"@vue/cli-plugin-unit-jest"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^3.9.0"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"@vue/test-utils"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"1.0.0-beta.29"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"babel-core"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"7.0.0-bridge.0"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"babel-eslint"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^10.0.1"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"babel-jest"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^23.6.0"'),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token property"},'"babel-preset-env"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^1.7.0"'),a("span",{class:"token punctuation"},","),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743712-91446"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'"devDependencies": {\n  "@vue/cli-plugin-unit-jest": "^3.9.0",\n  "@vue/test-utils": "1.0.0-beta.29",\n  "babel-core": "7.0.0-bridge.0",\n  "babel-eslint": "^10.0.1",\n  "babel-jest": "^23.6.0",\n  "babel-preset-env": "^1.7.0",\n},\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743712-91446","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br")])],-1),Kt=a("p",null,"添加如上依赖，",-1),Gt=a("p",null,"配置scripts:",-1),Wt=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token string"},'"scripts"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token string"},'"test"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"vue-cli-service test:unit"'),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743712-65988"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'"scripts": {\n  "test": "vue-cli-service test:unit"\n},\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743712-65988","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),Lt=a("p",null,[e("配置"),a("code",null,"jest.config.js")],-1),Ut=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[e("module"),a("span",{class:"token punctuation"},"."),e("exports "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// 处理vue结尾的文件"),e("\n  moduleFileExtensions"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n    "),a("span",{class:"token string"},"'js'"),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token string"},"'jsx'"),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token string"},"'json'"),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token string"},"'vue'"),e("\n  "),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token comment"},"// es6转义"),e("\n  transform"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token string"},"'^.+\\\\.vue$'"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'vue-jest'"),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token string"},"'.+\\\\.(css|styl|less|sass|scss|svg|png|jpg|ttf|woff|woff2)$'"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'jest-transform-stub'"),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token string"},"'^.+\\\\.jsx?$'"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'babel-jest'"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n  transformIgnorePatterns"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n    "),a("span",{class:"token string"},"'/node_modules/'"),e("\n  "),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n  "),a("span",{class:"token comment"},"// cli配置了webpack别名"),e("\n  moduleNameMapper"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token string"},"'^@/(.*)$'"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'<rootDir>/src/$1'"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n  snapshotSerializers"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n    "),a("span",{class:"token string"},"'jest-serializer-vue'"),e("\n  "),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n  testMatch"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n    "),a("span",{class:"token string"},"'**/tests/unit/**/*.spec.(js|jsx|ts|tsx)|**/__tests__/*.(js|jsx|ts|tsx)'"),e("\n  "),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n  testURL"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'http://localhost/'"),a("span",{class:"token punctuation"},","),e("\n  watchPlugins"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n    "),a("span",{class:"token string"},"'jest-watch-typeahead/filename'"),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token string"},"'jest-watch-typeahead/testname'"),e("\n  "),a("span",{class:"token punctuation"},"]"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743712-16879"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"module.exports = {\n  // 处理vue结尾的文件\n  moduleFileExtensions: [\n    'js',\n    'jsx',\n    'json',\n    'vue'\n  ],\n  // es6转义\n  transform: {\n    '^.+\\\\.vue\n</div>: 'vue-jest',\n    '.+\\\\.(css|styl|less|sass|scss|svg|png|jpg|ttf|woff|woff2)\n</div>: 'jest-transform-stub',\n    '^.+\\\\.jsx?\n</div>: 'babel-jest'\n  },\n  transformIgnorePatterns: [\n    '/node_modules/'\n  ],\n  // cli配置了webpack别名\n  moduleNameMapper: {\n    '^@/(.*)\n</div>: '<rootDir>/src/$1'\n  },\n  snapshotSerializers: [\n    'jest-serializer-vue'\n  ],\n  testMatch: [\n    '**/tests/unit/**/*.spec.(js|jsx|ts|tsx)|**/__tests__/*.(js|jsx|ts|tsx)'\n  ],\n  testURL: 'http://localhost/',\n  watchPlugins: [\n    'jest-watch-typeahead/filename',\n    'jest-watch-typeahead/testname'\n  ]\n}\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743712-16879","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br"),a("span",{class:"line-number"},"34"),a("br")])],-1),zt=a("p",null,"写一个测试用例：",-1),Xt=a("div",{class:"language-"},[a("pre",null,[a("code",null,"\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743712-13003"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743712-13003","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Yt=s('<h2 id="简约之美ava"><a class="header-anchor" href="#简约之美ava" aria-hidden="true">#</a> 简约之美AVA</h2><p>简单的说ava是mocha的替代品：</p><ul><li>es6语法支持更好，对aysnc/await有支持</li><li>执行效率更高，使用io并发，就必须保证测试的原子性</li><li>语义上更简单，集众家之长</li></ul><p>虽然 JavaScript 是单线程，但在 Node.js 里由于其异步的特性使得 IO 可以并行。AVA 利用这个优点让你的测试可以并发执行，这对于 IO 繁重的测试特别有用。另外，测试文件可以在不同的进程里并行运行，让每一个测试文件可以获得更好的性能和独立的环境。</p><h3 id="ava特点"><a class="header-anchor" href="#ava特点" aria-hidden="true">#</a> AVA特点</h3><ul><li><p>轻量和高效</p></li><li><p>简单的测试语法</p></li><li><p>并发运行测试</p></li><li><p>强制编写<strong>原子测试</strong></p><p>一旦开始，就一直运行到结束，中间不会切换到另一个测试</p></li><li><p>没有隐藏的全局变量</p></li><li><p>为每个测试文件隔离环境</p></li><li><p><strong>用 ES2015 编写测试</strong></p></li><li><p>支持 Promise</p></li><li><p>支持 Generator</p></li><li><p>支持 Async</p></li><li><p>支持 Observable</p></li><li><p>强化断言信息</p></li><li><p>可选的 TAP 输出显示</p><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105725.png" alt="img"></p></li><li><p>简明的堆栈跟踪</p></li></ul><h3 id="安装开始"><a class="header-anchor" href="#安装开始" aria-hidden="true">#</a> 安装&amp;开始</h3><p>情景一：</p>',8),Qt=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[e("// 创建一个ava项目\n"),a("span",{class:"token function"},"npm"),e(" init ava\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743712-41128"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// 创建一个ava项目\nnpm init ava\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743712-41128","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br")])],-1),Zt=a("p",null,"形成package.json",-1),ns=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n\t"),a("span",{class:"token property"},'"name"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"awesome-package"'),a("span",{class:"token punctuation"},","),e(" \n\t"),a("span",{class:"token property"},'"scripts"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n\t\t"),a("span",{class:"token property"},'"test"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"ava"'),e("\n\t"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n\t"),a("span",{class:"token property"},'"devDependencies"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n\t\t"),a("span",{class:"token property"},'"ava"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"^1.0.0"'),e("\n\t"),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743712-65426"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n\t"name": "awesome-package", \n\t"scripts": {\n\t\t"test": "ava"\n\t},\n\t"devDependencies": {\n\t\t"ava": "^1.0.0"\n\t}\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743712-65426","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1),ts=a("p",null,"情景二：（推荐）",-1),ss=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"npm"),e(" init -y\n\n"),a("span",{class:"token comment"},"# npm & cnpm"),e("\n"),a("span",{class:"token function"},"npm"),e(),a("span",{class:"token function"},"install"),e(" -D ava\n\n"),a("span",{class:"token comment"},"# yarn "),e("\n"),a("span",{class:"token function"},"yarn"),e(),a("span",{class:"token function"},"add"),e(" ava -D\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743713-59876"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm init -y\n\n# npm & cnpm\nnpm install -D ava\n\n# yarn \nyarn add ava -D\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743713-59876","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br")])],-1),as=a("p",null,"测试ava正常安装：",-1),es=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[e("➜ npx ava --version\n"),a("span",{class:"token number"},"2.2"),e(".0\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743713-11174"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"➜ npx ava --version\n2.2.0\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743713-11174","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br")])],-1),os=a("h3",{id:"第一个ava测试例子"},[a("a",{class:"header-anchor",href:"#第一个ava测试例子","aria-hidden":"true"},"#"),e(" 第一个ava测试例子")],-1),cs=a("p",null,"流程：",-1),ls=a("ol",null,[a("li",null,"引用ava的测试API"),a("li",null,"执行测试"),a("li",null,"使用断言")],-1),is=a("p",null,[e("创建"),a("code",null,"test.js"),e("文件")],-1),ps=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"import"),e(" test "),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},"'ava'"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token keyword"},"const"),e(),a("span",{class:"token function-variable function"},"testfn"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},[e("a"),a("span",{class:"token punctuation"},","),e(" b")]),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(" a "),a("span",{class:"token operator"},"+"),e(" b\n\n"),a("span",{class:"token function"},"test"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'hello ava'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"t"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  t"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"pass"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token function"},"test"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'my first test'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"async"),e(),a("span",{class:"token parameter"},"t"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"const"),e(" str "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token string"},"'hello ava!!!!'"),e("\n  t"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"is"),a("span",{class:"token punctuation"},"("),e("str"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'hello ava!!!!'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\n"),a("span",{class:"token function"},"test"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'add method'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"async"),e(),a("span",{class:"token parameter"},"t"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"const"),e(" result "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"testfn"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"4"),a("span",{class:"token punctuation"},")"),e("\n  t"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"is"),a("span",{class:"token punctuation"},"("),e("result"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token number"},"7"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743713-79721"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"import test from 'ava';\n\nconst testfn = (a, b) => a + b\n\ntest('hello ava', t => {\n  t.pass();\n});\n\ntest('my first test', async t => {\n  const str = 'hello ava!!!!'\n  t.is(str, 'hello ava!!!!')\n});\n\ntest('add method', async t => {\n  const result = testfn(3, 4)\n  t.is(result, 7)\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743713-79721","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br")])],-1),us=s("<p>ava自动搜索如下文件结尾的文件：</p><ul><li><code>**/test.js</code></li><li><code>**/test-*.js</code></li><li><code>**/*.spec.js</code></li><li><code>**/*.test.js</code></li><li><code>**/test/**/*.js</code></li><li><code>**/tests/**/*.js</code></li><li><code>**/__tests__/**/*.js</code></li></ul><p>ava中的断言：</p>",3),rs=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"pass"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"fail"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"assert"),a("span",{class:"token punctuation"},"("),e("value"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"truthy"),a("span",{class:"token punctuation"},"("),e("value"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"falsy"),a("span",{class:"token punctuation"},"("),e("value"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},"("),e("value"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token boolean"},"false"),a("span",{class:"token punctuation"},"("),e("value"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"is"),a("span",{class:"token punctuation"},"("),e("value"),a("span",{class:"token punctuation"},","),e(" expected"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"not"),a("span",{class:"token punctuation"},"("),e("value"),a("span",{class:"token punctuation"},","),e(" expected"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"deepEqual"),a("span",{class:"token punctuation"},"("),e("value"),a("span",{class:"token punctuation"},","),e(" expected"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"notDeepEqual"),a("span",{class:"token punctuation"},"("),e("value"),a("span",{class:"token punctuation"},","),e(" expected"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"deepEqual"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("。\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"throws"),a("span",{class:"token punctuation"},"("),e("fn"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("expected"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"throwsAsync"),a("span",{class:"token punctuation"},"("),e("thrower"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("expected"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"notThrows"),a("span",{class:"token punctuation"},"("),e("fn"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"notThrowsAsync"),a("span",{class:"token punctuation"},"("),e("nonThrower"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"regex"),a("span",{class:"token punctuation"},"("),e("contents"),a("span",{class:"token punctuation"},","),e(" regex"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"notRegex"),a("span",{class:"token punctuation"},"("),e("contents"),a("span",{class:"token punctuation"},","),e(" regex"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"snapshot"),a("span",{class:"token punctuation"},"("),e("expected"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"snapshot"),a("span",{class:"token punctuation"},"("),e("expected"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("options"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"["),e("message"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743713-92030"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":".pass([message])\n.fail([message])\n.assert(value, [message])\n.truthy(value, [message])\n.falsy(value, [message])\n.true(value, [message])\n.false(value, [message])\n.is(value, expected, [message])\n.not(value, expected, [message])\n.deepEqual(value, expected, [message])\n.notDeepEqual(value, expected, [message])\n.deepEqual()。\n.throws(fn, [expected, [message]])\n.throwsAsync(thrower, [expected, [message]])\n.notThrows(fn, [message])\n.notThrowsAsync(nonThrower, [message])\n.regex(contents, regex, [message])\n.notRegex(contents, regex, [message])\n.snapshot(expected, [message])\n.snapshot(expected, [options], [message])\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743713-92030","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br")])],-1),ds=a("h3",{id:"cli命令-1"},[a("a",{class:"header-anchor",href:"#cli命令-1","aria-hidden":"true"},"#"),e(" CLI命令")],-1),ms=a("p",null,[e("使用"),a("code",null,"--help"),e("命令去查看ava支持的cli参数")],-1),bs=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[e("➜ npx ava --help\n\n  Testing can be a drag. AVA helps you get it done.\n\n  Usage\n    ava "),a("span",{class:"token punctuation"},"["),a("span",{class:"token operator"},"<"),e("file"),a("span",{class:"token operator"},">"),e(),a("span",{class:"token punctuation"},".."),e("."),a("span",{class:"token punctuation"},"]"),e("\n\n  Options\n    --watch, -w             Re-run tests when tests and "),a("span",{class:"token builtin class-name"},"source"),e(" files change\n    --match, -m             Only run tests with matching title "),a("span",{class:"token punctuation"},"("),e("Can be repeated"),a("span",{class:"token punctuation"},")"),e("\n    --update-snapshots, -u  Update snapshots\n    --fail-fast             Stop after first "),a("span",{class:"token builtin class-name"},"test"),e(" failure\n    --timeout, -T           Set global "),a("span",{class:"token function"},"timeout"),e(),a("span",{class:"token punctuation"},"("),e("milliseconds or human-readable, e.g. 10s, 2m"),a("span",{class:"token punctuation"},")"),e("\n    --serial, -s            Run tests serially\n    --concurrency, -c       Max number of "),a("span",{class:"token builtin class-name"},"test"),e(" files running at the same "),a("span",{class:"token function"},"time"),e(),a("span",{class:"token punctuation"},"("),e("Default: CPU cores"),a("span",{class:"token punctuation"},")"),e("\n    --verbose, -v           Enable verbose output\n    --tap, -t               Generate TAP output\n    --color                 Force color output\n    --no-color              Disable color output\n    --reset-cache           Reset AVA's compilation cache and "),a("span",{class:"token builtin class-name"},"exit"),e("\n    --config                JavaScript "),a("span",{class:"token function"},"file"),e(),a("span",{class:"token keyword"},"for"),e(" AVA to "),a("span",{class:"token builtin class-name"},"read"),e(" its config from, instead of using package.json\n                            or ava.config.js files\n\n  Examples\n    ava\n    ava test.js test2.js\n    ava test-*.js\n    ava "),a("span",{class:"token builtin class-name"},"test"),e("\n\n  The above relies on your shell expanding the glob patterns.\n  Without arguments, AVA uses the following patterns:\n    **/test.js **/test-*.js **/*.spec.js **/*.test.js **/test/**/*.js **/tests/**/*.js **/__tests__/**/*.js\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743713-85072"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"➜ npx ava --help\n\n  Testing can be a drag. AVA helps you get it done.\n\n  Usage\n    ava [<file> ...]\n\n  Options\n    --watch, -w             Re-run tests when tests and source files change\n    --match, -m             Only run tests with matching title (Can be repeated)\n    --update-snapshots, -u  Update snapshots\n    --fail-fast             Stop after first test failure\n    --timeout, -T           Set global timeout (milliseconds or human-readable, e.g. 10s, 2m)\n    --serial, -s            Run tests serially\n    --concurrency, -c       Max number of test files running at the same time (Default: CPU cores)\n    --verbose, -v           Enable verbose output\n    --tap, -t               Generate TAP output\n    --color                 Force color output\n    --no-color              Disable color output\n    --reset-cache           Reset AVA's compilation cache and exit\n    --config                JavaScript file for AVA to read its config from, instead of using package.json\n                            or ava.config.js files\n\n  Examples\n    ava\n    ava test.js test2.js\n    ava test-*.js\n    ava test\n\n  The above relies on your shell expanding the glob patterns.\n  Without arguments, AVA uses the following patterns:\n    **/test.js **/test-*.js **/*.spec.js **/*.test.js **/test/**/*.js **/tests/**/*.js **/__tests__/**/*.js\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743713-85072","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br")])],-1),ks=a("h4",{id:"文件匹配"},[a("a",{class:"header-anchor",href:"#文件匹配","aria-hidden":"true"},"#"),e(" 文件匹配")],-1),ys=a("p",null,[e("使用"),a("code",null,"match"),e("指令，匹配对应需要测试的文件：")],-1),hs=a("p",null,[e("匹配标题以"),a("code",null,"foo"),e("：结尾")],-1),fs=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"npx ava --match ='* foo'\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743713-13157"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npx ava --match ='* foo'\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743713-13157","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),gs=a("p",null,[e("匹配标题以"),a("code",null,"foo"),e("：")],-1),vs=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"npx ava --match ='foo *'\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743713-72684"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npx ava --match ='foo *'\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743713-72684","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Cs=a("p",null,[e("匹配标题包含"),a("code",null,"foo"),e("：")],-1),ws=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"npx ava --match ='* foo *'\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743714-12896"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npx ava --match ='* foo *'\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743714-12896","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),js=a("p",null,[e("匹配是完全相同 "),a("code",null,"foo"),e("：")],-1),xs=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"npx ava --match ='foo'\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743714-38454"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npx ava --match ='foo'\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743714-38454","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),_s=a("p",null,[e("匹配标题不包含"),a("code",null,"foo"),e("：")],-1),Ts=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"npx ava --match ='！* foo *'\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743714-92484"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npx ava --match ='！* foo *'\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743714-92484","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Ns=a("p",null,[e("匹配以下"),a("code",null,"foo"),e("结尾的标题"),a("code",null,"bar"),e("：")],-1),Es=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"npx ava --match ='foo * bar'\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743714-65379"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npx ava --match ='foo * bar'\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743714-65379","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Is=a("p",null,[e("匹配"),a("code",null,"foo"),e("以"),a("code",null,"bar"),e("：开头或结尾的标题：")],-1),As=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"npx ava --match ='foo *' -  match ='* bar'\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743714-7147"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npx ava --match ='foo *' -  match ='* bar'\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743714-7147","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),$s=s('<h4 id="关于reporter"><a class="header-anchor" href="#关于reporter" aria-hidden="true">#</a> 关于reporter</h4><p>默认情况下，AVA使用最小的报告：</p><p><a href="https://github.com/avajs/ava/blob/master/media/mini-reporter.gif" target="_blank" rel="noopener noreferrer"><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105726.png" alt="img"></a></p><p>使用该<code>--verbose</code>标志启用详细的报告者。除非启用TAP报告，否则始终在CI环境中使用此选项。</p><p><a href="https://github.com/avajs/ava/blob/master/media/verbose-reporter.png" target="_blank" rel="noopener noreferrer"><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105727.png" alt="img"></a></p><p><strong>TAP报告（推荐）</strong></p><p>AVA支持TAP格式，因此与任何TAP报告器兼容。使用该<code>--tap</code>标志启用TAP输出。</p>',7),Bs=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[e("$ npx ava --tap "),a("span",{class:"token operator"},"|"),e(" npx tap-nyan\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743714-78093"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"$ npx ava --tap | npx tap-nyan\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743714-78093","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Ds=s('<p><a href="https://github.com/avajs/ava/blob/master/media/tap-reporter.png" target="_blank" rel="noopener noreferrer"><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105728.gif" alt="img"></a></p><p>这里有一些格式：</p><ul><li><a href="https://github.com/scottcorgan/tap-dot" target="_blank" rel="noopener noreferrer">tap-dot</a> - Dotted output.</li><li><a href="https://github.com/scottcorgan/tap-spec" target="_blank" rel="noopener noreferrer">tap-spec</a> - Mocha-like spec reporter.</li><li><a href="https://github.com/calvinmetcalf/tap-nyan" target="_blank" rel="noopener noreferrer">tap-nyan</a> - Nyan cat.</li><li><a href="https://github.com/gummesson/tap-min" target="_blank" rel="noopener noreferrer">tap-min</a> - Minimal output.</li><li><a href="https://github.com/namuol/tap-difflet" target="_blank" rel="noopener noreferrer">tap-difflet</a> - Minimal output with diffing.</li><li><a href="https://github.com/axross/tap-diff" target="_blank" rel="noopener noreferrer">tap-diff</a> - Human-friendly output with diffing.</li><li><a href="https://github.com/joeybaker/tap-simple" target="_blank" rel="noopener noreferrer">tap-simple</a> - Simple output.</li><li><a href="https://github.com/substack/faucet" target="_blank" rel="noopener noreferrer">faucet</a> - Human-readable summarizer.</li><li><a href="https://github.com/isaacs/tap-mocha-reporter" target="_blank" rel="noopener noreferrer">tap-mocha-reporter</a> - Use any of the <a href="https://github.com/isaacs/tap-mocha-reporter/tree/master/lib/reporters" target="_blank" rel="noopener noreferrer">Mocha reporters</a>.</li><li><a href="https://github.com/zoubin/tap-summary" target="_blank" rel="noopener noreferrer">tap-summary</a> - Summarized output.</li><li><a href="https://github.com/clux/tap-pessimist" target="_blank" rel="noopener noreferrer">tap-pessimist</a> - Only shows failed tests.</li><li><a href="https://github.com/toolness/tap-prettify" target="_blank" rel="noopener noreferrer">tap-prettify</a> - Nice readable output with diffing.</li><li><a href="https://github.com/substack/tap-colorize" target="_blank" rel="noopener noreferrer">tap-colorize</a> - Colorize the output while preserving machine-readability.</li><li><a href="https://github.com/juliangruber/tap-bail" target="_blank" rel="noopener noreferrer">tap-bail</a> - Bail out when the first test fails.</li><li><a href="https://github.com/axross/tap-notify" target="_blank" rel="noopener noreferrer">tap-notify</a> - Notifier for macOS, Linux and Windows.</li><li><a href="https://github.com/gummesson/tap-json" target="_blank" rel="noopener noreferrer">tap-json</a> - JSON output.</li><li><a href="https://github.com/yovasx2/ava-tap-json" target="_blank" rel="noopener noreferrer">ava-tap-json</a> - JSON output with AVA compatibility.</li><li><a href="https://github.com/aghassemi/tap-xunit" target="_blank" rel="noopener noreferrer">tap-xunit</a> - xUnit output.</li><li><a href="https://github.com/smockle/tap-teamcity" target="_blank" rel="noopener noreferrer">tap-teamcity</a> - Output for TeamCity.</li></ul><h4 id="快照功能"><a class="header-anchor" href="#快照功能" aria-hidden="true">#</a> 快照功能</h4><p>ava自动进行项目测试快照，如果文件放置在<code>test</code>或者<code>tests</code>目录，则快照会放置在<code>snapshots</code>目录。如果测试放置在<code>__test__</code>目录，则快照放置在<code>__snapshots__</code>目录</p>',5),Ps=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,"ava --update-snapshots\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743715-39912"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"ava --update-snapshots\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743715-39912","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Ss=a("p",null,[e("可以指定一个固定位置，以便在AVA的"),a("code",null,"package.json"),e("配置中存储快照文件：")],-1),Fs=a("p",null,[a("strong",null,"package.json：")],-1),Rs=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n\t "),a("span",{class:"token string"},'"ava"'),e("："),a("span",{class:"token punctuation"},"{"),e("\n\t\t "),a("span",{class:"token string"},'"snapshotDir"'),e("："),a("span",{class:"token string"},'"自定义目录"'),e("\n\t"),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743717-63176"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n\t "ava"：{\n\t\t "snapshotDir"："自定义目录"\n\t}\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743717-63176","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),qs=a("h4",{id:"设置超时"},[a("a",{class:"header-anchor",href:"#设置超时","aria-hidden":"true"},"#"),e(" 设置超时")],-1),Ms=a("p",null,"AVA中的超时行为与其他测试框架中的行为不同。AVA在每次测试后重置计时器，如果在指定的超时内没有收到新的测试结果，则强制测试退出。这可用于处理停滞的测试。",-1),Hs=a("p",null,[a("em",null,"没有默认超时。")],-1),Os=a("p",null,[e("您可以配置使用超时"),a("code",null,"--timeout"),e(" 命令行选项，或配置文件中设置。它们可以以人类可读的方式设置：")],-1),Js=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"# 10秒"),e("\nnpx ava --timeout "),a("span",{class:"token operator"},"="),e(" 10s \n\n"),a("span",{class:"token comment"},"# 2分钟"),e("\nnpx ava --timeout "),a("span",{class:"token operator"},"="),e(" 2m \n\n"),a("span",{class:"token comment"},"# 100毫秒"),e("\nnpx ava --timeout "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token number"},"100"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743717-65538"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 10秒\nnpx ava --timeout = 10s \n\n# 2分钟\nnpx ava --timeout = 2m \n\n# 100毫秒\nnpx ava --timeout = 100\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743717-65538","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br")])],-1),Vs=a("p",null,"还可以为每个测试单独设置超时。每次进行断言时都会重置这些超时。",-1),Ks=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"test"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'foo'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"t"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n\tt"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"timeout"),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"100"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e(),a("span",{class:"token comment"},"// 100 milliseconds"),e("\n\t"),a("span",{class:"token comment"},"// Write your assertions here"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743717-53173"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"test('foo', t => {\n\tt.timeout(100); // 100 milliseconds\n\t// Write your assertions here\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743717-53173","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br")])],-1),Gs=s('<h3 id="其他ava设置相关"><a class="header-anchor" href="#其他ava设置相关" aria-hidden="true">#</a> 其他ava设置相关</h3><h4 id="eslint"><a class="header-anchor" href="#eslint" aria-hidden="true">#</a> ESLint</h4><p>如果使用了ESLint，请添加<a href="https://github.com/avajs/eslint-plugin-ava" target="_blank" rel="noopener noreferrer">eslint-plugin-ava</a></p>',3),Ws=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n\tplugins"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n\t\t"),a("span",{class:"token string"},'"ava"'),e("\n\t"),a("span",{class:"token punctuation"},"]"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743717-34365"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n\tplugins: [\n\t\t"ava"\n\t]\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743717-34365","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),Ls=a("h4",{id:"异步相关"},[a("a",{class:"header-anchor",href:"#异步相关","aria-hidden":"true"},"#"),e(" 异步相关")],-1),Us=a("p",null,"如果异步操作使用promises，则应返回promise：",-1),zs=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"test"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'fetches foo'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"t"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n\t"),a("span",{class:"token keyword"},"return"),e(),a("span",{class:"token function"},"fetch"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"then"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"data"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n\t\tt"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"is"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'foo'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\t"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743717-18381"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"test('fetches foo', t => {\n\treturn fetch().then(data => {\n\t\tt.is(data, 'foo');\n\t});\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743717-18381","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br")])],-1),Xs=a("p",null,[e("更好的是，使用"),a("code",null,"async"),e("/ "),a("code",null,"await"),e("：")],-1),Ys=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"test"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'fetches foo'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"async"),e(),a("span",{class:"token parameter"},"t"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n\t"),a("span",{class:"token keyword"},"const"),e(" data "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"await"),e(),a("span",{class:"token function"},"fetch"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n\tt"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"is"),a("span",{class:"token punctuation"},"("),e("data"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'foo'"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743718-3482"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"test('fetches foo', async t => {\n\tconst data = await fetch();\n\tt.is(data, 'foo');\n});\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743718-3482","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br")])],-1),Qs=s('<h2 id="测试环境帮手karma"><a class="header-anchor" href="#测试环境帮手karma" aria-hidden="true">#</a> 测试环境&amp;帮手Karma</h2><p>Karma 是一个基于 Node.js 的 JavaScript 测试执行过程管理工具（Test Runner）。该工具可用于测试所有主流 Web 浏览器，也可以集成到 CI（Continuous integration）工具，还可以和其他代码编辑器一起使用。</p><p>Karma 会监控配置文件中所指定的每一个文件，每当文件发生改变，它都会向测试服务器发送信号，来通知所有的浏览器再次运行测试代码。此时，浏览器会重新加载源文件，并执行测试代码。其结果会传递回服务器，并以某种形式显示给开发者。</p><p>访问浏览器执行结果，可通过以下的方式</p><ul><li>手工方式 - 通过浏览器</li><li>自动方式 - 让 karma 来启动对应的浏览器</li></ul><h3 id="工作原理简介"><a class="header-anchor" href="#工作原理简介" aria-hidden="true">#</a> 工作原理简介</h3><p><code>karma</code> 是一个典型的 <code>C/S</code> 程序，包含 client 和 server ，通讯方式基于 <code>Http</code> ，通常情况下，客户端和服务端基本都运行在开发者本地机器上。</p><p>一个服务端实例对应一个项目，假如想同时运行多个项目，得同时开启多个服务端实例。</p><p><strong>Server</strong></p><p><code>Server</code> 是框架的主要组成部分之一，它内部保存了所有的程序运行状态，比如 client 连接，当前运行的单测文件，根据这些数据状态，它提供了下面几个功能， 下图是 server 的结构</p><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105729.png" alt="karma_server"></p><ul><li>监听文件</li><li>与 client 进行通讯</li><li>向开发者输出测试结果</li><li>提供 client 端所需的资源文件</li></ul><p><strong>Client</strong></p><p>client 是单测最终运行的地方，类似一个 web app ， 跟 server 端通讯利用 <code>socket.io</code>， 执行单测在一个独立的 <code>iframe</code> 中。下面是它的结构图</p><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105730.png" alt="karma_impl_client"></p><p>client 和 server 端通讯采用 <code>socket.io</code></p><ul><li>client 端会发送这些消息</li></ul><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105731.png" alt="karma_impl_client_message_c"></p><ul><li>server 端会发送这些消息</li></ul><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105732.jpg" alt="karma_impl_client_message_s"></p><h3 id="安装karma"><a class="header-anchor" href="#安装karma" aria-hidden="true">#</a> 安装Karma</h3><p>对于Nodejs版本的要求：</p><blockquote><p>Karma currently works on Node.js <strong>6.x</strong>, <strong>8.x</strong>, and <strong>10.x</strong>. See <a href="https://karma-runner.github.io/4.0/intro/faq.html" target="_blank" rel="noopener noreferrer">FAQ</a> for more info.</p></blockquote><ol><li>全局安装</li></ol>',24),Zs=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"$npm install -g karma\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743718-21125"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"$npm install -g karma\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743718-21125","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),na=a("p",null,[e("安装 Karma 命令会到全局的 "),a("code",null,"node_modules"),e(" 目录下，我们可以在任何位置直接运行 karma 命令。")],-1),ta=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"npm install -g karma-cli\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743718-55120"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm install -g karma-cli\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743718-55120","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),sa=a("p",null,[e("此命令用来安装 "),a("code",null,"karma-cli"),e("，它会在当前目录下寻找 karma 的可执行文件。这样我们就可以在一个系统内运行多个版本的 Karma。")],-1),aa=a("ol",{start:"2"},[a("li",null,"本地安装")],-1),ea=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"$ npm install karma --save-dev\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743718-65069"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"$ npm install karma --save-dev\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743718-65069","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),oa=a("p",null,[e("安装 Karma 命令到当前 "),a("code",null,"node_modules"),e(" 目录下，此时，如果需要执行 karma 命令，就需要这样")],-1),ca=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"   ./node_modules/.bin/karma\n   \n   npx karma --version\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743719-11528"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"   ./node_modules/.bin/karma\n   \n   npx karma --version\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743719-11528","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),la=s('<h3 id="配置karma"><a class="header-anchor" href="#配置karma" aria-hidden="true">#</a> 配置Karma</h3><p>karma配置文件可以用JavaScript，CoffeeScript或TypeScript编写，并作为常规Node.js模块加载。</p><p>除非作为参数提供，否则Karma CLI将在以下位置以该顺序(从上至下)查找配置文件</p><ul><li><code>./karma.conf.js</code></li><li><code>./karma.conf.coffee</code></li><li><code>./karma.conf.ts</code></li><li><code>./.config/karma.conf.js</code></li><li><code>./.config/karma.conf.coffee</code></li><li><code>./.config/karma.conf.ts</code></li></ul><p>在配置文件中，配置代码通过设置<code>module.exports</code>指向一个接受一个参数的函数：配置对象。</p>',5),ia=a("div",{class:"language-javascript line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// karma.conf.js"),e("\nmodule"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"exports"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"config"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  config"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"set"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e("\n    basePath"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'../..'"),a("span",{class:"token punctuation"},","),e("\n    frameworks"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},"'jasmine'"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token comment"},"//..."),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},";"),e("\n# karma"),a("span",{class:"token punctuation"},"."),e("conf"),a("span",{class:"token punctuation"},"."),e("coffee\nmodule"),a("span",{class:"token punctuation"},"."),e("exports "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"("),e("config"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"-"),a("span",{class:"token operator"},">"),e("\n  config"),a("span",{class:"token punctuation"},"."),e("set\n    basePath"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'../..'"),e("\n    frameworks"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},"'jasmine'"),a("span",{class:"token punctuation"},"]"),e("\n    # "),a("span",{class:"token operator"},"..."),e("\n"),a("span",{class:"token comment"},"// karma.conf.ts"),e("\nmodule"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"exports"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"config"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  config"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"set"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e("\n    basePath"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'../..'"),a("span",{class:"token punctuation"},","),e("\n    frameworks"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},"'jasmine'"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n    "),a("span",{class:"token comment"},"//..."),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},";"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743719-69942"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// karma.conf.js\nmodule.exports = function(config) {\n  config.set({\n    basePath: '../..',\n    frameworks: ['jasmine'],\n    //...\n  });\n};\n# karma.conf.coffee\nmodule.exports = (config) ->\n  config.set\n    basePath: '../..'\n    frameworks: ['jasmine']\n    # ...\n// karma.conf.ts\nmodule.exports = (config) => {\n  config.set({\n    basePath: '../..',\n    frameworks: ['jasmine'],\n    //...\n  });\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743719-69942","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br")])],-1),pa=a("blockquote",null,[a("p",null,[e("关于typescript的支持，需要使用到"),a("code",null,"ts-node"),e("，配置ts-node以使用"),a("code",null,"commonjs"),e("模块格")])],-1),ua=a("p",null,[e("配置文件中的基本的属性介绍："),a("a",{href:"https://karma-runner.github.io/4.0/config/configuration-file.html",target:"_blank",rel:"noopener noreferrer"},"Overview")],-1),ra=a("p",null,"使用CLI工具，快速创建配置",-1),da=a("p",null,"开始配置",-1),ma=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[e("~/Downloads/Demo is 📦 v1.0.0 via ⬢ v10.16.0 \n➜ npx karma init\n\n"),a("span",{class:"token comment"},"# 如果在应用中用到了其它的测试框架，那就需要我们安装它们所对应的插件，并在配置文件中标注它们（详见 karma.conf.js 中的 plugins 项）"),e("\nWhich testing framework "),a("span",{class:"token keyword"},"do"),e(" you want to use ?\nPress tab to list possible options. Enter to move to the next question.\n"),a("span",{class:"token operator"},">"),e(" jasmine\n"),a("span",{class:"token comment"},"# mocha"),e("\n"),a("span",{class:"token comment"},"# qunit"),e("\n"),a("span",{class:"token comment"},"# nodeunit"),e("\n"),a("span",{class:"token comment"},"# nunit"),e("\n\n"),a("span",{class:"token comment"},"# Require.js 是异步加载规范（AMD）的实现。常被作为基础代码库，应用在了很多的项目与框架之中，例如 Dojo, AngularJs 等"),e("\nDo you want to use Require.js ?\nThis will "),a("span",{class:"token function"},"add"),e(" Require.js plugin.\nPress tab to list possible options. Enter to move to the next question.\n"),a("span",{class:"token operator"},">"),e(" no\n"),a("span",{class:"token comment"},"# yes"),e("\n\n"),a("span",{class:"token comment"},"# 选择需要运行测试用例的浏览器。需要注意的就是，必须保证所对应的浏览器插件已经安装成功。"),e("\nDo you want to capture any browsers automatically ?\nPress tab to list possible options. Enter empty string to move to the next question.\n"),a("span",{class:"token operator"},">"),e(" Chrome\n"),a("span",{class:"token comment"},"# ChromeHeadless"),e("\n"),a("span",{class:"token comment"},"# ChromeCanary"),e("\n"),a("span",{class:"token comment"},"# Firefox"),e("\n"),a("span",{class:"token comment"},"# Safari"),e("\n"),a("span",{class:"token comment"},"# PhantomJS"),e("\n"),a("span",{class:"token comment"},"# Opera"),e("\n"),a("span",{class:"token comment"},"# IE"),e("\n\n"),a("span",{class:"token comment"},"# 选择测试用例所在的目录位置。Karma 支持通配符的方式配置文件或目录，例如 *.js, test/**/*.js 等。如果目录或文件使用相对位置，要清楚地是，此时的路径是相对于当前运行 karma 命令时所在的目录。"),e("\nWhat is the location of your "),a("span",{class:"token builtin class-name"},"source"),e(" and "),a("span",{class:"token builtin class-name"},"test"),e(" files ?\nYou can use glob patterns, eg. "),a("span",{class:"token string"},'"js/*.js"'),e(" or "),a("span",{class:"token string"},'"test/**/*Spec.js"'),a("span",{class:"token builtin class-name"},"."),e("\nEnter empty string to move to the next question.\n"),a("span",{class:"token operator"},">"),e(" src/*js\n\n"),a("span",{class:"token comment"},"# 目录中不包括的那些文件。"),e("\nShould any of the files included by the previous patterns be excluded ?\nYou can use glob patterns, eg. "),a("span",{class:"token string"},'"**/*.swp"'),a("span",{class:"token builtin class-name"},"."),e("\nEnter empty string to move to the next question.\n\n"),a("span",{class:"token comment"},"# 是否需要 Karma 自动监听文件？并且文件一旦被修改，就重新运行测试用例？"),e("\nDo you want Karma to "),a("span",{class:"token function"},"watch"),e(" all the files and run the tests on change ?\nPress tab to list possible options.\n"),a("span",{class:"token operator"},">"),e(),a("span",{class:"token function"},"yes"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743719-20675"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'~/Downloads/Demo is 📦 v1.0.0 via ⬢ v10.16.0 \n➜ npx karma init\n\n# 如果在应用中用到了其它的测试框架，那就需要我们安装它们所对应的插件，并在配置文件中标注它们（详见 karma.conf.js 中的 plugins 项）\nWhich testing framework do you want to use ?\nPress tab to list possible options. Enter to move to the next question.\n> jasmine\n# mocha\n# qunit\n# nodeunit\n# nunit\n\n# Require.js 是异步加载规范（AMD）的实现。常被作为基础代码库，应用在了很多的项目与框架之中，例如 Dojo, AngularJs 等\nDo you want to use Require.js ?\nThis will add Require.js plugin.\nPress tab to list possible options. Enter to move to the next question.\n> no\n# yes\n\n# 选择需要运行测试用例的浏览器。需要注意的就是，必须保证所对应的浏览器插件已经安装成功。\nDo you want to capture any browsers automatically ?\nPress tab to list possible options. Enter empty string to move to the next question.\n> Chrome\n# ChromeHeadless\n# ChromeCanary\n# Firefox\n# Safari\n# PhantomJS\n# Opera\n# IE\n\n# 选择测试用例所在的目录位置。Karma 支持通配符的方式配置文件或目录，例如 *.js, test/**/*.js 等。如果目录或文件使用相对位置，要清楚地是，此时的路径是相对于当前运行 karma 命令时所在的目录。\nWhat is the location of your source and test files ?\nYou can use glob patterns, eg. "js/*.js" or "test/**/*Spec.js".\nEnter empty string to move to the next question.\n> src/*js\n\n# 目录中不包括的那些文件。\nShould any of the files included by the previous patterns be excluded ?\nYou can use glob patterns, eg. "**/*.swp".\nEnter empty string to move to the next question.\n\n# 是否需要 Karma 自动监听文件？并且文件一旦被修改，就重新运行测试用例？\nDo you want Karma to watch all the files and run the tests on change ?\nPress tab to list possible options.\n> yes\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743719-20675","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br"),a("span",{class:"line-number"},"34"),a("br"),a("span",{class:"line-number"},"35"),a("br"),a("span",{class:"line-number"},"36"),a("br"),a("span",{class:"line-number"},"37"),a("br"),a("span",{class:"line-number"},"38"),a("br"),a("span",{class:"line-number"},"39"),a("br"),a("span",{class:"line-number"},"40"),a("br"),a("span",{class:"line-number"},"41"),a("br"),a("span",{class:"line-number"},"42"),a("br"),a("span",{class:"line-number"},"43"),a("br"),a("span",{class:"line-number"},"44"),a("br"),a("span",{class:"line-number"},"45"),a("br"),a("span",{class:"line-number"},"46"),a("br")])],-1),ba=a("p",null,[e("生成了一个"),a("code",null,"karma.conf.js"),e("文件：")],-1),ka=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token comment"},"// Karma configuration"),e("\n"),a("span",{class:"token comment"},"// Generated on Wed Jul 10 2019 22:46:32 GMT+0800 (GMT+08:00)"),e("\n\nmodule"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"exports"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"config"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  config"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"set"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e("\n\n    "),a("span",{class:"token comment"},"// base path that will be used to resolve all patterns (eg. files, exclude)"),e("\n    basePath"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"''"),a("span",{class:"token punctuation"},","),e("\n\n\n    "),a("span",{class:"token comment"},"// frameworks to use"),e("\n    "),a("span",{class:"token comment"},"// available frameworks: https://npmjs.org/browse/keyword/karma-adapter"),e("\n    frameworks"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},"'mocha'"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n\n\n    "),a("span",{class:"token comment"},"// list of files / patterns to load in the browser"),e("\n    files"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n      "),a("span",{class:"token string"},"'src/*js'"),e("\n    "),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n\n\n    "),a("span",{class:"token comment"},"// list of files / patterns to exclude"),e("\n    exclude"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n    "),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n\n\n    "),a("span",{class:"token comment"},"// preprocess matching files before serving them to the browser"),e("\n    "),a("span",{class:"token comment"},"// available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor"),e("\n    preprocessors"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n\n\n    "),a("span",{class:"token comment"},"// test results reporter to use"),e("\n    "),a("span",{class:"token comment"},"// possible values: 'dots', 'progress'"),e("\n    "),a("span",{class:"token comment"},"// available reporters: https://npmjs.org/browse/keyword/karma-reporter"),e("\n    reporters"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},"'progress'"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n\n\n    "),a("span",{class:"token comment"},"// web server port"),e("\n    port"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"9876"),a("span",{class:"token punctuation"},","),e("\n\n\n    "),a("span",{class:"token comment"},"// enable / disable colors in the output (reporters and logs)"),e("\n    colors"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},","),e("\n\n\n    "),a("span",{class:"token comment"},"// level of logging"),e("\n    "),a("span",{class:"token comment"},"// possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG"),e("\n    logLevel"),a("span",{class:"token operator"},":"),e(" config"),a("span",{class:"token punctuation"},"."),a("span",{class:"token constant"},"LOG_INFO"),a("span",{class:"token punctuation"},","),e("\n\n\n    "),a("span",{class:"token comment"},"// enable / disable watching file and executing tests whenever any file changes"),e("\n    autoWatch"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},","),e("\n\n\n    "),a("span",{class:"token comment"},"// start these browsers"),e("\n    "),a("span",{class:"token comment"},"// available browser launchers: https://npmjs.org/browse/keyword/karma-launcher"),e("\n    browsers"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},"'Chrome'"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n\n\n    "),a("span",{class:"token comment"},"// Continuous Integration mode"),e("\n    "),a("span",{class:"token comment"},"// if true, Karma captures browsers, runs the tests and exits"),e("\n    singleRun"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"false"),a("span",{class:"token punctuation"},","),e("\n\n    "),a("span",{class:"token comment"},"// Concurrency level"),e("\n    "),a("span",{class:"token comment"},"// how many browser should be started simultaneous"),e("\n    concurrency"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"Infinity"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743719-52658"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// Karma configuration\n// Generated on Wed Jul 10 2019 22:46:32 GMT+0800 (GMT+08:00)\n\nmodule.exports = function(config) {\n  config.set({\n\n    // base path that will be used to resolve all patterns (eg. files, exclude)\n    basePath: '',\n\n\n    // frameworks to use\n    // available frameworks: https://npmjs.org/browse/keyword/karma-adapter\n    frameworks: ['mocha'],\n\n\n    // list of files / patterns to load in the browser\n    files: [\n      'src/*js'\n    ],\n\n\n    // list of files / patterns to exclude\n    exclude: [\n    ],\n\n\n    // preprocess matching files before serving them to the browser\n    // available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor\n    preprocessors: {\n    },\n\n\n    // test results reporter to use\n    // possible values: 'dots', 'progress'\n    // available reporters: https://npmjs.org/browse/keyword/karma-reporter\n    reporters: ['progress'],\n\n\n    // web server port\n    port: 9876,\n\n\n    // enable / disable colors in the output (reporters and logs)\n    colors: true,\n\n\n    // level of logging\n    // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG\n    logLevel: config.LOG_INFO,\n\n\n    // enable / disable watching file and executing tests whenever any file changes\n    autoWatch: true,\n\n\n    // start these browsers\n    // available browser launchers: https://npmjs.org/browse/keyword/karma-launcher\n    browsers: ['Chrome'],\n\n\n    // Continuous Integration mode\n    // if true, Karma captures browsers, runs the tests and exits\n    singleRun: false,\n\n    // Concurrency level\n    // how many browser should be started simultaneous\n    concurrency: Infinity\n  })\n}\n\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743719-52658","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br"),a("span",{class:"line-number"},"34"),a("br"),a("span",{class:"line-number"},"35"),a("br"),a("span",{class:"line-number"},"36"),a("br"),a("span",{class:"line-number"},"37"),a("br"),a("span",{class:"line-number"},"38"),a("br"),a("span",{class:"line-number"},"39"),a("br"),a("span",{class:"line-number"},"40"),a("br"),a("span",{class:"line-number"},"41"),a("br"),a("span",{class:"line-number"},"42"),a("br"),a("span",{class:"line-number"},"43"),a("br"),a("span",{class:"line-number"},"44"),a("br"),a("span",{class:"line-number"},"45"),a("br"),a("span",{class:"line-number"},"46"),a("br"),a("span",{class:"line-number"},"47"),a("br"),a("span",{class:"line-number"},"48"),a("br"),a("span",{class:"line-number"},"49"),a("br"),a("span",{class:"line-number"},"50"),a("br"),a("span",{class:"line-number"},"51"),a("br"),a("span",{class:"line-number"},"52"),a("br"),a("span",{class:"line-number"},"53"),a("br"),a("span",{class:"line-number"},"54"),a("br"),a("span",{class:"line-number"},"55"),a("br"),a("span",{class:"line-number"},"56"),a("br"),a("span",{class:"line-number"},"57"),a("br"),a("span",{class:"line-number"},"58"),a("br"),a("span",{class:"line-number"},"59"),a("br"),a("span",{class:"line-number"},"60"),a("br"),a("span",{class:"line-number"},"61"),a("br"),a("span",{class:"line-number"},"62"),a("br"),a("span",{class:"line-number"},"63"),a("br"),a("span",{class:"line-number"},"64"),a("br"),a("span",{class:"line-number"},"65"),a("br"),a("span",{class:"line-number"},"66"),a("br"),a("span",{class:"line-number"},"67"),a("br"),a("span",{class:"line-number"},"68"),a("br"),a("span",{class:"line-number"},"69"),a("br"),a("span",{class:"line-number"},"70"),a("br")])],-1),ya=s('<h3 id="karma示例"><a class="header-anchor" href="#karma示例" aria-hidden="true">#</a> karma示例</h3><p>目标 ：</p><ul><li>babel支持，ES6语法支持</li><li>mocha与chai支持</li><li>karma与chrome、webpack对接</li></ul><p>说明：</p><p>Karma对babel支持的，一个可选项：<a href="https://github.com/babel/karma-babel-preprocessor" target="_blank" rel="noopener noreferrer">karma-babel-preprocessor</a>，但是：</p><blockquote><p>babel and karma-babel-preprocessor only convert ES6 modules to CommonJS/AMD/SystemJS/UMD**. If you choose CommonJS, you still need to resolve and concatenate CommonJS modules on your own**. We recommend <strong>karma-browserify + babelify</strong> or <strong>webpack + babel-loader</strong> in such cases.</p></blockquote><p>所以，我们选择了webpack</p><ol><li>安装依赖</li></ol>',8),ha=a("div",{class:"language-"},[a("pre",null,[a("code",null,"   npm install @babel/core @babel/preset-env chai mocha webpack webpack-cli babel-loader -D\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743720-68623"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"   npm install @babel/core @babel/preset-env chai mocha webpack webpack-cli babel-loader -D\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743720-68623","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),fa=a("ol",{start:"2"},[a("li",null,"安装karma的适配器")],-1),ga=a("div",{class:"language-"},[a("pre",null,[a("code",null,"   npm install karma-webpack karma-chrome-launcher karma-mocha karma-chai -D\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743720-80206"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"   npm install karma-webpack karma-chrome-launcher karma-mocha karma-chai -D\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743720-80206","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),va=a("ol",{start:"3"},[a("li",null,[e("配置"),a("code",null,"karma.config.js")])],-1),Ca=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[e("   "),a("span",{class:"token comment"},"// Karma configuration"),e("\n   "),a("span",{class:"token comment"},"// Generated on Thu Jul 11 2019 23:23:44 GMT+0800 (GMT+08:00)"),e("\n   \n   module"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function-variable function"},"exports"),e(),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"config"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n     config"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"set"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"{"),e("\n   \n       "),a("span",{class:"token comment"},"// base path that will be used to resolve all patterns (eg. files, exclude)"),e("\n       basePath"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"''"),a("span",{class:"token punctuation"},","),e("\n   \n   \n       "),a("span",{class:"token comment"},"// frameworks to use"),e("\n       "),a("span",{class:"token comment"},"// available frameworks: https://npmjs.org/browse/keyword/karma-adapter"),e("\n       frameworks"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},"'mocha'"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n   \n   \n       "),a("span",{class:"token comment"},"// list of files / patterns to load in the browser"),e("\n       files"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n         "),a("span",{class:"token string"},"'src/**/*.js'"),a("span",{class:"token punctuation"},","),e("\n         "),a("span",{class:"token string"},"'test/**/*.js'"),e("\n       "),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n   \n    \n       "),a("span",{class:"token comment"},"// ...."),e("\n       \n   \n       "),a("span",{class:"token comment"},"// preprocess matching files before serving them to the browser"),e("\n       "),a("span",{class:"token comment"},"// available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor"),e("\n       preprocessors"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n         "),a("span",{class:"token string"},"'src/**/*.js'"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},"'webpack'"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n         "),a("span",{class:"token string"},"'test/**/*.js'"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},"'webpack'"),a("span",{class:"token punctuation"},"]"),e("\n       "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n   \n       webpack"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n         mode"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"none"'),a("span",{class:"token punctuation"},","),e("\n         node"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n           fs"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},"'empty'"),e("\n         "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n         module"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n           rules"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n             "),a("span",{class:"token punctuation"},"{"),e(" test"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token regex"},[a("span",{class:"token regex-delimiter"},"/"),a("span",{class:"token regex-source language-regex"},"\\.js?$"),a("span",{class:"token regex-delimiter"},"/")]),a("span",{class:"token punctuation"},","),e(" loader"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"babel-loader"'),a("span",{class:"token punctuation"},","),e(" options"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e(" presets"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},'"@babel/env"'),a("span",{class:"token punctuation"},"]"),e(),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"}"),e("\n           "),a("span",{class:"token punctuation"},"]"),e("\n         "),a("span",{class:"token punctuation"},"}"),e("\n       "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n    \n       "),a("span",{class:"token comment"},"// ...."),e("\n       \n       plugins"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n         "),a("span",{class:"token string"},"'karma-mocha'"),a("span",{class:"token punctuation"},","),e("\n         "),a("span",{class:"token string"},"'karma-chai'"),a("span",{class:"token punctuation"},","),e("\n         "),a("span",{class:"token string"},"'karma-chrome-launcher'"),a("span",{class:"token punctuation"},","),e("\n         "),a("span",{class:"token string"},"'karma-webpack'"),e("\n       "),a("span",{class:"token punctuation"},"]"),e("\n     "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n   "),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743720-73711"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"   // Karma configuration\n   // Generated on Thu Jul 11 2019 23:23:44 GMT+0800 (GMT+08:00)\n   \n   module.exports = function (config) {\n     config.set({\n   \n       // base path that will be used to resolve all patterns (eg. files, exclude)\n       basePath: '',\n   \n   \n       // frameworks to use\n       // available frameworks: https://npmjs.org/browse/keyword/karma-adapter\n       frameworks: ['mocha'],\n   \n   \n       // list of files / patterns to load in the browser\n       files: [\n         'src/**/*.js',\n         'test/**/*.js'\n       ],\n   \n    \n       // ....\n       \n   \n       // preprocess matching files before serving them to the browser\n       // available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor\n       preprocessors: {\n         'src/**/*.js': ['webpack'],\n         'test/**/*.js': ['webpack']\n       },\n   \n       webpack: {\n         mode: \"none\",\n         node: {\n           fs: 'empty'\n         },\n         module: {\n           rules: [\n             { test: /\\.js?$/, loader: \"babel-loader\", options: { presets: [\"@babel/env\"] }, }\n           ]\n         }\n       },\n    \n       // ....\n       \n       plugins: [\n         'karma-mocha',\n         'karma-chai',\n         'karma-chrome-launcher',\n         'karma-webpack'\n       ]\n     })\n   }\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743720-73711","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br"),a("span",{class:"line-number"},"34"),a("br"),a("span",{class:"line-number"},"35"),a("br"),a("span",{class:"line-number"},"36"),a("br"),a("span",{class:"line-number"},"37"),a("br"),a("span",{class:"line-number"},"38"),a("br"),a("span",{class:"line-number"},"39"),a("br"),a("span",{class:"line-number"},"40"),a("br"),a("span",{class:"line-number"},"41"),a("br"),a("span",{class:"line-number"},"42"),a("br"),a("span",{class:"line-number"},"43"),a("br"),a("span",{class:"line-number"},"44"),a("br"),a("span",{class:"line-number"},"45"),a("br"),a("span",{class:"line-number"},"46"),a("br"),a("span",{class:"line-number"},"47"),a("br"),a("span",{class:"line-number"},"48"),a("br"),a("span",{class:"line-number"},"49"),a("br"),a("span",{class:"line-number"},"50"),a("br"),a("span",{class:"line-number"},"51"),a("br"),a("span",{class:"line-number"},"52"),a("br"),a("span",{class:"line-number"},"53"),a("br"),a("span",{class:"line-number"},"54"),a("br")])],-1),wa=a("ol",{start:"4"},[a("li",null,[e("书写测试用例"),a("code",null,"test.js"),e("：")])],-1),ja=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[e("   "),a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token punctuation"},"{"),e(" describe "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},'"mocha"'),a("span",{class:"token punctuation"},";"),e("\n   "),a("span",{class:"token keyword"},"import"),e(),a("span",{class:"token punctuation"},"{"),e(" expect "),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token keyword"},"from"),e(),a("span",{class:"token string"},"'chai'"),e("\n   \n   "),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'first test'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n     "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'hello mocha and karma'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n       console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'hello mocha'"),a("span",{class:"token punctuation"},")"),e("\n       "),a("span",{class:"token function"},"expect"),a("span",{class:"token punctuation"},"("),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("to"),a("span",{class:"token punctuation"},"."),e("be"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},")"),e("\n     "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n   "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743720-14603"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"   import { describe } from \"mocha\";\n   import { expect } from 'chai'\n   \n   describe('first test', () => {\n     it('hello mocha and karma', () => {\n       console.log('hello mocha')\n       expect(true).to.be.equal(true)\n     })\n   })\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743720-14603","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br")])],-1),xa=a("ol",{start:"5"},[a("li",null,"开始测试：")],-1),_a=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,"   npx karma start\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743721-93525"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"   npx karma start\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743721-93525","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Ta=a("p",null,[e("添加到"),a("code",null,"package.json")],-1),Na=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[e("   "),a("span",{class:"token property"},'"scripts"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n     "),a("span",{class:"token property"},'"karma"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"karma start"'),e("\n   "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743721-40070"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'   "scripts": {\n     "karma": "karma start"\n   },\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743721-40070","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),Ea=a("p",null,[e("然后使用，"),a("code",null,"npm run karma")],-1),Ia=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[e("➜ npx karma start\nℹ ｢wdm｣: Hash: 9d2c943b68425fd58dd0\nVersion: webpack "),a("span",{class:"token number"},"4.35"),e(".3\nTime: 53ms\nBuilt at: "),a("span",{class:"token number"},"2019"),e("-07-12 "),a("span",{class:"token number"},"5"),e(":07:49 PM\nℹ ｢wdm｣: Compiled successfully.\nℹ ｢wdm｣: Compiling"),a("span",{class:"token punctuation"},".."),e(".\n⚠ ｢wdm｣: Hash: cca8316f4bd5855fc4de\nVersion: webpack "),a("span",{class:"token number"},"4.35"),e(".3\nTime: 2414ms\nBuilt at: "),a("span",{class:"token number"},"2019"),e("-07-12 "),a("span",{class:"token number"},"5"),e(":07:52 PM\n       Asset      Size  Chunks             Chunk Names\nsrc/index.js  "),a("span",{class:"token number"},"3.62"),e(" KiB       "),a("span",{class:"token number"},"0"),e("  "),a("span",{class:"token punctuation"},"["),e("emitted"),a("span",{class:"token punctuation"},"]"),e("  src/index\ntest/test.js  "),a("span",{class:"token number"},"1010"),e(" KiB       "),a("span",{class:"token number"},"1"),e("  "),a("span",{class:"token punctuation"},"["),e("emitted"),a("span",{class:"token punctuation"},"]"),e("  test/test\nEntrypoint src/index "),a("span",{class:"token operator"},"="),e(" src/index.js\nEntrypoint test/test "),a("span",{class:"token operator"},"="),e(" test/test.js\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},"]"),e(" ./src/index.js "),a("span",{class:"token number"},"27"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"]"),e(" ./test/test.js "),a("span",{class:"token number"},"223"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/mocha/browser-entry.js "),a("span",{class:"token number"},"4.19"),e(" KiB "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/process/browser.js "),a("span",{class:"token number"},"4.96"),e(" KiB "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"4"),a("span",{class:"token punctuation"},"]"),e(),a("span",{class:"token punctuation"},"("),e("webpack"),a("span",{class:"token punctuation"},")"),e("/buildin/global.js "),a("span",{class:"token number"},"878"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"5"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/browser-stdout/index.js "),a("span",{class:"token number"},"662"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"6"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/stream-browserify/index.js "),a("span",{class:"token number"},"3.53"),e(" KiB "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"36"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/util/util.js "),a("span",{class:"token number"},"19"),e(" KiB "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"38"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/mocha/lib/mocha.js "),a("span",{class:"token number"},"21.8"),e(" KiB "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"39"),a("span",{class:"token punctuation"},"]"),e(),a("span",{class:"token punctuation"},"("),e("webpack"),a("span",{class:"token punctuation"},")"),e("/buildin/module.js "),a("span",{class:"token number"},"552"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"40"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/escape-string-regexp/index.js "),a("span",{class:"token number"},"230"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"41"),a("span",{class:"token punctuation"},"]"),e(" path "),a("span",{class:"token punctuation"},"("),e("ignored"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token number"},"15"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"42"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/mocha/lib/reporters/index.js "),a("span",{class:"token number"},"945"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n"),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"105"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/chai/index.js "),a("span",{class:"token number"},"39"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n"),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"106"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/chai/lib/chai.js "),a("span",{class:"token number"},"1.22"),e(" KiB "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n    + "),a("span",{class:"token number"},"128"),e(" hidden modules\n\nWARNING "),a("span",{class:"token keyword"},"in"),e(" ./node_modules/mocha/lib/mocha.js "),a("span",{class:"token number"},"217"),e(":20-37\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING "),a("span",{class:"token keyword"},"in"),e(" ./node_modules/mocha/lib/mocha.js "),a("span",{class:"token number"},"222"),e(":24-70\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING "),a("span",{class:"token keyword"},"in"),e(" ./node_modules/mocha/lib/mocha.js "),a("span",{class:"token number"},"266"),e(":24-35\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING "),a("span",{class:"token keyword"},"in"),e(" ./node_modules/mocha/lib/mocha.js "),a("span",{class:"token number"},"313"),e(":35-48\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING "),a("span",{class:"token keyword"},"in"),e(" ./node_modules/mocha/lib/mocha.js "),a("span",{class:"token number"},"329"),e(":23-44\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\nℹ ｢wdm｣: Compiled with warnings.\n"),a("span",{class:"token number"},"12"),e(" 07 "),a("span",{class:"token number"},"2019"),e(),a("span",{class:"token number"},"17"),e(":07:52.761:WARN "),a("span",{class:"token punctuation"},"["),e("karma"),a("span",{class:"token punctuation"},"]"),e(": No captured browser, "),a("span",{class:"token function"},"open"),e(" http://localhost:9876/\n"),a("span",{class:"token number"},"12"),e(" 07 "),a("span",{class:"token number"},"2019"),e(),a("span",{class:"token number"},"17"),e(":07:52.770:INFO "),a("span",{class:"token punctuation"},"["),e("karma-server"),a("span",{class:"token punctuation"},"]"),e(": Karma v4.1.0 server started at http://0.0.0.0:9876/\n"),a("span",{class:"token number"},"12"),e(" 07 "),a("span",{class:"token number"},"2019"),e(),a("span",{class:"token number"},"17"),e(":07:52.770:INFO "),a("span",{class:"token punctuation"},"["),e("launcher"),a("span",{class:"token punctuation"},"]"),e(": Launching browsers Chrome with concurrency unlimited\n"),a("span",{class:"token number"},"12"),e(" 07 "),a("span",{class:"token number"},"2019"),e(),a("span",{class:"token number"},"17"),e(":07:52.773:INFO "),a("span",{class:"token punctuation"},"["),e("launcher"),a("span",{class:"token punctuation"},"]"),e(": Starting browser Chrome\n"),a("span",{class:"token number"},"12"),e(" 07 "),a("span",{class:"token number"},"2019"),e(),a("span",{class:"token number"},"17"),e(":07:54.135:INFO "),a("span",{class:"token punctuation"},"["),e("Chrome "),a("span",{class:"token number"},"75.0"),e(".3770 "),a("span",{class:"token punctuation"},"("),e("Mac OS X "),a("span",{class:"token number"},"10.14"),e(".5"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"]"),e(": Connected on socket R9R31QB1GtR_kayNAAAA with "),a("span",{class:"token function"},"id"),e(),a("span",{class:"token number"},"55412577"),e("\nChrome "),a("span",{class:"token number"},"75.0"),e(".3770 "),a("span",{class:"token punctuation"},"("),e("Mac OS X "),a("span",{class:"token number"},"10.14"),e(".5"),a("span",{class:"token punctuation"},")"),e(" LOG: "),a("span",{class:"token string"},"'hello karma'"),e("\n\nLOG: "),a("span",{class:"token string"},"'hello mocha'"),e("\nChrome "),a("span",{class:"token number"},"75.0"),e(".3770 "),a("span",{class:"token punctuation"},"("),e("Mac OS X "),a("span",{class:"token number"},"10.14"),e(".5"),a("span",{class:"token punctuation"},")"),e(": Executed "),a("span",{class:"token number"},"1"),e(" of "),a("span",{class:"token number"},"1"),e(" SUCCESS "),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"0"),e(" secs / "),a("span",{class:"token number"},"0.001"),e(" secs\n~/Downloads/karma-demo is 📦 v1.0.0 via ⬢ v10.16.0 \n➜ "),a("span",{class:"token function"},"npm"),e(" run karma\n\n"),a("span",{class:"token operator"},">"),e(" karma-demo@1.0.0 karma /Users/demo/Downloads/karma-demo\n"),a("span",{class:"token operator"},">"),e(" karma start\n\nℹ ｢wdm｣: Hash: 9d2c943b68425fd58dd0\nVersion: webpack "),a("span",{class:"token number"},"4.35"),e(".3\nTime: 48ms\nBuilt at: "),a("span",{class:"token number"},"2019"),e("-07-12 "),a("span",{class:"token number"},"5"),e(":24:02 PM\nℹ ｢wdm｣: Compiled successfully.\nℹ ｢wdm｣: Compiling"),a("span",{class:"token punctuation"},".."),e(".\n⚠ ｢wdm｣: Hash: cca8316f4bd5855fc4de\nVersion: webpack "),a("span",{class:"token number"},"4.35"),e(".3\nTime: 2307ms\nBuilt at: "),a("span",{class:"token number"},"2019"),e("-07-12 "),a("span",{class:"token number"},"5"),e(":24:04 PM\n       Asset      Size  Chunks             Chunk Names\nsrc/index.js  "),a("span",{class:"token number"},"3.62"),e(" KiB       "),a("span",{class:"token number"},"0"),e("  "),a("span",{class:"token punctuation"},"["),e("emitted"),a("span",{class:"token punctuation"},"]"),e("  src/index\ntest/test.js  "),a("span",{class:"token number"},"1010"),e(" KiB       "),a("span",{class:"token number"},"1"),e("  "),a("span",{class:"token punctuation"},"["),e("emitted"),a("span",{class:"token punctuation"},"]"),e("  test/test\nEntrypoint src/index "),a("span",{class:"token operator"},"="),e(" src/index.js\nEntrypoint test/test "),a("span",{class:"token operator"},"="),e(" test/test.js\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},"]"),e(" ./src/index.js "),a("span",{class:"token number"},"27"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"0"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"]"),e(" ./test/test.js "),a("span",{class:"token number"},"223"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"2"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/mocha/browser-entry.js "),a("span",{class:"token number"},"4.19"),e(" KiB "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/process/browser.js "),a("span",{class:"token number"},"4.96"),e(" KiB "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"4"),a("span",{class:"token punctuation"},"]"),e(),a("span",{class:"token punctuation"},"("),e("webpack"),a("span",{class:"token punctuation"},")"),e("/buildin/global.js "),a("span",{class:"token number"},"878"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"5"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/browser-stdout/index.js "),a("span",{class:"token number"},"662"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n  "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"6"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/stream-browserify/index.js "),a("span",{class:"token number"},"3.53"),e(" KiB "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"36"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/util/util.js "),a("span",{class:"token number"},"19"),e(" KiB "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"38"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/mocha/lib/mocha.js "),a("span",{class:"token number"},"21.8"),e(" KiB "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"39"),a("span",{class:"token punctuation"},"]"),e(),a("span",{class:"token punctuation"},"("),e("webpack"),a("span",{class:"token punctuation"},")"),e("/buildin/module.js "),a("span",{class:"token number"},"552"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"40"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/escape-string-regexp/index.js "),a("span",{class:"token number"},"230"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"41"),a("span",{class:"token punctuation"},"]"),e(" path "),a("span",{class:"token punctuation"},"("),e("ignored"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token number"},"15"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n "),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"42"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/mocha/lib/reporters/index.js "),a("span",{class:"token number"},"945"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n"),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"105"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/chai/index.js "),a("span",{class:"token number"},"39"),e(" bytes "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n"),a("span",{class:"token punctuation"},"["),a("span",{class:"token number"},"106"),a("span",{class:"token punctuation"},"]"),e(" ./node_modules/chai/lib/chai.js "),a("span",{class:"token number"},"1.22"),e(" KiB "),a("span",{class:"token punctuation"},"{"),a("span",{class:"token number"},"1"),a("span",{class:"token punctuation"},"}"),e(),a("span",{class:"token punctuation"},"["),e("built"),a("span",{class:"token punctuation"},"]"),e("\n    + "),a("span",{class:"token number"},"128"),e(" hidden modules\n\nWARNING "),a("span",{class:"token keyword"},"in"),e(" ./node_modules/mocha/lib/mocha.js "),a("span",{class:"token number"},"217"),e(":20-37\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING "),a("span",{class:"token keyword"},"in"),e(" ./node_modules/mocha/lib/mocha.js "),a("span",{class:"token number"},"222"),e(":24-70\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING "),a("span",{class:"token keyword"},"in"),e(" ./node_modules/mocha/lib/mocha.js "),a("span",{class:"token number"},"266"),e(":24-35\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING "),a("span",{class:"token keyword"},"in"),e(" ./node_modules/mocha/lib/mocha.js "),a("span",{class:"token number"},"313"),e(":35-48\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING "),a("span",{class:"token keyword"},"in"),e(" ./node_modules/mocha/lib/mocha.js "),a("span",{class:"token number"},"329"),e(":23-44\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\nℹ ｢wdm｣: Compiled with warnings.\n"),a("span",{class:"token number"},"12"),e(" 07 "),a("span",{class:"token number"},"2019"),e(),a("span",{class:"token number"},"17"),e(":24:04.905:WARN "),a("span",{class:"token punctuation"},"["),e("karma"),a("span",{class:"token punctuation"},"]"),e(": No captured browser, "),a("span",{class:"token function"},"open"),e(" http://localhost:9876/\n"),a("span",{class:"token number"},"12"),e(" 07 "),a("span",{class:"token number"},"2019"),e(),a("span",{class:"token number"},"17"),e(":24:04.914:INFO "),a("span",{class:"token punctuation"},"["),e("karma-server"),a("span",{class:"token punctuation"},"]"),e(": Karma v4.1.0 server started at http://0.0.0.0:9876/\n"),a("span",{class:"token number"},"12"),e(" 07 "),a("span",{class:"token number"},"2019"),e(),a("span",{class:"token number"},"17"),e(":24:04.914:INFO "),a("span",{class:"token punctuation"},"["),e("launcher"),a("span",{class:"token punctuation"},"]"),e(": Launching browsers Chrome with concurrency unlimited\n"),a("span",{class:"token number"},"12"),e(" 07 "),a("span",{class:"token number"},"2019"),e(),a("span",{class:"token number"},"17"),e(":24:04.922:INFO "),a("span",{class:"token punctuation"},"["),e("launcher"),a("span",{class:"token punctuation"},"]"),e(": Starting browser Chrome\n"),a("span",{class:"token number"},"12"),e(" 07 "),a("span",{class:"token number"},"2019"),e(),a("span",{class:"token number"},"17"),e(":24:06.289:INFO "),a("span",{class:"token punctuation"},"["),e("Chrome "),a("span",{class:"token number"},"75.0"),e(".3770 "),a("span",{class:"token punctuation"},"("),e("Mac OS X "),a("span",{class:"token number"},"10.14"),e(".5"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"]"),e(": Connected on socket EbCCSbQRPbxHbq3OAAAA with "),a("span",{class:"token function"},"id"),e(),a("span",{class:"token number"},"92342032"),e("\nChrome "),a("span",{class:"token number"},"75.0"),e(".3770 "),a("span",{class:"token punctuation"},"("),e("Mac OS X "),a("span",{class:"token number"},"10.14"),e(".5"),a("span",{class:"token punctuation"},")"),e(" LOG: "),a("span",{class:"token string"},"'hello karma'"),e("\n\nLOG: "),a("span",{class:"token string"},"'hello mocha'"),e("\nChrome "),a("span",{class:"token number"},"75.0"),e(".3770 "),a("span",{class:"token punctuation"},"("),e("Mac OS X "),a("span",{class:"token number"},"10.14"),e(".5"),a("span",{class:"token punctuation"},")"),e(": Executed "),a("span",{class:"token number"},"1"),e(" of "),a("span",{class:"token number"},"1"),e(" SUCCESS "),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"0"),e(" secs / "),a("span",{class:"token number"},"0.001"),e(" secs\nChrome "),a("span",{class:"token number"},"75.0"),e(".3770 "),a("span",{class:"token punctuation"},"("),e("Mac OS X "),a("span",{class:"token number"},"10.14"),e(".5"),a("span",{class:"token punctuation"},")"),e(": Executed "),a("span",{class:"token number"},"1"),e(" of "),a("span",{class:"token number"},"1"),e(" SUCCESS "),a("span",{class:"token punctuation"},"("),a("span",{class:"token number"},"0.006"),e(" secs / "),a("span",{class:"token number"},"0.001"),e(" \nsecs"),a("span",{class:"token punctuation"},")"),e("\nTOTAL: "),a("span",{class:"token number"},"1"),e(" SUCCESS\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743721-93769"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"➜ npx karma start\nℹ ｢wdm｣: Hash: 9d2c943b68425fd58dd0\nVersion: webpack 4.35.3\nTime: 53ms\nBuilt at: 2019-07-12 5:07:49 PM\nℹ ｢wdm｣: Compiled successfully.\nℹ ｢wdm｣: Compiling...\n⚠ ｢wdm｣: Hash: cca8316f4bd5855fc4de\nVersion: webpack 4.35.3\nTime: 2414ms\nBuilt at: 2019-07-12 5:07:52 PM\n       Asset      Size  Chunks             Chunk Names\nsrc/index.js  3.62 KiB       0  [emitted]  src/index\ntest/test.js  1010 KiB       1  [emitted]  test/test\nEntrypoint src/index = src/index.js\nEntrypoint test/test = test/test.js\n  [0] ./src/index.js 27 bytes {0} [built]\n  [1] ./test/test.js 223 bytes {1} [built]\n  [2] ./node_modules/mocha/browser-entry.js 4.19 KiB {1} [built]\n  [3] ./node_modules/process/browser.js 4.96 KiB {1} [built]\n  [4] (webpack)/buildin/global.js 878 bytes {1} [built]\n  [5] ./node_modules/browser-stdout/index.js 662 bytes {1} [built]\n  [6] ./node_modules/stream-browserify/index.js 3.53 KiB {1} [built]\n [36] ./node_modules/util/util.js 19 KiB {1} [built]\n [38] ./node_modules/mocha/lib/mocha.js 21.8 KiB {1} [built]\n [39] (webpack)/buildin/module.js 552 bytes {1} [built]\n [40] ./node_modules/escape-string-regexp/index.js 230 bytes {1} [built]\n [41] path (ignored) 15 bytes {1} [built]\n [42] ./node_modules/mocha/lib/reporters/index.js 945 bytes {1} [built]\n[105] ./node_modules/chai/index.js 39 bytes {1} [built]\n[106] ./node_modules/chai/lib/chai.js 1.22 KiB {1} [built]\n    + 128 hidden modules\n\nWARNING in ./node_modules/mocha/lib/mocha.js 217:20-37\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING in ./node_modules/mocha/lib/mocha.js 222:24-70\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING in ./node_modules/mocha/lib/mocha.js 266:24-35\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING in ./node_modules/mocha/lib/mocha.js 313:35-48\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING in ./node_modules/mocha/lib/mocha.js 329:23-44\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\nℹ ｢wdm｣: Compiled with warnings.\n12 07 2019 17:07:52.761:WARN [karma]: No captured browser, open http://localhost:9876/\n12 07 2019 17:07:52.770:INFO [karma-server]: Karma v4.1.0 server started at http://0.0.0.0:9876/\n12 07 2019 17:07:52.770:INFO [launcher]: Launching browsers Chrome with concurrency unlimited\n12 07 2019 17:07:52.773:INFO [launcher]: Starting browser Chrome\n12 07 2019 17:07:54.135:INFO [Chrome 75.0.3770 (Mac OS X 10.14.5)]: Connected on socket R9R31QB1GtR_kayNAAAA with id 55412577\nChrome 75.0.3770 (Mac OS X 10.14.5) LOG: 'hello karma'\n\nLOG: 'hello mocha'\nChrome 75.0.3770 (Mac OS X 10.14.5): Executed 1 of 1 SUCCESS (0 secs / 0.001 secs\n~/Downloads/karma-demo is 📦 v1.0.0 via ⬢ v10.16.0 \n➜ npm run karma\n\n> karma-demo@1.0.0 karma /Users/demo/Downloads/karma-demo\n> karma start\n\nℹ ｢wdm｣: Hash: 9d2c943b68425fd58dd0\nVersion: webpack 4.35.3\nTime: 48ms\nBuilt at: 2019-07-12 5:24:02 PM\nℹ ｢wdm｣: Compiled successfully.\nℹ ｢wdm｣: Compiling...\n⚠ ｢wdm｣: Hash: cca8316f4bd5855fc4de\nVersion: webpack 4.35.3\nTime: 2307ms\nBuilt at: 2019-07-12 5:24:04 PM\n       Asset      Size  Chunks             Chunk Names\nsrc/index.js  3.62 KiB       0  [emitted]  src/index\ntest/test.js  1010 KiB       1  [emitted]  test/test\nEntrypoint src/index = src/index.js\nEntrypoint test/test = test/test.js\n  [0] ./src/index.js 27 bytes {0} [built]\n  [1] ./test/test.js 223 bytes {1} [built]\n  [2] ./node_modules/mocha/browser-entry.js 4.19 KiB {1} [built]\n  [3] ./node_modules/process/browser.js 4.96 KiB {1} [built]\n  [4] (webpack)/buildin/global.js 878 bytes {1} [built]\n  [5] ./node_modules/browser-stdout/index.js 662 bytes {1} [built]\n  [6] ./node_modules/stream-browserify/index.js 3.53 KiB {1} [built]\n [36] ./node_modules/util/util.js 19 KiB {1} [built]\n [38] ./node_modules/mocha/lib/mocha.js 21.8 KiB {1} [built]\n [39] (webpack)/buildin/module.js 552 bytes {1} [built]\n [40] ./node_modules/escape-string-regexp/index.js 230 bytes {1} [built]\n [41] path (ignored) 15 bytes {1} [built]\n [42] ./node_modules/mocha/lib/reporters/index.js 945 bytes {1} [built]\n[105] ./node_modules/chai/index.js 39 bytes {1} [built]\n[106] ./node_modules/chai/lib/chai.js 1.22 KiB {1} [built]\n    + 128 hidden modules\n\nWARNING in ./node_modules/mocha/lib/mocha.js 217:20-37\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING in ./node_modules/mocha/lib/mocha.js 222:24-70\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING in ./node_modules/mocha/lib/mocha.js 266:24-35\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING in ./node_modules/mocha/lib/mocha.js 313:35-48\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\n\nWARNING in ./node_modules/mocha/lib/mocha.js 329:23-44\nCritical dependency: the request of a dependency is an expression\n @ ./node_modules/mocha/browser-entry.js\n @ ./test/test.js\nℹ ｢wdm｣: Compiled with warnings.\n12 07 2019 17:24:04.905:WARN [karma]: No captured browser, open http://localhost:9876/\n12 07 2019 17:24:04.914:INFO [karma-server]: Karma v4.1.0 server started at http://0.0.0.0:9876/\n12 07 2019 17:24:04.914:INFO [launcher]: Launching browsers Chrome with concurrency unlimited\n12 07 2019 17:24:04.922:INFO [launcher]: Starting browser Chrome\n12 07 2019 17:24:06.289:INFO [Chrome 75.0.3770 (Mac OS X 10.14.5)]: Connected on socket EbCCSbQRPbxHbq3OAAAA with id 92342032\nChrome 75.0.3770 (Mac OS X 10.14.5) LOG: 'hello karma'\n\nLOG: 'hello mocha'\nChrome 75.0.3770 (Mac OS X 10.14.5): Executed 1 of 1 SUCCESS (0 secs / 0.001 secs\nChrome 75.0.3770 (Mac OS X 10.14.5): Executed 1 of 1 SUCCESS (0.006 secs / 0.001 \nsecs)\nTOTAL: 1 SUCCESS\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743721-93769","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br"),a("span",{class:"line-number"},"34"),a("br"),a("span",{class:"line-number"},"35"),a("br"),a("span",{class:"line-number"},"36"),a("br"),a("span",{class:"line-number"},"37"),a("br"),a("span",{class:"line-number"},"38"),a("br"),a("span",{class:"line-number"},"39"),a("br"),a("span",{class:"line-number"},"40"),a("br"),a("span",{class:"line-number"},"41"),a("br"),a("span",{class:"line-number"},"42"),a("br"),a("span",{class:"line-number"},"43"),a("br"),a("span",{class:"line-number"},"44"),a("br"),a("span",{class:"line-number"},"45"),a("br"),a("span",{class:"line-number"},"46"),a("br"),a("span",{class:"line-number"},"47"),a("br"),a("span",{class:"line-number"},"48"),a("br"),a("span",{class:"line-number"},"49"),a("br"),a("span",{class:"line-number"},"50"),a("br"),a("span",{class:"line-number"},"51"),a("br"),a("span",{class:"line-number"},"52"),a("br"),a("span",{class:"line-number"},"53"),a("br"),a("span",{class:"line-number"},"54"),a("br"),a("span",{class:"line-number"},"55"),a("br"),a("span",{class:"line-number"},"56"),a("br"),a("span",{class:"line-number"},"57"),a("br"),a("span",{class:"line-number"},"58"),a("br"),a("span",{class:"line-number"},"59"),a("br"),a("span",{class:"line-number"},"60"),a("br"),a("span",{class:"line-number"},"61"),a("br"),a("span",{class:"line-number"},"62"),a("br"),a("span",{class:"line-number"},"63"),a("br"),a("span",{class:"line-number"},"64"),a("br"),a("span",{class:"line-number"},"65"),a("br"),a("span",{class:"line-number"},"66"),a("br"),a("span",{class:"line-number"},"67"),a("br"),a("span",{class:"line-number"},"68"),a("br"),a("span",{class:"line-number"},"69"),a("br"),a("span",{class:"line-number"},"70"),a("br"),a("span",{class:"line-number"},"71"),a("br"),a("span",{class:"line-number"},"72"),a("br"),a("span",{class:"line-number"},"73"),a("br"),a("span",{class:"line-number"},"74"),a("br"),a("span",{class:"line-number"},"75"),a("br"),a("span",{class:"line-number"},"76"),a("br"),a("span",{class:"line-number"},"77"),a("br"),a("span",{class:"line-number"},"78"),a("br"),a("span",{class:"line-number"},"79"),a("br"),a("span",{class:"line-number"},"80"),a("br"),a("span",{class:"line-number"},"81"),a("br"),a("span",{class:"line-number"},"82"),a("br"),a("span",{class:"line-number"},"83"),a("br"),a("span",{class:"line-number"},"84"),a("br"),a("span",{class:"line-number"},"85"),a("br"),a("span",{class:"line-number"},"86"),a("br"),a("span",{class:"line-number"},"87"),a("br"),a("span",{class:"line-number"},"88"),a("br"),a("span",{class:"line-number"},"89"),a("br"),a("span",{class:"line-number"},"90"),a("br"),a("span",{class:"line-number"},"91"),a("br"),a("span",{class:"line-number"},"92"),a("br"),a("span",{class:"line-number"},"93"),a("br"),a("span",{class:"line-number"},"94"),a("br"),a("span",{class:"line-number"},"95"),a("br"),a("span",{class:"line-number"},"96"),a("br"),a("span",{class:"line-number"},"97"),a("br"),a("span",{class:"line-number"},"98"),a("br"),a("span",{class:"line-number"},"99"),a("br"),a("span",{class:"line-number"},"100"),a("br"),a("span",{class:"line-number"},"101"),a("br"),a("span",{class:"line-number"},"102"),a("br"),a("span",{class:"line-number"},"103"),a("br"),a("span",{class:"line-number"},"104"),a("br"),a("span",{class:"line-number"},"105"),a("br"),a("span",{class:"line-number"},"106"),a("br"),a("span",{class:"line-number"},"107"),a("br"),a("span",{class:"line-number"},"108"),a("br"),a("span",{class:"line-number"},"109"),a("br"),a("span",{class:"line-number"},"110"),a("br"),a("span",{class:"line-number"},"111"),a("br"),a("span",{class:"line-number"},"112"),a("br"),a("span",{class:"line-number"},"113"),a("br"),a("span",{class:"line-number"},"114"),a("br"),a("span",{class:"line-number"},"115"),a("br"),a("span",{class:"line-number"},"116"),a("br"),a("span",{class:"line-number"},"117"),a("br"),a("span",{class:"line-number"},"118"),a("br"),a("span",{class:"line-number"},"119"),a("br"),a("span",{class:"line-number"},"120"),a("br"),a("span",{class:"line-number"},"121"),a("br"),a("span",{class:"line-number"},"122"),a("br"),a("span",{class:"line-number"},"123"),a("br"),a("span",{class:"line-number"},"124"),a("br"),a("span",{class:"line-number"},"125"),a("br"),a("span",{class:"line-number"},"126"),a("br"),a("span",{class:"line-number"},"127"),a("br"),a("span",{class:"line-number"},"128"),a("br"),a("span",{class:"line-number"},"129"),a("br"),a("span",{class:"line-number"},"130"),a("br"),a("span",{class:"line-number"},"131"),a("br"),a("span",{class:"line-number"},"132"),a("br"),a("span",{class:"line-number"},"133"),a("br"),a("span",{class:"line-number"},"134"),a("br"),a("span",{class:"line-number"},"135"),a("br"),a("span",{class:"line-number"},"136"),a("br"),a("span",{class:"line-number"},"137"),a("br"),a("span",{class:"line-number"},"138"),a("br"),a("span",{class:"line-number"},"139"),a("br"),a("span",{class:"line-number"},"140"),a("br"),a("span",{class:"line-number"},"141"),a("br"),a("span",{class:"line-number"},"142"),a("br")])],-1),Aa=s('<h2 id="ui测试利器nightmare"><a class="header-anchor" href="#ui测试利器nightmare" aria-hidden="true">#</a> UI测试利器Nightmare</h2><p>Nightmare是<a href="https://segment.com/" target="_blank" rel="noopener noreferrer">Segment</a>的高级浏览器自动化库。</p><p>目标是公开一些模仿用户操作（例如<code>goto</code>，<code>type</code>和<code>click</code>）的简单方法，使用对每个脚本块感觉同步的API，而不是深层嵌套的回调。它最初设计用于在没有API的站点之间自动执行任务，但最常用于UI测试和爬网。</p><p>它使用<a href="http://electron.atom.io/" target="_blank" rel="noopener noreferrer">Electron</a>，它与<a href="http://phantomjs.org/" target="_blank" rel="noopener noreferrer">PhantomJS</a>类似，但大约<a href="https://github.com/segmentio/nightmare/issues/484#issuecomment-184519591" target="_blank" rel="noopener noreferrer">快两倍</a>，更现代。</p><h3 id="安装与起步"><a class="header-anchor" href="#安装与起步" aria-hidden="true">#</a> 安装与起步</h3><ol><li><p>安装<code>nightmare</code></p></li><li></li></ol>',6),$a=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,"# 初始化项目\nnpm init -y\nnpm install --save-dev nightmare\nnpm install --save-dev mocha\n"),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743722-84205"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 初始化项目\nnpm init -y\nnpm install --save-dev nightmare\nnpm install --save-dev mocha\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743722-84205","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br")])],-1),Ba=a("ol",{start:"2"},[a("li",null,"淘宝源加速")],-1),Da=a("div",{class:"language-sh line-numbers-mode"},[a("pre",null,[a("code",null,'# 使用淘宝源加速electron的安装\nexport ELECTRON_MIRROR="https://npm.taobao.org/mirrors/electron/"\n'),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743722-34279"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'# 使用淘宝源加速electron的安装\nexport ELECTRON_MIRROR="https://npm.taobao.org/mirrors/electron/"\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743722-34279","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br")])],-1),Pa=a("ol",{start:"3"},[a("li",null,"起步测试：")],-1),Sa=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" Nightmare "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'nightmare'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" assert "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'assert'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Load a Page'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token comment"},"// Recommended: 5s locally, 10s to remote server, 30s from airplane ¯\\_(ツ)_/¯"),e("\n  "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"timeout"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'30s'"),a("span",{class:"token punctuation"},")"),e("\n\n  "),a("span",{class:"token keyword"},"let"),e(" nightmare "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"null"),e("\n  "),a("span",{class:"token function"},"beforeEach"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    nightmare "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"Nightmare"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n  "),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'/ (Home Page)'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'should load without error'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"done"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token comment"},"// your actual testing urls will likely be `http://localhost:port/path`"),e("\n      nightmare"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"goto"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'https://www.baidu.com'"),a("span",{class:"token punctuation"},")"),e("\n        "),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n        "),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"then"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"result"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n          "),a("span",{class:"token function"},"done"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n        "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n        "),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"catch"),a("span",{class:"token punctuation"},"("),e("done"),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743723-49017"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const Nightmare = require('nightmare')\nconst assert = require('assert')\n\ndescribe('Load a Page', function () {\n  // Recommended: 5s locally, 10s to remote server, 30s from airplane ¯\\_(ツ)_/¯\n  this.timeout('30s')\n\n  let nightmare = null\n  beforeEach(() => {\n    nightmare = new Nightmare()\n  })\n\n  describe('/ (Home Page)', () => {\n    it('should load without error', done => {\n      // your actual testing urls will likely be `http://localhost:port/path`\n      nightmare.goto('https://www.baidu.com')\n        .end()\n        .then(function (result) {\n          done()\n        })\n        .catch(done)\n    })\n  })\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743723-49017","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br")])],-1),Fa=a("h3",{id:"nightmare配合mocha测试"},[a("a",{class:"header-anchor",href:"#nightmare配合mocha测试","aria-hidden":"true"},"#"),e(" nightmare配合mocha测试")],-1),Ra=a("p",null,"nightmare可以进行网页的抓取，配合mocha进行页面的测试：",-1),qa=a("p",null,[e("安装"),a("code",null,"mocha")],-1),Ma=a("div",{class:"language-bash line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"npm"),e(),a("span",{class:"token function"},"install"),e(" --save-dev mocha\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743725-79901"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm install --save-dev mocha\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743725-79901","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Ha=a("blockquote",null,[a("p",null,[e("还可以安装一些断言库，如："),a("code",null,"chai")])],-1),Oa=a("p",null,"新建测试：",-1),Ja=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token keyword"},"const"),e(" Nightmare "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'nightmare'"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token keyword"},"const"),e(" assert "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token function"},"require"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'assert'"),a("span",{class:"token punctuation"},")"),e("\n\n"),a("span",{class:"token function"},"describe"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'Search nightmare'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token keyword"},"this"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"timeout"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'30s'"),a("span",{class:"token punctuation"},")"),e("\n\n  "),a("span",{class:"token keyword"},"let"),e(" nightmare "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"null"),e("\n  \n  "),a("span",{class:"token function"},"beforeEach"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    nightmare "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token keyword"},"new"),e(),a("span",{class:"token class-name"},"Nightmare"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n\n  "),a("span",{class:"token function"},"it"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'should load with result nightmare'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token parameter"},"done"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n    "),a("span",{class:"token keyword"},"const"),e(" selector "),a("span",{class:"token operator"},"="),e(),a("span",{class:"token string"},"'em'"),e("\n    nightmare"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"goto"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'https://www.baidu.com'"),a("span",{class:"token punctuation"},")"),e("\n      "),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"type"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'#kw'"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'nightmare'"),a("span",{class:"token punctuation"},")"),e("\n      "),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"click"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'#su'"),a("span",{class:"token punctuation"},")"),e("\n      "),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"wait"),a("span",{class:"token punctuation"},"("),a("span",{class:"token string"},"'em'"),a("span",{class:"token punctuation"},")"),e("\n      "),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"evaluate"),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"selector"),e(),a("span",{class:"token operator"},"=>"),e(),a("span",{class:"token punctuation"},"{"),e("\n      "),a("span",{class:"token comment"},"// now we're executing inside the browser scope."),e("\n      "),a("span",{class:"token keyword"},"return"),e(" document"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"querySelector"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},")"),a("span",{class:"token punctuation"},"."),e("innerText\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e(" selector"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token comment"},"// <-- that's how you pass parameters from Node scope to browser scope"),e("\n      "),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"end"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n      "),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"then"),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"function"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token parameter"},"result"),a("span",{class:"token punctuation"},")"),e(),a("span",{class:"token punctuation"},"{"),e("\n      console"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"log"),a("span",{class:"token punctuation"},"("),e("result"),a("span",{class:"token punctuation"},")"),e("\n      assert"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"equal"),a("span",{class:"token punctuation"},"("),e("result"),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},"'nightmare'"),a("span",{class:"token punctuation"},")"),e("\n      "),a("span",{class:"token function"},"done"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n    "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n      "),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"catch"),a("span",{class:"token punctuation"},"("),e("done"),a("span",{class:"token punctuation"},")"),e("\n  "),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743725-57050"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const Nightmare = require('nightmare')\nconst assert = require('assert')\n\ndescribe('Search nightmare', () => {\n  this.timeout('30s')\n\n  let nightmare = null\n  \n  beforeEach(() => {\n    nightmare = new Nightmare()\n  })\n\n  it('should load with result nightmare', done => {\n    const selector = 'em'\n    nightmare.goto('https://www.baidu.com')\n      .type('#kw', 'nightmare')\n      .click('#su')\n      .wait('em')\n      .evaluate(selector => {\n      // now we're executing inside the browser scope.\n      return document.querySelector(selector).innerText\n    }, selector) // <-- that's how you pass parameters from Node scope to browser scope\n      .end()\n      .then(function (result) {\n      console.log(result)\n      assert.equal(result, 'nightmare')\n      done()\n    })\n      .catch(done)\n  })\n})\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743725-57050","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br")])],-1),Va=a("p",null,[e("将mocha作为测试脚本添加到您的 "),a("code",null,"package.json"),e("：")],-1),Ka=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token property"},'"scripts"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n  "),a("span",{class:"token property"},'"test"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"mocha"'),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743726-56314"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'"scripts": {\n  "test": "mocha"\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743726-56314","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br")])],-1),Ga=a("h3",{id:"api介绍"},[a("a",{class:"header-anchor",href:"#api介绍","aria-hidden":"true"},"#"),e(" API介绍")],-1),Wa=a("h4",{id:"nightmare的配置项"},[a("a",{class:"header-anchor",href:"#nightmare的配置项","aria-hidden":"true"},"#"),e(" nightmare的配置项")],-1),La=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token function"},"waitTimeout"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"default"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"30"),e("s"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token function"},"gotoTimeout"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"default"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"30"),e("s"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token function"},"loadTimeout"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"default"),a("span",{class:"token operator"},":"),e(" infinite"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token function"},"executionTimeout"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"default"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"30"),e("s"),a("span",{class:"token punctuation"},")"),e("\npaths\nswitches\nelectronPath\ndock\nopenDevTools\n"),a("span",{class:"token function"},"typeInterval"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"default"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"100"),e("ms"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token function"},"pollInterval"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"default"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"250"),e("ms"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token function"},"maxAuthRetries"),e(),a("span",{class:"token punctuation"},"("),a("span",{class:"token keyword"},"default"),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"3"),a("span",{class:"token punctuation"},")"),e("\ncertificateSubjectName\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"engineVersions"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"useragent"),a("span",{class:"token punctuation"},"("),e("useragent"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"authentication"),a("span",{class:"token punctuation"},"("),e("user"),a("span",{class:"token punctuation"},","),e(" password"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"authentication"),a("span",{class:"token punctuation"},"("),e("user"),a("span",{class:"token punctuation"},","),e(" password"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"halt"),a("span",{class:"token punctuation"},"("),e("error"),a("span",{class:"token punctuation"},","),e(" done"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743726-58901"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"waitTimeout (default: 30s)\ngotoTimeout (default: 30s)\nloadTimeout (default: infinite)\nexecutionTimeout (default: 30s)\npaths\nswitches\nelectronPath\ndock\nopenDevTools\ntypeInterval (default: 100ms)\npollInterval (default: 250ms)\nmaxAuthRetries (default: 3)\ncertificateSubjectName\n.engineVersions()\n.useragent(useragent)\n.authentication(user, password)\n.authentication(user, password)\n.halt(error, done)\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743726-58901","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br")])],-1),Ua=a("p",null,[e("配置链接："),a("a",{href:"https://github.com/segmentio/nightmare#nightmareoptions",target:"_blank",rel:"noopener noreferrer"},"https://github.com/segmentio/nightmare#nightmareoptions")],-1),za=a("h4",{id:"页面交互相关"},[a("a",{class:"header-anchor",href:"#页面交互相关","aria-hidden":"true"},"#"),e(" 页面交互相关")],-1),Xa=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"back"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"forward"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"refresh"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"click"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"mousedown"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"mouseup"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"mouseover"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"mouseout"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"type"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},"["),a("span",{class:"token punctuation"},","),e(" text"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"insert"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},"["),a("span",{class:"token punctuation"},","),e(" text"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"check"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"uncheck"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"select"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},","),e(" option"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"scrollTo"),a("span",{class:"token punctuation"},"("),e("top"),a("span",{class:"token punctuation"},","),e(" left"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"viewport"),a("span",{class:"token punctuation"},"("),e("width"),a("span",{class:"token punctuation"},","),e(" height"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"inject"),a("span",{class:"token punctuation"},"("),e("type"),a("span",{class:"token punctuation"},","),e(" file"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"evaluate"),a("span",{class:"token punctuation"},"("),e("fn"),a("span",{class:"token punctuation"},"["),a("span",{class:"token punctuation"},","),e(" arg1"),a("span",{class:"token punctuation"},","),e(" arg2"),a("span",{class:"token punctuation"},","),a("span",{class:"token operator"},"..."),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"wait"),a("span",{class:"token punctuation"},"("),e("ms"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"wait"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"wait"),a("span",{class:"token punctuation"},"("),e("fn"),a("span",{class:"token punctuation"},"["),a("span",{class:"token punctuation"},","),e(" arg1"),a("span",{class:"token punctuation"},","),e(" arg2"),a("span",{class:"token punctuation"},","),a("span",{class:"token operator"},"..."),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"header"),a("span",{class:"token punctuation"},"("),e("header"),a("span",{class:"token punctuation"},","),e(" value"),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743726-40404"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":".back()\n.forward()\n.refresh()\n.click(selector)\n.mousedown(selector)\n.mouseup(selector)\n.mouseover(selector)\n.mouseout(selector)\n.type(selector[, text])\n.insert(selector[, text])\n.check(selector)\n.uncheck(selector)\n.select(selector, option)\n.scrollTo(top, left)\n.viewport(width, height)\n.inject(type, file)\n.evaluate(fn[, arg1, arg2,...])\n.wait(ms)\n.wait(selector)\n.wait(fn[, arg1, arg2,...])\n.header(header, value)\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743726-40404","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br")])],-1),Ya=a("p",null,[a("a",{href:"https://github.com/segmentio/nightmare#interact-with-the-page",target:"_blank",rel:"noopener noreferrer"},"配置参考链接")],-1),Qa=a("h4",{id:"页面提取"},[a("a",{class:"header-anchor",href:"#页面提取","aria-hidden":"true"},"#"),e(" 页面提取")],-1),Za=a("div",{class:"language-js line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"exists"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"visible"),a("span",{class:"token punctuation"},"("),e("selector"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"on"),a("span",{class:"token punctuation"},"("),e("event"),a("span",{class:"token punctuation"},","),e(" callback"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"once"),a("span",{class:"token punctuation"},"("),e("event"),a("span",{class:"token punctuation"},","),e(" callback"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"removeListener"),a("span",{class:"token punctuation"},"("),e("event"),a("span",{class:"token punctuation"},","),e(" callback"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"screenshot"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},"["),e("path"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},"["),a("span",{class:"token punctuation"},","),e(" clip"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"html"),a("span",{class:"token punctuation"},"("),e("path"),a("span",{class:"token punctuation"},","),e(" saveType"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"pdf"),a("span",{class:"token punctuation"},"("),e("path"),a("span",{class:"token punctuation"},","),e(" options"),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"title"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"url"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n"),a("span",{class:"token punctuation"},"."),a("span",{class:"token function"},"path"),a("span",{class:"token punctuation"},"("),a("span",{class:"token punctuation"},")"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743727-98979"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":".exists(selector)\n.visible(selector)\n.on(event, callback)\n.once(event, callback)\n.removeListener(event, callback)\n.screenshot([path][, clip])\n.html(path, saveType)\n.pdf(path, options)\n.title()\n.url()\n.path()\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743727-98979","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br")])],-1),ne=s('<p><a href="https://github.com/segmentio/nightmare#extract-from-the-page" target="_blank" rel="noopener noreferrer">配置参考链接</a></p><h2 id="补充学习"><a class="header-anchor" href="#补充学习" aria-hidden="true">#</a> 补充学习</h2><h3 id="补充资料"><a class="header-anchor" href="#补充资料" aria-hidden="true">#</a> 补充资料</h3><h4 id="软件测试的分类"><a class="header-anchor" href="#软件测试的分类" aria-hidden="true">#</a> 软件测试的分类</h4><p><strong>第一部分：软件测试的分类</strong></p><ul><li><p>按测试执行阶段划分</p><p>单元测试、集成测试、系统测试、验收测试（正式验收测试、Alpha测试、Beta测试）</p></li><li><p>按测试技术划分</p><p>白盒测试、黑盒测试、灰盒测试</p></li><li><p>被测试对象是否运行划分</p><p>动态测试、静态测试（文档检查、代码走查、界面检查）</p></li><li><p>按不同的测试手段划分</p><p>手工测试、自动化测试</p></li><li><p>按测试包含的内容划分</p><p>功能测试、界面测试、安全测试、兼容性测试、易用性测试、性能测试、压力测试、负载测试、恢复测试</p></li><li><p>其他测试</p><p>冒烟测试、回归测试、探索性测试/自由测试（测试思维）</p></li></ul><p><strong>第二部分：接下来对软件测试分类进行一个说明</strong></p><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105733.jpg" alt="img"><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105733.jpg" alt="img"></p><p><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105734.png" alt="img"><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200310105735.jpg" alt="img"></p><p><strong>第三部分：测试工具</strong></p><p>SVN，Git——&gt;版本控制管理工具</p><p>禅道——&gt;Bug管理工具</p><p>Fiddler——&gt;抓包，定位问题你</p><p>postman，jmeter，soapui——&gt;接口测试</p><p>Loadrunner，Jmeter——&gt;性能，压力测试</p><h4 id="2019年javascript测试概览"><a class="header-anchor" href="#2019年javascript测试概览" aria-hidden="true">#</a> 2019年Javascript测试概览</h4><p><a href="https://medium.com/welldone-software/an-overview-of-javascript-testing-in-2019-264e19514d0a" target="_blank" rel="noopener noreferrer">https://medium.com/welldone-software/an-overview-of-javascript-testing-in-2019-264e19514d0a</a></p><p>这是一篇非常好的国外的博文，同时也是2018年Javascript测试概览的作者。这里有2018年的译文：</p><p><a href="https://zhuanlan.zhihu.com/p/32702421" target="_blank" rel="noopener noreferrer">展望 2018 年 JavaScript Testing</a></p><p>在文中很好介绍到了测试类型，并举了大量的例子，非常全面。</p><h4 id="什么是tdd"><a class="header-anchor" href="#什么是tdd" aria-hidden="true">#</a> 什么是TDD？</h4><p><a href="https://juejin.im/post/5c3e73876fb9a049d37f5db1" target="_blank" rel="noopener noreferrer">测试驱动开发（TDD）总结——原理篇</a></p><p>TDD （Test Driven Development） 在不同的圈子、不同的角色的认知中可能会有不同的理解，有人可能会理解成 ATDD（Acceptance Test Driven Development），也有人可能会理解成 UTDD（Unit Test Driven Development），为了避免产生歧义，<strong>文章涉及到 TDD 专指 UTDD（Unit Test Driven Development），即 「单元测试驱动开发」</strong>。</p><p>TDD 的目标</p><blockquote><p>Kent Beck 在他的著作《Test-Driven Development》一书中提到：“<strong>代码简洁可用</strong>这句言简意赅的话，正是 TDD 所追求的目标”。</p></blockquote><p><strong>对于如何保证“代码简洁可用”可以使用分而治之的方法，先达到“可用”目标，再追求“简洁”目标。</strong></p><p><strong>可用：</strong> 保证代码通过自动化测试。</p><p><strong>代码简洁：</strong> 在不同阶段人们对简洁的理解程度也不一样，不过遵循的原则差不多，例如 OOD 的 SOLID 原则，Kent Beck 的 Simple Design 原则等。</p><p>虽然有很多因素妨碍我们得到整洁的代码，甚至可用的代码，无需征求太多意见，只需要采用 TDD 的开发方式来驱动出简洁可用的代码。</p><h4 id="karma的前世今生"><a class="header-anchor" href="#karma的前世今生" aria-hidden="true">#</a> Karma的前世今生</h4><p>2016年的文章，由淘宝前端团队书写：<a href="http://taobaofed.org/blog/2016/01/08/karma-origin/" target="_blank" rel="noopener noreferrer">http://taobaofed.org/blog/2016/01/08/karma-origin/</a></p><p>通篇介绍了karma的工作原理及实现原理，非常有价值的文章。</p><h3 id="ava框架的配置文件"><a class="header-anchor" href="#ava框架的配置文件" aria-hidden="true">#</a> ava框架的配置文件</h3>',33),te=a("div",{class:"language-json line-numbers-mode"},[a("pre",null,[a("code",null,[a("span",{class:"token punctuation"},"{"),e("\n\t"),a("span",{class:"token property"},'"ava"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n\t\t"),a("span",{class:"token property"},'"files"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n\t\t\t"),a("span",{class:"token string"},'"test/**/*"'),a("span",{class:"token punctuation"},","),e("\n\t\t\t"),a("span",{class:"token string"},'"!test/exclude-files-in-this-directory"'),a("span",{class:"token punctuation"},","),e("\n\t\t\t"),a("span",{class:"token string"},'"!**/exclude-files-with-this-name.*"'),e("\n\t\t"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"helpers"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n\t\t\t"),a("span",{class:"token string"},'"**/helpers/**/*"'),e("\n\t\t"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"sources"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n\t\t\t"),a("span",{class:"token string"},'"src/**/*"'),e("\n\t\t"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"match"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n\t\t\t"),a("span",{class:"token string"},'"*oo"'),a("span",{class:"token punctuation"},","),e("\n\t\t\t"),a("span",{class:"token string"},'"!foo"'),e("\n\t\t"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"cache"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"concurrency"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token number"},"5"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"failFast"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"failWithoutAssertions"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"false"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"environmentVariables"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n\t\t\t"),a("span",{class:"token property"},'"MY_ENVIRONMENT_VARIABLE"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token string"},'"some value"'),e("\n\t\t"),a("span",{class:"token punctuation"},"}"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"tap"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"verbose"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"true"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"compileEnhancements"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"false"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"require"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),e("\n\t\t\t"),a("span",{class:"token string"},'"@babel/register"'),e("\n\t\t"),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n\t\t"),a("span",{class:"token property"},'"babel"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n\t\t\t"),a("span",{class:"token property"},'"extensions"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"["),a("span",{class:"token string"},'"js"'),a("span",{class:"token punctuation"},","),e(),a("span",{class:"token string"},'"jsx"'),a("span",{class:"token punctuation"},"]"),a("span",{class:"token punctuation"},","),e("\n\t\t\t"),a("span",{class:"token property"},'"testOptions"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token punctuation"},"{"),e("\n\t\t\t\t"),a("span",{class:"token property"},'"babelrc"'),a("span",{class:"token operator"},":"),e(),a("span",{class:"token boolean"},"false"),e("\n\t\t\t"),a("span",{class:"token punctuation"},"}"),e("\n\t\t"),a("span",{class:"token punctuation"},"}"),e("\n\t"),a("span",{class:"token punctuation"},"}"),e("\n"),a("span",{class:"token punctuation"},"}"),e("\n")]),a("div",{class:"m-mdic-copy-wrapper"},[a("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558743727-34905"},"复制成功"),a("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n\t"ava": {\n\t\t"files": [\n\t\t\t"test/**/*",\n\t\t\t"!test/exclude-files-in-this-directory",\n\t\t\t"!**/exclude-files-with-this-name.*"\n\t\t],\n\t\t"helpers": [\n\t\t\t"**/helpers/**/*"\n\t\t],\n\t\t"sources": [\n\t\t\t"src/**/*"\n\t\t],\n\t\t"match": [\n\t\t\t"*oo",\n\t\t\t"!foo"\n\t\t],\n\t\t"cache": true,\n\t\t"concurrency": 5,\n\t\t"failFast": true,\n\t\t"failWithoutAssertions": false,\n\t\t"environmentVariables": {\n\t\t\t"MY_ENVIRONMENT_VARIABLE": "some value"\n\t\t},\n\t\t"tap": true,\n\t\t"verbose": true,\n\t\t"compileEnhancements": false,\n\t\t"require": [\n\t\t\t"@babel/register"\n\t\t],\n\t\t"babel": {\n\t\t\t"extensions": ["js", "jsx"],\n\t\t\t"testOptions": {\n\t\t\t\t"babelrc": false\n\t\t\t}\n\t\t}\n\t}\n}\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558743727-34905","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),a("div",{class:"line-numbers-wrapper"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br"),a("span",{class:"line-number"},"34"),a("br"),a("span",{class:"line-number"},"35"),a("br"),a("span",{class:"line-number"},"36"),a("br"),a("span",{class:"line-number"},"37"),a("br"),a("span",{class:"line-number"},"38"),a("br")])],-1),se=s('<ul><li><code>files</code>：用于选择测试文件的glob模式数组。带有下划线前缀的文件将被忽略。默认情况下，仅选择具有<code>js</code>扩展名的文件，即使该模式与其他文件匹配。指定<code>extensions</code>并<code>babel.extensions</code>允许其他文件扩展名</li><li><code>helpers</code>：用于选择帮助文件的glob模式数组。这里匹配的文件永远不会被视为测试。默认情况下，仅选择具有<code>js</code>扩展名的文件，即使该模式与其他文件匹配。指定<code>extensions</code>并<code>babel.extensions</code>允许其他文件扩展名</li><li><code>sources</code>：一组glob模式，用于匹配文件，这些文件在更改时会导致重新运行测试（在监视模式下）。有关详细信息，<a href="https://github.com/avajs/ava/blob/master/docs/recipes/watch-mode.md#source-files-and-test-files" target="_blank" rel="noopener noreferrer">请参阅</a></li><li><code>match</code>：通常在<code>package.json</code>配置中没用，但等同于在CLI上指定<code>--match</code></li><li><code>cache</code>：缓存编译的测试和帮助文件<code>node_modules/.cache/ava</code>。如果<code>false</code>，文件缓存在临时目录中</li><li><code>failFast</code>：一旦测试失败，停止运行进一步的测试</li><li><code>failWithoutAssertions</code>：如果设置成<code>false</code>，那么如果没有运行断言，则测试失败</li><li><code>environmentVariables</code>：指定要供测试使用的环境变量。此处定义的环境变量会覆盖其中的环境变量<code>process.<wbr>env</code></li><li><code>tap</code>：设置成 <code>true</code>，启用TAP报告</li><li><code>verbose</code>：设置成 <code>true</code>，启用详细输出</li><li><code>snapshotDir</code>：指定用于存储快照文件的固定位置。如果快照最终位于错误的位置，请使用此选项</li><li><code>compileEnhancements</code>：设置成 <code>false</code>，禁用了 <a href="https://github.com/avajs/ava/blob/master/docs/03-assertions.md#enhanced-assertion-messages" target="_blank" rel="noopener noreferrer"><code>power-assert</code></a>，否则有助于提供更具描述性的错误消息， 并检测<code>t.throws()</code>断言的不当使用</li><li><code>extensions</code>：未使用AVA的Babel预设进行预编译的测试文件的扩展名。请注意，文件仍然会被编译为启用<code>power-assert</code>和其他功能，因此您可能还需要设置<code>compileEnhancements</code>为<code>false</code>文件是否为有效的JavaScript。设置此<code>&quot;js&quot;</code>值会覆盖默认值，因此请确保在列表中包含该扩展名，只要它不包含在内<code>babel.extensions</code></li><li><code>require</code>：在运行测试之前需要额外的模块。工作进程中需要模块</li><li><code>babel</code>：测试文件特定的Babel选项。有关详细信息，请参阅<a href="https://github.com/avajs/ava/blob/master/docs/recipes/babel.md#configuring-babel" target="_blank" rel="noopener noreferrer">Babel配置</a></li><li><code>babel.extensions</code>：将使用AVA的Babel预设进行预编译的测试文件的扩展。设置此选项会覆盖默认<code>&quot;js&quot;</code>值，因此请确保在列表中包含该扩展名。</li><li><code>timeout</code>：AVA中的超时行为与其他测试框架中的行为不同。AVA在每次测试后重置计时器，如果在指定的超时内没有收到新的测试结果，则强制测试退出。这可用于处理停滞的测试。请参阅我们的<a href="https://github.com/avajs/ava/blob/master/docs/07-test-timeouts.md" target="_blank" rel="noopener noreferrer">超时文档</a>以获取更多选</li></ul><p>请注意，在CLI上提供文件会覆盖该<code>files</code>选项。</p><h2 id="参考资料"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2><ul><li><a href="https://zhuanlan.zhihu.com/p/47009664" target="_blank" rel="noopener noreferrer">使用Jest测试JavaScript(Mock篇)</a></li></ul>',4);c.render=function(s,a,e,o,c,ae){return n(),t("div",null,[l,i,p,u,r,d,m,b,k,y,h,f,g,v,C,w,j,x,_,T,N,E,I,A,$,B,D,P,S,F,R,q,M,H,O,J,V,K,G,W,L,U,z,X,Y,Q,Z,nn,tn,sn,an,en,on,cn,ln,pn,un,rn,dn,mn,bn,kn,yn,hn,fn,gn,vn,Cn,wn,jn,xn,_n,Tn,Nn,En,In,An,$n,Bn,Dn,Pn,Sn,Fn,Rn,qn,Mn,Hn,On,Jn,Vn,Kn,Gn,Wn,Ln,Un,zn,Xn,Yn,Qn,Zn,nt,tt,st,at,et,ot,ct,lt,it,pt,ut,rt,dt,mt,bt,kt,yt,ht,ft,gt,vt,Ct,wt,jt,xt,_t,Tt,Nt,Et,It,At,$t,Bt,Dt,Pt,St,Ft,Rt,qt,Mt,Ht,Ot,Jt,Vt,Kt,Gt,Wt,Lt,Ut,zt,Xt,Yt,Qt,Zt,ns,ts,ss,as,es,os,cs,ls,is,ps,us,rs,ds,ms,bs,ks,ys,hs,fs,gs,vs,Cs,ws,js,xs,_s,Ts,Ns,Es,Is,As,$s,Bs,Ds,Ps,Ss,Fs,Rs,qs,Ms,Hs,Os,Js,Vs,Ks,Gs,Ws,Ls,Us,zs,Xs,Ys,Qs,Zs,na,ta,sa,aa,ea,oa,ca,la,ia,pa,ua,ra,da,ma,ba,ka,ya,ha,fa,ga,va,Ca,wa,ja,xa,_a,Ta,Na,Ea,Ia,Aa,$a,Ba,Da,Pa,Sa,Fa,Ra,qa,Ma,Ha,Oa,Ja,Va,Ka,Ga,Wa,La,Ua,za,Xa,Ya,Qa,Za,ne,te,se])};export default c;export{o as __pageData};
