import{o as n,c as s,f as a,a as t,x as e}from"./app.b304d650.js";const c='{"title":"限制字符的长度","description":"","frontmatter":{"title":"限制字符的长度","tag":["vue"],"cover":"https://gitee.com/artiely/Figure-bed/raw/master/image/20200620152351.png","base64":"68a863","date":"2020-6-20","author":"artiely"},"headers":[{"level":2,"title":"需求","slug":"需求"},{"level":2,"title":"开始","slug":"开始"},{"level":2,"title":"完善一下","slug":"完善一下"},{"level":2,"title":"思考","slug":"思考"}],"relativePath":"post/2020/2020-6-20-limit-chars.md","lastUpdated":1629110852177}',o={},p=a('<h1 id="限制字符的长度"><a class="header-anchor" href="#限制字符的长度" aria-hidden="true">#</a> 限制字符的长度</h1><h2 id="需求"><a class="header-anchor" href="#需求" aria-hidden="true">#</a> 需求</h2><p>一个字母和数字算作一个字符，一个汉字算作两个字符<br> 如：一个输入框可输入 30 个字符,同时展示剩余可输入字符<br> 用例 1：可输入 30 个字母或数字<br> 用例 2：只可输入 15 个汉字</p><h2 id="开始"><a class="header-anchor" href="#开始" aria-hidden="true">#</a> 开始</h2>',4),l=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token keyword"},"const"),e(),t("span",{class:"token function-variable function"},"charCodeDir"),e(),t("span",{class:"token operator"},"="),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"c"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"=>"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token punctuation"},"("),e("c "),t("span",{class:"token operator"},">="),e(),t("span",{class:"token number"},"0x0001"),e(),t("span",{class:"token operator"},"&&"),e(" c "),t("span",{class:"token operator"},"<="),e(),t("span",{class:"token number"},"0x007e"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"||"),e(),t("span",{class:"token punctuation"},"("),e("c "),t("span",{class:"token operator"},"<="),e(),t("span",{class:"token number"},"0xff9f"),e(),t("span",{class:"token operator"},"&&"),e(" c "),t("span",{class:"token operator"},">="),e(),t("span",{class:"token number"},"0xff60"),t("span",{class:"token punctuation"},")"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token comment"},"// 计算当前输入的字节"),e("\n"),t("span",{class:"token keyword"},"export"),e(),t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"strlen"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},"str"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"var"),e(" len "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),e("\n  "),t("span",{class:"token keyword"},"for"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"var"),e(" i "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},";"),e(" i "),t("span",{class:"token operator"},"<"),e(" str"),t("span",{class:"token punctuation"},"."),e("length"),t("span",{class:"token punctuation"},";"),e(" i"),t("span",{class:"token operator"},"++"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"var"),e(" c "),t("span",{class:"token operator"},"="),e(" str"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"charCodeAt"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token punctuation"},")"),e("\n    "),t("span",{class:"token comment"},"// 单字节加1"),e("\n    "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"charCodeDir"),t("span",{class:"token punctuation"},"("),e("c"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      len"),t("span",{class:"token operator"},"++"),e("\n    "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"else"),e(),t("span",{class:"token punctuation"},"{"),e("\n      len "),t("span",{class:"token operator"},"+="),e(),t("span",{class:"token number"},"2"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n  "),t("span",{class:"token punctuation"},"}"),e("\n  "),t("span",{class:"token keyword"},"return"),e(" len\n"),t("span",{class:"token punctuation"},"}"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558764800-42819"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"const charCodeDir = (c) => {\n  return (c >= 0x0001 && c <= 0x007e) || (c <= 0xff9f && c >= 0xff60)\n}\n// 计算当前输入的字节\nexport function strlen(str) {\n  var len = 0\n  for (var i = 0; i < str.length; i++) {\n    var c = str.charCodeAt(i)\n    // 单字节加1\n    if (charCodeDir(c)) {\n      len++\n    } else {\n      len += 2\n    }\n  }\n  return len\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558764800-42819","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br")])],-1),u=t("div",{class:"language-js line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token comment"},"// 计算还可输入的字节"),e("\n"),t("span",{class:"token keyword"},"export"),e(),t("span",{class:"token keyword"},"function"),e(),t("span",{class:"token function"},"maxlen"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[e("str"),t("span",{class:"token punctuation"},","),e(" len "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"60")]),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token keyword"},"for"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"var"),e(" i "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},";"),e(" i "),t("span",{class:"token operator"},"<"),e(" str"),t("span",{class:"token punctuation"},"."),e("length"),t("span",{class:"token punctuation"},";"),e(" i"),t("span",{class:"token operator"},"++"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"var"),e(" c "),t("span",{class:"token operator"},"="),e(" str"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"charCodeAt"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token punctuation"},")"),e("\n    "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token function"},"charCodeDir"),t("span",{class:"token punctuation"},"("),e("c"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token comment"},"// ..."),e("\n    "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"else"),e(),t("span",{class:"token punctuation"},"{"),e("\n      len "),t("span",{class:"token operator"},"-="),e(),t("span",{class:"token number"},"1"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n  "),t("span",{class:"token punctuation"},"}"),e("\n  "),t("span",{class:"token keyword"},"return"),e(" len\n"),t("span",{class:"token punctuation"},"}"),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558764800-90463"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"// 计算还可输入的字节\nexport function maxlen(str, len = 60) {\n  for (var i = 0; i < str.length; i++) {\n    var c = str.charCodeAt(i)\n    if (charCodeDir(c)) {\n      // ...\n    } else {\n      len -= 1\n    }\n  }\n  return len\n}\n","data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558764800-90463","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br")])],-1),i=t("div",{class:"language-vue line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),e("template")]),t("span",{class:"token punctuation"},">")]),e("\n"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),e("input")]),e(),t("span",{class:"token attr-name"},":maxlength"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),e("maxLength"),t("span",{class:"token punctuation"},'"')]),e(),t("span",{class:"token attr-name"},"v-model"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),e("str"),t("span",{class:"token punctuation"},'"')]),e(),t("span",{class:"token punctuation"},">")]),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),e("input")]),t("span",{class:"token punctuation"},">")]),e(" 剩余{{textLen}}\n"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),e("template")]),t("span",{class:"token punctuation"},">")]),e("\n"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),e("script")]),t("span",{class:"token punctuation"},">")]),t("span",{class:"token script"},[t("span",{class:"token language-javascript"},[e("\n"),t("span",{class:"token keyword"},"import"),e(),t("span",{class:"token punctuation"},"{"),e(" strlen"),t("span",{class:"token punctuation"},","),e(" maxlen "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"from"),e(),t("span",{class:"token string"},"'@/common/utils'"),e("\n"),t("span",{class:"token keyword"},"export"),e(),t("span",{class:"token keyword"},"default"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token function"},"data"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token punctuation"},"{"),e("\n      str\n    "),t("span",{class:"token punctuation"},"}"),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  computed"),t("span",{class:"token operator"},":"),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token comment"},"// 输入字符的长度"),e("\n    "),t("span",{class:"token function"},"hasLen"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token function"},"strlen"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("str"),t("span",{class:"token punctuation"},")"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token comment"},"// 剩余字符的长度"),e("\n    "),t("span",{class:"token function"},"textLen"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token function"},"parseInt"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"30"),e(),t("span",{class:"token operator"},"-"),e(),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("hasLen"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"/"),e(),t("span",{class:"token number"},"2"),t("span",{class:"token punctuation"},")"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token function"},"maxLength"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token function"},"maxlen"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("str"),t("span",{class:"token punctuation"},")"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")])]),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),e("script")]),t("span",{class:"token punctuation"},">")]),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558764800-41255"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'<template>\n<input :maxlength="maxLength" v-model="str" ></input> 剩余{{textLen}}\n</template>\n<script>\nimport { strlen, maxlen } from \'@/common/utils\'\nexport default {\n  data(){\n    return {\n      str\n    }\n  },\n  computed:{\n    // 输入字符的长度\n    hasLen() {\n      return strlen(this.str)\n    },\n    // 剩余字符的长度\n    textLen() {\n      return parseInt((30 - this.hasLen) / 2)\n    },\n    maxLength() {\n      return maxlen(this.str)\n    },\n  }\n}\n<\/script>\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558764800-41255","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br")])],-1),r=t("p",null,[e("这样看起来是没问题了，手动输入也是没有什么问题，但是如果用户粘贴字符串进去就暴露问题了"),t("br"),e(" 用户可粘贴超过 30 个字符的内容")],-1),k=t("h2",{id:"完善一下"},[t("a",{class:"header-anchor",href:"#完善一下","aria-hidden":"true"},"#"),e(" 完善一下")],-1),m=t("div",{class:"language-vue line-numbers-mode"},[t("pre",null,[t("code",null,[t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),e("template")]),t("span",{class:"token punctuation"},">")]),e("\n"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),e("input")]),e(),t("span",{class:"token attr-name"},":maxlength"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),e("maxLength"),t("span",{class:"token punctuation"},'"')]),e(),t("span",{class:"token attr-name"},"v-model"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),e("str"),t("span",{class:"token punctuation"},'"')]),e(),t("span",{class:"token attr-name"},"@change"),t("span",{class:"token attr-value"},[t("span",{class:"token punctuation attr-equals"},"="),t("span",{class:"token punctuation"},'"'),e("change"),t("span",{class:"token punctuation"},'"')]),e(),t("span",{class:"token punctuation"},">")]),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),e("input")]),t("span",{class:"token punctuation"},">")]),e(" 剩余{{textLen}}\n"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),e("template")]),t("span",{class:"token punctuation"},">")]),e("\n"),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"<"),e("script")]),t("span",{class:"token punctuation"},">")]),t("span",{class:"token script"},[t("span",{class:"token language-javascript"},[e("\n"),t("span",{class:"token keyword"},"import"),e(),t("span",{class:"token punctuation"},"{"),e(" strlen"),t("span",{class:"token punctuation"},","),e(" maxlen "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"from"),e(),t("span",{class:"token string"},"'@/common/utils'"),e("\n"),t("span",{class:"token keyword"},"const"),e(),t("span",{class:"token constant"},"TEXT_CHARS_LENGTH"),e(),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"30"),e("\n"),t("span",{class:"token keyword"},"export"),e(),t("span",{class:"token keyword"},"default"),e(),t("span",{class:"token punctuation"},"{"),e("\n  "),t("span",{class:"token function"},"data"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token punctuation"},"{"),e("\n      str\n    "),t("span",{class:"token punctuation"},"}"),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  computed"),t("span",{class:"token operator"},":"),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token comment"},"// 输入字符的长度"),e("\n    "),t("span",{class:"token function"},"hasLen"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token function"},"strlen"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("str"),t("span",{class:"token punctuation"},")"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token comment"},"// 剩余字符的长度"),e("\n    "),t("span",{class:"token function"},"textLen"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token function"},"parseInt"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token constant"},"TEXT_CHARS_LENGTH"),e(),t("span",{class:"token operator"},"-"),e(),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("hasLen"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"/"),e(),t("span",{class:"token number"},"2"),t("span",{class:"token punctuation"},")"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n    "),t("span",{class:"token function"},"maxLength"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token function"},"maxlen"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("str"),t("span",{class:"token punctuation"},")"),e("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),e("\n  methods"),t("span",{class:"token operator"},":"),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token function"},"change"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"{"),e("\n      "),t("span",{class:"token keyword"},"let"),e(" len "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"strlen"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("str"),t("span",{class:"token punctuation"},")"),e("\n      "),t("span",{class:"token keyword"},"if"),t("span",{class:"token punctuation"},"("),e("len "),t("span",{class:"token operator"},">"),e(),t("span",{class:"token constant"},"TEXT_CHARS_LENGTH"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("str "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("str"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"substring"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("str "),t("span",{class:"token operator"},"-"),e(),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),e("\n        "),t("span",{class:"token keyword"},"let"),e(" len2 "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"strlen"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),e("form"),t("span",{class:"token punctuation"},"."),e("text"),t("span",{class:"token punctuation"},")"),e("\n        "),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),e("len2 "),t("span",{class:"token operator"},">"),e(),t("span",{class:"token constant"},"TEXT_CHARS_LENGTH"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n          "),t("span",{class:"token keyword"},"this"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"change"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),e("\n        "),t("span",{class:"token punctuation"},"}"),e("\n      "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n  "),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")])]),t("span",{class:"token tag"},[t("span",{class:"token tag"},[t("span",{class:"token punctuation"},"</"),e("script")]),t("span",{class:"token punctuation"},">")]),e("\n")]),t("div",{class:"m-mdic-copy-wrapper"},[t("div",{class:"u-mdic-copy-notify",id:"j-notify-1629558764801-79345"},"复制成功"),t("button",{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'<template>\n<input :maxlength="maxLength" v-model="str" @change="change" ></input> 剩余{{textLen}}\n</template>\n<script>\nimport { strlen, maxlen } from \'@/common/utils\'\nconst TEXT_CHARS_LENGTH = 30\nexport default {\n  data(){\n    return {\n      str\n    }\n  },\n  computed:{\n    // 输入字符的长度\n    hasLen() {\n      return strlen(this.str)\n    },\n    // 剩余字符的长度\n    textLen() {\n      return parseInt((TEXT_CHARS_LENGTH - this.hasLen) / 2)\n    },\n    maxLength() {\n      return maxlen(this.str)\n    },\n  },\n  methods:{\n    change(){\n      let len = strlen(this.str)\n      if(len > TEXT_CHARS_LENGTH){\n        this.str = this.str.substring(0, this.str - 1)\n        let len2 = strlen(this.form.text)\n        if (len2 > TEXT_CHARS_LENGTH) {\n          this.change()\n        }\n      }\n    }\n  }\n}\n<\/script>\n',"data-mdic-attach-content":"copyright | [artiely]","data-mdic-notify-id":"j-notify-1629558764801-79345","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"},"复制")])]),t("div",{class:"line-numbers-wrapper"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br"),t("span",{class:"line-number"},"32"),t("br"),t("span",{class:"line-number"},"33"),t("br"),t("span",{class:"line-number"},"34"),t("br"),t("span",{class:"line-number"},"35"),t("br"),t("span",{class:"line-number"},"36"),t("br"),t("span",{class:"line-number"},"37"),t("br"),t("span",{class:"line-number"},"38"),t("br"),t("span",{class:"line-number"},"39"),t("br")])],-1),d=t("h2",{id:"思考"},[t("a",{class:"header-anchor",href:"#思考","aria-hidden":"true"},"#"),e(" 思考")],-1),b=t("p",null,"如何将此逻辑作封装成指令，方便后期同样的需求直接使用",-1),y=t("p",null,"待续。。。",-1);o.render=function(a,t,e,c,o,h){return n(),s("div",null,[p,l,u,i,r,k,m,d,b,y])};export default o;export{c as __pageData};
